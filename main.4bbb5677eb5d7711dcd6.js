(self.webpackChunklocker=self.webpackChunklocker||[]).push([[179],{8255:t=>{function e(t){return Promise.resolve().then(()=>{var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}e.keys=()=>[],e.resolve=e,e.id=8255,t.exports=e},5366:(t,e,n)=>{"use strict";n.d(e,{deG:()=>Xe,tb:()=>eu,AFp:()=>Qa,ip1:()=>Ka,CZH:()=>Ya,hGG:()=>Ku,z2F:()=>Mu,sBO:()=>Ks,Sil:()=>du,_Vd:()=>vs,EJc:()=>iu,SBq:()=>Cs,qLn:()=>fr,vpe:()=>Ra,gxx:()=>Ki,tBr:()=>_n,XFs:()=>A,OlP:()=>Je,zs3:()=>co,ZZ4:()=>Vs,aQg:()=>Zs,soG:()=>ru,YKP:()=>ia,v3s:()=>ju,h0i:()=>ra,PXZ:()=>Nu,R0b:()=>gu,FiY:()=>bn,Lbi:()=>tu,g9A:()=>Xa,Qsj:()=>Es,FYo:()=>Ss,JOm:()=>yr,Tiy:()=>Is,q3G:()=>ar,tp0:()=>wn,EAV:()=>Zu,Rgc:()=>Xs,dDg:()=>Cu,DyG:()=>tn,q4F:()=>As,GfV:()=>ks,s_b:()=>sa,ifc:()=>L,eFA:()=>Du,G48:()=>Pu,Gpc:()=>p,X6Q:()=>Ou,_c5:()=>Hu,VLi:()=>Eu,c2e:()=>nu,zSh:()=>Qi,wAp:()=>is,vHH:()=>m,EiD:()=>or,mCW:()=>Bn,qzn:()=>Pn,JVY:()=>Nn,pB0:()=>Un,eBb:()=>Ln,L6k:()=>Dn,LAX:()=>Fn,cg1:()=>es,Tjo:()=>zu,kL8:()=>ns,yhl:()=>Rn,dqk:()=>j,sIi:()=>bo,CqO:()=>Fo,QGY:()=>Do,F4k:()=>Lo,RDi:()=>St,AaK:()=>l,z3N:()=>On,qOj:()=>ho,TTD:()=>vt,_Bn:()=>gs,xp6:()=>ti,uIk:()=>So,ekj:()=>Zo,Suo:()=>za,Xpm:()=>$,lG2:()=>it,Yz7:()=>b,cJS:()=>w,oAB:()=>et,Yjl:()=>ot,Y36:()=>Io,_UZ:()=>Ro,qZA:()=>Po,TgZ:()=>Oo,EpF:()=>No,n5z:()=>We,Ikx:()=>$o,LFG:()=>mn,$8M:()=>Ye,NdJ:()=>Uo,CRH:()=>Ha,oxw:()=>jo,ALo:()=>xa,lcZ:()=>Ia,xi3:()=>ka,Q6J:()=>ko,VKq:()=>wa,WLB:()=>Ca,iGM:()=>Ga,MAs:()=>xo,CHM:()=>Bt,LSH:()=>ur,kYT:()=>nt,YNc:()=>Eo,_uU:()=>Ko,Oqu:()=>Yo,hij:()=>Qo});var r=n(5959),i=n(7570),o=n(8318),s=n(1906),a=n(1055);function u(t){for(let e in t)if(t[e]===u)return e;throw Error("Could not find renamed property on target object.")}function c(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function l(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(l).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function h(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const d=u({__forward_ref__:u});function p(t){return t.__forward_ref__=p,t.toString=function(){return l(this())},t}function f(t){return g(t)?t():t}function g(t){return"function"==typeof t&&t.hasOwnProperty(d)&&t.__forward_ref__===p}class m extends Error{constructor(t,e){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(t,e)),this.code=t}}function y(t){return"string"==typeof t?t:null==t?"":String(t)}function v(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():y(t)}function _(t,e){const n=e?` in ${e}`:"";throw new m("201",`No provider for ${v(t)} found${n}`)}function b(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function w(t){return{providers:t.providers||[],imports:t.imports||[]}}function C(t){return T(t,E)||T(t,I)}function T(t,e){return t.hasOwnProperty(e)?t[e]:null}function S(t){return t&&(t.hasOwnProperty(x)||t.hasOwnProperty(k))?t[x]:null}const E=u({"\u0275prov":u}),x=u({"\u0275inj":u}),I=u({ngInjectableDef:u}),k=u({ngInjectorDef:u});var A=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});let O;function P(t){const e=O;return O=t,e}function R(t,e,n){const r=C(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&A.Optional?null:void 0!==e?e:void _(l(t),"Injector")}function N(t){return{toString:t}.toString()}var D=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({}),L=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({});const F="undefined"!=typeof globalThis&&globalThis,U="undefined"!=typeof window&&window,M="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,q="undefined"!=typeof global&&global,j=F||q||U||M,V={},B=[],Z=u({"\u0275cmp":u}),G=u({"\u0275dir":u}),z=u({"\u0275pipe":u}),H=u({"\u0275mod":u}),W=u({"\u0275loc":u}),K=u({"\u0275fac":u}),Y=u({__NG_ELEMENT_ID__:u});let Q=0;function $(t){return N(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===D.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||B,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||L.Emulated,id:"c",styles:t.styles||B,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,o=t.pipes;return n.id+=Q++,n.inputs=rt(t.inputs,e),n.outputs=rt(t.outputs),i&&i.forEach(t=>t(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(J):null,n.pipeDefs=o?()=>("function"==typeof o?o():o).map(X):null,n})}function J(t){return st(t)||function(t){return t[G]||null}(t)}function X(t){return function(t){return t[z]||null}(t)}const tt={};function et(t){const e={type:t.type,bootstrap:t.bootstrap||B,declarations:t.declarations||B,imports:t.imports||B,exports:t.exports||B,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&N(()=>{tt[t.id]=t.type}),e}function nt(t,e){return N(()=>{const n=at(t,!0);n.declarations=e.declarations||B,n.imports=e.imports||B,n.exports=e.exports||B})}function rt(t,e){if(null==t)return V;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}const it=$;function ot(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function st(t){return t[Z]||null}function at(t,e){const n=t[H]||null;if(!n&&!0===e)throw new Error(`Type ${l(t)} does not have '\u0275mod' property.`);return n}const ut=20,ct=10;function lt(t){return Array.isArray(t)&&"object"==typeof t[1]}function ht(t){return Array.isArray(t)&&!0===t[1]}function dt(t){return 0!=(8&t.flags)}function pt(t){return 2==(2&t.flags)}function ft(t){return 1==(1&t.flags)}function gt(t){return null!==t.template}function mt(t,e){return t.hasOwnProperty(K)?t[K]:null}class yt{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function vt(){return _t}function _t(t){return t.type.prototype.ngOnChanges&&(t.setInput=wt),bt}function bt(){const t=Ct(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===V)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function wt(t,e,n,r){const i=Ct(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:V,current:null}),o=i.current||(i.current={}),s=i.previous,a=this.declaredInputs[n],u=s[a];o[a]=new yt(u&&u.currentValue,e,s===V),t[r]=e}function Ct(t){return t.__ngSimpleChanges__||null}let Tt;function St(t){Tt=t}function Et(t){return!!t.listen}vt.ngInherit=!0;const xt={createRenderer:(t,e)=>void 0!==Tt?Tt:"undefined"!=typeof document?document:void 0};function It(t){for(;Array.isArray(t);)t=t[0];return t}function kt(t,e){return It(e[t])}function At(t,e){return It(e[t.index])}function Ot(t,e){return t.data[e]}function Pt(t,e){return t[e]}function Rt(t,e){const n=e[t];return lt(n)?n:n[0]}function Nt(t){return 4==(4&t[2])}function Dt(t){return 128==(128&t[2])}function Lt(t,e){return null==e?null:t[e]}function Ft(t){t[18]=0}function Ut(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const Mt={lFrame:oe(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function qt(){return Mt.bindingsEnabled}function jt(){return Mt.lFrame.lView}function Vt(){return Mt.lFrame.tView}function Bt(t){return Mt.lFrame.contextLView=t,t[8]}function Zt(){let t=Gt();for(;null!==t&&64===t.type;)t=t.parent;return t}function Gt(){return Mt.lFrame.currentTNode}function zt(t,e){const n=Mt.lFrame;n.currentTNode=t,n.isParent=e}function Ht(){return Mt.lFrame.isParent}function Wt(){return Mt.isInCheckNoChangesMode}function Kt(t){Mt.isInCheckNoChangesMode=t}function Yt(){const t=Mt.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function Qt(){return Mt.lFrame.bindingIndex++}function $t(t,e){const n=Mt.lFrame;n.bindingIndex=n.bindingRootIndex=t,Jt(e)}function Jt(t){Mt.lFrame.currentDirectiveIndex=t}function Xt(){return Mt.lFrame.currentQueryIndex}function te(t){Mt.lFrame.currentQueryIndex=t}function ee(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function ne(t,e,n){if(n&A.SkipSelf){let r=e,i=t;for(;r=r.parent,!(null!==r||n&A.Host||(r=ee(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;e=r,t=i}const r=Mt.lFrame=ie();return r.currentTNode=e,r.lView=t,!0}function re(t){const e=ie(),n=t[1];Mt.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function ie(){const t=Mt.lFrame,e=null===t?null:t.child;return null===e?oe(t):e}function oe(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function se(){const t=Mt.lFrame;return Mt.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const ae=se;function ue(){const t=se();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function ce(){return Mt.lFrame.selectedIndex}function le(t){Mt.lFrame.selectedIndex=t}function he(){const t=Mt.lFrame;return Ot(t.tView,t.selectedIndex)}function de(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:o,ngAfterViewChecked:s,ngOnDestroy:a}=e;r&&(t.contentHooks||(t.contentHooks=[])).push(-n,r),i&&((t.contentHooks||(t.contentHooks=[])).push(n,i),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,i)),o&&(t.viewHooks||(t.viewHooks=[])).push(-n,o),s&&((t.viewHooks||(t.viewHooks=[])).push(n,s),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,s)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function pe(t,e,n){me(t,e,3,n)}function fe(t,e,n,r){(3&t[2])===n&&me(t,e,n,r)}function ge(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function me(t,e,n,r){const i=null!=r?r:-1,o=e.length-1;let s=0;for(let a=void 0!==r?65535&t[18]:0;a<o;a++)if("number"==typeof e[a+1]){if(s=e[a],null!=r&&s>=r)break}else e[a]<0&&(t[18]+=65536),(s<i||-1==i)&&(ye(t,n,e,a),t[18]=(4294901760&t[18])+a+2),a++}function ye(t,e,n,r){const i=n[r]<0,o=n[r+1],s=t[i?-n[r]:n[r]];if(i){if(t[2]>>11<t[18]>>16&&(3&t[2])===e){t[2]+=2048;try{o.call(s)}finally{}}}else try{o.call(s)}finally{}}const ve=-1;class _e{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function be(t,e,n){const r=Et(t);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const s=n[i++],a=n[i++],u=n[i++];r?t.setAttribute(e,a,u,s):e.setAttributeNS(s,a,u)}else{const s=o,a=n[++i];Ce(s)?r&&t.setProperty(e,s,a):r?t.setAttribute(e,s,a):e.setAttribute(s,a),i++}}return i}function we(t){return 3===t||4===t||6===t}function Ce(t){return 64===t.charCodeAt(0)}function Te(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||Se(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function Se(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const n=t[o++];if("number"==typeof n){if(n===e){s=-1;break}if(n>e){s=o-1;break}}}for(;o<t.length;){const e=t[o];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function Ee(t){return t!==ve}function xe(t){return 32767&t}function Ie(t,e){let n=t>>16,r=e;for(;n>0;)r=r[15],n--;return r}let ke=!0;function Ae(t){const e=ke;return ke=t,e}let Oe=0;function Pe(t,e){const n=Ne(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,Re(r.data,t),Re(e,null),Re(r.blueprint,null));const i=De(t,e),o=t.injectorIndex;if(Ee(i)){const t=xe(i),n=Ie(i,e),r=n[1].data;for(let i=0;i<8;i++)e[o+i]=n[t+i]|r[t+i]}return e[o+8]=i,o}function Re(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Ne(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function De(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const t=i[1],e=t.type;if(r=2===e?t.declTNode:1===e?i[6]:null,null===r)return ve;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return ve}function Le(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Y)&&(r=n[Y]),null==r&&(r=n[Y]=Oe++);const i=255&r;e.data[t+(i>>5)]|=1<<i}(t,e,n)}function Fe(t,e,n){if(n&A.Optional)return t;_(e,"NodeInjector")}function Ue(t,e,n,r){if(n&A.Optional&&void 0===r&&(r=null),0==(n&(A.Self|A.Host))){const i=t[9],o=P(void 0);try{return i?i.get(e,r,n&A.Optional):R(e,r,n&A.Optional)}finally{P(o)}}return Fe(r,e,n)}function Me(t,e,n,r=A.Default,i){if(null!==t){const o=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(Y)?t[Y]:void 0;return"number"==typeof e?e>=0?255&e:je:e}(n);if("function"==typeof o){if(!ne(e,t,r))return r&A.Host?Fe(i,n,r):Ue(e,n,r,i);try{const t=o(r);if(null!=t||r&A.Optional)return t;_(n)}finally{ae()}}else if("number"==typeof o){let i=null,s=Ne(t,e),a=ve,u=r&A.Host?e[16][6]:null;for((-1===s||r&A.SkipSelf)&&(a=-1===s?De(t,e):e[s+8],a!==ve&&ze(r,!1)?(i=e[1],s=xe(a),e=Ie(a,e)):s=-1);-1!==s;){const t=e[1];if(Ge(o,s,t.data)){const t=Ve(s,e,n,i,r,u);if(t!==qe)return t}a=e[s+8],a!==ve&&ze(r,e[1].data[s+8]===u)&&Ge(o,s,e)?(i=t,s=xe(a),e=Ie(a,e)):s=-1}}}return Ue(e,n,r,i)}const qe={};function je(){return new He(Zt(),jt())}function Ve(t,e,n,r,i,o){const s=e[1],a=s.data[t+8],u=Be(a,s,n,null==r?pt(a)&&ke:r!=s&&0!=(3&a.type),i&A.Host&&o===a);return null!==u?Ze(e,s,u,a):qe}function Be(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,u=t.directiveStart,c=o>>20,l=i?a+c:t.directiveEnd;for(let h=r?a:a+c;h<l;h++){const t=s[h];if(h<u&&n===t||h>=u&&t.type===n)return h}if(i){const t=s[u];if(t&&gt(t)&&t.type===n)return u}return null}function Ze(t,e,n,r){let i=t[n];const o=e.data;if(i instanceof _e){const s=i;s.resolving&&function(t,e){throw new m("200",`Circular dependency in DI detected for ${t}`)}(v(o[n]));const a=Ae(s.canSeeViewProviders);s.resolving=!0;const u=s.injectImpl?P(s.injectImpl):null;ne(t,r,A.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const r=_t(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o))}(n,o[n],e)}finally{null!==u&&P(u),Ae(a),s.resolving=!1,ae()}}return i}function Ge(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function ze(t,e){return!(t&A.Self||t&A.Host&&e)}class He{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return Me(this._tNode,this._lView,t,void 0,e)}}function We(t){return N(()=>{const e=t.prototype.constructor,n=e[K]||Ke(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const t=i[K]||Ke(i);if(t&&t!==n)return t;i=Object.getPrototypeOf(i)}return t=>new t})}function Ke(t){return g(t)?()=>{const e=Ke(f(t));return e&&e()}:mt(t)}function Ye(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(we(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}(Zt(),t)}const Qe="__parameters__";function $e(t,e,n){return N(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty(Qe)?t[Qe]:Object.defineProperty(t,Qe,{value:[]})[Qe];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}class Je{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=b({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Xe=new Je("AnalyzeForEntryComponents"),tn=Function;function en(t,e){void 0===e&&(e=t);for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)?(e===t&&(e=t.slice(0,n)),en(r,e)):e!==t&&e.push(r)}return e}function nn(t,e){t.forEach(t=>Array.isArray(t)?nn(t,e):e(t))}function rn(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function on(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function sn(t,e,n){let r=un(t,e);return r>=0?t[1|r]=n:(r=~r,function(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function an(t,e){const n=un(t,e);if(n>=0)return t[1|n]}function un(t,e){return function(t,e,n){let r=0,i=t.length>>1;for(;i!==r;){const n=r+(i-r>>1),o=t[n<<1];if(e===o)return n<<1;o>e?i=n:r=n+1}return~(i<<1)}(t,e)}const cn={},ln=/\n/gm,hn="__source",dn=u({provide:String,useValue:u});let pn;function fn(t){const e=pn;return pn=t,e}function gn(t,e=A.Default){if(void 0===pn)throw new Error("inject() must be called from an injection context");return null===pn?R(t,void 0,e):pn.get(t,e&A.Optional?null:void 0,e)}function mn(t,e=A.Default){return(O||gn)(f(t),e)}function yn(t){const e=[];for(let n=0;n<t.length;n++){const r=f(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t,n=A.Default;for(let e=0;e<r.length;e++){const i=r[e],o=i.__NG_DI_FLAG__;"number"==typeof o?-1===o?t=i.token:n|=o:t=i}e.push(mn(t,n))}else e.push(mn(r))}return e}function vn(t,e){return t.__NG_DI_FLAG__=e,t.prototype.__NG_DI_FLAG__=e,t}const _n=vn($e("Inject",t=>({token:t})),-1),bn=vn($e("Optional"),8),wn=vn($e("SkipSelf"),4);let Cn;function Tn(t){var e;return(null===(e=function(){if(void 0===Cn&&(Cn=null,j.trustedTypes))try{Cn=j.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(e){}return Cn}())||void 0===e?void 0:e.createHTML(t))||t}class Sn{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class En extends Sn{getTypeName(){return"HTML"}}class xn extends Sn{getTypeName(){return"Style"}}class In extends Sn{getTypeName(){return"Script"}}class kn extends Sn{getTypeName(){return"URL"}}class An extends Sn{getTypeName(){return"ResourceURL"}}function On(t){return t instanceof Sn?t.changingThisBreaksApplicationSecurity:t}function Pn(t,e){const n=Rn(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===e}function Rn(t){return t instanceof Sn&&t.getTypeName()||null}function Nn(t){return new En(t)}function Dn(t){return new xn(t)}function Ln(t){return new In(t)}function Fn(t){return new kn(t)}function Un(t){return new An(t)}class Mn{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(Tn(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch(e){return null}}}class qn{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const e=this.inertDocument.createElement("body");t.appendChild(e)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=Tn(t),e;const n=this.inertDocument.createElement("body");return n.innerHTML=Tn(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const jn=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Vn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Bn(t){return(t=String(t)).match(jn)||t.match(Vn)?t:"unsafe:"+t}function Zn(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function Gn(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const zn=Zn("area,br,col,hr,img,wbr"),Hn=Zn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Wn=Zn("rp,rt"),Kn=Gn(Wn,Hn),Yn=Gn(zn,Gn(Hn,Zn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Gn(Wn,Zn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Kn),Qn=Zn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),$n=Zn("srcset"),Jn=Gn(Qn,$n,Zn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Zn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Xn=Zn("script,style,template");class tr{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!Yn.hasOwnProperty(e))return this.sanitizedSomething=!0,!Xn.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let i=0;i<n.length;i++){const t=n.item(i),e=t.name,o=e.toLowerCase();if(!Jn.hasOwnProperty(o)){this.sanitizedSomething=!0;continue}let s=t.value;Qn[o]&&(s=Bn(s)),$n[o]&&(r=s,s=(r=String(r)).split(",").map(t=>Bn(t.trim())).join(", ")),this.buf.push(" ",e,'="',rr(s),'"')}var r;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();Yn.hasOwnProperty(e)&&!zn.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(rr(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const er=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,nr=/([^\#-~ |!])/g;function rr(t){return t.replace(/&/g,"&amp;").replace(er,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(nr,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let ir;function or(t,e){let n=null;try{ir=ir||function(t){const e=new qn(t);return function(){try{return!!(new window.DOMParser).parseFromString(Tn(""),"text/html")}catch(t){return!1}}()?new Mn(e):e}(t);let r=e?String(e):"";n=ir.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=ir.getInertBodyElement(r)}while(r!==o);return Tn((new tr).sanitizeChildren(sr(n)||n))}finally{if(n){const t=sr(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}function sr(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var ar=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({});function ur(t){const e=function(){const t=jt();return t&&t[12]}();return e?e.sanitize(ar.URL,t)||"":Pn(t,"URL")?On(t):Bn(y(t))}function cr(t,e){t.__ngContext__=e}function lr(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function hr(t){return t.ngDebugContext}function dr(t){return t.ngOriginalError}function pr(t,...e){t.error(...e)}class fr{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||pr}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?hr(t)?hr(t):this._findContext(dr(t)):null}_findOriginalError(t){let e=dr(t);for(;e&&dr(e);)e=dr(e);return e}}const gr=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(j))();function mr(t){return t instanceof Function?t():t}var yr=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({});function vr(t,e){return(void 0)(t,e)}function _r(t){const e=t[3];return ht(e)?e[3]:e}function br(t){return Cr(t[13])}function wr(t){return Cr(t[4])}function Cr(t){for(;null!==t&&!ht(t);)t=t[4];return t}function Tr(t,e,n,r,i){if(null!=r){let o,s=!1;ht(r)?o=r:lt(r)&&(s=!0,r=r[0]);const a=It(r);0===t&&null!==n?null==i?Or(e,n,a):Ar(e,n,a,i||null,!0):1===t&&null!==n?Ar(e,n,a,i||null,!0):2===t?function(t,e,n){const r=Rr(t,e);r&&function(t,e,n,r){Et(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=o&&function(t,e,n,r,i){const o=n[7];o!==It(n)&&Tr(e,t,r,o,i);for(let s=ct;s<n.length;s++){const i=n[s];Mr(i[1],i,t,e,r,o)}}(e,t,o,n,i)}}function Sr(t,e,n){return Et(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function Er(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,Ut(i,-1)),n.splice(r,1)}function xr(t,e){if(t.length<=ct)return;const n=ct+e,r=t[n];if(r){const o=r[17];null!==o&&o!==t&&Er(o,r),e>0&&(t[n-1][4]=r[4]);const s=on(t,ct+e);Mr(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=s[19];null!==a&&a.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function Ir(t,e){if(!(256&e[2])){const n=e[11];Et(n)&&n.destroyNode&&Mr(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return kr(t[1],t);for(;e;){let n=null;if(lt(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)lt(e)&&kr(e[1],e),e=e[3];null===e&&(e=t),lt(e)&&kr(e[1],e),n=e&&e[4]}e=n}}(e)}}function kr(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof _e)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2){const r=t[e[n]],i=e[n+1];try{i.call(r)}finally{}}else try{e.call(t)}finally{}}}}(t,e),function(t,e){const n=t.cleanup,r=e[7];let i=-1;if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const t=n[o+1],s="function"==typeof t?t(e):It(e[t]),a=r[i=n[o+2]],u=n[o+3];"boolean"==typeof u?s.removeEventListener(n[o],a,u):u>=0?r[i=u]():r[i=-u].unsubscribe(),o+=2}else{const t=r[i=n[o+1]];n[o].call(t)}if(null!==r){for(let t=i+1;t<r.length;t++)(0,r[t])();e[7]=null}}(t,e),1===e[1].type&&Et(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&ht(e[3])){n!==e[3]&&Er(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function Ar(t,e,n,r,i){Et(t)?t.insertBefore(e,n,r,i):e.insertBefore(n,r,i)}function Or(t,e,n){Et(t)?t.appendChild(e,n):e.appendChild(n)}function Pr(t,e,n,r,i){null!==r?Ar(t,e,n,r,i):Or(t,e,n)}function Rr(t,e){return Et(t)?t.parentNode(e):e.parentNode}function Nr(t,e,n,r){const i=function(t,e,n){return function(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const e=t.data[r.directiveStart].encapsulation;if(e===L.None||e===L.Emulated)return null}return At(r,n)}(t,e.parent,n)}(t,r,e),o=e[11],s=function(t,e,n){return function(t,e,n){return 40&t.type?At(t,n):null}(t,0,n)}(r.parent||e[6],0,e);if(null!=i)if(Array.isArray(n))for(let a=0;a<n.length;a++)Pr(o,i,n[a],s,!1);else Pr(o,i,n,s,!1)}function Dr(t,e){if(null!==e){const n=e.type;if(3&n)return At(e,t);if(4&n)return Fr(-1,t[e.index]);if(8&n){const n=e.child;if(null!==n)return Dr(t,n);{const n=t[e.index];return ht(n)?Fr(-1,n):It(n)}}if(32&n)return vr(e,t)()||It(t[e.index]);{const n=Lr(t,e);return null!==n?Array.isArray(n)?n[0]:Dr(_r(t[16]),n):Dr(t,e.next)}}return null}function Lr(t,e){return null!==e?t[16][6].projection[e.projection]:null}function Fr(t,e){const n=ct+t+1;if(n<e.length){const t=e[n],r=t[1].firstChild;if(null!==r)return Dr(t,r)}return e[7]}function Ur(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],u=n.type;if(s&&0===e&&(a&&cr(It(a),r),n.flags|=4),64!=(64&n.flags))if(8&u)Ur(t,e,n.child,r,i,o,!1),Tr(e,t,i,a,o);else if(32&u){const s=vr(n,r);let u;for(;u=s();)Tr(e,t,i,u,o);Tr(e,t,i,a,o)}else 16&u?qr(t,e,r,n,i,o):Tr(e,t,i,a,o);n=s?n.projectionNext:n.next}}function Mr(t,e,n,r,i,o){Ur(n,r,t.firstChild,e,i,o,!1)}function qr(t,e,n,r,i,o){const s=n[16],a=s[6].projection[r.projection];if(Array.isArray(a))for(let u=0;u<a.length;u++)Tr(e,t,i,a[u],o);else Ur(t,e,a,s[3],i,o,!0)}function jr(t,e,n){Et(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function Vr(t,e,n){Et(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function Br(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}const Zr="ng-template";function Gr(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==Br(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function zr(t){return 4===t.type&&t.value!==Zr}function Hr(t,e,n){return e===(4!==t.type||n?t.value:Zr)}function Wr(t,e,n){let r=4;const i=t.attrs||[],o=function(t){for(let e=0;e<t.length;e++)if(we(t[e]))return e;return t.length}(i);let s=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!Hr(t,u,n)||""===u&&1===e.length){if(Kr(r))return!1;s=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!Gr(t.attrs,c,n)){if(Kr(r))return!1;s=!0}continue}const l=Yr(8&r?"class":u,i,zr(t),n);if(-1===l){if(Kr(r))return!1;s=!0;continue}if(""!==c){let t;t=l>o?"":i[l+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==Br(e,c,0)||2&r&&c!==t){if(Kr(r))return!1;s=!0}}}}else{if(!s&&!Kr(r)&&!Kr(u))return!1;if(s&&Kr(u))continue;s=!1,r=u|1&r}}return Kr(r)||s}function Kr(t){return 0==(1&t)}function Yr(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function Qr(t,e,n=!1){for(let r=0;r<e.length;r++)if(Wr(t,e[r],n))return!0;return!1}function $r(t,e){return t?":not("+e.trim()+")":e}function Jr(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const e=t[++n];i+="["+s+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""===i||Kr(s)||(e+=$r(o,i),i=""),r=s,o=o||!Kr(r);n++}return""!==i&&(e+=$r(o,i)),e}const Xr={};function ti(t){ei(Vt(),jt(),ce()+t,Wt())}function ei(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&pe(e,r,n)}else{const r=t.preOrderHooks;null!==r&&fe(e,r,0,n)}le(n)}function ni(t,e){return t<<17|e<<2}function ri(t){return t>>17&32767}function ii(t){return 2|t}function oi(t){return(131068&t)>>2}function si(t,e){return-131069&t|e<<2}function ai(t){return 1|t}function ui(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const n=t.data[o];te(i),n.contentQueries(2,e[o],o)}}}function ci(t,e,n,r,i,o,s,a,u,c){const l=e.blueprint.slice();return l[0]=i,l[2]=140|r,Ft(l),l[3]=l[15]=t,l[8]=n,l[10]=s||t&&t[10],l[11]=a||t&&t[11],l[12]=u||t&&t[12]||null,l[9]=c||t&&t[9]||null,l[6]=o,l[16]=2==e.type?t[16]:l,l}function li(t,e,n,r,i){let o=t.data[e];if(null===o)o=function(t,e,n,r,i){const o=Gt(),s=Ht(),a=t.data[e]=function(t,e,n,r,i,o){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=a),null!==o&&(s?null==o.child&&null!==a.parent&&(o.child=a):null===o.next&&(o.next=a)),a}(t,e,n,r,i),Mt.lFrame.inI18n&&(o.flags|=64);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const t=function(){const t=Mt.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();o.injectorIndex=null===t?-1:t.injectorIndex}return zt(o,!0),o}function hi(t,e,n,r){if(0===n)return-1;const i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function di(t,e,n){re(e);try{const r=t.viewQuery;null!==r&&Vi(1,r,n);const i=t.template;null!==i&&gi(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&ui(t,e),t.staticViewQueries&&Vi(2,t.viewQuery,n);const o=t.components;null!==o&&function(t,e){for(let n=0;n<e.length;n++)Fi(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,ue()}}function pi(t,e,n,r){const i=e[2];if(256==(256&i))return;re(e);const o=Wt();try{Ft(e),Mt.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&gi(t,e,n,2,r);const s=3==(3&i);if(!o)if(s){const n=t.preOrderCheckHooks;null!==n&&pe(e,n,null)}else{const n=t.preOrderHooks;null!==n&&fe(e,n,0,null),ge(e,0)}if(function(t){for(let e=br(t);null!==e;e=wr(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&Ut(r,1),n[2]|=1024}}}(e),function(t){for(let e=br(t);null!==e;e=wr(e))for(let t=ct;t<e.length;t++){const n=e[t],r=n[1];Dt(n)&&pi(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&ui(t,e),!o)if(s){const n=t.contentCheckHooks;null!==n&&pe(e,n)}else{const n=t.contentHooks;null!==n&&fe(e,n,1),ge(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let t=0;t<n.length;t++){const r=n[t];if(r<0)le(~r);else{const i=r,o=n[++t],s=n[++t];$t(o,i),s(2,e[i])}}}finally{le(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)Di(t,e[n])}(e,a);const u=t.viewQuery;if(null!==u&&Vi(2,u,r),!o)if(s){const n=t.viewCheckHooks;null!==n&&pe(e,n)}else{const n=t.viewHooks;null!==n&&fe(e,n,2),ge(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,Ut(e[3],-1))}finally{ue()}}function fi(t,e,n,r){const i=e[10],o=!Wt(),s=Nt(e);try{o&&!s&&i.begin&&i.begin(),s&&di(t,e,r),pi(t,e,n,r)}finally{o&&!s&&i.end&&i.end()}}function gi(t,e,n,r,i){const o=ce(),s=2&r;try{le(-1),s&&e.length>ut&&ei(t,e,ut,Wt()),n(r,i)}finally{le(o)}}function mi(t,e,n){qt()&&(function(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||Pe(n,e),cr(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const r=t.data[a],o=gt(r);o&&Oi(e,n,r);const u=Ze(e,t,a,n);cr(u,e),null!==s&&Pi(0,a-i,u,r,0,s),o&&(Rt(n.index,e)[8]=u)}}(t,e,n,At(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=Mt.lFrame.currentDirectiveIndex;try{le(o);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];Jt(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||Ei(r,i)}}finally{le(-1),Jt(s)}}(t,e,n))}function yi(t,e,n=At){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}function vi(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=_i(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function _i(t,e,n,r,i,o,s,a,u,c){const l=ut+r,h=l+i,d=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:Xr);return n}(l,h),p="function"==typeof c?c():c;return d[1]={type:t,blueprint:d,template:n,queries:null,viewQuery:a,declTNode:e,data:d.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:p,incompleteFirstPass:!1}}function bi(t,e,n,r){const i=Zi(e);null===n?i.push(r):(i.push(n),t.firstCreatePass&&Gi(t).push(r,i.length-1))}function wi(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function Ci(t,e,n,r,i,o,s,a){const u=At(e,n);let c,l=e.inputs;var h;!a&&null!=l&&(c=l[r])?(Hi(t,n,c,r,i),pt(e)&&function(t,e){const n=Rt(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(r="class"===(h=r)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,i=null!=s?s(i,e.value||"",r):i,Et(o)?o.setProperty(u,r,i):Ce(r)||(u.setProperty?u.setProperty(r,i):u[r]=i))}function Ti(t,e,n,r){let i=!1;if(qt()){const o=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];Qr(n,s.selectors,!1)&&(i||(i=[]),Le(Pe(n,e),t,s.type),gt(s)?(xi(t,n),i.unshift(s)):i.push(s))}return i}(t,e,n),s=null===r?null:{"":-1};if(null!==o){i=!0,ki(n,t.data.length,o.length);for(let t=0;t<o.length;t++){const e=o[t];e.providersResolver&&e.providersResolver(e)}let r=!1,a=!1,u=hi(t,e,o.length,null);for(let i=0;i<o.length;i++){const c=o[i];n.mergedAttrs=Te(n.mergedAttrs,c.hostAttrs),Ai(t,n,e,u,c),Ii(u,c,s),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const l=c.type.prototype;!r&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),r=!0),a||!l.ngOnChanges&&!l.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),a=!0),u++}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,o=[];let s=null,a=null;for(let u=e.directiveStart;u<n;u++){const t=r[u],n=t.inputs,c=null===i||zr(e)?null:Ri(n,i);o.push(c),s=wi(n,u,s),a=wi(t.outputs,u,a)}null!==s&&(s.hasOwnProperty("class")&&(e.flags|=16),s.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=s,e.outputs=a}(t,n)}s&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new m("301",`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,s)}return n.mergedAttrs=Te(n.mergedAttrs,n.attrs),i}function Si(t,e,n,r,i,o){const s=o.hostBindings;if(s){let n=t.hostBindingOpCodes;null===n&&(n=t.hostBindingOpCodes=[]);const o=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(n)!=o&&n.push(o),n.push(r,i,s)}}function Ei(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function xi(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function Ii(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;gt(e)&&(n[""]=t)}}function ki(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function Ai(t,e,n,r,i){t.data[r]=i;const o=i.factory||(i.factory=mt(i.type)),s=new _e(o,gt(i),null);t.blueprint[r]=s,n[r]=s,Si(t,e,0,r,hi(t,n,i.hostVars,Xr),i)}function Oi(t,e,n){const r=At(e,t),i=vi(n),o=t[10],s=Ui(t,ci(t,i,null,n.onPush?64:16,r,e,o,o.createRenderer(r,n),null,null));t[e.index]=s}function Pi(t,e,n,r,i,o){const s=o[e];if(null!==s){const t=r.setInput;for(let e=0;e<s.length;){const i=s[e++],o=s[e++],a=s[e++];null!==t?r.setInput(n,a,i,o):n[o]=a}}}function Ri(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function Ni(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function Di(t,e){const n=Rt(e,t);if(Dt(n)){const t=n[1];80&n[2]?pi(t,n,t.template,n[8]):n[5]>0&&Li(n)}}function Li(t){for(let n=br(t);null!==n;n=wr(n))for(let t=ct;t<n.length;t++){const e=n[t];if(1024&e[2]){const t=e[1];pi(t,e,t.template,e[8])}else e[5]>0&&Li(e)}const e=t[1].components;if(null!==e)for(let n=0;n<e.length;n++){const r=Rt(e[n],t);Dt(r)&&r[5]>0&&Li(r)}}function Fi(t,e){const n=Rt(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),di(r,n,n[8])}function Ui(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function Mi(t){for(;t;){t[2]|=64;const e=_r(t);if(0!=(512&t[2])&&!e)return t;t=e}return null}function qi(t,e,n){const r=e[10];r.begin&&r.begin();try{pi(t,e,t.template,n)}catch(i){throw zi(e,i),i}finally{r.end&&r.end()}}function ji(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=lr(n),i=r[1];fi(i,r,i.template,n)}}(t[8])}function Vi(t,e,n){te(0),e(t,n)}const Bi=(()=>Promise.resolve(null))();function Zi(t){return t[7]||(t[7]=[])}function Gi(t){return t.cleanup||(t.cleanup=[])}function zi(t,e){const n=t[9],r=n?n.get(fr,null):null;r&&r.handleError(e)}function Hi(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],u=e[s],c=t.data[s];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function Wi(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const t=e[s];"number"==typeof t?o=t:1==o?i=h(i,t):2==o&&(r=h(r,t+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}const Ki=new Je("INJECTOR",-1);class Yi{get(t,e=cn){if(e===cn){const e=new Error(`NullInjectorError: No provider for ${l(t)}!`);throw e.name="NullInjectorError",e}return e}}const Qi=new Je("Set Injector scope."),$i={},Ji={};let Xi;function to(){return void 0===Xi&&(Xi=new Yi),Xi}function eo(t,e=null,n=null,r){return new no(t,n,e||to(),r)}class no{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&nn(e,n=>this.processProvider(n,t,e)),nn([t],t=>this.processInjectorType(t,[],i)),this.records.set(Ki,oo(void 0,this));const o=this.records.get(Qi);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof t?null:l(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=cn,n=A.Default){this.assertNotDestroyed();const r=fn(this);try{if(!(n&A.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(i=t)||"object"==typeof i&&i instanceof Je)&&C(t);e=n&&this.injectableDefInScope(n)?oo(ro(t),$i):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&A.Self?to():this.parent).get(t,e=n&A.Optional&&e===cn?null:e)}catch(o){if("NullInjectorError"===o.name){if((o.ngTempTokenPath=o.ngTempTokenPath||[]).unshift(l(t)),r)throw o;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e[hn]&&i.unshift(e[hn]),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=l(e);if(Array.isArray(e))i=e.map(l).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):l(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(ln,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(o,t,"R3InjectorError",this.source)}throw o}finally{fn(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(l(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=f(t)))return!1;let r=S(t);const i=null==r&&t.ngModule||void 0,o=void 0===i?t:i,s=-1!==n.indexOf(o);if(void 0!==i&&(r=S(i)),null==r)return!1;if(null!=r.imports&&!s){let t;n.push(o);try{nn(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];nn(r,t=>this.processProvider(t,n,r||B))}}this.injectorDefTypes.add(o);const a=mt(o)||(()=>new o);this.records.set(o,oo(a,$i));const u=r.providers;if(null!=u&&!s){const e=t;nn(u,t=>this.processProvider(t,e,u))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=ao(t=f(t))?t:f(t&&t.provide);const i=function(t,e,n){return so(t)?oo(void 0,t.useValue):oo(io(t),$i)}(t);if(ao(t)||!0!==t.multi)this.records.get(r);else{let e=this.records.get(r);e||(e=oo(void 0,$i,!0),e.factory=()=>yn(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===$i&&(e.value=Ji,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){if(!t.providedIn)return!1;const e=f(t.providedIn);return"string"==typeof e?"any"===e||e===this.scope:this.injectorDefTypes.has(e)}}function ro(t){const e=C(t),n=null!==e?e.factory:mt(t);if(null!==n)return n;if(t instanceof Je)throw new Error(`Token ${l(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=function(t,e){const n=[];for(let r=0;r<t;r++)n.push("?");return n}(e);throw new Error(`Can't resolve all parameters for ${l(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[E]||t[I]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function io(t,e,n){let r;if(ao(t)){const e=f(t);return mt(e)||ro(e)}if(so(t))r=()=>f(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...yn(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>mn(f(t.useExisting));else{const e=f(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return mt(e)||ro(e);r=()=>new e(...yn(t.deps))}var i;return r}function oo(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function so(t){return null!==t&&"object"==typeof t&&dn in t}function ao(t){return"function"==typeof t}const uo=function(t,e,n){return function(t,e=null,n=null,r){const i=eo(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};let co=(()=>{class t{static create(t,e){return Array.isArray(t)?uo(t,e,""):uo(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=cn,t.NULL=new Yi,t.\u0275prov=b({token:t,providedIn:"any",factory:()=>mn(Ki)}),t.__NG_ELEMENT_ID__=-1,t})();function lo(t,e){de(lr(t)[1],Zt())}function ho(t){let e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0;const r=[t];for(;e;){let i;if(gt(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(n){r.push(i);const e=t;e.inputs=po(t.inputs),e.declaredInputs=po(t.declaredInputs),e.outputs=po(t.outputs);const n=i.hostBindings;n&&mo(t,n);const o=i.viewQuery,s=i.contentQueries;if(o&&fo(t,o),s&&go(t,s),c(t.inputs,i.inputs),c(t.declaredInputs,i.declaredInputs),c(t.outputs,i.outputs),gt(i)&&i.data.animation){const e=t.data;e.animation=(e.animation||[]).concat(i.data.animation)}}const e=i.features;if(e)for(let r=0;r<e.length;r++){const i=e[r];i&&i.ngInherit&&i(t),i===ho&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Te(i.hostAttrs,n=Te(n,i.hostAttrs))}}(r)}function po(t){return t===V?{}:t===B?[]:t}function fo(t,e){const n=t.viewQuery;t.viewQuery=n?(t,r)=>{e(t,r),n(t,r)}:e}function go(t,e){const n=t.contentQueries;t.contentQueries=n?(t,r,i)=>{e(t,r,i),n(t,r,i)}:e}function mo(t,e){const n=t.hostBindings;t.hostBindings=n?(t,r)=>{e(t,r),n(t,r)}:e}let yo=null;function vo(){if(!yo){const t=j.Symbol;if(t&&t.iterator)yo=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(yo=n)}}}return yo}class _o{constructor(t){this.wrapped=t}static wrap(t){return new _o(t)}static unwrap(t){return _o.isWrapped(t)?t.wrapped:t}static isWrapped(t){return t instanceof _o}}function bo(t){return!!wo(t)&&(Array.isArray(t)||!(t instanceof Map)&&vo()in t)}function wo(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Co(t,e,n){return t[e]=n}function To(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function So(t,e,n,r){const i=jt();return To(i,Qt(),e)&&(Vt(),function(t,e,n,r,i,o){const s=At(t,e);!function(t,e,n,r,i,o,s){if(null==o)Et(t)?t.removeAttribute(e,i,n):e.removeAttribute(i);else{const a=null==s?y(o):s(o,r||"",i);Et(t)?t.setAttribute(e,i,a,n):n?e.setAttributeNS(n,i,a):e.setAttribute(i,a)}}(e[11],s,o,t.value,n,r,i)}(he(),i,t,e,n,r)),So}function Eo(t,e,n,r,i,o,s,a){const u=jt(),c=Vt(),l=t+ut,h=c.firstCreatePass?function(t,e,n,r,i,o,s,a,u){const c=e.consts,l=li(e,t,4,s||null,Lt(c,a));Ti(e,n,l,Lt(c,u)),de(e,l);const h=l.tViews=_i(2,l,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,l),h.queries=e.queries.embeddedTView(l)),l}(l,c,u,e,n,r,i,o,s):c.data[l];zt(h,!1);const d=u[11].createComment("");Nr(c,u,d,h),cr(d,u),Ui(u,u[l]=Ni(d,u,d,h)),ft(h)&&mi(c,u,h),null!=s&&yi(u,h,a)}function xo(t){return Pt(Mt.lFrame.contextLView,ut+t)}function Io(t,e=A.Default){const n=jt();return null===n?mn(t,e):Me(Zt(),n,f(t),e)}function ko(t,e,n){const r=jt();return To(r,Qt(),e)&&Ci(Vt(),he(),r,t,e,r[11],n,!1),ko}function Ao(t,e,n,r,i){const o=i?"class":"style";Hi(t,n,e.inputs[o],o,r)}function Oo(t,e,n,r){const i=jt(),o=Vt(),s=ut+t,a=i[11],u=i[s]=Sr(a,e,Mt.lFrame.currentNamespace),c=o.firstCreatePass?function(t,e,n,r,i,o,s){const a=e.consts,u=li(e,t,2,i,Lt(a,o));return Ti(e,n,u,Lt(a,s)),null!==u.attrs&&Wi(u,u.attrs,!1),null!==u.mergedAttrs&&Wi(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(s,o,i,0,e,n,r):o.data[s];zt(c,!0);const l=c.mergedAttrs;null!==l&&be(a,u,l);const h=c.classes;null!==h&&Vr(a,u,h);const d=c.styles;null!==d&&jr(a,u,d),64!=(64&c.flags)&&Nr(o,i,u,c),0===Mt.lFrame.elementDepthCount&&cr(u,i),Mt.lFrame.elementDepthCount++,ft(c)&&(mi(o,i,c),function(t,e,n){if(dt(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}(o,c,i)),null!==r&&yi(i,c)}function Po(){let t=Zt();Ht()?Mt.lFrame.isParent=!1:(t=t.parent,zt(t,!1));const e=t;Mt.lFrame.elementDepthCount--;const n=Vt();n.firstCreatePass&&(de(n,t),dt(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&Ao(n,e,jt(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&Ao(n,e,jt(),e.stylesWithoutHost,!1)}function Ro(t,e,n,r){Oo(t,e,n,r),Po()}function No(){return jt()}function Do(t){return!!t&&"function"==typeof t.then}function Lo(t){return!!t&&"function"==typeof t.subscribe}const Fo=Lo;function Uo(t,e,n,r){const i=jt(),o=Vt(),s=Zt();return function(t,e,n,r,i,o,s,a){const u=ft(r),c=t.firstCreatePass&&Gi(t),l=Zi(e);let h=!0;if(3&r.type){const d=At(r,e),p=a?a(d):d,f=l.length,g=a?t=>a(It(t[r.index])):r.index;if(Et(n)){let s=null;if(!a&&u&&(s=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const t=i[o];if(t===n&&i[o+1]===r){const t=e[7],n=i[o+2];return t.length>n?t[n]:null}"string"==typeof t&&(o+=2)}return null}(t,e,i,r.index)),null!==s)(s.__ngLastListenerFn__||s).__ngNextListenerFn__=o,s.__ngLastListenerFn__=o,h=!1;else{o=qo(r,e,0,o,!1);const t=n.listen(p,i,o);l.push(o,t),c&&c.push(i,g,f,f+1)}}else o=qo(r,e,0,o,!0),p.addEventListener(i,o,s),l.push(o),c&&c.push(i,g,f,s)}else o=qo(r,e,0,o,!1);const d=r.outputs;let p;if(h&&null!==d&&(p=d[i])){const t=p.length;if(t)for(let n=0;n<t;n+=2){const t=e[p[n]][p[n+1]].subscribe(o),s=l.length;l.push(o,t),c&&c.push(i,r.index,s,-(s+1))}}}(o,i,i[11],s,t,e,!!n,r),Uo}function Mo(t,e,n,r){try{return!1!==n(r)}catch(i){return zi(t,i),!1}}function qo(t,e,n,r,i){return function n(o){if(o===Function)return r;const s=2&t.flags?Rt(t.index,e):e;0==(32&e[2])&&Mi(s);let a=Mo(e,0,r,o),u=n.__ngNextListenerFn__;for(;u;)a=Mo(e,0,u,o)&&a,u=u.__ngNextListenerFn__;return i&&!1===a&&(o.preventDefault(),o.returnValue=!1),a}}function jo(t=1){return function(t){return(Mt.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,Mt.lFrame.contextLView))[8]}(t)}function Vo(t,e,n,r,i){const o=t[n+1],s=null===e;let a=r?ri(o):oi(o),u=!1;for(;0!==a&&(!1===u||s);){const n=t[a+1];Bo(t[a],e)&&(u=!0,t[a+1]=r?ai(n):ii(n)),a=r?ri(n):oi(n)}u&&(t[n+1]=r?ii(o):ai(o))}function Bo(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&un(t,e)>=0}function Zo(t,e){return function(t,e,n,r){const i=jt(),o=Vt(),s=function(t){const e=Mt.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+2,n}();o.firstUpdatePass&&function(t,e,n,r){const i=t.data;if(null===i[n+1]){const o=i[ce()],s=function(t,e){return e>=t.expandoStartIndex}(t,n);(function(t,e){return 0!=(16&t.flags)})(o)&&null===e&&!s&&(e=!1),e=function(t,e,n,r){const i=function(t){const e=Mt.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let o=e.residualClasses;if(null===i)0===e.classBindings&&(n=zo(n=Go(null,t,e,n,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==i)if(n=Go(i,t,e,n,r),null===o){let n=function(t,e,n){const r=e.classBindings;if(0!==oi(r))return t[ri(r)]}(t,e);void 0!==n&&Array.isArray(n)&&(n=Go(null,t,e,n[1],r),n=zo(n,e.attrs,r),function(t,e,n,r){t[ri(e.classBindings)]=r}(t,e,0,n))}else o=function(t,e,n){let r;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=zo(r,t[o].hostAttrs,true);return zo(r,e.attrs,true)}(t,e)}return void 0!==o&&(e.residualClasses=o),n}(i,o,e,r),function(t,e,n,r,i,o){let s=e.classBindings,a=ri(s),u=oi(s);t[r]=n;let c,l=!1;if(Array.isArray(n)){const t=n;c=t[1],(null===c||un(t,c)>0)&&(l=!0)}else c=n;if(i)if(0!==u){const e=ri(t[a+1]);t[r+1]=ni(e,a),0!==e&&(t[e+1]=si(t[e+1],r)),t[a+1]=131071&t[a+1]|r<<17}else t[r+1]=ni(a,0),0!==a&&(t[a+1]=si(t[a+1],r)),a=r;else t[r+1]=ni(u,0),0===a?a=r:t[u+1]=si(t[u+1],r),u=r;l&&(t[r+1]=ii(t[r+1])),Vo(t,c,r,!0),Vo(t,c,r,!1),function(t,e,n,r,i){const o=t.residualClasses;null!=o&&"string"==typeof e&&un(o,e)>=0&&(n[r+1]=ai(n[r+1]))}(e,c,t,r),s=ni(a,u),e.classBindings=s}(i,o,e,n,s)}}(o,t,s,true),e!==Xr&&To(i,s,e)&&function(t,e,n,r,i,o,s,a){if(!(3&e.type))return;const u=t.data,c=u[a+1];Wo(1==(1&c)?Ho(u,e,n,i,oi(c),s):void 0)||(Wo(o)||function(t){return 2==(2&t)}(c)&&(o=Ho(u,null,n,i,a,s)),function(t,e,n,r,i){const o=Et(t);i?o?t.addClass(n,r):n.classList.add(r):o?t.removeClass(n,r):n.classList.remove(r)}(r,0,kt(ce(),n),i,o))}(o,o.data[ce()],i,i[11],t,i[s+1]=function(t,e){return null==t||"object"==typeof t&&(t=l(On(t))),t}(e),true,s)}(t,e),Zo}function Go(t,e,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],r=zo(r,o.hostAttrs,i),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function zo(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),sn(t,s,!!n||e[++o]))}return void 0===t?null:t}function Ho(t,e,n,r,i,o){const s=null===e;let a;for(;i>0;){const e=t[i],o=Array.isArray(e),u=o?e[1]:e,c=null===u;let l=n[i+1];l===Xr&&(l=c?B:void 0);let h=c?an(l,r):u===r?l:void 0;if(o&&!Wo(h)&&(h=an(e,r)),Wo(h)&&(a=h,s))return a;const d=t[i+1];i=s?ri(d):oi(d)}if(null!==e){let t=o?e.residualClasses:e.residualStyles;null!=t&&(a=an(t,r))}return a}function Wo(t){return void 0!==t}function Ko(t,e=""){const n=jt(),r=Vt(),i=t+ut,o=r.firstCreatePass?li(r,i,1,e,null):r.data[i],s=n[i]=function(t,e){return Et(t)?t.createText(e):t.createTextNode(e)}(n[11],e);Nr(r,n,s,o),zt(o,!1)}function Yo(t){return Qo("",t,""),Yo}function Qo(t,e,n){const r=jt(),i=function(t,e,n,r){return To(t,Qt(),n)?e+y(n)+r:Xr}(r,t,e,n);return i!==Xr&&function(t,e,n){const r=kt(e,t);!function(t,e,n){Et(t)?t.setValue(e,n):e.textContent=n}(t[11],r,n)}(r,ce(),i),Qo}function $o(t,e,n){const r=jt();return To(r,Qt(),e)&&Ci(Vt(),he(),r,t,e,r[11],n,!0),$o}const Jo=void 0;var Xo=["en",[["a","p"],["AM","PM"],Jo],[["AM","PM"],Jo,Jo],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Jo,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Jo,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Jo,"{1} 'at' {0}",Jo],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let ts={};function es(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=rs(e);if(n)return n;const r=e.split("-")[0];if(n=rs(r),n)return n;if("en"===r)return Xo;throw new Error(`Missing locale data for the locale "${t}".`)}function ns(t){return es(t)[is.PluralCase]}function rs(t){return t in ts||(ts[t]=j.ng&&j.ng.common&&j.ng.common.locales&&j.ng.common.locales[t]),ts[t]}var is=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({});const os="en-US";let ss=os;function as(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t} [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(ss=t.toLowerCase().replace(/_/g,"-"))}function us(t,e,n,r,i){if(t=f(t),Array.isArray(t))for(let o=0;o<t.length;o++)us(t[o],e,n,r,i);else{const o=Vt(),s=jt();let a=ao(t)?t:f(t.provide),u=io(t);const c=Zt(),l=1048575&c.providerIndexes,h=c.directiveStart,d=c.providerIndexes>>20;if(ao(t)||!t.multi){const r=new _e(u,i,Io),p=hs(a,e,i?l:l+d,h);-1===p?(Le(Pe(c,s),o,a),cs(o,t,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(r),s.push(r)):(n[p]=r,s[p]=r)}else{const p=hs(a,e,l+d,h),f=hs(a,e,l,l+d),g=p>=0&&n[p],m=f>=0&&n[f];if(i&&!m||!i&&!g){Le(Pe(c,s),o,a);const l=function(t,e,n,r,i){const o=new _e(t,n,Io);return o.multi=[],o.index=e,o.componentProviders=0,ls(o,i,r&&!n),o}(i?ps:ds,n.length,i,r,u);!i&&m&&(n[f].providerFactory=l),cs(o,t,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(l),s.push(l)}else cs(o,t,p>-1?p:f,ls(n[i?f:p],u,!i&&r));!i&&r&&m&&n[f].componentProviders++}}}function cs(t,e,n,r){const i=ao(e);if(i||e.useClass){const o=(e.useClass||e).prototype.ngOnDestroy;if(o){const s=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const t=s.indexOf(n);-1===t?s.push(n,[r,o]):s[t+1].push(r,o)}else s.push(n,o)}}}function ls(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function hs(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function ds(t,e,n,r){return fs(this.multi,[])}function ps(t,e,n,r){const i=this.multi;let o;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=Ze(n,n[1],this.providerFactory.index,r);o=e.slice(0,t),fs(i,o);for(let n=t;n<e.length;n++)o.push(e[n])}else o=[],fs(i,o);return o}function fs(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function gs(t,e=[]){return n=>{n.providersResolver=(n,r)=>function(t,e,n){const r=Vt();if(r.firstCreatePass){const i=gt(t);us(n,r.data,r.blueprint,i,!0),us(e,r.data,r.blueprint,i,!1)}}(n,r?r(t):t,e)}}class ms{}class ys{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${l(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let vs=(()=>{class t{}return t.NULL=new ys,t})();function _s(...t){}function bs(t,e){return new Cs(At(t,e))}const ws=function(){return bs(Zt(),jt())};let Cs=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=ws,t})();function Ts(t){return t instanceof Cs?t.nativeElement:t}class Ss{}let Es=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>xs(),t})();const xs=function(){const t=jt(),e=Rt(Zt().index,t);return function(t){return t[11]}(lt(e)?e:t)};let Is=(()=>{class t{}return t.\u0275prov=b({token:t,providedIn:"root",factory:()=>null}),t})();class ks{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const As=new ks("12.0.0");class Os{constructor(){}supports(t){return bo(t)}create(t){return new Rs(t)}}const Ps=(t,e)=>e;class Rs{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Ps}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const o=!n||e&&e.currentIndex<Fs(n,r,i)?e:n,s=Fs(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);const t=s-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,o=r+n;e<=o&&o<t&&(i[n]=r+1)}i[o.previousIndex]=e-t}}s!==a&&t(o,s,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!bo(t))throw new Error(`Error trying to diff '${l(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,n,r,e)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),o=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[vo()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,t,r,e)),Object.is(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),o=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):t=this._addAfter(new Ns(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new Ls),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Ls),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class Ns{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Ds{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class Ls{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new Ds,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Fs(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class Us{constructor(){}supports(t){return t instanceof Map||wo(t)}create(){return new Ms}}class Ms{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||wo(t)))throw new Error(`Error trying to diff '${l(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new qs(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class qs{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function js(){return new Vs([new Os])}let Vs=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||js()),deps:[[t,new wn,new bn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=b({token:t,providedIn:"root",factory:js}),t})();function Bs(){return new Zs([new Us])}let Zs=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||Bs()),deps:[[t,new wn,new bn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=b({token:t,providedIn:"root",factory:Bs}),t})();function Gs(t,e,n,r,i=!1){for(;null!==n;){const o=e[n.index];if(null!==o&&r.push(It(o)),ht(o))for(let t=ct;t<o.length;t++){const e=o[t],n=e[1].firstChild;null!==n&&Gs(e[1],e,n,r)}const s=n.type;if(8&s)Gs(t,e,n.child,r);else if(32&s){const t=vr(n,e);let i;for(;i=t();)r.push(i)}else if(16&s){const t=Lr(e,n);if(Array.isArray(t))r.push(...t);else{const n=_r(e[16]);Gs(n[1],n,t,r,!0)}}n=i?n.projectionNext:n.next}return r}class zs{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return Gs(e,t,e.firstChild,[])}get context(){return this._lView[8]}set context(t){this._lView[8]=t}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(ht(t)){const e=t[8],n=e?e.indexOf(this):-1;n>-1&&(xr(t,n),on(e,n))}this._attachedToViewContainer=!1}Ir(this._lView[1],this._lView)}onDestroy(t){bi(this._lView[1],this._lView,null,t)}markForCheck(){Mi(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){qi(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){Kt(!0);try{qi(t,e,n)}finally{Kt(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var t;this._appRef=null,Mr(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class Hs extends zs{constructor(t){super(t),this._view=t}detectChanges(){ji(this._view)}checkNoChanges(){!function(t){Kt(!0);try{ji(t)}finally{Kt(!1)}}(this._view)}get context(){return null}}const Ws=function(t){return function(t,e,n){if(pt(t)&&!n){const n=Rt(t.index,e);return new zs(n,n)}return 47&t.type?new zs(e[16],e):null}(Zt(),jt(),16==(16&t))};let Ks=(()=>{class t{}return t.__NG_ELEMENT_ID__=Ws,t})();const Ys=[new Us],Qs=new Vs([new Os]),$s=new Zs(Ys),Js=function(){return na(Zt(),jt())};let Xs=(()=>{class t{}return t.__NG_ELEMENT_ID__=Js,t})();const ta=Xs,ea=class extends ta{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=ci(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),di(e,n,t),new zs(n)}};function na(t,e){return 4&t.type?new ea(e,t,bs(t,e)):null}class ra{}class ia{}const oa=function(){return ha(Zt(),jt())};let sa=(()=>{class t{}return t.__NG_ELEMENT_ID__=oa,t})();const aa=sa,ua=class extends aa{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return bs(this._hostTNode,this._hostLView)}get injector(){return new He(this._hostTNode,this._hostLView)}get parentInjector(){const t=De(this._hostTNode,this._hostLView);if(Ee(t)){const e=Ie(t,this._hostLView),n=xe(t);return new He(e[1].data[n+8],e)}return new He(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=ca(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-ct}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const o=n||this.parentInjector;if(!i&&null==t.ngModule&&o){const t=o.get(ra,null);t&&(i=t)}const s=t.create(o,r,void 0,i);return this.insert(s.hostView,e),s}insert(t,e){const n=t._lView,r=n[1];if(ht(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new ua(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e),o=this._lContainer;!function(t,e,n,r){const i=ct+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-ct?(e[4]=n[i],rn(n,ct+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[17];null!==s&&n!==s&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,o,i);const s=Fr(i,o),a=n[11],u=Rr(a,o[7]);return null!==u&&function(t,e,n,r,i,o){r[0]=i,r[6]=e,Mr(t,r,n,1,i,o)}(r,o[6],a,n,u,s),t.attachToViewContainerRef(),rn(la(o),i,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=ca(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=xr(this._lContainer,e);n&&(on(la(this._lContainer),e),Ir(n[1],n))}detach(t){const e=this._adjustIndex(t,-1),n=xr(this._lContainer,e);return n&&null!=on(la(this._lContainer),e)?new zs(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function ca(t){return t[8]}function la(t){return t[8]||(t[8]=[])}function ha(t,e){let n;const r=e[t.index];if(ht(r))n=r;else{let i;if(8&t.type)i=It(r);else{const n=e[11];i=n.createComment("");const r=At(t,e);Ar(n,Rr(n,r),i,function(t,e){return Et(t)?t.nextSibling(e):e.nextSibling}(n,r),!1)}e[t.index]=n=Ni(r,e,i,t),Ui(e,n)}return new ua(n,t,e)}const da={};class pa extends vs{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=st(t);return new ma(e,this.ngModule)}}function fa(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const ga=new Je("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>gr});class ma extends ms{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(Jr).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return fa(this.componentDef.inputs)}get outputs(){return fa(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const o=t.get(n,da,i);return o!==da||r===da?o:e.get(n,r,i)}}}(t,r.injector):t,o=i.get(Ss,xt),s=i.get(Is,null),a=o.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",c=n?function(t,e,n){if(Et(t))return t.selectRootElement(e,n===L.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):Sr(o.createRenderer(null,this.componentDef),u,function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(u)),l=this.componentDef.onPush?576:528,h={components:[],scheduler:gr,clean:Bi,playerHandler:null,flags:0},d=_i(0,null,null,1,0,null,null,null,null,null),p=ci(null,d,h,l,null,null,o,a,s,i);let f,g;re(p);try{const t=function(t,e,n,r,i,o){const s=n[1];n[20]=t;const a=li(s,20,2,"#host",null),u=a.mergedAttrs=e.hostAttrs;null!==u&&(Wi(a,u,!0),null!==t&&(be(i,t,u),null!==a.classes&&Vr(i,t,a.classes),null!==a.styles&&jr(i,t,a.styles)));const c=r.createRenderer(t,e),l=ci(n,vi(e),null,e.onPush?64:16,n[20],a,r,c,null,null);return s.firstCreatePass&&(Le(Pe(a,n),s,e.type),xi(s,a),ki(a,n.length,1)),Ui(n,l),n[20]=l}(c,this.componentDef,p,o,a);if(c)if(n)be(a,c,["ng-version",As.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!Kr(i))break;i=o}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&be(a,c,t),e&&e.length>0&&Vr(a,c,e.join(" "))}if(g=Ot(d,ut),void 0!==e){const t=g.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}f=function(t,e,n,r,i){const o=n[1],s=function(t,e,n){const r=Zt();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Ai(t,r,e,hi(t,e,1,null),n));const i=Ze(e,t,r.directiveStart,r);cr(i,e);const o=At(r,e);return o&&cr(o,e),i}(o,n,e);if(r.components.push(s),t[8]=s,i&&i.forEach(t=>t(s,e)),e.contentQueries){const t=Zt();e.contentQueries(1,s,t.directiveStart)}const a=Zt();return!o.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(le(a.index),Si(n[1],a,0,a.directiveStart,a.directiveEnd,e),Ei(e,s)),s}(t,this.componentDef,p,h,[lo]),di(d,p,null)}finally{ue()}return new ya(this.componentType,f,bs(g,p),p,g)}}class ya extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.instance=e,this.hostView=this.changeDetectorRef=new Hs(r),this.componentType=t}get injector(){return new He(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}const va=new Map;class _a extends ra{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new pa(this);const n=at(t),r=t[W]||null;r&&as(r),this._bootstrapComponents=mr(n.bootstrap),this._r3Injector=eo(t,e,[{provide:ra,useValue:this},{provide:vs,useValue:this.componentFactoryResolver}],l(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=co.THROW_IF_NOT_FOUND,n=A.Default){return t===co||t===ra||t===Ki?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class ba extends ia{constructor(t){super(),this.moduleType=t,null!==at(t)&&function(t){const e=new Set;!function t(n){const r=at(n,!0),i=r.id;null!==i&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${l(e)} vs ${l(e.name)}`)}(i,va.get(i),n),va.set(i,n));const o=mr(r.imports);for(const s of o)e.has(s)||(e.add(s),t(s))}(t)}(t)}create(t){return new _a(this.moduleType,t)}}function wa(t,e,n,r){return Sa(jt(),Yt(),t,e,n,r)}function Ca(t,e,n,r,i){return Ea(jt(),Yt(),t,e,n,r,i)}function Ta(t,e){const n=t[e];return n===Xr?void 0:n}function Sa(t,e,n,r,i,o){const s=e+n;return To(t,s,i)?Co(t,s+1,o?r.call(o,i):r(i)):Ta(t,s+1)}function Ea(t,e,n,r,i,o,s){const a=e+n;return function(t,e,n,r){const i=To(t,e,n);return To(t,e+1,r)||i}(t,a,i,o)?Co(t,a+2,s?r.call(s,i,o):r(i,o)):Ta(t,a+2)}function xa(t,e){const n=Vt();let r;const i=t+ut;n.firstCreatePass?(r=function(t,e){if(e)for(let n=e.length-1;n>=0;n--){const r=e[n];if(t===r.name)return r}throw new m("302",`The pipe '${t}' could not be found!`)}(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks||(n.destroyHooks=[])).push(i,r.onDestroy)):r=n.data[i];const o=r.factory||(r.factory=mt(r.type)),s=P(Io);try{const t=Ae(!1),e=o();return Ae(t),function(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}(n,jt(),i,e),e}finally{P(s)}}function Ia(t,e,n){const r=t+ut,i=jt(),o=Pt(i,r);return Oa(i,Aa(i,r)?Sa(i,Yt(),e,o.transform,n,o):o.transform(n))}function ka(t,e,n,r){const i=t+ut,o=jt(),s=Pt(o,i);return Oa(o,Aa(o,i)?Ea(o,Yt(),e,s.transform,n,r,s):s.transform(n,r))}function Aa(t,e){return t[1].data[e].pure}function Oa(t,e){return _o.isWrapped(e)&&(e=_o.unwrap(e),t[Mt.lFrame.bindingIndex]=Xr),e}function Pa(t){return e=>{setTimeout(t,void 0,e)}}const Ra=class extends r.xQ{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){var r,o,s;let a=t,u=e||(()=>null),c=n;if(t&&"object"==typeof t){const e=t;a=null===(r=e.next)||void 0===r?void 0:r.bind(e),u=null===(o=e.error)||void 0===o?void 0:o.bind(e),c=null===(s=e.complete)||void 0===s?void 0:s.bind(e)}this.__isAsync&&(u=Pa(u),a&&(a=Pa(a)),c&&(c=Pa(c)));const l=super.subscribe({next:a,error:u,complete:c});return t instanceof i.w&&t.add(l),l}};function Na(){return this._results[vo()]()}class Da{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=vo(),n=Da.prototype;n[e]||(n[e]=Na)}get changes(){return this._changes||(this._changes=new Ra)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const n=this;n.dirty=!1;const r=en(t);(this._changesDetected=!function(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}(n._results,r,e))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}notifyOnChanges(){!this._changes||!this._changesDetected&&this._emitDistinctChangesOnly||this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class La{constructor(t){this.queryList=t,this.matches=null}clone(){return new La(this.queryList)}setDirty(){this.queryList.setDirty()}}class Fa{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);r.push(this.queries[n.indexInDeclarationView].clone())}return new Fa(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==Wa(t,e).matches&&this.queries[e].setDirty()}}class Ua{constructor(t,e,n=null){this.predicate=t,this.flags=e,this.read=n}}class Ma{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,i=this.getByIndex(n).embeddedTView(t,r);i&&(i.indexInDeclarationView=n,null!==e?e.push(i):e=[i])}return null!==e?new Ma(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class qa{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new qa(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(t,e,ja(e,i)),this.matchTNodeWithReadOption(t,e,Be(e,t,i,!1,!1))}else n===Xs?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,Be(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===Cs||r===sa||r===Xs&&4&e.type)this.addMatch(e.index,-2);else{const n=Be(e,t,r,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function ja(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function Va(t,e,n,r){return-1===n?function(t,e){return 11&t.type?bs(t,e):4&t.type?na(t,e):null}(e,t):-2===n?function(t,e,n){return n===Cs?bs(e,t):n===Xs?na(e,t):n===sa?ha(e,t):void 0}(t,e,r):Ze(t,t[1],n,e)}function Ba(t,e,n,r){const i=e[19].queries[r];if(null===i.matches){const r=t.data,o=n.matches,s=[];for(let t=0;t<o.length;t+=2){const i=o[t];s.push(i<0?null:Va(e,r[i],o[t+1],n.metadata.read))}i.matches=s}return i.matches}function Za(t,e,n,r){const i=t.queries.getByIndex(n),o=i.matches;if(null!==o){const s=Ba(t,e,i,n);for(let t=0;t<o.length;t+=2){const n=o[t];if(n>0)r.push(s[t/2]);else{const i=o[t+1],s=e[-n];for(let t=ct;t<s.length;t++){const e=s[t];e[17]===e[3]&&Za(e[1],e,i,r)}if(null!==s[9]){const t=s[9];for(let e=0;e<t.length;e++){const n=t[e];Za(n[1],n,i,r)}}}}}return r}function Ga(t){const e=jt(),n=Vt(),r=Xt();te(r+1);const i=Wa(n,r);if(t.dirty&&Nt(e)===(2==(2&i.metadata.flags))){if(null===i.matches)t.reset([]);else{const o=i.crossesNgTemplate?Za(n,e,r,[]):Ba(n,e,i,r);t.reset(o,Ts),t.notifyOnChanges()}return!0}return!1}function za(t,e,n,r){const i=Vt();if(i.firstCreatePass){const o=Zt();(function(t,e,n){null===t.queries&&(t.queries=new Ma),t.queries.track(new qa(e,n))})(i,new Ua(e,n,r),o.index),function(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(i,t),2==(2&n)&&(i.staticContentQueries=!0)}!function(t,e,n){const r=new Da(4==(4&n));bi(t,e,r,r.destroy),null===e[19]&&(e[19]=new Fa),e[19].queries.push(new La(r))}(i,jt(),n)}function Ha(){return t=jt(),e=Xt(),t[19].queries[e].queryList;var t,e}function Wa(t,e){return t.queries.getByIndex(e)}const Ka=new Je("Application Initializer");let Ya=(()=>{class t{constructor(t){this.appInits=t,this.resolve=_s,this.reject=_s,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();if(Do(e))t.push(e);else if(Fo(e)){const n=new Promise((t,n)=>{e.subscribe({complete:t,error:n})});t.push(n)}}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(mn(Ka,8))},t.\u0275prov=b({token:t,factory:t.\u0275fac}),t})();const Qa=new Je("AppId"),$a={provide:Qa,useFactory:function(){return`${Ja()}${Ja()}${Ja()}`},deps:[]};function Ja(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Xa=new Je("Platform Initializer"),tu=new Je("Platform ID"),eu=new Je("appBootstrapListener");let nu=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=b({token:t,factory:t.\u0275fac}),t})();const ru=new Je("LocaleId"),iu=new Je("DefaultCurrencyCode");class ou{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const su=function(t){return new ba(t)},au=su,uu=function(t){return Promise.resolve(su(t))},cu=function(t){const e=su(t),n=mr(at(t).declarations).reduce((t,e)=>{const n=st(e);return n&&t.push(new ma(n)),t},[]);return new ou(e,n)},lu=cu,hu=function(t){return Promise.resolve(cu(t))};let du=(()=>{class t{constructor(){this.compileModuleSync=au,this.compileModuleAsync=uu,this.compileModuleAndAllComponentsSync=lu,this.compileModuleAndAllComponentsAsync=hu}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=b({token:t,factory:t.\u0275fac}),t})();const pu=(()=>Promise.resolve(0))();function fu(t){"undefined"==typeof Zone?pu.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class gu{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ra(!1),this.onMicrotaskEmpty=new Ra(!1),this.onStable=new Ra(!1),this.onError=new Ra(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&e,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function(){let t=j.requestAnimationFrame,e=j.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=()=>{!function(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(j,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,vu(t),t.isCheckStableRunning=!0,yu(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),vu(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{try{return _u(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||t.shouldCoalesceRunChangeDetection)&&e(),bu(t)}},onInvoke:(n,r,i,o,s,a,u)=>{try{return _u(t),n.invoke(i,o,s,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),bu(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,vu(t),yu(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(r)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!gu.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(gu.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,mu,_s,_s);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const mu={};function yu(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function vu(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function _u(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function bu(t){t._nesting--,yu(t)}class wu{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ra,this.onMicrotaskEmpty=new Ra,this.onStable=new Ra,this.onError=new Ra}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let Cu=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{gu.assertNotInAngularZone(),fu(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())fu(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(mn(gu))},t.\u0275prov=b({token:t,factory:t.\u0275fac}),t})(),Tu=(()=>{class t{constructor(){this._applications=new Map,Iu.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return Iu.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=b({token:t,factory:t.\u0275fac}),t})();class Su{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}function Eu(t){Iu=t}let xu,Iu=new Su,ku=!0,Au=!1;function Ou(){return Au=!0,ku}function Pu(){if(Au)throw new Error("Cannot enable prod mode after platform setup.");ku=!1}const Ru=new Je("AllowMultipleToken");class Nu{constructor(t,e){this.name=t,this.token=e}}function Du(t,e,n=[]){const r=`Platform: ${e}`,i=new Je(r);return(e=[])=>{let o=Lu();if(!o||o.injector.get(Ru,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:Qi,useValue:"platform"});!function(t){if(xu&&!xu.destroyed&&!xu.injector.get(Ru,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");xu=t.get(Fu);const e=t.get(Xa,null);e&&e.forEach(t=>t())}(co.create({providers:t,name:r}))}return function(t){const e=Lu();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function Lu(){return xu&&!xu.destroyed?xu:null}let Fu=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new wu:("zone.js"===t?void 0:t)||new gu({enableLongStackTrace:Ou(),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),n}(e?e.ngZone:void 0,{ngZoneEventCoalescing:e&&e.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:e&&e.ngZoneRunCoalescing||!1}),r=[{provide:gu,useValue:n}];return n.run(()=>{const e=co.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),o=i.injector.get(fr,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const t=n.onError.subscribe({next:t=>{o.handleError(t)}});i.onDestroy(()=>{qu(this._modules,i),t.unsubscribe()})}),function(t,e,n){try{const r=n();return Do(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,n,()=>{const t=i.injector.get(Ya);return t.runInitializers(),t.donePromise.then(()=>(as(i.injector.get(ru,os)||os),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=Uu({},e);return function(t,e,n){const r=new ba(n);return Promise.resolve(r)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(Mu);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${l(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(mn(co))},t.\u0275prov=b({token:t,factory:t.\u0275fac}),t})();function Uu(t,e){return Array.isArray(e)?e.reduce(Uu,t):Object.assign(Object.assign({},t),e)}let Mu=(()=>{class t{constructor(t,e,n,r,i){this._zone=t,this._injector=e,this._exceptionHandler=n,this._componentFactoryResolver=r,this._initStatus=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const u=new o.y(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),c=new o.y(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{gu.assertNotInAngularZone(),fu(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{gu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=(0,s.T)(u,c.pipe((0,a.B)()))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof ms?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(ra),i=n.create(co.NULL,[],e||n.selector,r),o=i.location.nativeElement,s=i.injector.get(Cu,null),a=s&&i.injector.get(Tu);return s&&a&&a.registerApplication(o,s),i.onDestroy(()=>{this.detachView(i.hostView),qu(this.components,i),a&&a.unregisterApplication(o)}),this._loadComponent(i),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;qu(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(eu,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(mn(gu),mn(co),mn(fr),mn(vs),mn(Ya))},t.\u0275prov=b({token:t,factory:t.\u0275fac}),t})();function qu(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class ju{}class Vu{}const Bu={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let Zu=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||Bu}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split("#");return void 0===r&&(r="default"),n(8255)(e).then(t=>t[r]).then(t=>Gu(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n(8255)(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+i]).then(t=>Gu(t,e,r))}}return t.\u0275fac=function(e){return new(e||t)(mn(du),mn(Vu,8))},t.\u0275prov=b({token:t,factory:t.\u0275fac}),t})();function Gu(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const zu=function(t){return null},Hu=Du(null,"core",[{provide:tu,useValue:"unknown"},{provide:Fu,deps:[co]},{provide:Tu,deps:[]},{provide:nu,deps:[]}]),Wu=[{provide:Mu,useClass:Mu,deps:[gu,co,fr,vs,Ya]},{provide:ga,deps:[gu],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:Ya,useClass:Ya,deps:[[new bn,Ka]]},{provide:du,useClass:du,deps:[]},$a,{provide:Vs,useFactory:function(){return Qs},deps:[]},{provide:Zs,useFactory:function(){return $s},deps:[]},{provide:ru,useFactory:function(t){return as(t=t||"undefined"!=typeof $localize&&$localize.locale||os),t},deps:[[new _n(ru),new bn,new wn]]},{provide:iu,useValue:"USD"}];let Ku=(()=>{class t{constructor(t){}}return t.\u0275fac=function(e){return new(e||t)(mn(Mu))},t.\u0275mod=et({type:t}),t.\u0275inj=w({providers:Wu}),t})()},2346:(t,e,n)=>{"use strict";n.d(e,{hO:()=>I,xv:()=>_,Dh:()=>v,Ot:()=>b,HU:()=>p,GT:()=>y,sI:()=>E,on:()=>C,ss:()=>f,pX:()=>m,yq:()=>T});var r=n(8489),i=n(8569),o=n(6599),s=n(4187),a=n(9098),u=n(5366),c=n(1858);function l(){}t=n.hmd(t);class h{constructor(t,e=r.N){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){const r=this.zone;return this.delegate.schedule(function(e){r.runGuarded(()=>{t.apply(this,[e])})},e,n)}}class d{constructor(t){this.zone=t,this.task=null}call(t,e){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",l,{},l,l)),e.pipe((0,o.b)({next:n,complete:n,error:n})).subscribe(t).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class p{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new h(Zone.current)),this.insideAngular=t.run(()=>new h(Zone.current,i.z))}}function f(t){return function(e){return(e=e.lift(new d(t.ngZone))).pipe((0,s.R)(t.outsideAngular),(0,a.QV)(t.insideAngular))}}const g=["ngOnDestroy"],m=(t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{var i;if(t[o])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(o,t[o]),t[o];if(g.indexOf(o)>-1)return()=>{};const s=e.toPromise().then(t=>{const e=t&&t[o];return"function"==typeof e?e.bind(t):e&&e.then?e.then(t=>n.run(()=>t)):n.run(()=>e)});return new Proxy(()=>{},{get:(t,e)=>s[e],apply:(t,e,n)=>s.then(t=>{var e;const i=t&&t(...n);return(null===(e=null==r?void 0:r.spy)||void 0===e?void 0:e.apply)&&r.spy.apply(o,n,i),i})})})}),y=(t,e)=>{e.forEach(e=>{Object.getOwnPropertyNames(e.prototype||e).forEach(n=>{Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(e.prototype||e,n))})})},v=new u.OlP("angularfire2.app.options"),_=new u.OlP("angularfire2.app.nameOrConfig");class b{}const w=new u.GfV("6.1.5");function C(e,n,r){const i="object"==typeof r&&r||{};i.name=i.name||"string"==typeof r&&r||"[DEFAULT]";const o=c.Z.apps.filter(t=>t&&t.name===i.name)[0]||n.runOutsideAngular(()=>c.Z.initializeApp(e,i));try{JSON.stringify(e)!==JSON.stringify(o.options)&&S("error",`${o.name} Firebase App already initialized with different options${t.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(s){}return o}const T=()=>{S("warn","You may need to import 'firebase/auth' manually in your component rather than rely on AngularFireAuth's dynamic import, when using the emulator suite https://github.com/angular/angularfire/issues/2656")},S=(t,...e)=>{(0,u.X6Q)()&&"undefined"!=typeof console&&console[t](...e)};function E(e,n,r,i,o){const[s,...a]=globalThis.\u0275AngularfireInstanceCache.get(e)||[];if(s){try{o.some((t,e)=>{const n=a[e];return t&&"object"==typeof t?JSON.stringify(t)!==JSON.stringify(n):t!==n})&&S("error",`${n} was already initialized on the ${r.name} Firebase App instance with different settings.${t.hot?" You may need to reload as Firebase is not HMR aware.":""}`)}catch(u){}return s}{const t=i();return globalThis.\u0275AngularfireInstanceCache.set(e,[t,...o]),t}}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=new Map);const x={provide:b,useFactory:C,deps:[v,u.R0b,[new u.FiY,_]]};let I=(()=>{class t{constructor(t){c.Z.registerVersion("angularfire",w.full,t.toString()),c.Z.registerVersion("angular",u.q4F.full)}static initializeApp(e,n){return{ngModule:t,providers:[{provide:v,useValue:e},{provide:_,useValue:n}]}}}return t.\u0275fac=function(e){return new(e||t)(u.LFG(u.Lbi))},t.\u0275mod=u.oAB({type:t}),t.\u0275inj=u.cJS({providers:[x]}),t})()},1062:(t,e,n)=>{"use strict";n.d(e,{Z:()=>w});var r,i,o=n(4762),s=n(250),a=n(5119),u=n(308),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new s.LL("app","Firebase",c),h="@firebase/app",d="[DEFAULT]",p=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/app-check"]="fire-app-check",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),f=new u.Yd("@firebase/app"),g=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=(0,s.p$)(t),this.container=new a.H0(e.name),this._addComponent(new a.wA("app",function(){return r},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(t){return r._addComponent(t)})}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map(function(t){return t.delete()}))}).then(function(){t.isDeleted_=!0})},t.prototype._getService=function(t,e){var n;void 0===e&&(e=d),this.checkDestroyed_();var r=this.container.getProvider(t);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=d),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){f.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();g.prototype.name&&g.prototype.options||g.prototype.delete||console.log("dc");var m=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=d);var a=o.name;if("string"!=typeof a||!a)throw l.create("bad-app-name",{appName:String(a)});if((0,s.r3)(e,a))throw l.create("duplicate-app",{appName:a});var u=new t(n,o,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=p[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),u=e.match(/\s|\//);if(s||u){var c=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&u&&c.push("and"),u&&c.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void f.warn(c.join(" "))}o(new a.wA(i+"-version",function(){return{library:i,version:e}},"VERSION"))},setLogLevel:u.Ub,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument");(0,u.Am)(t,e)},apps:null,SDK_VERSION:"8.6.1",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(!(0,s.r3)(e,t=t||d))throw l.create("no-app",{appName:t});return e[t]}function o(o){var a=o.name;if(n.has(a))return f.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===o.type?r[a]:null;if(n.set(a,o),"PUBLIC"===o.type){var u=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[a])throw l.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==o.serviceProps&&(0,s.ZB)(u,o.serviceProps),r[a]=u,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,a).apply(this,o.multipleInstances?t:[])}}for(var c=0,h=Object.keys(e);c<h.length;c++)e[h[c]]._addComponent(o);return"PUBLIC"===o.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map(function(t){return e[t]})}}),i.App=t,r}(g);return e.INTERNAL=(0,o.pi)((0,o.pi)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){(0,s.ZB)(e,t)},createSubscribe:s.ne,ErrorFactory:s.LL,deepExtend:s.ZB}),e}(),y=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null}).filter(function(t){return t}).join(" ")},t}();if((0,s.jU)()&&void 0!==self.firebase){f.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var v=self.firebase.SDK_VERSION;v&&v.indexOf("LITE")>=0&&f.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var _=m.initializeApp;m.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,s.UG)()&&f.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),_.apply(void 0,t)};var b=m;!function(t,e){t.INTERNAL.registerComponent(new a.wA("platform-logger",function(t){return new y(t)},"PRIVATE")),t.registerVersion(h,"0.6.22",void 0),t.registerVersion("fire-js","")}(b);const w=b},5119:(t,e,n)=>{"use strict";n.d(e,{wA:()=>o,H0:()=>u,zt:()=>a});var r=n(4762),i=n(250),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),s="[DEFAULT]",a=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.onInitCallbacks=new Set}return t.prototype.get=function(t){void 0===t&&(t=s);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.BH;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=(0,r.pi)({identifier:s,optional:!1},t),n=e.optional,i=this.normalizeInstanceIdentifier(e.identifier);if(!this.isInitialized(i)&&!this.shouldAutoInitialize()){if(n)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(n)return null;throw o}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:s})}catch(h){}try{for(var i=(0,r.XA)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var a=(0,r.CR)(o.value,2),u=a[1],c=this.normalizeInstanceIdentifier(a[0]);try{var l=this.getOrInitializeService({instanceIdentifier:c});u.resolve(l)}catch(h){}}}catch(d){e={error:d}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t=s),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return(0,r.mG)(this,void 0,void 0,function(){var t;return(0,r.Jh)(this,function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all((0,r.ev)((0,r.ev)([],(0,r.CR)(t.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}))),(0,r.CR)(t.filter(function(t){return"_delete"in t}).map(function(t){return t._delete()}))))];case 1:return e.sent(),[2]}})})},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=s),this.instances.has(t)},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var i=t.instanceIdentifier,o=t.options,a=void 0===o?{}:o,u=this.normalizeInstanceIdentifier(void 0===i?s:i);if(this.isInitialized(u))throw Error(this.name+"("+u+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var c=this.getOrInitializeService({instanceIdentifier:u,options:a});try{for(var l=(0,r.XA)(this.instancesDeferred.entries()),h=l.next();!h.done;h=l.next()){var d=(0,r.CR)(h.value,2),p=d[1];u===this.normalizeInstanceIdentifier(d[0])&&p.resolve(c)}}catch(f){e={error:f}}finally{try{h&&!h.done&&(n=l.return)&&n.call(l)}finally{if(e)throw e.error}}return this.invokeOnInitCallbacks(c,u),c},t.prototype.onInit=function(t){var e=this;return this.onInitCallbacks.add(t),function(){e.onInitCallbacks.delete(t)}},t.prototype.invokeOnInitCallbacks=function(t,e){var n,i;try{for(var o=(0,r.XA)(this.onInitCallbacks),s=o.next();!s.done;s=o.next()){var a=s.value;try{a(t,e)}catch(u){}}}catch(c){n={error:c}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===s?void 0:e),options:i}),this.instances.set(n,o),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(a){}return o||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:s:t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}(),u=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new a(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},2107:(t,e,n)=>{"use strict";var r=n(1062),i=n(5119),o=n(250),s=n(4762),a=n(308);t=n.hmd(t);var u="";function c(t){u=t}var l,h=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),(0,o.Pz)(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:(0,o.cI)(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),d=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return(0,o.r3)(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),p=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new h(e)}}catch(n){}return new d},f=p("localStorage"),g=p("sessionStorage"),m=new a.Yd("@firebase/database"),y=(l=1,function(){return l++}),v=function(t){var e=(0,o.dS)(t),n=new o.gQ;n.update(e);var r=n.digest();return o.US.encodeByteArray(r)},_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=_.apply(null,i):n+="object"==typeof i?(0,o.Pz)(i):i,n+=" "}return n},b=null,w=!0,C=function(t,e){(0,o.hu)(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(m.logLevel=a.in.VERBOSE,b=m.log.bind(m),e&&g.set("logging_enabled",!0)):"function"==typeof t?b=t:(b=null,g.remove("logging_enabled"))},T=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===w&&(w=!1,null===b&&!0===g.get("logging_enabled")&&C(!0)),b){var n=_.apply(null,t);b(n)}},S=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];T.apply(void 0,(0,s.ev)([t],(0,s.CR)(e)))}},E=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+_.apply(void 0,(0,s.ev)([],(0,s.CR)(t)));m.error(n)},x=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+_.apply(void 0,(0,s.ev)([],(0,s.CR)(t)));throw m.error(n),new Error(n)},I=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+_.apply(void 0,(0,s.ev)([],(0,s.CR)(t)));m.warn(n)},k=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},A="[MIN_NAME]",O="[MAX_NAME]",P=function(t,e){if(t===e)return 0;if(t===A||e===O)return-1;if(e===A||t===O)return 1;var n=q(t),r=q(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},R=function(t,e){return t===e?0:t<e?-1:1},N=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+(0,o.Pz)(e))},D=function(t){if("object"!=typeof t||null===t)return(0,o.Pz)(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",i=0;i<e.length;i++)0!==i&&(r+=","),r+=(0,o.Pz)(e[i]),r+=":",r+=D(t[e[i]]);return r+"}"},L=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)r.push(t.substring(i,i+e>n?n:i+e));return r};function F(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var U=function(t){var e,n,r,i,s;(0,o.hu)(!k(t),"Invalid JSON number"),0===t?(n=0,r=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,r=Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074))));var a=[];for(s=52;s;s-=1)a.push(r%2?1:0),r=Math.floor(r/2);for(s=11;s;s-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(e?1:0),a.reverse();var u=a.join(""),c="";for(s=0;s<64;s+=8){var l=parseInt(u.substr(s,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()},M=new RegExp("^-?(0*)\\d{1,10}$"),q=function(t){if(M.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},j=function(t){try{t()}catch(e){setTimeout(function(){throw I("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},V=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},B=function(){function t(t,e){var n=this;this.appName_=t,this.appCheckProvider=e,this.appCheck=null==e?void 0:e.getImmediate({optional:!0}),this.appCheck||null==e||e.get().then(function(t){return n.appCheck=t})}return t.prototype.getToken=function(t){var e=this;return this.appCheck?this.appCheck.getToken(t):new Promise(function(n,r){setTimeout(function(){e.appCheck?e.getToken(t).then(n,r):n(null)},0)})},t.prototype.addTokenChangeListener=function(t){var e;null===(e=this.appCheckProvider)||void 0===e||e.get().then(function(e){return e.addTokenListener(t)})},t.prototype.notifyForInvalidToken=function(){I('Provided AppCheck credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly.')},t}(),Z=function(){function t(t,e,n){var r=this;this.appName_=t,this.firebaseOptions_=e,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit(function(t){return r.auth_=t})}return t.prototype.getToken=function(t){var e=this;return this.auth_?this.auth_.getToken(t).catch(function(t){return t&&"auth/token-not-initialized"===t.code?(T("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)}):new Promise(function(n,r){setTimeout(function(){e.auth_?e.getToken(t).then(n,r):n(null)},0)})},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(function(e){return e.addAuthTokenListener(t)})},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then(function(e){return e.removeAuthTokenListener(t)})},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';I(t+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.')},t}(),G=function(){function t(t){this.accessToken=t}return t.prototype.getToken=function(t){return Promise.resolve({accessToken:this.accessToken})},t.prototype.addTokenChangeListener=function(t){t(this.accessToken)},t.prototype.removeTokenChangeListener=function(t){},t.prototype.notifyForInvalidToken=function(){},t.OWNER="owner",t}(),z=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,H="websocket",W="long_polling",K=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===s&&(s=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=f.get("host:"+t)||this._host}return t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain},Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&f.set("host:"+this._host,this.internalHost))},enumerable:!1,configurable:!0}),t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host+"/"+(this.includeNamespaceInQueryParams?"?ns="+this.namespace:"")},t}();function Y(t,e,n){var r;if((0,o.hu)("string"==typeof e,"typeof type must == string"),(0,o.hu)("object"==typeof n,"typeof params must == object"),e===H)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else{if(e!==W)throw new Error("Unknown connection type: "+e);r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?"}(function(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams})(t)&&(n.ns=t.namespace);var i=[];return F(n,function(t,e){i.push(t+"="+e)}),r+i.join("&")}var Q=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),(0,o.r3)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return(0,o.p$)(this.counters_)},t}(),$={},J={};function X(t){var e=t.toString();return $[e]||($[e]=new Q),$[e]}var tt=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&j(function(){n.onMessage_(t[e])})},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum]&&"break"!==r(););},t}(),et="start",nt="close",rt=function(){function t(t,e,n,r,i,o,s){var a=this;this.connId=t,this.repoInfo=e,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=o,this.lastSessionId=s,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=S(t),this.stats_=X(e),this.urlFn=function(t){return a.appCheckToken&&(t.ac=a.appCheckToken),Y(e,W,t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new tt(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null},Math.floor(3e4)),function(t){if((0,o.Yr)()||"complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(function(){if(!n.isClosed_){n.scriptTagHolder=new it(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=(0,s.CR)(t,5),i=r[0],o=r[1],a=r[2];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===et)n.id=o,n.password=a;else{if(i!==nt)throw new Error("Unrecognized command received: "+i);o?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(o,function(){n.onClosed_()})):n.onClosed_()}},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=(0,s.CR)(t,2),i=r[0],o=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,o)},function(){n.onClosed_()},n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),n.applicationId&&(t.p=n.applicationId),n.appCheckToken&&(t.ac=n.appCheckToken),"undefined"!=typeof location&&location.hostname&&z.test(location.hostname)&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,function(){})}})},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!((0,o.Yr)()||!t.forceAllow_&&(t.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=(0,o.Pz)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=(0,o.h$)(e),r=L(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!(0,o.Yr)()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=(0,o.Pz)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),it=function(){function t(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,o.Yr)())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=y(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(s='<script>document.domain="'+document.domain+'";<\/script>');var a="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(u){T("frame writing exception"),u.stack&&T(u.stack),T(u)}}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||T("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)},Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return this.addLongPollTag_(e+=n,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var r=function(){n.outstandingRequests.delete(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,function(){clearTimeout(i),r()})},t.prototype.addTag=function(t,e){var n=this;(0,o.Yr)()?this.doNodeLongPoll(t,e):setTimeout(function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){T("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}},Math.floor(1))},t}(),ot=null;"undefined"!=typeof MozWebSocket?ot=MozWebSocket:"undefined"!=typeof WebSocket&&(ot=WebSocket);var st=function(){function t(e,n,r,i,o,s,a){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=S(this.connId),this.stats_=X(n),this.connURL=t.connectionURL_(n,s,a,i),this.nodeAdmin=n.nodeAdmin}return t.connectionURL_=function(t,e,n,r){var i={v:"5"};return!(0,o.Yr)()&&"undefined"!=typeof location&&location.hostname&&z.test(location.hostname)&&(i.r="f"),e&&(i.s=e),n&&(i.ls=n),r&&(i.ac=r),Y(t,H,i)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,f.set("previous_websocket_failure",!0);try{if((0,o.Yr)()){var r={headers:{"User-Agent":"Firebase/5/"+u+"/"+process.platform+"/"+(this.nodeAdmin?"AdminNode":"Node"),"X-Firebase-GMPID":this.applicationId||""}};this.nodeAdmin?r.headers.Authorization=this.authToken||"":r.headers["X-Firebase-AppCheck"]=this.appCheckToken||"";var i=process.env,s=0===this.connURL.indexOf("wss://")?i.HTTPS_PROXY||i.https_proxy:i.HTTP_PROXY||i.http_proxy;s&&(r.proxy={origin:s}),this.mySock=new ot(this.connURL,[],r)}else this.mySock=new ot(this.connURL,[],r={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(c){this.log_("Error instantiating WebSocket.");var a=c.message||c.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==ot&&!t.forceDisallow_},t.previouslyFailed=function(){return f.isInMemoryStorage||!0===f.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){f.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=(0,o.cI)(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if((0,o.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=(0,o.Pz)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=L(e,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()},Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),at=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[rt,st]},enumerable:!1,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,i=st&&st.isAvailable(),o=i&&!st.previouslyFailed();if(e.webSocketOnly&&(i||I("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[st];else{var a=this.transports_=[];try{for(var u=(0,s.XA)(t.ALL_TRANSPORTS),c=u.next();!c.done;c=u.next()){var l=c.value;l&&l.isAvailable()&&a.push(l)}}catch(h){n={error:h}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),ut=function(){function t(t,e,n,r,i,o,s,a,u,c){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=o,this.onReady_=s,this.onDisconnect_=a,this.onKill_=u,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=S("c:"+this.id+":"),this.transportManager_=new at(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){t.conn_&&t.conn_.open(n,r)},Math.floor(0));var i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=V(function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))},Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){this.sendData_({t:"d",d:t})},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=N("t",t),n=N("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=N("t",t),n=N("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=N("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?E("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):E("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&I("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),V(function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())},Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):V(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(f.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),ct=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.refreshAppCheckToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),lt=function(){function t(t){this.allowedEvents_=t,this.listeners_={},(0,o.hu)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=(0,s.ev)([],(0,s.CR)(this.listeners_[t])),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){(0,o.hu)(this.allowedEvents_.find(function(e){return e===t}),"Unknown event: "+t)},t}(),ht=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||(0,o.uI)()||(window.addEventListener("online",function(){e.online_||(e.online_=!0,e.trigger("online",!0))},!1),window.addEventListener("offline",function(){e.online_&&(e.online_=!1,e.trigger("online",!1))},!1)),e}return(0,s.ZT)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return(0,o.hu)("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(lt),dt=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t}();function pt(){return new dt("")}function ft(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function gt(t){return t.pieces_.length-t.pieceNum_}function mt(t){var e=t.pieceNum_;return e<t.pieces_.length&&e++,new dt(t.pieces_,e)}function yt(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function vt(t,e){return void 0===e&&(e=0),t.pieces_.slice(t.pieceNum_+e)}function _t(t){if(t.pieceNum_>=t.pieces_.length)return null;for(var e=[],n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new dt(e,0)}function bt(t,e){for(var n=[],r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof dt)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new dt(n,0)}function wt(t){return t.pieceNum_>=t.pieces_.length}function Ct(t,e){var n=ft(t),r=ft(e);if(null===n)return e;if(n===r)return Ct(mt(t),mt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function Tt(t,e){for(var n=vt(t,0),r=vt(e,0),i=0;i<n.length&&i<r.length;i++){var o=P(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1}function St(t,e){if(gt(t)!==gt(e))return!1;for(var n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Et(t,e){var n=t.pieceNum_,r=e.pieceNum_;if(gt(t)>gt(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var xt=function(){return function(t,e){this.errorPrefix_=e,this.parts_=vt(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=(0,o.ug)(this.parts_[n]);It(this)}}();function It(t){if(t.byteLength_>768)throw new Error(t.errorPrefix_+"has a key path longer than 768 bytes ("+t.byteLength_+").");if(t.parts_.length>32)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+kt(t))}function kt(t){return 0===t.parts_.length?"":"in property '"+t.parts_.join(".")+"'"}var At,Ot,Pt=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))},!1),r}return(0,s.ZT)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return(0,o.hu)("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(lt),Rt=1e3,Nt=function(t){function e(n,r,i,s,a,u,c,l){var h=t.call(this)||this;if(h.repoInfo_=n,h.applicationId_=r,h.onDataUpdate_=i,h.onConnectStatus_=s,h.onServerInfoUpdate_=a,h.authTokenProvider_=u,h.appCheckTokenProvider_=c,h.authOverride_=l,h.id=e.nextPersistentConnectionId_++,h.log_=S("p:"+h.id+":"),h.interruptReasons_={},h.listens=new Map,h.outstandingPuts_=[],h.outstandingGets_=[],h.outstandingPutCount_=0,h.outstandingGetCount_=0,h.onDisconnectRequestQueue_=[],h.connected_=!1,h.reconnectDelay_=Rt,h.maxReconnectDelay_=3e5,h.securityDebugCallback_=null,h.lastSessionId=null,h.establishConnectionTimer_=null,h.visible_=!1,h.requestCBHash_={},h.requestNumber_=0,h.realtime_=null,h.authToken_=null,h.appCheckToken_=null,h.forceTokenRefresh_=!1,h.invalidAuthTokenCount_=0,h.invalidAppCheckTokenCount_=0,h.firstConnection_=!0,h.lastConnectionAttemptTime_=null,h.lastConnectionEstablishedTime_=null,l&&!(0,o.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return Pt.getInstance().on("visible",h.onVisible_,h),-1===n.host.indexOf("fblocal")&&ht.getInstance().on("online",h.onOnline_,h),h}return(0,s.ZT)(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r:r,a:t,b:e};this.log_((0,o.Pz)(i)),(0,o.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},e.prototype.get=function(t){var e=this;this.initConnection_();var n=new o.BH,r={p:t._path.toString(),q:t._queryObject},i={action:"g",request:r,onComplete:function(t){var i=t.d;"ok"===t.s?(e.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var s=this.outstandingGets_.length-1;return this.connected_||setTimeout(function(){var t=e.outstandingGets_[s];void 0!==t&&i===t&&(delete e.outstandingGets_[s],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),e.log_("get "+s+" timed out on connection"),n.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(s),n.promise},e.prototype.listen=function(t,e,n,r){this.initConnection_();var i=t._queryIdentifier,s=t._path.toString();this.log_("Listen called for "+s+" "+i),this.listens.has(s)||this.listens.set(s,new Map),(0,o.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,o.hu)(!this.listens.get(s).has(i),"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(s).set(i,a),this.connected_&&this.sendListen_(a)},e.prototype.sendGet_=function(t){var e=this,n=this.outstandingGets_[t];this.sendRequest("g",n.request,function(r){delete e.outstandingGets_[t],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);var s={p:i};t.tag&&(s.q=r._queryObject,s.t=t.tag),s.h=t.hashFn(),this.sendRequest("q",s,function(s){var a=s.d,u=s.s;e.warnOnListenWarnings_(a,r),(n.listens.get(i)&&n.listens.get(i).get(o))===t&&(n.log_("listen response",s),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,a))})},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&(0,o.r3)(t,"w")){var n=(0,o.DV)(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e._queryParams.getIndex().toString()+'"',i=e._path.toString();I("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||(0,o.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.refreshAppCheckToken=function(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},function(){})},e.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=(0,o.w9)(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,function(n){var r=n.s,i=n.d||"error";t.authToken_===e&&("ok"===r?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(r,i))})}},e.prototype.tryAppCheck=function(){var t=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},function(e){var n=e.s,r=e.d||"error";"ok"===n?t.invalidAppCheckTokenCount_=0:t.onAppCheckRevoked_(n,r)})},e.prototype.unlisten=function(t,e){var n=t._path.toString(),r=t._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),(0,o.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t._queryObject,e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},e.prototype.onDisconnectPut=function(t,e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,function(t){r&&setTimeout(function(){r(t.s,t.d)},Math.floor(0))})},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){this.initConnection_();var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)})},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,function(t){"ok"!==t.s&&e.log_("reportStats","Error sending stats: "+t.d)})}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+(0,o.Pz)(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"apc"===t?this.onAppCheckRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):E("Unrecognized action received from server: "+(0,o.Pz)(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;(0,o.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){e.establishConnectionTimer_=null,e.establishConnection_()},Math.floor(t))},e.prototype.initConnection_=function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Rt,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Rt,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Rt),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){return(0,s.mG)(this,void 0,void 0,function(){var t,n,r,i,a,u,c,l,h,d,p,f,g,m=this;return(0,s.Jh)(this,function(y){switch(y.label){case 0:if(!this.shouldReconnect_())return[3,4];this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+e.nextConnectionId_++,a=this.lastSessionId,u=!1,c=null,this.realtime_={close:l=function(){c?c.close():(u=!0,r())},sendRequest:function(t){(0,o.hu)(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(t)}},h=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,y.label=1;case 1:return y.trys.push([1,3,,4]),[4,Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)])];case 2:return d=s.CR.apply(void 0,[y.sent(),2]),p=d[0],f=d[1],u?T("getToken() completed but was canceled"):(T("getToken() completed. Creating connection."),this.authToken_=p&&p.accessToken,this.appCheckToken_=f&&f.token,c=new ut(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,n,r,function(t){I(t+" ("+m.repoInfo_.toString()+")"),m.interrupt("server_kill")},a)),[3,4];case 3:return g=y.sent(),this.log_("Failed to get token: "+g),u||(this.repoInfo_.nodeAdmin&&I(g),l()),[3,4];case 4:return[2]}})})},e.prototype.interrupt=function(t){T("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){T("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,o.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Rt,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map(function(t){return D(t)}).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new dt(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){T("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onAppCheckRevoked_=function(t,e){T("App check token revoked: "+t+"/"+e),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth(),this.tryAppCheck();try{for(var i=(0,s.XA)(this.listens.values()),o=i.next();!o.done;o=i.next()){var a=o.value;try{for(var u=(n=void 0,(0,s.XA)(a.values())),c=u.next();!c.done;c=u.next())this.sendListen_(c.value)}catch(d){n={error:d}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(p){t={error:p}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}for(var l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){var h=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(h.action,h.pathString,h.data,h.onComplete)}for(l=0;l<this.outstandingGets_.length;l++)this.outstandingGets_[l]&&this.sendGet_(l)},e.prototype.sendConnectStats_=function(){var t={},e="js";(0,o.Yr)()&&(e=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+e+"."+u.replace(/\./g,"-")]=1,(0,o.uI)()?t["framework.cordova"]=1:(0,o.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=ht.getInstance().currentlyOnline();return(0,o.xb)(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(ct),Dt=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),Lt=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new Dt(A,t),r=new Dt(A,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return Dt.MIN},t}(),Ft=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,s.ZT)(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return At},set:function(t){At=t},enumerable:!1,configurable:!0}),e.prototype.compare=function(t,e){return P(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw(0,o.g5)("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return Dt.MIN},e.prototype.maxPost=function(){return new Dt(O,At)},e.prototype.makePost=function(t,e){return(0,o.hu)("string"==typeof t,"KeyIndex indexValue must always be a string."),new Dt(t,At)},e.prototype.toString=function(){return".key"},e}(Lt),Ut=new Ft,Mt=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),qt=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:Vt.EMPTY_NODE,this.right=null!=o?o:Vt.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return Vt.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return Vt.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),jt=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new qt(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),Vt=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,qt.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,qt.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new Mt(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new Mt(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new Mt(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new Mt(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new jt,t}();function Bt(t,e){return P(t.name,e.name)}function Zt(t,e){return P(t,e)}var Gt,zt,Ht,Wt,Kt,Yt=function(t){return"number"==typeof t?"number:"+U(t):"string:"+t},Qt=function(t){if(t.isLeafNode()){var e=t.val();(0,o.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,o.r3)(e,".sv"),"Priority must be a string or number.")}else(0,o.hu)(t===Ot||t.isEmpty(),"priority of unexpected type.");(0,o.hu)(t===Ot||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},$t=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,(0,o.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Qt(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return Gt},set:function(t){Gt=t},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return wt(e)?this:".priority"===ft(e)?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=ft(e);return null===r?n:n.isEmpty()&&".priority"!==r?this:((0,o.hu)(".priority"!==r||1===gt(e),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(mt(e),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+Yt(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?U(this.value_):this.value_,this.lazyHash_=v(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:((0,o.hu)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,i=t.VALUE_TYPE_ORDER.indexOf(n),s=t.VALUE_TYPE_ORDER.indexOf(r);return(0,o.hu)(i>=0,"Unknown leaf type: "+n),(0,o.hu)(s>=0,"Unknown leaf type: "+r),i===s?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}(),Jt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,s.ZT)(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?P(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return Dt.MIN},e.prototype.maxPost=function(){return new Dt(O,new $t("[PRIORITY-POST]",Ht))},e.prototype.makePost=function(t,e){var n=zt(t);return new Dt(e,new $t("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(Lt)),Xt=Math.log(2),te=function(){function t(t){this.count=parseInt(Math.log(t+1)/Xt,10),this.current_=this.count-1;var e=parseInt(Array(this.count+1).join("1"),2);this.bits_=t+1&e}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),ee=function(t,e,n,r){t.sort(e);var i=function(e,r){var o,s,a=r-e;if(0===a)return null;if(1===a)return o=t[e],s=n?n(o):o,new qt(s,o.node,qt.BLACK,null,null);var u=parseInt(a/2,10)+e,c=i(e,u),l=i(u+1,r);return o=t[u],s=n?n(o):o,new qt(s,o.node,qt.BLACK,c,l)},o=function(e){for(var r=null,o=null,s=t.length,a=function(e,r){var o=s-e,a=s;s-=e;var c=i(o+1,a),l=t[o],h=n?n(l):l;u(new qt(h,l.node,r,null,c))},u=function(t){r?(r.left=t,r=t):(o=t,r=t)},c=0;c<e.count;++c){var l=e.nextBitIsOne(),h=Math.pow(2,e.count-(c+1));l?a(h,qt.BLACK):(a(h,qt.BLACK),a(h,qt.RED))}return o}(new te(t.length));return new Vt(r||e,o)},ne={},re=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return(0,o.hu)(ne&&Jt,"ChildrenNode.ts has not been loaded"),Wt=Wt||new t({".priority":ne},{".priority":Jt})},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e=(0,o.DV)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Vt?e:null},t.prototype.hasIndex=function(t){return(0,o.r3)(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){(0,o.hu)(e!==Ut,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],a=!1,u=n.getIterator(Dt.Wrap),c=u.getNext();c;)a=a||e.isDefinedOn(c.node),i.push(c),c=u.getNext();r=a?ee(i,e.getCompare()):ne;var l=e.toString(),h=(0,s.pi)({},this.indexSet_);h[l]=e;var d=(0,s.pi)({},this.indexes_);return d[l]=r,new t(d,h)},t.prototype.addToIndexes=function(e,n){var r=this;return new t((0,o.UI)(this.indexes_,function(t,i){var s=(0,o.DV)(r.indexSet_,i);if((0,o.hu)(s,"Missing index implementation for "+i),t===ne){if(s.isDefinedOn(e.node)){for(var a=[],u=n.getIterator(Dt.Wrap),c=u.getNext();c;)c.name!==e.name&&a.push(c),c=u.getNext();return a.push(e),ee(a,s.getCompare())}return ne}var l=n.get(e.name),h=t;return l&&(h=h.remove(new Dt(e.name,l))),h.insert(e,e.node)}),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t((0,o.UI)(this.indexes_,function(t){if(t===ne)return t;var r=n.get(e.name);return r?t.remove(new Dt(e.name,r)):t}),this.indexSet_)},t}(),ie=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Qt(this.priorityNode_),this.children_.isEmpty()&&(0,o.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return Kt||(Kt=new t(new Vt(Zt),null,re.Default))},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||Kt},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?Kt:e},t.prototype.getChild=function(t){var e=ft(t);return null===e?this:this.getImmediateChild(e).getChild(mt(t))},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if((0,o.hu)(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new Dt(e,n),i=void 0,s=void 0;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));var a=i.isEmpty()?Kt:this.priorityNode_;return new t(i,a,s)},t.prototype.updateChild=function(t,e){var n=ft(t);if(null===n)return e;(0,o.hu)(".priority"!==ft(t)||1===gt(t),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(mt(t),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(Jt,function(s,a){n[s]=a.val(e),r++,o&&t.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):o=!1}),!e&&o&&i<2*r){var s=[];for(var a in n)s[a]=n[a];return s}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+Yt(this.getPriority().val())+":"),this.forEachChild(Jt,function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)}),this.lazyHash_=""===t?"":v(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Dt(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new Dt(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new Dt(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal(function(t){return e(t.name,t.node)}):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,function(t){return t});for(var r=this.children_.getIteratorFrom(t.name,Dt.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,function(t){return t});for(var r=this.children_.getReverseIteratorFrom(t.name,Dt.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===oe?-1:0},t.prototype.withIndex=function(e){if(e===Ut||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===Ut||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(Jt),r=e.getIterator(Jt),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===Ut?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),oe=new(function(t){function e(){return t.call(this,new Vt(Zt),ie.EMPTY_NODE,re.Default)||this}return(0,s.ZT)(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return ie.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(ie));function se(t,e){if(void 0===e&&(e=null),null===t)return ie.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),(0,o.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new $t(t,se(e));if(t instanceof Array){var n=ie.EMPTY_NODE;return F(t,function(e,r){if((0,o.r3)(t,e)&&"."!==e.substring(0,1)){var i=se(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(e,i))}}),n.updatePriority(se(e))}var r=[],i=!1;if(F(t,function(t,e){if("."!==t.substring(0,1)){var n=se(e);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new Dt(t,n)))}}),0===r.length)return ie.EMPTY_NODE;var s=ee(r,Bt,function(t){return t.name},Zt);if(i){var a=ee(r,Jt.getCompare());return new ie(s,se(e),new re({".priority":a},{".priority":Jt}))}return new ie(s,se(e),re.Default)}Object.defineProperties(Dt,{MIN:{value:new Dt(A,ie.EMPTY_NODE)},MAX:{value:new Dt(O,oe)}}),Ft.__EMPTY_NODE=ie.EMPTY_NODE,$t.__childrenNodeConstructor=ie,Ot=oe,Ht=oe,zt=se;var ae,ue,ce=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,(0,o.hu)(!wt(e)&&".priority"!==ft(e),"Can't create PathIndex with empty path or .priority key"),n}return(0,s.ZT)(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?P(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=se(t),r=ie.EMPTY_NODE.updateChild(this.indexPath_,n);return new Dt(e,r)},e.prototype.maxPost=function(){var t=ie.EMPTY_NODE.updateChild(this.indexPath_,oe);return new Dt(O,t)},e.prototype.toString=function(){return vt(this.indexPath_,0).join("/")},e}(Lt),le=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,s.ZT)(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?P(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return Dt.MIN},e.prototype.maxPost=function(){return Dt.MAX},e.prototype.makePost=function(t,e){var n=se(t);return new Dt(e,n)},e.prototype.toString=function(){return".value"},e}(Lt)),he="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",de=(ae=0,ue=[],function(t){var e,n=t===ae;ae=t;var r=new Array(8);for(e=7;e>=0;e--)r[e]=he.charAt(t%64),t=Math.floor(t/64);(0,o.hu)(0===t,"Cannot push at time == 0");var i=r.join("");if(n){for(e=11;e>=0&&63===ue[e];e--)ue[e]=0;ue[e]++}else for(e=0;e<12;e++)ue[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)i+=he.charAt(ue[e]);return(0,o.hu)(20===i.length,"nextPushId: Length should be 20."),i}),pe=function(t){if("2147483647"===t)return"-";var e=q(t);if(null!=e)return""+(e+1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;i>=0&&"z"===n[i];)i--;if(-1===i)return O;var o=he.charAt(he.indexOf(n[i])+1);return n[i]=o,n.slice(0,i+1).join("")},fe=function(t){if("-2147483648"===t)return A;var e=q(t);if(null!=e)return""+(e-1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=he.charAt(he.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))};function ge(t){return{type:"value",snapshotNode:t}}function me(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function ye(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function ve(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}var _e=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,i,s){(0,o.hu)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=t.getImmediateChild(e);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?t:(null!=s&&(n.isEmpty()?t.hasChild(e)?s.trackChildChange(ye(e,a)):(0,o.hu)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(me(e,n)):s.trackChildChange(ve(e,n,a))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(Jt,function(t,r){e.hasChild(t)||n.trackChildChange(ye(t,r))}),e.isLeafNode()||e.forEachChild(Jt,function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(ve(e,r,i))}else n.trackChildChange(me(e,r))})),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?ie.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),be=function(){function t(e){this.indexedFilter_=new _e(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new Dt(e,n))||(n=ie.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=ie.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(ie.EMPTY_NODE);var i=this;return e.forEachChild(Jt,function(t,e){i.matches(new Dt(t,e))||(r=r.updateImmediateChild(t,ie.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),we=function(){function t(t){this.rangedFilter_=new be(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new Dt(e,n))||(n=ie.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=ie.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=ie.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(ie.EMPTY_NODE);var a=void 0,u=void 0,c=void 0;if(i=void 0,this.reverse_){i=r.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();c=function(t,e){return l(e,t)}}else i=r.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();)s=i.getNext(),!h&&c(a,s)<=0&&(h=!0),h&&o<this.limit_&&c(s,u)<=0?o++:r=r.updateImmediateChild(s.name,ie.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var s;if(this.reverse_){var a=this.index_.getCompare();s=function(t,e){return a(e,t)}}else s=this.index_.getCompare();var u=t;(0,o.hu)(u.numChildren()===this.limit_,"");var c=new Dt(e,n),l=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),h=this.rangedFilter_.matches(c);if(u.hasChild(e)){for(var d=u.getImmediateChild(e),p=r.getChildAfterChild(this.index_,l,this.reverse_);null!=p&&(p.name===e||u.hasChild(p.name));)p=r.getChildAfterChild(this.index_,p,this.reverse_);var f=null==p?1:s(p,c);if(h&&!n.isEmpty()&&f>=0)return null!=i&&i.trackChildChange(ve(e,n,d)),u.updateImmediateChild(e,n);null!=i&&i.trackChildChange(ye(e,d));var g=u.updateImmediateChild(e,ie.EMPTY_NODE);return null!=p&&this.rangedFilter_.matches(p)?(null!=i&&i.trackChildChange(me(p.name,p.node)),g.updateImmediateChild(p.name,p.node)):g}return n.isEmpty()?t:h&&s(l,c)>=0?(null!=i&&(i.trackChildChange(ye(l.name,l.node)),i.trackChildChange(me(e,n))),u.updateImmediateChild(e,n).updateImmediateChild(l.name,ie.EMPTY_NODE)):t},t}(),Ce=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Jt}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.hasStartAfter=function(){return this.startAfterSet_},t.prototype.hasEndBefore=function(){return this.endBeforeSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},t.prototype.getIndexStartValue=function(){return(0,o.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return(0,o.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:A},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return(0,o.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return(0,o.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:O},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return(0,o.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Jt},t.prototype.copy=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t}();function Te(t,e,n){var r=t.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function Se(t,e,n){var r=t.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function Ee(t,e){var n=t.copy();return n.index_=e,n}function xe(t){var e,n={};return t.isDefault()||(t.index_===Jt?e="$priority":t.index_===le?e="$value":t.index_===Ut?e="$key":((0,o.hu)(t.index_ instanceof ce,"Unrecognized index type!"),e=t.index_.toString()),n.orderBy=(0,o.Pz)(e),t.startSet_&&(n.startAt=(0,o.Pz)(t.indexStartValue_),t.startNameSet_&&(n.startAt+=","+(0,o.Pz)(t.indexStartName_))),t.endSet_&&(n.endAt=(0,o.Pz)(t.indexEndValue_),t.endNameSet_&&(n.endAt+=","+(0,o.Pz)(t.indexEndName_))),t.limitSet_&&(t.isViewFromLeft()?n.limitToFirst=t.limit_:n.limitToLast=t.limit_)),n}function Ie(t){var e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_)),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_)),t.limitSet_){e.l=t.limit_;var n=t.viewFrom_;""===n&&(n=t.isViewFromLeft()?"l":"r"),e.vf=n}return t.index_!==Jt&&(e.i=t.index_.toString()),e}var ke=function(t){function e(e,n,r,i){var o=t.call(this)||this;return o.repoInfo_=e,o.onDataUpdate_=n,o.authTokenProvider_=r,o.appCheckTokenProvider_=i,o.log_=S("p:rest:"),o.listens_={},o}return(0,s.ZT)(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:((0,o.hu)(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())},e.prototype.listen=function(t,n,r,i){var s=this,a=t._path.toString();this.log_("Listen called for "+a+" "+t._queryIdentifier);var u=e.getListenId_(t,r),c={};this.listens_[u]=c;var l=xe(t._queryParams);this.restRequest_(a+".json",l,function(t,e){var n=e;404===t&&(n=null,t=null),null===t&&s.onDataUpdate_(a,n,!1,r),(0,o.DV)(s.listens_,u)===c&&i(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)})},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.get=function(t){var e=this,n=xe(t._queryParams),r=t._path.toString(),i=new o.BH;return this.restRequest_(r+".json",n,function(t,n){var o=n;404===t&&(o=null,t=null),null===t?(e.onDataUpdate_(r,o,!1,null),i.resolve(o)):i.reject(new Error(o))}),i.promise},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;return void 0===e&&(e={}),e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(function(i){var a=(0,s.CR)(i,2),u=a[0],c=a[1];u&&u.accessToken&&(e.auth=u.accessToken),c&&c.token&&(e.ac=c.token);var l=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+(0,o.xO)(e);r.log_("Sending REST request for "+l);var h=new XMLHttpRequest;h.onreadystatechange=function(){if(n&&4===h.readyState){r.log_("REST Response for "+l+" received. status:",h.status,"response:",h.responseText);var t=null;if(h.status>=200&&h.status<300){try{t=(0,o.cI)(h.responseText)}catch(e){I("Failed to parse JSON response for "+l+": "+h.responseText)}n(null,t)}else 401!==h.status&&404!==h.status&&I("Got unsuccessful REST response for "+l+" Status: "+h.status),n(h.status);n=null}},h.open("GET",l,!0),h.send()})},e}(ct),Ae=function(){function t(){this.rootNode_=ie.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}();function Oe(){return{value:null,children:new Map}}function Pe(t,e,n){if(wt(e))t.value=n,t.children.clear();else if(null!==t.value)t.value=t.value.updateChild(e,n);else{var r=ft(e);t.children.has(r)||t.children.set(r,Oe()),Pe(t.children.get(r),e=mt(e),n)}}function Re(t,e){if(wt(e))return t.value=null,t.children.clear(),!0;if(null!==t.value){if(t.value.isLeafNode())return!1;var n=t.value;return t.value=null,n.forEachChild(Jt,function(e,n){Pe(t,new dt(e),n)}),Re(t,e)}if(t.children.size>0){var r=ft(e);return e=mt(e),t.children.has(r)&&Re(t.children.get(r),e)&&t.children.delete(r),0===t.children.size}return!0}function Ne(t,e,n){null!==t.value?n(e,t.value):function(t,e){t.children.forEach(function(t,n){e(n,t)})}(t,function(t,r){Ne(r,new dt(e.toString()+"/"+t),n)})}var De=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=(0,s.pi)({},t);return this.last_&&F(this.last_,function(t,n){e[t]=e[t]-n}),this.last_=t,e},t}(),Le=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new De(t);var n=1e4+2e4*Math.random();V(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;F(e,function(e,i){i>0&&(0,o.r3)(t.statsToReport_,e)&&(n[e]=i,r=!0)}),r&&this.server_.reportStats(n),V(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}(),Fe=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}({});function Ue(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var Me,qe=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=Fe.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return t.prototype.operationForChild=function(e){if(wt(this.path)){if(null!=this.affectedTree.value)return(0,o.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new dt(e));return new t(pt(),n,this.revert)}return(0,o.hu)(ft(this.path)===e,"operationForChild called for unrelated child."),new t(mt(this.path),this.affectedTree,this.revert)},t}(),je=function(){function t(t,e){this.source=t,this.path=e,this.type=Fe.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return wt(this.path)?new t(this.source,pt()):new t(this.source,mt(this.path))},t}(),Ve=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=Fe.OVERWRITE}return t.prototype.operationForChild=function(e){return wt(this.path)?new t(this.source,pt(),this.snap.getImmediateChild(e)):new t(this.source,mt(this.path),this.snap)},t}(),Be=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=Fe.MERGE}return t.prototype.operationForChild=function(e){if(wt(this.path)){var n=this.children.subtree(new dt(e));return n.isEmpty()?null:n.value?new Ve(this.source,pt(),n.value):new t(this.source,pt(),n)}return(0,o.hu)(ft(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,mt(this.path),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),Ze=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(wt(t))return this.isFullyInitialized()&&!this.filtered_;var e=ft(t);return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),Ge=function(){return function(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}();function ze(t,e,n,r,i,s){var a=r.filter(function(t){return t.type===n});a.sort(function(e,n){return function(t,e,n){if(null==e.childName||null==n.childName)throw(0,o.g5)("Should only compare child_ events.");var r=new Dt(e.childName,e.snapshotNode),i=new Dt(n.childName,n.snapshotNode);return t.index_.compare(r,i)}(t,e,n)}),a.forEach(function(n){var r=function(t,e,n){return"value"===e.type||"child_removed"===e.type||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}(t,n,s);i.forEach(function(i){i.respondsTo(n.type)&&e.push(i.createEvent(r,t.query_))})})}function He(t,e){return{eventCache:t,serverCache:e}}function We(t,e,n,r){return He(new Ze(e,n,r),t.serverCache)}function Ke(t,e,n,r){return He(t.eventCache,new Ze(e,n,r))}function Ye(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Qe(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var $e=function(){function t(t,e){void 0===e&&(Me||(Me=new Vt(R)),e=Me),this.value=t,this.children=e}return t.fromObject=function(e){var n=new t(null);return F(e,function(t,e){n=n.set(new dt(t),e)}),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:pt(),value:this.value};if(wt(t))return null;var n=ft(t),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(mt(t),e);return null!=i?{path:bt(new dt(n),i.path),value:i.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,function(){return!0})},t.prototype.subtree=function(e){if(wt(e))return this;var n=ft(e),r=this.children.get(n);return null!==r?r.subtree(mt(e)):new t(null)},t.prototype.set=function(e,n){if(wt(e))return new t(n,this.children);var r=ft(e),i=(this.children.get(r)||new t(null)).set(mt(e),n),o=this.children.insert(r,i);return new t(this.value,o)},t.prototype.remove=function(e){if(wt(e))return this.children.isEmpty()?new t(null):new t(null,this.children);var n=ft(e),r=this.children.get(n);if(r){var i=r.remove(mt(e)),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?new t(null):new t(this.value,o)}return this},t.prototype.get=function(t){if(wt(t))return this.value;var e=ft(t),n=this.children.get(e);return n?n.get(mt(t)):null},t.prototype.setTree=function(e,n){if(wt(e))return n;var r,i=ft(e),o=(this.children.get(i)||new t(null)).setTree(mt(e),n);return r=o.isEmpty()?this.children.remove(i):this.children.insert(i,o),new t(this.value,r)},t.prototype.fold=function(t){return this.fold_(pt(),t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal(function(r,i){n[r]=i.fold_(bt(t,r),e)}),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,pt(),e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(wt(t))return null;var i=ft(t),o=this.children.get(i);return o?o.findOnPath_(mt(t),bt(e,i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,pt(),e)},t.prototype.foreachOnPath_=function(e,n,r){if(wt(e))return this;this.value&&r(n,this.value);var i=ft(e),o=this.children.get(i);return o?o.foreachOnPath_(mt(e),bt(n,i),r):new t(null)},t.prototype.foreach=function(t){this.foreach_(pt(),t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal(function(n,r){r.foreach_(bt(t,n),e)}),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal(function(e,n){n.value&&t(e,n.value)})},t}(),Je=function(){function t(t){this.writeTree_=t}return t.empty=function(){return new t(new $e(null))},t}();function Xe(t,e,n){if(wt(e))return new Je(new $e(n));var r=t.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,s=Ct(i,e);return o=o.updateChild(s,n),new Je(t.writeTree_.set(i,o))}var a=new $e(n),u=t.writeTree_.setTree(e,a);return new Je(u)}function tn(t,e,n){var r=t;return F(n,function(t,n){r=Xe(r,bt(e,t),n)}),r}function en(t,e){if(wt(e))return Je.empty();var n=t.writeTree_.setTree(e,new $e(null));return new Je(n)}function nn(t,e){return null!=rn(t,e)}function rn(t,e){var n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild(Ct(n.path,e)):null}function on(t){var e=[],n=t.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Jt,function(t,n){e.push(new Dt(t,n))}):t.writeTree_.children.inorderTraversal(function(t,n){null!=n.value&&e.push(new Dt(t,n.value))}),e}function sn(t,e){if(wt(e))return t;var n=rn(t,e);return new Je(null!=n?new $e(n):t.writeTree_.subtree(e))}function an(t){return t.writeTree_.isEmpty()}function un(t,e){return cn(pt(),t.writeTree_,e)}function cn(t,e,n){if(null!=e.value)return n.updateChild(t,e.value);var r=null;return e.children.inorderTraversal(function(e,i){".priority"===e?((0,o.hu)(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=cn(bt(t,e),i,n)}),n.getChild(t).isEmpty()||null===r||(n=n.updateChild(bt(t,".priority"),r)),n}function ln(t,e){return wn(e,t)}function hn(t,e){if(t.snap)return Et(t.path,e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&Et(bt(t.path,n),e))return!0;return!1}function dn(t){return t.visible}function pn(t,e,n){for(var r=Je.empty(),i=0;i<t.length;++i){var s=t[i];if(e(s)){var a=s.path,u=void 0;if(s.snap)Et(n,a)?r=Xe(r,u=Ct(n,a),s.snap):Et(a,n)&&(u=Ct(a,n),r=Xe(r,pt(),s.snap.getChild(u)));else{if(!s.children)throw(0,o.g5)("WriteRecord should have .snap or .children");if(Et(n,a))r=tn(r,u=Ct(n,a),s.children);else if(Et(a,n))if(wt(u=Ct(a,n)))r=tn(r,pt(),s.children);else{var c=(0,o.DV)(s.children,ft(u));if(c){var l=c.getChild(mt(u));r=Xe(r,pt(),l)}}}}}return r}function fn(t,e,n,r,i){if(r||i){var o=sn(t.visibleWrites,e);return!i&&an(o)?n:i||null!=n||nn(o,pt())?un(pn(t.allWrites,function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(Et(t.path,e)||Et(e,t.path))},e),n||ie.EMPTY_NODE):null}var s=rn(t.visibleWrites,e);if(null!=s)return s;var a=sn(t.visibleWrites,e);return an(a)?n:null!=n||nn(a,pt())?un(a,n||ie.EMPTY_NODE):null}function gn(t,e,n,r){return fn(t.writeTree,t.treePath,e,n,r)}function mn(t,e){return function(t,e,n){var r=ie.EMPTY_NODE,i=rn(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Jt,function(t,e){r=r.updateImmediateChild(t,e)}),r;if(n){var o=sn(t.visibleWrites,e);return n.forEachChild(Jt,function(t,e){var n=un(sn(o,new dt(t)),e);r=r.updateImmediateChild(t,n)}),on(o).forEach(function(t){r=r.updateImmediateChild(t.name,t.node)}),r}return on(sn(t.visibleWrites,e)).forEach(function(t){r=r.updateImmediateChild(t.name,t.node)}),r}(t.writeTree,t.treePath,e)}function yn(t,e,n,r){return function(t,e,n,r,i){(0,o.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");var s=bt(e,n);if(nn(t.visibleWrites,s))return null;var a=sn(t.visibleWrites,s);return an(a)?i.getChild(n):un(a,i.getChild(n))}(t.writeTree,t.treePath,e,n,r)}function vn(t,e){return function(t,e){return rn(t.visibleWrites,e)}(t.writeTree,bt(t.treePath,e))}function _n(t,e,n){return function(t,e,n,r){var i=bt(e,n),o=rn(t.visibleWrites,i);return null!=o?o:r.isCompleteForChild(n)?un(sn(t.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(t.writeTree,t.treePath,e,n)}function bn(t,e){return wn(bt(t.treePath,e),t.writeTree)}function wn(t,e){return{treePath:t,writeTree:e}}var Cn=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;(0,o.hu)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),(0,o.hu)(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===e&&"child_removed"===i)this.changeMap.set(n,ve(n,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===e&&"child_changed"===i)this.changeMap.set(n,ye(n,r.oldSnap));else if("child_changed"===e&&"child_added"===i)this.changeMap.set(n,me(n,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==i)throw(0,o.g5)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,ve(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),Tn=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),Sn=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new Ze(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return _n(this.writes_,t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Qe(this.viewCache_),i=function(t,e,n,r,i,o){return function(t,e,n,r,i,o,s){var a,u=sn(t.visibleWrites,e),c=rn(u,pt());if(null!=c)a=c;else{if(null==n)return[];a=un(u,n)}if((a=a.withIndex(s)).isEmpty()||a.isLeafNode())return[];for(var l=[],h=s.getCompare(),d=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s),p=d.getNext();p&&l.length<1;)0!==h(p,r)&&l.push(p),p=d.getNext();return l}(t.writeTree,t.treePath,e,n,0,i,o)}(this.writes_,r,e,0,n,t);return 0===i.length?null:i[0]},t}();function En(t,e,n,r,i,s){var a=e.eventCache;if(null!=vn(r,n))return e;var u=void 0,c=void 0;if(wt(n))if((0,o.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){var l=Qe(e),h=mn(r,l instanceof ie?l:ie.EMPTY_NODE);u=t.filter.updateFullNode(e.eventCache.getNode(),h,s)}else{var d=gn(r,Qe(e));u=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{var p=ft(n);if(".priority"===p){(0,o.hu)(1===gt(n),"Can't have a priority with additional path components");var f=a.getNode(),g=yn(r,n,f,c=e.serverCache.getNode());u=null!=g?t.filter.updatePriority(f,g):a.getNode()}else{var m=mt(n),y=void 0;if(a.isCompleteForChild(p)){c=e.serverCache.getNode();var v=yn(r,n,a.getNode(),c);y=null!=v?a.getNode().getImmediateChild(p).updateChild(m,v):a.getNode().getImmediateChild(p)}else y=_n(r,p,e.serverCache);u=null!=y?t.filter.updateChild(a.getNode(),p,y,m,i,s):a.getNode()}}return We(e,u,a.isFullyInitialized()||wt(n),t.filter.filtersNodes())}function xn(t,e,n,r,i,o,s,a){var u,c=e.serverCache,l=s?t.filter:t.filter.getIndexedFilter();if(wt(n))u=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var h=c.getNode().updateChild(n,r);u=l.updateFullNode(c.getNode(),h,null)}else{var d=ft(n);if(!c.isCompleteForPath(n)&&gt(n)>1)return e;var p=mt(n),f=c.getNode().getImmediateChild(d).updateChild(p,r);u=".priority"===d?l.updatePriority(c.getNode(),f):l.updateChild(c.getNode(),d,f,p,Tn,null)}var g=Ke(e,u,c.isFullyInitialized()||wt(n),l.filtersNodes());return En(t,g,n,i,new Sn(i,g,o),a)}function In(t,e,n,r,i,o,s){var a,u,c=e.eventCache,l=new Sn(i,e,o);if(wt(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,s),a=We(e,u,!0,t.filter.filtersNodes());else{var h=ft(n);if(".priority"===h)u=t.filter.updatePriority(e.eventCache.getNode(),r),a=We(e,u,c.isFullyInitialized(),c.isFiltered());else{var d=mt(n),p=c.getNode().getImmediateChild(h),f=void 0;if(wt(d))f=r;else{var g=l.getCompleteChild(h);f=null!=g?".priority"===yt(d)&&g.getChild(_t(d)).isEmpty()?g:g.updateChild(d,r):ie.EMPTY_NODE}a=p.equals(f)?e:We(e,t.filter.updateChild(c.getNode(),h,f,d,l,s),c.isFullyInitialized(),t.filter.filtersNodes())}}return a}function kn(t,e){return t.eventCache.isCompleteForChild(e)}function An(t,e,n){return n.foreach(function(t,n){e=e.updateChild(t,n)}),e}function On(t,e,n,r,i,o,s,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;var u,c=e;u=wt(n)?r:new $e(null).setTree(n,r);var l=e.serverCache.getNode();return u.children.inorderTraversal(function(n,r){if(l.hasChild(n)){var u=An(0,e.serverCache.getNode().getImmediateChild(n),r);c=xn(t,c,new dt(n),u,i,o,s,a)}}),u.children.inorderTraversal(function(n,r){var u=!e.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!l.hasChild(n)&&!u){var h=An(0,e.serverCache.getNode().getImmediateChild(n),r);c=xn(t,c,new dt(n),h,i,o,s,a)}}),c}var Pn,Rn=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n,r=this.query_._queryParams,i=new _e(r.getIndex()),o=(n=r).loadsAllData()?new _e(n.getIndex()):n.hasLimit()?new we(n):new be(n);this.processor_=function(t){return{filter:t}}(o);var s=e.serverCache,a=e.eventCache,u=i.updateFullNode(ie.EMPTY_NODE,s.getNode(),null),c=o.updateFullNode(ie.EMPTY_NODE,a.getNode(),null),l=new Ze(u,s.isFullyInitialized(),i.filtersNodes()),h=new Ze(c,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=He(h,l),this.eventGenerator_=new Ge(this.query_)}return Object.defineProperty(t.prototype,"query",{get:function(){return this.query_},enumerable:!1,configurable:!0}),t}();function Nn(t,e){var n=Qe(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!wt(e)&&!n.getImmediateChild(ft(e)).isEmpty())?n.getChild(e):null}function Dn(t){return 0===t.eventRegistrations_.length}function Ln(t,e,n){var r=[];if(n){(0,o.hu)(null==e,"A cancel should cancel all event registrations.");var i=t.query._path;t.eventRegistrations_.forEach(function(t){var e=t.createCancelEvent(n,i);e&&r.push(e)})}if(e){for(var s=[],a=0;a<t.eventRegistrations_.length;++a){var u=t.eventRegistrations_[a];if(u.matches(e)){if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(a+1));break}}else s.push(u)}t.eventRegistrations_=s}else t.eventRegistrations_=[];return r}function Fn(t,e,n,r){e.type===Fe.MERGE&&null!==e.source.queryId&&((0,o.hu)(Qe(t.viewCache_),"We should always have a full cache before handling merges"),(0,o.hu)(Ye(t.viewCache_),"Missing event cache, even though we have a server cache"));var i,s,a=t.viewCache_,u=function(t,e,n,r,i){var s,a,u=new Cn;if(n.type===Fe.OVERWRITE){var c=n;c.source.fromUser?s=In(t,e,c.path,c.snap,r,i,u):((0,o.hu)(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!wt(c.path),s=xn(t,e,c.path,c.snap,r,i,a,u))}else if(n.type===Fe.MERGE){var l=n;l.source.fromUser?s=function(t,e,n,r,i,o,s){var a=e;return r.foreach(function(r,u){var c=bt(n,r);kn(e,ft(c))&&(a=In(t,a,c,u,i,o,s))}),r.foreach(function(r,u){var c=bt(n,r);kn(e,ft(c))||(a=In(t,a,c,u,i,o,s))}),a}(t,e,l.path,l.children,r,i,u):((0,o.hu)(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),s=On(t,e,l.path,l.children,r,i,a,u))}else if(n.type===Fe.ACK_USER_WRITE){var h=n;s=h.revert?function(t,e,n,r,i,s){var a;if(null!=vn(r,n))return e;var u=new Sn(r,e,i),c=e.eventCache.getNode(),l=void 0;if(wt(n)||".priority"===ft(n)){var h=void 0;if(e.serverCache.isFullyInitialized())h=gn(r,Qe(e));else{var d=e.serverCache.getNode();(0,o.hu)(d instanceof ie,"serverChildren would be complete if leaf node"),h=mn(r,d)}l=t.filter.updateFullNode(c,h=h,s)}else{var p=ft(n),f=_n(r,p,e.serverCache);null==f&&e.serverCache.isCompleteForChild(p)&&(f=c.getImmediateChild(p)),(l=null!=f?t.filter.updateChild(c,p,f,mt(n),u,s):e.eventCache.getNode().hasChild(p)?t.filter.updateChild(c,p,ie.EMPTY_NODE,mt(n),u,s):c).isEmpty()&&e.serverCache.isFullyInitialized()&&(a=gn(r,Qe(e))).isLeafNode()&&(l=t.filter.updateFullNode(l,a,s))}return a=e.serverCache.isFullyInitialized()||null!=vn(r,pt()),We(e,l,a,t.filter.filtersNodes())}(t,e,h.path,r,i,u):function(t,e,n,r,i,o,s){if(null!=vn(i,n))return e;var a=e.serverCache.isFiltered(),u=e.serverCache;if(null!=r.value){if(wt(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return xn(t,e,n,u.getNode().getChild(n),i,o,a,s);if(wt(n)){var c=new $e(null);return u.getNode().forEachChild(Ut,function(t,e){c=c.set(new dt(t),e)}),On(t,e,n,c,i,o,a,s)}return e}var l=new $e(null);return r.foreach(function(t,e){var r=bt(n,t);u.isCompleteForPath(r)&&(l=l.set(t,u.getNode().getChild(r)))}),On(t,e,n,l,i,o,a,s)}(t,e,h.path,h.affectedTree,r,i,u)}else{if(n.type!==Fe.LISTEN_COMPLETE)throw(0,o.g5)("Unknown operation type: "+n.type);s=function(t,e,n,r,i){var o=e.serverCache;return En(t,Ke(e,o.getNode(),o.isFullyInitialized()||wt(n),o.isFiltered()),n,r,Tn,i)}(t,e,n.path,r,u)}var d=u.getChanges();return function(t,e,n){var r=e.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=Ye(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(ge(Ye(e)))}}(e,s,d),{viewCache:s,changes:d}}(t.processor_,a,e,n,r);return i=t.processor_,(0,o.hu)((s=u.viewCache).eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),(0,o.hu)(s.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),(0,o.hu)(u.viewCache.serverCache.isFullyInitialized()||!a.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=u.viewCache,Un(t,u.changes,u.viewCache.eventCache.getNode(),null)}function Un(t,e,n,r){return function(t,e,n,r){var i=[],o=[];return e.forEach(function(e){"child_changed"===e.type&&t.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&o.push({type:"child_moved",snapshotNode:e.snapshotNode,childName:e.childName})}),ze(t,i,"child_removed",e,r,n),ze(t,i,"child_added",e,r,n),ze(t,i,"child_moved",o,r,n),ze(t,i,"child_changed",e,r,n),ze(t,i,"value",e,r,n),i}(t.eventGenerator_,e,n,r?[r]:t.eventRegistrations_)}var Mn,qn=function(){return function(){this.views=new Map}}();function jn(t,e,n,r){var i,a,u=e.source.queryId;if(null!==u){var c=t.views.get(u);return(0,o.hu)(null!=c,"SyncTree gave us an op for an invalid query."),Fn(c,e,n,r)}var l=[];try{for(var h=(0,s.XA)(t.views.values()),d=h.next();!d.done;d=h.next())l=l.concat(Fn(c=d.value,e,n,r))}catch(p){i={error:p}}finally{try{d&&!d.done&&(a=h.return)&&a.call(h)}finally{if(i)throw i.error}}return l}function Vn(t,e,n,r,i){var o=t.views.get(e._queryIdentifier);if(!o){var s=gn(n,i?r:null),a=!1;s?a=!0:r instanceof ie?(s=mn(n,r),a=!1):(s=ie.EMPTY_NODE,a=!1);var u=He(new Ze(s,a,!1),new Ze(r,i,!1));return new Rn(e,u)}return o}function Bn(t){var e,n,r=[];try{for(var i=(0,s.XA)(t.views.values()),o=i.next();!o.done;o=i.next()){var a=o.value;a.query._queryParams.loadsAllData()||r.push(a)}}catch(u){e={error:u}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}function Zn(t,e){var n,r,i=null;try{for(var o=(0,s.XA)(t.views.values()),a=o.next();!a.done;a=o.next())i=i||Nn(a.value,e)}catch(u){n={error:u}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i}function Gn(t,e){return e._queryParams.loadsAllData()?Wn(t):t.views.get(e._queryIdentifier)}function zn(t,e){return null!=Gn(t,e)}function Hn(t){return null!=Wn(t)}function Wn(t){var e,n;try{for(var r=(0,s.XA)(t.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;if(o.query._queryParams.loadsAllData())return o}}catch(a){e={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return null}var Kn=1,Yn=function(){return function(t){this.listenProvider_=t,this.syncPointTree_=new $e(null),this.pendingWriteTree_={visibleWrites:Je.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}();function Qn(t,e,n,r,i){return function(t,e,n,r,i){(0,o.hu)(r>t.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=Xe(t.visibleWrites,e,n)),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r,i),i?nr(t,new Ve({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,n)):[]}function $n(t,e,n){void 0===n&&(n=!1);var r=function(t,e){for(var n=0;n<t.allWrites.length;n++){var r=t.allWrites[n];if(r.writeId===e)return r}return null}(t.pendingWriteTree_,e);if(function(t,e){var n=t.allWrites.findIndex(function(t){return t.writeId===e});(0,o.hu)(n>=0,"removeWrite called with nonexistent writeId.");var r=t.allWrites[n];t.allWrites.splice(n,1);for(var i=r.visible,s=!1,a=t.allWrites.length-1;i&&a>=0;){var u=t.allWrites[a];u.visible&&(a>=n&&hn(u,r.path)?i=!1:Et(r.path,u.path)&&(s=!0)),a--}return!!i&&(s?(function(t){t.visibleWrites=pn(t.allWrites,dn,pt()),t.lastWriteId=t.allWrites.length>0?t.allWrites[t.allWrites.length-1].writeId:-1}(t),!0):(r.snap?t.visibleWrites=en(t.visibleWrites,r.path):F(r.children,function(e){t.visibleWrites=en(t.visibleWrites,bt(r.path,e))}),!0))}(t.pendingWriteTree_,e)){var i=new $e(null);return null!=r.snap?i=i.set(pt(),!0):F(r.children,function(t){i=i.set(new dt(t),!0)}),nr(t,new qe(r.path,i,n))}return[]}function Jn(t,e,n){return nr(t,new Ve({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,n))}function Xn(t,e,n,r){var i=e._path,a=t.syncPointTree_.get(i),u=[];if(a&&("default"===e._queryIdentifier||zn(a,e))){var c=function(t,e,n,r){var i,a,u=e._queryIdentifier,c=[],l=[],h=Hn(t);if("default"===u)try{for(var d=(0,s.XA)(t.views.entries()),p=d.next();!p.done;p=d.next()){var f,g=(0,s.CR)(p.value,2),m=g[0];l=l.concat(Ln(f=g[1],n,r)),Dn(f)&&(t.views.delete(m),f.query._queryParams.loadsAllData()||c.push(f.query))}}catch(y){i={error:y}}finally{try{p&&!p.done&&(a=d.return)&&a.call(d)}finally{if(i)throw i.error}}else(f=t.views.get(u))&&(l=l.concat(Ln(f,n,r)),Dn(f)&&(t.views.delete(u),f.query._queryParams.loadsAllData()||c.push(f.query)));return h&&!Hn(t)&&c.push(new((0,o.hu)(Pn,"Reference.ts has not been loaded"),Pn)(e._repo,e._path)),{removed:c,events:l}}(a,e,n,r);0===a.views.size&&(t.syncPointTree_=t.syncPointTree_.remove(i));var l=c.removed;u=c.events;var h=-1!==l.findIndex(function(t){return t._queryParams.loadsAllData()}),d=t.syncPointTree_.findOnPath(i,function(t,e){return Hn(e)});if(h&&!d){var p=t.syncPointTree_.subtree(i);if(!p.isEmpty())for(var f=function(t){return t.fold(function(t,e,n){if(e&&Hn(e))return[Wn(e)];var r=[];return e&&(r=Bn(e)),F(n,function(t,e){r=r.concat(e)}),r})}(p),g=0;g<f.length;++g){var m=f[g],y=m.query,v=or(t,m);t.listenProvider_.startListening(hr(y),sr(t,y),v.hashFn,v.onComplete)}}!d&&l.length>0&&!r&&(h?t.listenProvider_.stopListening(hr(e),null):l.forEach(function(e){var n=t.queryToTagMap.get(ar(e));t.listenProvider_.stopListening(hr(e),n)})),function(t,e){for(var n=0;n<e.length;++n){var r=e[n];if(!r._queryParams.loadsAllData()){var i=ar(r),o=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(o)}}}(t,l)}return u}function tr(t,e,n){var r=e._path,i=null,s=!1;t.syncPointTree_.foreachOnPath(r,function(t,e){var n=Ct(t,r);i=i||Zn(e,n),s=s||Hn(e)});var a,u=t.syncPointTree_.get(r);u?(s=s||Hn(u),i=i||Zn(u,pt())):(u=new qn,t.syncPointTree_=t.syncPointTree_.set(r,u)),null!=i?a=!0:(a=!1,i=ie.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild(function(t,e){var n=Zn(e,pt());n&&(i=i.updateImmediateChild(t,n))}));var c=zn(u,e);if(!c&&!e._queryParams.loadsAllData()){var l=ar(e);(0,o.hu)(!t.queryToTagMap.has(l),"View does not exist, but we have a tag");var h=Kn++;t.queryToTagMap.set(l,h),t.tagToQueryMap.set(h,l)}var d=function(t,e,n,r,i,o){var s=Vn(t,e,r,i,o);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,s),function(t,e){t.eventRegistrations_.push(e)}(s,n),function(t,e){var n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Jt,function(t,e){r.push(me(t,e))}),n.isFullyInitialized()&&r.push(ge(n.getNode())),Un(t,r,n.getNode(),e)}(s,n)}(u,e,n,ln(t.pendingWriteTree_,r),i,a);if(!c&&!s){var p=Gn(u,e);d=d.concat(function(t,e,n){var r=e._path,i=sr(t,e),s=or(t,n),a=t.listenProvider_.startListening(hr(e),i,s.hashFn,s.onComplete),u=t.syncPointTree_.subtree(r);if(i)(0,o.hu)(!Hn(u.value),"If we're adding a query, it shouldn't be shadowed");else for(var c=u.fold(function(t,e,n){if(!wt(t)&&e&&Hn(e))return[Wn(e).query];var r=[];return e&&(r=r.concat(Bn(e).map(function(t){return t.query}))),F(n,function(t,e){r=r.concat(e)}),r}),l=0;l<c.length;++l){var h=c[l];t.listenProvider_.stopListening(hr(h),sr(t,h))}return a}(t,e,p))}return d}function er(t,e,n){var r=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,function(t,n){var r=Zn(n,Ct(t,e));if(r)return r});return fn(r,e,i,n,!0)}function nr(t,e){return rr(e,t.syncPointTree_,null,ln(t.pendingWriteTree_,pt()))}function rr(t,e,n,r){if(wt(t.path))return ir(t,e,n,r);var i=e.get(pt());null==n&&null!=i&&(n=Zn(i,pt()));var o=[],s=ft(t.path),a=t.operationForChild(s),u=e.children.get(s);if(u&&a){var c=n?n.getImmediateChild(s):null,l=bn(r,s);o=o.concat(rr(a,u,c,l))}return i&&(o=o.concat(jn(i,t,r,n))),o}function ir(t,e,n,r){var i=e.get(pt());null==n&&null!=i&&(n=Zn(i,pt()));var o=[];return e.children.inorderTraversal(function(e,i){var s=n?n.getImmediateChild(e):null,a=bn(r,e),u=t.operationForChild(e);u&&(o=o.concat(ir(u,i,s,a)))}),i&&(o=o.concat(jn(i,t,r,n))),o}function or(t,e){var n=e.query,r=sr(t,n);return{hashFn:function(){return(function(t){return t.viewCache_.serverCache.getNode()}(e)||ie.EMPTY_NODE).hash()},onComplete:function(e){if("ok"===e)return r?function(t,e,n){var r=ur(t,n);if(r){var i=cr(r),o=i.path,s=i.queryId,a=Ct(o,e);return lr(t,o,new je(Ue(s),a))}return[]}(t,n._path,r):function(t,e){return nr(t,new je({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(t,n._path);var i=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}(e,n);return Xn(t,n,null,i)}}}function sr(t,e){var n=ar(e);return t.queryToTagMap.get(n)}function ar(t){return t._path.toString()+"$"+t._queryIdentifier}function ur(t,e){return t.tagToQueryMap.get(e)}function cr(t){var e=t.indexOf("$");return(0,o.hu)(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new dt(t.substr(0,e))}}function lr(t,e,n){var r=t.syncPointTree_.get(e);return(0,o.hu)(r,"Missing sync point for query tag that we're tracking"),jn(r,n,ln(t.pendingWriteTree_,e),null)}function hr(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new((0,o.hu)(Mn,"Reference.ts has not been loaded"),Mn)(t._repo,t._path):t}var dr=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){return new t(this.node_.getImmediateChild(e))},t.prototype.node=function(){return this.node_},t}(),pr=function(){function t(t,e){this.syncTree_=t,this.path_=e}return t.prototype.getImmediateChild=function(e){var n=bt(this.path_,e);return new t(this.syncTree_,n)},t.prototype.node=function(){return er(this.syncTree_,this.path_)},t}(),fr=function(t,e,n){return t&&"object"==typeof t?((0,o.hu)(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?gr(t[".sv"],e,n):"object"==typeof t[".sv"]?mr(t[".sv"],e):void(0,o.hu)(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},gr=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:(0,o.hu)(!1,"Unexpected server value: "+t)}},mr=function(t,e,n){t.hasOwnProperty("increment")||(0,o.hu)(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;"number"!=typeof r&&(0,o.hu)(!1,"Unexpected increment value: "+r);var i=e.node();if((0,o.hu)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var s=i.getValue();return"number"!=typeof s?r:s+r},yr=function(t,e,n,r){return _r(e,new pr(n,t),r)},vr=function(t,e,n){return _r(t,new dr(e),n)};function _r(t,e,n){var r,i=t.getPriority().val(),o=fr(i,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var s=t,a=fr(s.getValue(),e,n);return a!==s.getValue()||o!==s.getPriority().val()?new $t(a,se(o)):t}var u=t;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new $t(o))),u.forEachChild(Jt,function(t,i){var o=_r(i,e.getImmediateChild(t),n);o!==i&&(r=r.updateImmediateChild(t,o))}),r}var br=function(){return function(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n={children:{},childCount:0}),this.name=t,this.parent=e,this.node=n}}();function wr(t,e){for(var n=e instanceof dt?e:new dt(e),r=t,i=ft(n);null!==i;){var s=(0,o.DV)(r.node.children,i)||{children:{},childCount:0};r=new br(i,r,s),i=ft(n=mt(n))}return r}function Cr(t){return t.node.value}function Tr(t,e){t.node.value=e,kr(t)}function Sr(t){return t.node.childCount>0}function Er(t,e){F(t.node.children,function(n,r){e(new br(n,t,r))})}function xr(t,e,n,r){n&&!r&&e(t),Er(t,function(t){xr(t,e,!0,r)}),n&&r&&e(t)}function Ir(t){return new dt(null===t.parent?t.name:Ir(t.parent)+"/"+t.name)}function kr(t){null!==t.parent&&function(t,e,n){var r=function(t){return void 0===Cr(t)&&!Sr(t)}(n),i=(0,o.r3)(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,kr(t)):r||i||(t.node.children[e]=n.node,t.node.childCount++,kr(t))}(t.parent,t.name,t)}var Ar=/[\[\].#$\/\u0000-\u001F\u007F]/,Or=/[\[\].#$\u0000-\u001F\u007F]/,Pr=10485760,Rr=function(t){return"string"==typeof t&&0!==t.length&&!Ar.test(t)},Nr=function(t){return"string"==typeof t&&0!==t.length&&!Or.test(t)},Dr=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!k(t)||t&&"object"==typeof t&&(0,o.r3)(t,".sv")},Lr=function(t,e,n,r){r&&void 0===e||Fr((0,o.gK)(t,"value"),e,n)},Fr=function(t,e,n){var r=n instanceof dt?new xt(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+kt(r));if("function"==typeof e)throw new Error(t+"contains a function "+kt(r)+" with contents = "+e.toString());if(k(e))throw new Error(t+"contains "+e.toString()+" "+kt(r));if("string"==typeof e&&e.length>Pr/3&&(0,o.ug)(e)>Pr)throw new Error(t+"contains a string greater than 10485760 utf8 bytes "+kt(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){var i=!1,s=!1;if(F(e,function(e,n){if(".value"===e)i=!0;else if(".priority"!==e&&".sv"!==e&&(s=!0,!Rr(e)))throw new Error(t+" contains an invalid key ("+e+") "+kt(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var a,u;!function(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=(0,o.ug)(e),It(t)}(r,e),Fr(t,n,r),u=(a=r).parts_.pop(),a.byteLength_-=(0,o.ug)(u),a.parts_.length>0&&(a.byteLength_-=1)}),i&&s)throw new Error(t+' contains ".value" child '+kt(r)+" in addition to actual children.")}},Ur=function(t,e,n,r){if(!r||void 0!==e){var i=(0,o.gK)(t,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");var s=[];F(e,function(t,e){var r=new dt(t);if(Fr(i,e,bt(n,r)),".priority"===yt(r)&&!Dr(e))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(r)}),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=vt(r=e[n]),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!Rr(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(Tt);var s=null;for(n=0;n<e.length;n++){if(r=e[n],null!==s&&Et(s,r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}}(i,s)}},Mr=function(t,e,n){if(!n||void 0!==e){if(k(e))throw new Error((0,o.gK)(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Dr(e))throw new Error((0,o.gK)(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},qr=function(t,e,n){if(!n||void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,o.gK)(t,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},jr=function(t,e,n,r){if(!(r&&void 0===n||Rr(n)))throw new Error((0,o.gK)(t,e)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Vr=function(t,e,n,r){if(!(r&&void 0===n||Nr(n)))throw new Error((0,o.gK)(t,e)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Br=function(t,e){if(".info"===ft(e))throw new Error(t+" failed = Can't modify data under /.info/")},Zr=function(t,e){var n=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!Rr(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==n.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Nr(t)}(n))throw new Error((0,o.gK)(t,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},Gr=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error((0,o.gK)(t,e)+"must be a boolean.")},zr=function(){return function(){this.eventLists_=[],this.recursionDepth_=0}}();function Hr(t,e){for(var n=null,r=0;r<e.length;r++){var i=e[r],o=i.getPath();null===n||St(o,n.path)||(t.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&t.eventLists_.push(n)}function Wr(t,e,n){Hr(t,n),Yr(t,function(t){return St(t,e)})}function Kr(t,e,n){Hr(t,n),Yr(t,function(t){return Et(t,e)||Et(e,t)})}function Yr(t,e){t.recursionDepth_++;for(var n=!0,r=0;r<t.eventLists_.length;r++){var i=t.eventLists_[r];i&&(e(i.path)?(Qr(t.eventLists_[r]),t.eventLists_[r]=null):n=!1)}n&&(t.eventLists_=[]),t.recursionDepth_--}function Qr(t){for(var e=0;e<t.events.length;e++){var n=t.events[e];if(null!==n){t.events[e]=null;var r=n.getEventRunner();b&&T("event: "+n.toString()),j(r)}}}var $r="repo_interrupt",Jr=function(){function t(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new zr,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Oe(),this.transactionQueueTree_=new br,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t}();function Xr(t){var e=t.infoData_.getNode(new dt(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function ti(t){return(e=(e={timestamp:Xr(t)})||{}).timestamp=e.timestamp||(new Date).getTime(),e;var e}function ei(t,e,n,r,i){t.dataUpdateCount++;var s=new dt(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;var a=[];if(i)if(r){var u=(0,o.UI)(n,function(t){return se(t)});a=function(t,e,n,r){var i=ur(t,r);if(i){var o=cr(i),s=o.path,a=o.queryId,u=Ct(s,e),c=$e.fromObject(n);return lr(t,s,new Be(Ue(a),u,c))}return[]}(t.serverSyncTree_,s,u,i)}else{var c=se(n);a=function(t,e,n,r){var i=ur(t,r);if(null!=i){var o=cr(i),s=o.path,a=o.queryId,u=Ct(s,e);return lr(t,s,new Ve(Ue(a),u,n))}return[]}(t.serverSyncTree_,s,c,i)}else if(r){var l=(0,o.UI)(n,function(t){return se(t)});a=function(t,e,n){var r=$e.fromObject(n);return nr(t,new Be({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(t.serverSyncTree_,s,l)}else{var h=se(n);a=Jn(t.serverSyncTree_,s,h)}var d=s;a.length>0&&(d=fi(t,s)),Kr(t.eventQueue_,d,a)}function ni(t,e){ri(t,"connected",e),!1===e&&function(t){li(t,"onDisconnectEvents");var e=ti(t),n=Oe();Ne(t.onDisconnect_,pt(),function(r,i){var o=yr(r,i,t.serverSyncTree_,e);Pe(n,r,o)});var r=[];Ne(n,pt(),function(e,n){r=r.concat(Jn(t.serverSyncTree_,e,n));var i=_i(t,e);fi(t,i)}),t.onDisconnect_=Oe(),Kr(t.eventQueue_,pt(),r)}(t)}function ri(t,e,n){var r=new dt("/.info/"+e),i=se(n);t.infoData_.updateSnapshot(r,i);var o=Jn(t.infoSyncTree_,r,i);Kr(t.eventQueue_,r,o)}function ii(t){return t.nextWriteId_++}function oi(t,e,n,r,i){li(t,"set",{path:e.toString(),value:n,priority:r});var o=ti(t),s=se(n,r),a=er(t.serverSyncTree_,e),u=vr(s,a,o),c=ii(t),l=Qn(t.serverSyncTree_,e,u,c,!0);Hr(t.eventQueue_,l),t.server_.put(e.toString(),s.val(!0),function(n,r){var o="ok"===n;o||I("set at "+e+" failed: "+n);var s=$n(t.serverSyncTree_,c,!o);Kr(t.eventQueue_,e,s),hi(0,i,n,r)});var h=_i(t,e);fi(t,h),Kr(t.eventQueue_,h,[])}function si(t,e,n){t.server_.onDisconnectCancel(e.toString(),function(r,i){"ok"===r&&Re(t.onDisconnect_,e),hi(0,n,r,i)})}function ai(t,e,n,r){var i=se(n);t.server_.onDisconnectPut(e.toString(),i.val(!0),function(n,o){"ok"===n&&Pe(t.onDisconnect_,e,i),hi(0,r,n,o)})}function ui(t,e,n){var r;r=".info"===ft(e._path)?Xn(t.infoSyncTree_,e,n):Xn(t.serverSyncTree_,e,n),Wr(t.eventQueue_,e._path,r)}function ci(t){t.persistentConnection_&&t.persistentConnection_.interrupt($r)}function li(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r="";t.persistentConnection_&&(r=t.persistentConnection_.id+":"),T.apply(void 0,(0,s.ev)([r],(0,s.CR)(e)))}function hi(t,e,n,r){e&&j(function(){if("ok"===n)e(null);else{var t=(n||"error").toUpperCase(),i=t;r&&(i+=": "+r);var o=new Error(i);o.code=t,e(o)}})}function di(t,e,n){return er(t.serverSyncTree_,e,n)||ie.EMPTY_NODE}function pi(t,e){if(void 0===e&&(e=t.transactionQueueTree_),e||vi(t,e),Cr(e)){var n=mi(t,e);(0,o.hu)(n.length>0,"Sending zero length transaction queue"),n.every(function(t){return 0===t.status})&&function(t,e,n){for(var r=n.map(function(t){return t.currentWriteId}),i=di(t,e,r),s=i,a=i.hash(),u=0;u<n.length;u++){var c=n[u];(0,o.hu)(0===c.status,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=1,c.retryCount++;var l=Ct(e,c.path);s=s.updateChild(l,c.currentOutputSnapshotRaw)}var h=s.val(!0),d=e;t.server_.put(d.toString(),h,function(r){li(t,"transaction put response",{path:d.toString(),status:r});var i=[];if("ok"===r){for(var o=[],s=function(e){n[e].status=2,i=i.concat($n(t.serverSyncTree_,n[e].currentWriteId)),n[e].onComplete&&o.push(function(){return n[e].onComplete(null,!0,n[e].currentOutputSnapshotResolved)}),n[e].unwatcher()},a=0;a<n.length;a++)s(a);for(vi(t,wr(t.transactionQueueTree_,e)),pi(t,t.transactionQueueTree_),Kr(t.eventQueue_,e,i),a=0;a<o.length;a++)j(o[a])}else{if("datastale"===r)for(a=0;a<n.length;a++)n[a].status=3===n[a].status?4:0;else for(I("transaction at "+d.toString()+" failed: "+r),a=0;a<n.length;a++)n[a].status=4,n[a].abortReason=r;fi(t,e)}},a)}(t,Ir(e),n)}else Sr(e)&&Er(e,function(e){pi(t,e)})}function fi(t,e){var n=gi(t,e),r=Ir(n);return function(t,e,n){if(0!==e.length){for(var r=[],i=[],s=e.filter(function(t){return 0===t.status}).map(function(t){return t.currentWriteId}),a=function(a){var u,c=e[a],l=Ct(n,c.path),h=!1;if((0,o.hu)(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===c.status)h=!0,u=c.abortReason,i=i.concat($n(t.serverSyncTree_,c.currentWriteId,!0));else if(0===c.status)if(c.retryCount>=25)h=!0,u="maxretry",i=i.concat($n(t.serverSyncTree_,c.currentWriteId,!0));else{var d=di(t,c.path,s);c.currentInputSnapshot=d;var p=e[a].update(d.val());if(void 0!==p){Fr("transaction failed: Data returned ",p,c.path);var f=se(p);"object"==typeof p&&null!=p&&(0,o.r3)(p,".priority")||(f=f.updatePriority(d.getPriority()));var g=c.currentWriteId,m=ti(t),y=vr(f,d,m);c.currentOutputSnapshotRaw=f,c.currentOutputSnapshotResolved=y,c.currentWriteId=ii(t),s.splice(s.indexOf(g),1),i=(i=i.concat(Qn(t.serverSyncTree_,c.path,y,c.currentWriteId,c.applyLocally))).concat($n(t.serverSyncTree_,g,!0))}else h=!0,u="nodata",i=i.concat($n(t.serverSyncTree_,c.currentWriteId,!0))}Kr(t.eventQueue_,n,i),i=[],h&&(e[a].status=2,setTimeout(e[a].unwatcher,Math.floor(0)),e[a].onComplete&&r.push("nodata"===u?function(){return e[a].onComplete(null,!1,e[a].currentInputSnapshot)}:function(){return e[a].onComplete(new Error(u),!1,null)}))},u=0;u<e.length;u++)a(u);for(vi(t,t.transactionQueueTree_),u=0;u<r.length;u++)j(r[u]);pi(t,t.transactionQueueTree_)}}(t,mi(t,n),r),r}function gi(t,e){var n,r=t.transactionQueueTree_;for(n=ft(e);null!==n&&void 0===Cr(r);)r=wr(r,n),n=ft(e=mt(e));return r}function mi(t,e){var n=[];return yi(t,e,n),n.sort(function(t,e){return t.order-e.order}),n}function yi(t,e,n){var r=Cr(e);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);Er(e,function(e){yi(t,e,n)})}function vi(t,e){var n=Cr(e);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,Tr(e,n.length>0?n:void 0)}Er(e,function(e){vi(t,e)})}function _i(t,e){var n=Ir(gi(t,e)),r=wr(t.transactionQueueTree_,e);return function(t,e,n){for(var r=t.parent;null!==r;){if(e(r))return!0;r=r.parent}}(r,function(e){bi(t,e)}),bi(t,r),xr(r,function(e){bi(t,e)}),n}function bi(t,e){var n=Cr(e);if(n){for(var r=[],i=[],s=-1,a=0;a<n.length;a++)3===n[a].status||(1===n[a].status?((0,o.hu)(s===a-1,"All SENT items should be at beginning of queue."),s=a,n[a].status=3,n[a].abortReason="set"):((0,o.hu)(0===n[a].status,"Unexpected transaction status in abort"),n[a].unwatcher(),i=i.concat($n(t.serverSyncTree_,n[a].currentWriteId,!0)),n[a].onComplete&&r.push(n[a].onComplete.bind(null,new Error("set"),!1,null))));for(-1===s?Tr(e,void 0):n.length=s+1,Kr(t.eventQueue_,Ir(e),i),a=0;a<r.length;a++)j(r[a])}}var wi=function(t,e){var n=Ci(t),r=n.namespace;return"firebase.com"===n.domain&&x(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||x("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&I("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new K(n.host,n.secure,r,e,"ws"===n.scheme||"wss"===n.scheme,"",r!==n.subdomain),path:new dt(n.pathString)}},Ci=function(t){var e="",n="",r="",i="",o="",a=!0,u="https",c=443;if("string"==typeof t){var l=t.indexOf("//");l>=0&&(u=t.substring(0,l-1),t=t.substring(l+2));var h=t.indexOf("/");-1===h&&(h=t.length);var d=t.indexOf("?");-1===d&&(d=t.length),e=t.substring(0,Math.min(h,d)),h<d&&(i=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(o){}e+="/"+i}return e}(t.substring(h,d)));var p=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var i=(0,s.XA)(t.split("&")),o=i.next();!o.done;o=i.next()){var a=o.value;if(0!==a.length){var u=a.split("=");2===u.length?r[decodeURIComponent(u[0])]=decodeURIComponent(u[1]):I("Invalid query segment '"+a+"' in query '"+t+"'")}}}catch(c){e={error:c}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,d)));(l=e.indexOf(":"))>=0?(a="https"===u||"wss"===u,c=parseInt(e.substring(l+1),10)):l=e.length;var f=e.slice(0,l);if("localhost"===f.toLowerCase())n="localhost";else if(f.split(".").length<=2)n=f;else{var g=e.indexOf(".");r=e.substring(0,g).toLowerCase(),n=e.substring(g+1),o=r}"ns"in p&&(o=p.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:a,scheme:u,pathString:i,namespace:o}},Ti=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+(0,o.Pz)(this.snapshot.exportVal())},t}(),Si=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),Ei=function(){function t(t,e){this.snapshotCallback=t,this.cancelCallback=e}return t.prototype.onValue=function(t,e){this.snapshotCallback.call(null,t,e)},t.prototype.onCancel=function(t){return(0,o.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)},Object.defineProperty(t.prototype,"hasCancelCallback",{get:function(){return!!this.cancelCallback},enumerable:!1,configurable:!0}),t.prototype.matches=function(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context},t}(),xi=function(){function t(t,e){this._repo=t,this._path=e}return t.prototype.cancel=function(){var t=new o.BH;return si(this._repo,this._path,t.wrapCallback(function(){})),t.promise},t.prototype.remove=function(){Br("OnDisconnect.remove",this._path);var t=new o.BH;return ai(this._repo,this._path,null,t.wrapCallback(function(){})),t.promise},t.prototype.set=function(t){Br("OnDisconnect.set",this._path),Lr("OnDisconnect.set",t,this._path,!1);var e=new o.BH;return ai(this._repo,this._path,t,e.wrapCallback(function(){})),e.promise},t.prototype.setWithPriority=function(t,e){Br("OnDisconnect.setWithPriority",this._path),Lr("OnDisconnect.setWithPriority",t,this._path,!1),Mr("OnDisconnect.setWithPriority",e,!1);var n=new o.BH;return function(t,e,n,r,i){var o=se(n,r);t.server_.onDisconnectPut(e.toString(),o.val(!0),function(n,r){"ok"===n&&Pe(t.onDisconnect_,e,o),hi(0,i,n,r)})}(this._repo,this._path,t,e,n.wrapCallback(function(){})),n.promise},t.prototype.update=function(t){Br("OnDisconnect.update",this._path),Ur("OnDisconnect.update",t,this._path,!1);var e=new o.BH;return function(t,e,n,r){if((0,o.xb)(n))return T("onDisconnect().update() called with empty data.  Don't do anything."),void hi(0,r,"ok",void 0);t.server_.onDisconnectMerge(e.toString(),n,function(i,o){"ok"===i&&F(n,function(n,r){var i=se(r);Pe(t.onDisconnect_,bt(e,n),i)}),hi(0,r,i,o)})}(this._repo,this._path,t,e.wrapCallback(function(){})),e.promise},t}(),Ii=function(){function t(t,e,n,r){this._repo=t,this._path=e,this._queryParams=n,this._orderByCalled=r}return Object.defineProperty(t.prototype,"key",{get:function(){return wt(this._path)?null:yt(this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Pi(this._repo,this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_queryIdentifier",{get:function(){var t=Ie(this._queryParams),e=D(t);return"{}"===e?"default":e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_queryObject",{get:function(){return Ie(this._queryParams)},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){if(!((e=(0,o.m9)(e))instanceof t))return!1;var n=this._repo===e._repo,r=St(this._path,e._path);return n&&r&&this._queryIdentifier===e._queryIdentifier},t.prototype.toJSON=function(){return this.toString()},t.prototype.toString=function(){return this._repo.toString()+function(t){for(var e="",n=t.pieceNum_;n<t.pieces_.length;n++)""!==t.pieces_[n]&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}(this._path)},t}();function ki(t,e){if(!0===t._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Ai(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Ut){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==A)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==O)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===Jt){if(null!=e&&!Dr(e)||null!=n&&!Dr(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,o.hu)(t.getIndex()instanceof ce||t.getIndex()===le,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Oi(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var Pi=function(t){function e(e,n){return t.call(this,e,n,new Ce,!1)||this}return(0,s.ZT)(e,t),Object.defineProperty(e.prototype,"parent",{get:function(){var t=_t(this._path);return null===t?null:new e(this._repo,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){for(var t=this;null!==t.parent;)t=t.parent;return t},enumerable:!1,configurable:!0}),e}(Ii),Ri=function(){function t(t,e,n){this._node=t,this.ref=e,this._index=n}return Object.defineProperty(t.prototype,"priority",{get:function(){return this._node.getPriority().val()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"key",{get:function(){return this.ref.key},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._node.numChildren()},enumerable:!1,configurable:!0}),t.prototype.child=function(e){var n=new dt(e),r=Li(this.ref,e);return new t(this._node.getChild(n),r,Jt)},t.prototype.exists=function(){return!this._node.isEmpty()},t.prototype.exportVal=function(){return this._node.val(!0)},t.prototype.forEach=function(e){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,function(r,i){return e(new t(i,Li(n.ref,r),Jt))})},t.prototype.hasChild=function(t){var e=new dt(t);return!this._node.getChild(e).isEmpty()},t.prototype.hasChildren=function(){return!this._node.isLeafNode()&&!this._node.isEmpty()},t.prototype.toJSON=function(){return this.exportVal()},t.prototype.val=function(){return this._node.val()},t}();function Ni(t,e){return(t=(0,o.m9)(t))._checkNotDeleted("ref"),void 0!==e?Li(t._root,e):t._root}function Di(t,e){(t=(0,o.m9)(t))._checkNotDeleted("refFromURL");var n=wi(e,t._repo.repoInfo_.nodeAdmin);Zr("refFromURL",n);var r=n.repoInfo;return t._repo.repoInfo_.isCustomHost()||r.host===t._repo.repoInfo_.host||x("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+t._repo.repoInfo_.host+")"),Ni(t,n.path.toString())}function Li(t,e){var n;return null===ft((t=(0,o.m9)(t))._path)?((n=e)&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Vr("child","path",n,!1)):Vr("child","path",e,!1),new Pi(t._repo,bt(t._path,e))}function Fi(t,e){t=(0,o.m9)(t),Br("push",t._path),Lr("push",e,t._path,!0);var n,r=Xr(t._repo),i=de(r),s=Li(t,i),a=Li(t,i);return n=null!=e?Mi(a,e).then(function(){return a}):Promise.resolve(a),s.then=n.then.bind(n),s.catch=n.then.bind(n,void 0),s}function Ui(t){return Br("remove",t._path),Mi(t,null)}function Mi(t,e){t=(0,o.m9)(t),Br("set",t._path),Lr("set",e,t._path,!1);var n=new o.BH;return oi(t._repo,t._path,e,null,n.wrapCallback(function(){})),n.promise}function qi(t,e){t=(0,o.m9)(t),Br("setPriority",t._path),Mr("setPriority",e,!1);var n=new o.BH;return oi(t._repo,bt(t._path,".priority"),e,null,n.wrapCallback(function(){})),n.promise}function ji(t,e,n){if(Br("setWithPriority",t._path),Lr("setWithPriority",e,t._path,!1),Mr("setWithPriority",n,!1),".length"===t.key||".keys"===t.key)throw"setWithPriority failed: "+t.key+" is a read-only object.";var r=new o.BH;return oi(t._repo,t._path,e,n,r.wrapCallback(function(){})),r.promise}function Vi(t,e){Ur("update",e,t._path,!1);var n=new o.BH;return function(t,e,n,r){li(t,"update",{path:e.toString(),value:n});var i=!0,s=ti(t),a={};if(F(n,function(n,r){i=!1,a[n]=yr(bt(e,n),se(r),t.serverSyncTree_,s)}),i)T("update() called with empty data.  Don't do anything."),hi(0,r,"ok",void 0);else{var u=ii(t),c=function(t,e,n,r){!function(t,e,n,r){(0,o.hu)(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=tn(t.visibleWrites,e,n),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r);var i=$e.fromObject(n);return nr(t,new Be({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(t.serverSyncTree_,e,a,u);Hr(t.eventQueue_,c),t.server_.merge(e.toString(),n,function(n,i){var o="ok"===n;o||I("update at "+e+" failed: "+n);var s=$n(t.serverSyncTree_,u,!o),a=s.length>0?fi(t,e):e;Kr(t.eventQueue_,a,s),hi(0,r,n,i)}),F(n,function(n){var r=_i(t,bt(e,n));fi(t,r)}),Kr(t.eventQueue_,e,[])}}(t._repo,t._path,e,n.wrapCallback(function(){})),n.promise}var Bi=function(){function t(t){this.callbackContext=t}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e._queryParams.getIndex();return new Ti("value",this,new Ri(t.snapshotNode,new Pi(e._repo,e._path),n))},t.prototype.getEventRunner=function(t){var e=this;return"cancel"===t.getEventType()?function(){return e.callbackContext.onCancel(t.error)}:function(){return e.callbackContext.onValue(t.snapshot,null)}},t.prototype.createCancelEvent=function(t,e){return this.callbackContext.hasCancelCallback?new Si(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))},t.prototype.hasAnyCallback=function(){return null!==this.callbackContext},t}(),Zi=function(){function t(t,e){this.eventType=t,this.callbackContext=e}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return this.eventType===("children_removed"===e?"child_removed":e)},t.prototype.createCancelEvent=function(t,e){return this.callbackContext.hasCancelCallback?new Si(this,t,e):null},t.prototype.createEvent=function(t,e){(0,o.hu)(null!=t.childName,"Child events should have a childName.");var n=Li(new Pi(e._repo,e._path),t.childName),r=e._queryParams.getIndex();return new Ti(t.type,this,new Ri(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this;return"cancel"===t.getEventType()?function(){return e.callbackContext.onCancel(t.error)}:function(){return e.callbackContext.onValue(t.snapshot,t.prevName)}},t.prototype.matches=function(e){return e instanceof t&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))},t.prototype.hasAnyCallback=function(){return!!this.callbackContext},t}();function Gi(t,e,n,r,i){var o;if("object"==typeof r&&(o=void 0,i=r),"function"==typeof r&&(o=r),i&&i.onlyOnce){var s=n,a=function(e,n){ui(t._repo,t,c),s(e,n)};a.userCallback=n.userCallback,a.context=n.context,n=a}var u=new Ei(n,o||void 0),c="value"===e?new Bi(u):new Zi(e,u);return function(t,e,n){var r;r=".info"===ft(e._path)?tr(t.infoSyncTree_,e,n):tr(t.serverSyncTree_,e,n),Wr(t.eventQueue_,e._path,r)}(t._repo,t,c),function(){return ui(t._repo,t,c)}}function zi(t,e,n,r){return Gi(t,"value",e,n,r)}function Hi(t,e,n,r){return Gi(t,"child_added",e,n,r)}function Wi(t,e,n,r){return Gi(t,"child_changed",e,n,r)}function Ki(t,e,n,r){return Gi(t,"child_moved",e,n,r)}function Yi(t,e,n,r){return Gi(t,"child_removed",e,n,r)}function Qi(t,e,n){var r=null,i=n?new Ei(n):null;"value"===e?r=new Bi(i):e&&(r=new Zi(e,i)),ui(t._repo,t,r)}var $i=function(){return function(){}}(),Ji=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return(0,s.ZT)(e,t),e.prototype._apply=function(t){Lr("endAt",this._value,t._path,!0);var e=Se(t._queryParams,this._value,this._key);if(Oi(e),Ai(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ii(t._repo,t._path,e,t._orderByCalled)},e}($i);function Xi(t,e){return jr("endAt","key",e,!0),new Ji(t,e)}var to=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return(0,s.ZT)(e,t),e.prototype._apply=function(t){Lr("endBefore",this._value,t._path,!1);var e,n,r,i,o=(n=this._value,r=this._key,(e=t._queryParams).index_===Ut?("string"==typeof n&&(n=fe(n)),i=Se(e,n,r)):i=Se(e,n,null==r?A:fe(r)),i.endBeforeSet_=!0,i);if(Oi(o),Ai(o),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ii(t._repo,t._path,o,t._orderByCalled)},e}($i);function eo(t,e){return jr("endBefore","key",e,!0),new to(t,e)}var no=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return(0,s.ZT)(e,t),e.prototype._apply=function(t){Lr("startAt",this._value,t._path,!0);var e=Te(t._queryParams,this._value,this._key);if(Oi(e),Ai(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Ii(t._repo,t._path,e,t._orderByCalled)},e}($i);function ro(t,e){return void 0===t&&(t=null),jr("startAt","key",e,!0),new no(t,e)}var io=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return(0,s.ZT)(e,t),e.prototype._apply=function(t){Lr("startAfter",this._value,t._path,!1);var e,n,r,i,o=(n=this._value,r=this._key,(e=t._queryParams).index_===Ut?("string"==typeof n&&(n=pe(n)),i=Te(e,n,r)):i=Te(e,n,null==r?O:pe(r)),i.startAfterSet_=!0,i);if(Oi(o),Ai(o),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Ii(t._repo,t._path,o,t._orderByCalled)},e}($i);function oo(t,e){return jr("startAfter","key",e,!0),new io(t,e)}var so=function(t){function e(e){var n=t.call(this)||this;return n._limit=e,n}return(0,s.ZT)(e,t),e.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ii(t._repo,t._path,(e=this._limit,(n=t._queryParams.copy()).limitSet_=!0,n.limit_=e,n.viewFrom_="l",n),t._orderByCalled);var e,n},e}($i);function ao(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new so(t)}var uo=function(t){function e(e){var n=t.call(this)||this;return n._limit=e,n}return(0,s.ZT)(e,t),e.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ii(t._repo,t._path,(e=this._limit,(n=t._queryParams.copy()).limitSet_=!0,n.limit_=e,n.viewFrom_="r",n),t._orderByCalled);var e,n},e}($i);function co(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new uo(t)}var lo=function(t){function e(e){var n=t.call(this)||this;return n._path=e,n}return(0,s.ZT)(e,t),e.prototype._apply=function(t){ki(t,"orderByChild");var e=new dt(this._path);if(wt(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var n=new ce(e),r=Ee(t._queryParams,n);return Ai(r),new Ii(t._repo,t._path,r,!0)},e}($i);function ho(t){if("$key"===t)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===t)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===t)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Vr("orderByChild","path",t,!1),new lo(t)}var po=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,s.ZT)(e,t),e.prototype._apply=function(t){ki(t,"orderByKey");var e=Ee(t._queryParams,Ut);return Ai(e),new Ii(t._repo,t._path,e,!0)},e}($i);function fo(){return new po}var go=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,s.ZT)(e,t),e.prototype._apply=function(t){ki(t,"orderByPriority");var e=Ee(t._queryParams,Jt);return Ai(e),new Ii(t._repo,t._path,e,!0)},e}($i);function mo(){return new go}var yo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,s.ZT)(e,t),e.prototype._apply=function(t){ki(t,"orderByValue");var e=Ee(t._queryParams,le);return Ai(e),new Ii(t._repo,t._path,e,!0)},e}($i);function vo(){return new yo}var _o=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return(0,s.ZT)(e,t),e.prototype._apply=function(t){if(Lr("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Ji(this._value,this._key)._apply(new no(this._value,this._key)._apply(t))},e}($i);function bo(t,e){return jr("equalTo","key",e,!0),new _o(t,e)}function wo(t){for(var e,n,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var a=(0,o.m9)(t);try{for(var u=(0,s.XA)(r),c=u.next();!c.done;c=u.next()){var l=c.value;a=l._apply(a)}}catch(h){e={error:h}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}return a}!function(t){(0,o.hu)(!Pn,"__referenceConstructor has already been defined"),Pn=t}(Pi),function(t){(0,o.hu)(!Mn,"__referenceConstructor has already been defined"),Mn=t}(Pi);var Co={},To=!1;function So(t,e,n,r,i){var o=r||t.options.databaseURL;void 0===o&&(t.options.projectId||x("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),T("Using default host for project ",t.options.projectId),o=t.options.projectId+"-default-rtdb.firebaseio.com");var s,a=wi(o,i),u=a.repoInfo,c=void 0;"undefined"!=typeof process&&(c=process.env.FIREBASE_DATABASE_EMULATOR_HOST),c?(s=!0,u=(a=wi(o="http://"+c+"?ns="+u.namespace,i)).repoInfo):s=!a.repoInfo.secure;var l=i&&s?new G(G.OWNER):new Z(t.name,t.options,e);Zr("Invalid Firebase Database URL",a),wt(a.path)||x("Database URL must point to the root of a Firebase Database (not including a child path).");var h=function(t,e,n,r){var i=Co[e.name];i||(Co[e.name]=i={});var o=i[t.toURLString()];return o&&x("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new Jr(t,To,n,r),i[t.toURLString()]=o,o}(u,t,l,new B(t.name,n));return new Eo(h,t)}var Eo=function(){function t(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}return Object.defineProperty(t.prototype,"_repo",{get:function(){return this._instanceStarted||(function(t,e,n){if(t.stats_=X(t.repoInfo_),t.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)t.server_=new ke(t.repoInfo_,function(e,n,r,i){ei(t,e,n,r,i)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(function(){return ni(t,!0)},0);else{if(null!=n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,o.Pz)(n)}catch(s){throw new Error("Invalid authOverride provided: "+s)}}t.persistentConnection_=new Nt(t.repoInfo_,e,function(e,n,r,i){ei(t,e,n,r,i)},function(e){ni(t,e)},function(e){!function(t,e){F(e,function(e,n){ri(t,e,n)})}(t,e)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}var r,i;t.authTokenProvider_.addTokenChangeListener(function(e){t.server_.refreshAuthToken(e)}),t.appCheckProvider_.addTokenChangeListener(function(e){t.server_.refreshAppCheckToken(e.token)}),t.statsReporter_=(r=function(){return new Le(t.stats_,t.server_)},i=t.repoInfo_.toString(),J[i]||(J[i]=r()),J[i]),t.infoData_=new Ae,t.infoSyncTree_=new Yn({startListening:function(e,n,r,i){var o=[],s=t.infoData_.getNode(e._path);return s.isEmpty()||(o=Jn(t.infoSyncTree_,e._path,s),setTimeout(function(){i("ok")},0)),o},stopListening:function(){}}),ri(t,"connected",!1),t.serverSyncTree_=new Yn({startListening:function(e,n,r,i){return t.server_.listen(e,r,n,function(n,r){var o=i(n,r);Kr(t.eventQueue_,e._path,o)}),[]},stopListening:function(e,n){t.server_.unlisten(e,n)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_root",{get:function(){return this._rootInternal||(this._rootInternal=new Pi(this._repo,pt())),this._rootInternal},enumerable:!1,configurable:!0}),t.prototype._delete=function(){var t,e,n;return this._checkNotDeleted("delete"),t=this._repo,(n=Co[e=this.app.name])&&n[t.key]===t||x("Database "+e+"("+t.repoInfo_+") has already been deleted."),ci(t),delete n[t.key],this._repoInternal=null,this._rootInternal=null,Promise.resolve()},t.prototype._checkNotDeleted=function(t){null===this._rootInternal&&x("Cannot call "+t+" on a deleted database.")},t}();function xo(t){(t=(0,o.m9)(t))._checkNotDeleted("goOffline"),ci(t._repo)}function Io(t){var e;(t=(0,o.m9)(t))._checkNotDeleted("goOnline"),(e=t._repo).persistentConnection_&&e.persistentConnection_.resume($r)}var ko={".sv":"timestamp"},Ao=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}();function Oo(t,e,n){var r;if(t=(0,o.m9)(t),Br("Reference.transaction",t._path),".length"===t.key||".keys"===t.key)throw"Reference.transaction failed: "+t.key+" is a read-only object.";var i=null===(r=null==n?void 0:n.applyLocally)||void 0===r||r,s=new o.BH,a=zi(t,function(){});return function(e,n,r,i,a,u){li(e,"transaction on "+n);var c={path:n,update:r,onComplete:function(e,n,r){var i=null;e?s.reject(e):(i=new Ri(r,new Pi(t._repo,t._path),Jt),s.resolve(new Ao(n,i)))},status:null,order:y(),applyLocally:u,retryCount:0,unwatcher:a,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},l=di(e,n,void 0);c.currentInputSnapshot=l;var h=c.update(l.val());if(void 0===h)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{Fr("transaction failed: Data returned ",h,c.path),c.status=0;var d=wr(e.transactionQueueTree_,n),p=Cr(d)||[];p.push(c),Tr(d,p);var f=void 0;"object"==typeof h&&null!==h&&(0,o.r3)(h,".priority")?(f=(0,o.DV)(h,".priority"),(0,o.hu)(Dr(f),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):f=(er(e.serverSyncTree_,n)||ie.EMPTY_NODE).getPriority().val();var g=ti(e),m=se(h,f),v=vr(m,l,g);c.currentOutputSnapshotRaw=m,c.currentOutputSnapshotResolved=v,c.currentWriteId=ii(e);var _=Qn(e.serverSyncTree_,n,v,c.currentWriteId,c.applyLocally);Kr(e.eventQueue_,n,_),pi(e,e.transactionQueueTree_)}}(t._repo,t._path,e,0,a,i),s.promise}var Po=function(){function t(t){this._delegate=t}return t.prototype.cancel=function(t){(0,o.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,o.Wj)("OnDisconnect.cancel","onComplete",t,!0);var e=this._delegate.cancel();return t&&e.then(function(){return t(null)},function(e){return t(e)}),e},t.prototype.remove=function(t){(0,o.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,o.Wj)("OnDisconnect.remove","onComplete",t,!0);var e=this._delegate.remove();return t&&e.then(function(){return t(null)},function(e){return t(e)}),e},t.prototype.set=function(t,e){(0,o.Dv)("OnDisconnect.set",1,2,arguments.length),(0,o.Wj)("OnDisconnect.set","onComplete",e,!0);var n=this._delegate.set(t);return e&&n.then(function(){return e(null)},function(t){return e(t)}),n},t.prototype.setWithPriority=function(t,e,n){(0,o.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,o.Wj)("OnDisconnect.setWithPriority","onComplete",n,!0);var r=this._delegate.setWithPriority(t,e);return n&&r.then(function(){return n(null)},function(t){return n(t)}),r},t.prototype.update=function(t,e){if((0,o.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,I("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,o.Wj)("OnDisconnect.update","onComplete",e,!0);var i=this._delegate.update(t);return e&&i.then(function(){return e(null)},function(t){return e(t)}),i},t}(),Ro=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return(0,o.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),No=function(){function t(t,e){this._database=t,this._delegate=e}return t.prototype.val=function(){return(0,o.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()},t.prototype.exportVal=function(){return(0,o.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()},t.prototype.toJSON=function(){return(0,o.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()},t.prototype.exists=function(){return(0,o.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()},t.prototype.child=function(e){return(0,o.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),Vr("DataSnapshot.child","path",e,!1),new t(this._database,this._delegate.child(e))},t.prototype.hasChild=function(t){return(0,o.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Vr("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)},t.prototype.getPriority=function(){return(0,o.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority},t.prototype.forEach=function(e){var n=this;return(0,o.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,o.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(function(r){return e(new t(n._database,r))})},t.prototype.hasChildren=function(){return(0,o.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()},Object.defineProperty(t.prototype,"key",{get:function(){return this._delegate.key},enumerable:!1,configurable:!0}),t.prototype.numChildren=function(){return(0,o.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size},t.prototype.getRef=function(){return(0,o.Dv)("DataSnapshot.ref",0,0,arguments.length),new Lo(this._database,this._delegate.ref)},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),Do=function(){function t(t,e){this.database=t,this._delegate=e}return t.prototype.on=function(e,n,r,i){var s,a=this;(0,o.Dv)("Query.on",2,4,arguments.length),(0,o.Wj)("Query.on","callback",n,!1);var u=t.getCancelAndContextArgs_("Query.on",r,i),c=function(t,e){n.call(u.context,new No(a.database,t),e)};c.userCallback=n,c.context=u.context;var l=null===(s=u.cancel)||void 0===s?void 0:s.bind(u.context);switch(e){case"value":return zi(this._delegate,c,l),n;case"child_added":return Hi(this._delegate,c,l),n;case"child_removed":return Yi(this._delegate,c,l),n;case"child_changed":return Wi(this._delegate,c,l),n;case"child_moved":return Ki(this._delegate,c,l),n;default:throw new Error((0,o.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},t.prototype.off=function(t,e,n){if((0,o.Dv)("Query.off",0,3,arguments.length),qr("Query.off",t,!0),(0,o.Wj)("Query.off","callback",e,!0),(0,o.lb)("Query.off","context",n,!0),e){var r=function(){};r.userCallback=e,r.context=n,Qi(this._delegate,t,r)}else Qi(this._delegate,t)},t.prototype.get=function(){var t=this;return function(t){return function(t,e){var n=function(t,e){var n=e._path,r=null;t.syncPointTree_.foreachOnPath(n,function(t,e){var i=Ct(t,n);r=r||Zn(e,i)});var i=t.syncPointTree_.get(n);i?r=r||Zn(i,pt()):(i=new qn,t.syncPointTree_=t.syncPointTree_.set(n,i));var o=null!=r,s=o?new Ze(r,!0,!1):null;return Ye(Vn(i,e,ln(t.pendingWriteTree_,e._path),o?s.getNode():ie.EMPTY_NODE,o).viewCache_)}(t.serverSyncTree_,e);return null!=n?Promise.resolve(n):t.server_.get(e).then(function(n){var r=se(n),i=Jn(t.serverSyncTree_,e._path,r);return Wr(t.eventQueue_,e._path,i),Promise.resolve(r)},function(n){return li(t,"get for query "+(0,o.Pz)(e)+" failed: "+n),Promise.reject(new Error(n))})}((t=(0,o.m9)(t))._repo,t).then(function(e){return new Ri(e,new Pi(t._repo,t._path),t._queryParams.getIndex())})}(this._delegate).then(function(e){return new No(t.database,e)})},t.prototype.once=function(e,n,r,i){var s=this;(0,o.Dv)("Query.once",1,4,arguments.length),(0,o.Wj)("Query.once","callback",n,!0);var a=t.getCancelAndContextArgs_("Query.once",r,i),u=new o.BH,c=function(t,e){var r=new No(s.database,t);n&&n.call(a.context,r,e),u.resolve(r)};c.userCallback=n,c.context=a.context;var l=function(t){a.cancel&&a.cancel.call(a.context,t),u.reject(t)};switch(e){case"value":zi(this._delegate,c,l,{onlyOnce:!0});break;case"child_added":Hi(this._delegate,c,l,{onlyOnce:!0});break;case"child_removed":Yi(this._delegate,c,l,{onlyOnce:!0});break;case"child_changed":Wi(this._delegate,c,l,{onlyOnce:!0});break;case"child_moved":Ki(this._delegate,c,l,{onlyOnce:!0});break;default:throw new Error((0,o.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise},t.prototype.limitToFirst=function(e){return(0,o.Dv)("Query.limitToFirst",1,1,arguments.length),new t(this.database,wo(this._delegate,ao(e)))},t.prototype.limitToLast=function(e){return(0,o.Dv)("Query.limitToLast",1,1,arguments.length),new t(this.database,wo(this._delegate,co(e)))},t.prototype.orderByChild=function(e){return(0,o.Dv)("Query.orderByChild",1,1,arguments.length),new t(this.database,wo(this._delegate,ho(e)))},t.prototype.orderByKey=function(){return(0,o.Dv)("Query.orderByKey",0,0,arguments.length),new t(this.database,wo(this._delegate,fo()))},t.prototype.orderByPriority=function(){return(0,o.Dv)("Query.orderByPriority",0,0,arguments.length),new t(this.database,wo(this._delegate,mo()))},t.prototype.orderByValue=function(){return(0,o.Dv)("Query.orderByValue",0,0,arguments.length),new t(this.database,wo(this._delegate,vo()))},t.prototype.startAt=function(e,n){return void 0===e&&(e=null),(0,o.Dv)("Query.startAt",0,2,arguments.length),new t(this.database,wo(this._delegate,ro(e,n)))},t.prototype.startAfter=function(e,n){return void 0===e&&(e=null),(0,o.Dv)("Query.startAfter",0,2,arguments.length),new t(this.database,wo(this._delegate,oo(e,n)))},t.prototype.endAt=function(e,n){return void 0===e&&(e=null),(0,o.Dv)("Query.endAt",0,2,arguments.length),new t(this.database,wo(this._delegate,Xi(e,n)))},t.prototype.endBefore=function(e,n){return void 0===e&&(e=null),(0,o.Dv)("Query.endBefore",0,2,arguments.length),new t(this.database,wo(this._delegate,eo(e,n)))},t.prototype.equalTo=function(e,n){return(0,o.Dv)("Query.equalTo",1,2,arguments.length),new t(this.database,wo(this._delegate,bo(e,n)))},t.prototype.toString=function(){return(0,o.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()},t.prototype.toJSON=function(){return(0,o.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()},t.prototype.isEqual=function(e){if((0,o.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(e._delegate)},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:void 0,context:void 0};if(e&&n)r.cancel=e,(0,o.Wj)(t,"cancel",r.cancel,!0),r.context=n,(0,o.lb)(t,"context",r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error((0,o.gK)(t,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return new Lo(this.database,new Pi(this._delegate._repo,this._delegate._path))},enumerable:!1,configurable:!0}),t}(),Lo=function(t){function e(e,n){var r=t.call(this,e,new Ii(n._repo,n._path,new Ce,!1))||this;return r.database=e,r._delegate=n,r}return(0,s.ZT)(e,t),e.prototype.getKey=function(){return(0,o.Dv)("Reference.key",0,0,arguments.length),this._delegate.key},e.prototype.child=function(t){return(0,o.Dv)("Reference.child",1,1,arguments.length),"number"==typeof t&&(t=String(t)),new e(this.database,Li(this._delegate,t))},e.prototype.getParent=function(){(0,o.Dv)("Reference.parent",0,0,arguments.length);var t=this._delegate.parent;return t?new e(this.database,t):null},e.prototype.getRoot=function(){return(0,o.Dv)("Reference.root",0,0,arguments.length),new e(this.database,this._delegate.root)},e.prototype.set=function(t,e){(0,o.Dv)("Reference.set",1,2,arguments.length),(0,o.Wj)("Reference.set","onComplete",e,!0);var n=Mi(this._delegate,t);return e&&n.then(function(){return e(null)},function(t){return e(t)}),n},e.prototype.update=function(t,e){if((0,o.Dv)("Reference.update",1,2,arguments.length),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,I("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Br("Reference.update",this._delegate._path),(0,o.Wj)("Reference.update","onComplete",e,!0);var i=Vi(this._delegate,t);return e&&i.then(function(){return e(null)},function(t){return e(t)}),i},e.prototype.setWithPriority=function(t,e,n){(0,o.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,o.Wj)("Reference.setWithPriority","onComplete",n,!0);var r=ji(this._delegate,t,e);return n&&r.then(function(){return n(null)},function(t){return n(t)}),r},e.prototype.remove=function(t){(0,o.Dv)("Reference.remove",0,1,arguments.length),(0,o.Wj)("Reference.remove","onComplete",t,!0);var e=Ui(this._delegate);return t&&e.then(function(){return t(null)},function(e){return t(e)}),e},e.prototype.transaction=function(t,e,n){var r=this;(0,o.Dv)("Reference.transaction",1,3,arguments.length),(0,o.Wj)("Reference.transaction","transactionUpdate",t,!1),(0,o.Wj)("Reference.transaction","onComplete",e,!0),Gr("Reference.transaction","applyLocally",n,!0);var i=Oo(this._delegate,t,{applyLocally:n}).then(function(t){return new Ro(t.committed,new No(r.database,t.snapshot))});return e&&i.then(function(t){return e(null,t.committed,t.snapshot)},function(t){return e(t,!1,null)}),i},e.prototype.setPriority=function(t,e){(0,o.Dv)("Reference.setPriority",1,2,arguments.length),(0,o.Wj)("Reference.setPriority","onComplete",e,!0);var n=qi(this._delegate,t);return e&&n.then(function(){return e(null)},function(t){return e(t)}),n},e.prototype.push=function(t,n){var r=this;(0,o.Dv)("Reference.push",0,2,arguments.length),(0,o.Wj)("Reference.push","onComplete",n,!0);var i=Fi(this._delegate,t),s=i.then(function(t){return new e(r.database,t)});n&&s.then(function(){return n(null)},function(t){return n(t)});var a=new e(this.database,i);return a.then=s.then.bind(s),a.catch=s.catch.bind(s,void 0),a},e.prototype.onDisconnect=function(){return Br("Reference.onDisconnect",this._delegate._path),new Po(new xi(this._delegate._repo,this._delegate._path))},Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),e}(Do),Fo=function(){function t(t,e){var n=this;this._delegate=t,this.app=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={}),(t=(0,o.m9)(t))._checkNotDeleted("useEmulator"),t._instanceStarted&&x("Cannot call useEmulator() after instance has already been initialized.");var i=t._repoInternal,s=void 0;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&x('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new G(G.OWNER);else if(r.mockUserToken){var a=(0,o.Sg)(r.mockUserToken,t.app.options.projectId);s=new G(a)}!function(t,e,n,r){t.repoInfo_=new K(e+":"+n,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),r&&(t.authTokenProvider_=r)}(i,e,n,s)}(this._delegate,t,e,n)},t.prototype.ref=function(t){if((0,o.Dv)("database.ref",0,1,arguments.length),t instanceof Lo){var e=Di(this._delegate,t.toString());return new Lo(this,e)}return e=Ni(this._delegate,t),new Lo(this,e)},t.prototype.refFromURL=function(t){var e="database.refFromURL";(0,o.Dv)(e,1,1,arguments.length);var n=Di(this._delegate,t);return new Lo(this,n)},t.prototype.goOffline=function(){return(0,o.Dv)("database.goOffline",0,0,arguments.length),xo(this._delegate)},t.prototype.goOnline=function(){return(0,o.Dv)("database.goOnline",0,0,arguments.length),Io(this._delegate)},t.ServerValue={TIMESTAMP:ko,increment:function(t){return function(t){return{".sv":{increment:t}}}(t)}},t}(),Uo=Object.freeze({__proto__:null,forceLongPolling:function(){st.forceDisallow(),rt.forceAllow()},forceWebSockets:function(){rt.forceDisallow()},isWebSocketsAvailable:function(){return st.isAvailable()},setSecurityDebugCallback:function(t,e){t._delegate._repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){!function(t,e){if(void 0===e&&(e=!1),"undefined"!=typeof console){var n;e?(t.statsListener_||(t.statsListener_=new De(t.stats_)),n=t.statsListener_.get()):n=t.stats_.get();var r=Object.keys(n).reduce(function(t,e){return Math.max(e.length,t)},0);F(n,function(t,e){for(var n=t,i=t.length;i<r+2;i++)n+=" ";console.log(n+e)})}}(t._delegate._repo,e)},statsIncrementCounter:function(t,e){!function(t,e){t.stats_.incrementCounter(e),t.statsReporter_.statsToReport_[e]=!0}(t._delegate._repo,e)},dataUpdateCount:function(t){return t._delegate._repo.dataUpdateCount},interceptServerData:function(t,e){return function(t,e){t.interceptServerDataCallback_=e}(t._delegate._repo,e)},initStandalone:function(t){var e=t.app,n=t.url,r=t.customAuthImpl,o=t.namespace,s=t.nodeAdmin,a=void 0!==s&&s;c(t.version);var u=new i.zt("auth-internal",new i.H0("database-standalone"));return u.setComponent(new i.wA("auth-internal",function(){return r},"PRIVATE")),{instance:new Fo(So(e,u,void 0,n,a),e),namespace:o}}}),Mo=Nt;Nt.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},Nt.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var qo=Object.freeze({__proto__:null,DataConnection:Mo,RealTimeConnection:ut,hijackHash:function(t){var e=Nt.prototype.put;return Nt.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){Nt.prototype.put=e}},ConnectionTarget:K,queryIdentifier:function(t){return t._delegate._queryIdentifier},forceRestClient:function(t){!function(t){To=t}(t)}}),jo=Fo.ServerValue;!function(e){c(e.SDK_VERSION);var n=e.INTERNAL.registerComponent(new i.wA("database",function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return new Fo(So(r,i,o,n),r)},"PUBLIC").setServiceProps({Reference:Lo,Query:Do,Database:Fo,DataSnapshot:No,enableLogging:C,INTERNAL:Uo,ServerValue:jo,TEST_ACCESS:qo}).setMultipleInstances(!0));e.registerVersion("@firebase/database","0.10.1"),(0,o.Yr)()&&(t.exports=n)}(r.Z)},308:(t,e,n)=>{"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var i;n.d(e,{in:()=>s,Yd:()=>h,Ub:()=>d,Am:()=>p});var o=[],s=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),a={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},u=s.INFO,c=((i={})[s.DEBUG]="log",i[s.VERBOSE]="log",i[s.INFO]="info",i[s.WARN]="warn",i[s.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=c[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in s))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.DEBUG],t)),this._logHandler.apply(this,r([this,s.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.VERBOSE],t)),this._logHandler.apply(this,r([this,s.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.INFO],t)),this._logHandler.apply(this,r([this,s.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.WARN],t)),this._logHandler.apply(this,r([this,s.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.ERROR],t)),this._logHandler.apply(this,r([this,s.ERROR],t))},t}();function d(t){o.forEach(function(e){e.setLogLevel(t)})}function p(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}}).filter(function(t){return t}).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:s[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=o;r<i.length;r++)n(i[r])}},250:(t,e,n)=>{"use strict";n.d(e,{BH:()=>d,LL:()=>k,ZR:()=>I,gQ:()=>V,zI:()=>x,hu:()=>i,g5:()=>o,US:()=>a,h$:()=>u,$s:()=>$,r3:()=>F,Sg:()=>p,ne:()=>B,p$:()=>l,ZB:()=>h,gK:()=>H,m9:()=>J,z$:()=>f,GJ:()=>L,jU:()=>y,ru:()=>v,d:()=>b,xb:()=>M,w1:()=>w,hl:()=>S,uI:()=>g,UG:()=>m,Yr:()=>T,b$:()=>_,Mn:()=>C,w9:()=>D,cI:()=>P,UI:()=>q,xO:()=>j,DV:()=>U,ug:()=>Q,dS:()=>Y,Pz:()=>R,Dv:()=>z,Wj:()=>W,lb:()=>K,eu:()=>E});var r=n(4762),i=function(t,e){if(!t)throw o(e)},o=function(t){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+t)},s=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},a={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=(15&a)<<2|c>>6,h=63&c;u||(h=64,s||(l=64)),r.push(n[o>>2],n[(3&o)<<4|a>>4],n[l],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(s(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();r.push(o<<2|s>>4),64!==a&&(r.push(s<<4&240|a>>2),64!==u&&r.push(a<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},u=function(t){var e=s(t);return a.encodeByteArray(e,!0)},c=function(t){try{return a.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function l(t){return h(void 0,t)}function h(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=h(t[n],e[n]));return t}var d=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}();function p(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var s=(0,r.pi)({iss:"https://securetoken.google.com/"+n,aud:n,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[a.encodeString(JSON.stringify({alg:"none",type:"JWT"}),!1),a.encodeString(JSON.stringify(s),!1),""].join(".")}function f(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function g(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(f())}function m(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function y(){return"object"==typeof self&&self.self===self}function v(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function _(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function b(){return f().indexOf("Electron/")>=0}function w(){var t=f();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function C(){return f().indexOf("MSAppHost/")>=0}function T(){return!1}function S(){return"indexedDB"in self&&null!=indexedDB}function E(){return new Promise(function(t,e){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(o){e(o)}})}function x(){return!(!navigator||!navigator.cookieEnabled)}var I=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,k.prototype.create),o}return(0,r.ZT)(e,t),e}(Error),k=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?A(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new I(i,a,r);return u},t}();function A(t,e){return t.replace(O,function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"})}var O=/\{\$([^}]+)}/g;function P(t){return JSON.parse(t)}function R(t){return JSON.stringify(t)}var N=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=P(c(o[0])||""),n=P(c(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(s){}return{header:e,claims:n,data:r,signature:i}},D=function(t){var e=N(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},L=function(t){var e=N(t).claims;return"object"==typeof e&&!0===e.admin};function F(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function U(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function M(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function q(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function j(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach(function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""}var V=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var i,o,s=this.chain_[0],a=this.chain_[1],u=this.chain_[2],c=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=c^a&(u^c),o=1518500249):(i=a^u^c,o=1859775393):r<60?(i=a&u|c&(a|u),o=2400959708):(i=a^u^c,o=3395469782);var h=(s<<5|s>>>27)+i+l+o+n[r]&4294967295;l=c,c=u,u=4294967295&(a<<30|a>>>2),a=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();function B(t,e){var n=new Z(t,e);return n.subscribe.bind(n)}var Z=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=G),void 0===r.error&&(r.error=G),void 0===r.complete&&(r.complete=G);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function G(){}var z=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function H(t,e){return t+" failed: "+e+" argument "}function W(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(H(t,e)+"must be a valid function.")}function K(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(H(t,e)+"must be a valid context object.")}var Y=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var o=t.charCodeAt(r);if(o>=55296&&o<=56319){var s=o-55296;r++,i(r<t.length,"Surrogate pair missing trail surrogate."),o=65536+(s<<10)+(t.charCodeAt(r)-56320)}o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=63&o|128):o<65536?(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=63&o|128):(e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=63&o|128)}return e},Q=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};function $(t,e,n){void 0===e&&(e=1e3),void 0===n&&(n=2);var r=e*Math.pow(n,t),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+i)}function J(t){return t&&t._delegate?t._delegate:t}},1858:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r.Z});var r=n(1062);r.Z.registerVersion("firebase","8.6.1","app")},8318:(t,e,n)=>{"use strict";n.d(e,{y:()=>c});var r=n(6673),i=n(5331),o=n(7498),s=n(6197),a=n(3392),u=n(1484);let c=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:s}=this,a=function(t,e,n){if(t){if(t instanceof r.L)return t;if(t[i.b])return t[i.b]()}return t||e||n?new r.L(t,e,n):new r.L(o.c)}(t,e,n);if(a.add(s?s.call(a,this.source):this.source||u.v.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),u.v.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(t){try{return this._subscribe(t)}catch(e){u.v.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:i}=t;if(e||i)return!1;t=n&&n instanceof r.L?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=l(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[s.L](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?a.y:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=l(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function l(t){if(t||(t=u.v.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},7498:(t,e,n)=>{"use strict";n.d(e,{c:()=>o});var r=n(1484),i=n(4294);const o={closed:!0,next(t){},error(t){if(r.v.useDeprecatedSynchronousErrorHandling)throw t;(0,i.z)(t)},complete(){}}},5959:(t,e,n)=>{"use strict";n.d(e,{Yc:()=>c,xQ:()=>l});var r=n(8318),i=n(6673),o=n(7570),s=n(3895),a=n(9291),u=n(5331);class c extends i.L{constructor(t){super(t),this.destination=t}}let l=(()=>{class t extends r.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[u.b](){return new c(this)}lift(t){const e=new h(this,this);return e.operator=t,e}next(t){if(this.closed)throw new s.N;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new s.N;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new s.N;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new s.N;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new s.N;return this.hasError?(t.error(this.thrownError),o.w.EMPTY):this.isStopped?(t.complete(),o.w.EMPTY):(this.observers.push(t),new a.W(this,t))}asObservable(){const t=new r.y;return t.source=this,t}}return t.create=(t,e)=>new h(t,e),t})();class h extends l{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):o.w.EMPTY}}},9291:(t,e,n)=>{"use strict";n.d(e,{W:()=>i});var r=n(7570);class i extends r.w{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},6673:(t,e,n)=>{"use strict";n.d(e,{L:()=>c});var r=n(5024),i=n(7498),o=n(7570),s=n(5331),a=n(1484),u=n(4294);class c extends o.w{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.c;break;case 1:if(!t){this.destination=i.c;break}if("object"==typeof t){t instanceof c?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,t,e,n)}}[s.b](){return this}static create(t,e,n){const r=new c(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class l extends c{constructor(t,e,n,o){let s;super(),this._parentSubscriber=t;let a=this;(0,r.m)(e)?s=e:e&&(s=e.next,n=e.error,o=e.complete,e!==i.c&&(a=Object.create(e),(0,r.m)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=s,this._error=n,this._complete=o}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;a.v.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=a.v;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):(0,u.z)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;(0,u.z)(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);a.v.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),a.v.useDeprecatedSynchronousErrorHandling)throw n;(0,u.z)(n)}}__tryOrSetError(t,e,n){if(!a.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return a.v.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):((0,u.z)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}},7570:(t,e,n)=>{"use strict";n.d(e,{w:()=>a});var r=n(8470),i=n(2056),o=n(5024);const s=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();let a=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:a,_unsubscribe:c,_subscriptions:l}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if((0,o.m)(c)){a&&(this._unsubscribe=void 0);try{c.call(this)}catch(h){e=h instanceof s?u(h.errors):[h]}}if((0,r.k)(l)){let t=-1,n=l.length;for(;++t<n;){const n=l[t];if((0,i.K)(n))try{n.unsubscribe()}catch(h){e=e||[],h instanceof s?e=e.concat(u(h.errors)):e.push(h)}}}if(e)throw new s(e)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof t){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}var e;return t.EMPTY=((e=new t).closed=!0,e),t})();function u(t){return t.reduce((t,e)=>t.concat(e instanceof s?e.errors:e),[])}},1484:(t,e,n)=>{"use strict";n.d(e,{v:()=>i});let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},6882:(t,e,n)=>{"use strict";n.d(e,{IY:()=>s,Ds:()=>a,ft:()=>u});var r=n(6673),i=n(8318),o=n(6015);class s extends r.L{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class a extends r.L{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function u(t,e){if(e.closed)return;if(t instanceof i.y)return t.subscribe(e);let n;try{n=(0,o.s)(t)(e)}catch(r){e.error(r)}return n}},2875:(t,e,n)=>{"use strict";n.d(e,{c:()=>a,N:()=>u});var r=n(5959),i=n(8318),o=n(7570),s=n(1564);class a extends i.y{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new o.w,t.add(this.source.subscribe(new c(this.getSubject(),this))),t.closed&&(this._connection=null,t=o.w.EMPTY)),t}refCount(){return(0,s.x)()(this)}}const u=(()=>{const t=a.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class c extends r.Yc{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}},653:(t,e,n)=>{"use strict";n.d(e,{E:()=>i,c:()=>o});var r=n(8318);const i=new r.y(t=>t.complete());function o(t){return t?function(t){return new r.y(e=>t.schedule(()=>e.complete()))}(t):i}},9764:(t,e,n)=>{"use strict";n.d(e,{D:()=>h});var r=n(8318),i=n(6015),o=n(7570),s=n(6197),a=n(2570),u=n(5686),c=n(5168),l=n(9653);function h(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[s.L]}(t))return function(t,e){return new r.y(n=>{const r=new o.w;return r.add(e.schedule(()=>{const i=t[s.L]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if((0,c.t)(t))return function(t,e){return new r.y(n=>{const r=new o.w;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if((0,l.z)(t))return(0,a.r)(t,e);if(function(t){return t&&"function"==typeof t[u.hZ]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.y(n=>{const r=new o.w;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[u.hZ](),r.add(e.schedule(function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())}))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof r.y?t:new r.y((0,i.s)(t))}},9342:(t,e,n)=>{"use strict";n.d(e,{n:()=>s});var r=n(8318),i=n(625),o=n(2570);function s(t,e){return e?(0,o.r)(t,e):new r.y((0,i.V)(t))}},1906:(t,e,n)=>{"use strict";n.d(e,{T:()=>a});var r=n(8318),i=n(6163),o=n(7471),s=n(9342);function a(...t){let e=Number.POSITIVE_INFINITY,n=null,a=t[t.length-1];return(0,i.K)(a)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof a&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof r.y?t[0]:(0,o.J)(e)((0,s.n)(t,n))}},878:(t,e,n)=>{"use strict";n.d(e,{of:()=>s});var r=n(6163),i=n(9342),o=n(2570);function s(...t){let e=t[t.length-1];return(0,r.K)(e)?(t.pop(),(0,o.r)(t,e)):(0,i.n)(t)}},9996:(t,e,n)=>{"use strict";n.d(e,{U:()=>i});var r=n(6673);function i(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new o(t,e))}}class o{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new s(t,this.project,this.thisArg))}}class s extends r.L{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},7471:(t,e,n)=>{"use strict";n.d(e,{J:()=>o});var r=n(3982),i=n(3392);function o(t=Number.POSITIVE_INFINITY){return(0,r.zg)(i.y,t)}},3982:(t,e,n)=>{"use strict";n.d(e,{zg:()=>s});var r=n(9996),i=n(9764),o=n(6882);function s(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?o=>o.pipe(s((n,o)=>(0,i.D)(t(n,o)).pipe((0,r.U)((t,r)=>e(n,t,o,r))),n)):("number"==typeof e&&(n=e),e=>e.lift(new a(t,n)))}class a{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new u(t,this.project,this.concurrent))}}class u extends o.Ds{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}_innerSub(t){const e=new o.IY(this),n=this.destination;n.add(e);const r=(0,o.ft)(t,e);r!==e&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},9098:(t,e,n)=>{"use strict";n.d(e,{ht:()=>l,QV:()=>u});var r=n(6673),i=n(653),o=n(878),s=n(8318);let a=(()=>{class t{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return(0,o.of)(this.value);case"E":return t=this.error,new s.y(e=>e.error(t));case"C":return(0,i.c)()}var t;throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}static createError(e){return new t("E",void 0,e)}static createComplete(){return t.completeNotification}}return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t})();function u(t,e=0){return function(n){return n.lift(new c(t,e))}}class c{constructor(t,e=0){this.scheduler=t,this.delay=e}call(t,e){return e.subscribe(new l(t,this.scheduler,this.delay))}}class l extends r.L{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(l.dispatch,this.delay,new h(t,this.destination)))}_next(t){this.scheduleMessage(a.createNext(t))}_error(t){this.scheduleMessage(a.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(a.createComplete()),this.unsubscribe()}}class h{constructor(t,e){this.notification=t,this.destination=e}}},1564:(t,e,n)=>{"use strict";n.d(e,{x:()=>i});var r=n(6673);function i(){return function(t){return t.lift(new o(t))}}class o{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new s(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class s extends r.L{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}},1055:(t,e,n)=>{"use strict";n.d(e,{B:()=>a});var r=n(2875),i=n(1564),o=n(5959);function s(){return new o.xQ}function a(){return t=>{return(0,i.x)()((e=s,function(t){let n;n="function"==typeof e?e:function(){return e};const i=Object.create(t,r.N);return i.source=t,i.subjectFactory=n,i})(t));var e}}},4187:(t,e,n)=>{"use strict";n.d(e,{R:()=>m});var r=n(8318);let i=1;const o=(()=>Promise.resolve())(),s={};function a(t){return t in s&&(delete s[t],!0)}const u={setImmediate(t){const e=i++;return s[e]=!0,o.then(()=>a(e)&&t()),e},clearImmediate(t){a(t)}};var c=n(8277);class l extends c.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=u.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(u.clearImmediate(e),t.scheduled=void 0)}}var h=n(1098);class d extends h.v{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}const p=new d(l);var f=n(8470);class g extends r.y{constructor(t,e=0,n=p){var r;super(),this.source=t,this.delayTime=e,this.scheduler=n,((0,f.k)(r=e)||!(r-parseFloat(r)+1>=0)||e<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=p)}static create(t,e=0,n=p){return new g(t,e,n)}static dispatch(t){const{source:e,subscriber:n}=t;return this.add(e.subscribe(n))}_subscribe(t){return this.scheduler.schedule(g.dispatch,this.delayTime,{source:this.source,subscriber:t})}}function m(t,e=0){return function(n){return n.lift(new y(t,e))}}class y{constructor(t,e){this.scheduler=t,this.delay=e}call(t,e){return new g(e,this.delay,this.scheduler).subscribe(t)}}},6599:(t,e,n)=>{"use strict";n.d(e,{b:()=>s});var r=n(6673);function i(){}var o=n(5024);function s(t,e,n){return function(r){return r.lift(new a(t,e,n))}}class a{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new u(t,this.nextOrObserver,this.error,this.complete))}}class u extends r.L{constructor(t,e,n,r){super(t),this._tapNext=i,this._tapError=i,this._tapComplete=i,this._tapError=n||i,this._tapComplete=r||i,(0,o.m)(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||i,this._tapError=e.error||i,this._tapComplete=e.complete||i)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}},2570:(t,e,n)=>{"use strict";n.d(e,{r:()=>o});var r=n(8318),i=n(7570);function o(t,e){return new r.y(n=>{const r=new i.w;let o=0;return r.add(e.schedule(function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},8277:(t,e,n)=>{"use strict";n.d(e,{o:()=>o});var r=n(7570);class i extends r.w{constructor(t,e){super()}schedule(t,e=0){return this}}class o extends i{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n,r=!1;try{this.work(t)}catch(i){r=!0,n=!!i&&i||new Error(i)}if(r)return this.unsubscribe(),n}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}},1098:(t,e,n)=>{"use strict";n.d(e,{v:()=>i});let r=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class i extends r{constructor(t,e=r.now){super(t,()=>i.delegate&&i.delegate!==this?i.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return i.delegate&&i.delegate!==this?i.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}},8569:(t,e,n)=>{"use strict";n.d(e,{z:()=>i,P:()=>o});var r=n(8277);const i=new(n(1098).v)(r.o),o=i},8489:(t,e,n)=>{"use strict";n.d(e,{c:()=>u,N:()=>a});var r=n(8277);class i extends r.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}var o=n(1098);class s extends o.v{}const a=new s(i),u=a},5686:(t,e,n)=>{"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.d(e,{hZ:()=>i});const i=r()},6197:(t,e,n)=>{"use strict";n.d(e,{L:()=>r});const r=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")()},5331:(t,e,n)=>{"use strict";n.d(e,{b:()=>r});const r=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())()},3895:(t,e,n)=>{"use strict";n.d(e,{N:()=>r});const r=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})()},4294:(t,e,n)=>{"use strict";function r(t){setTimeout(()=>{throw t},0)}n.d(e,{z:()=>r})},3392:(t,e,n)=>{"use strict";function r(t){return t}n.d(e,{y:()=>r})},8470:(t,e,n)=>{"use strict";n.d(e,{k:()=>r});const r=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))()},9653:(t,e,n)=>{"use strict";n.d(e,{z:()=>r});const r=t=>t&&"number"==typeof t.length&&"function"!=typeof t},5024:(t,e,n)=>{"use strict";function r(t){return"function"==typeof t}n.d(e,{m:()=>r})},2056:(t,e,n)=>{"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,{K:()=>r})},5168:(t,e,n)=>{"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,{t:()=>r})},6163:(t,e,n)=>{"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,{K:()=>r})},6015:(t,e,n)=>{"use strict";n.d(e,{s:()=>l});var r=n(625),i=n(4294),o=n(5686),s=n(6197),a=n(9653),u=n(5168),c=n(2056);const l=t=>{if(t&&"function"==typeof t[s.L])return l=t,t=>{const e=l[s.L]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if((0,a.z)(t))return(0,r.V)(t);if((0,u.t)(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,i.z),t);if(t&&"function"==typeof t[o.hZ])return e=t,t=>{const n=e[o.hZ]();for(;;){let e;try{e=n.next()}catch(r){return t.error(r),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=(0,c.K)(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n,l}},625:(t,e,n)=>{"use strict";n.d(e,{V:()=>r});const r=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}},2501:function(t){t.exports=function(){"use strict";const t=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),e="SweetAlert2:",n=t=>t.charAt(0).toUpperCase()+t.slice(1),r=t=>Array.prototype.slice.call(t),i=t=>{console.warn("".concat(e," ").concat("object"==typeof t?t.join(" "):t))},o=t=>{console.error("".concat(e," ").concat(t))},s=[],a=(t,e)=>{"function"==typeof t&&t(e)},u=t=>"function"==typeof t?t():t,c=t=>t&&"function"==typeof t.toPromise,l=t=>c(t)?t.toPromise():Promise.resolve(t),h=t=>t&&Promise.resolve(t)===t,d=t=>t instanceof Element||(t=>"object"==typeof t&&t.jquery)(t),p=t=>{const e={};for(const n in t)e[t[n]]="swal2-"+t[n];return e},f=p(["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error"]),g=p(["success","warning","info","question","error"]),m=()=>document.body.querySelector(".".concat(f.container)),y=t=>{const e=m();return e?e.querySelector(t):null},v=t=>y(".".concat(t)),_=()=>v(f.popup),b=()=>v(f.icon),w=()=>v(f.title),C=()=>v(f["html-container"]),T=()=>v(f.image),S=()=>v(f["progress-steps"]),E=()=>v(f["validation-message"]),x=()=>y(".".concat(f.actions," .").concat(f.confirm)),I=()=>y(".".concat(f.actions," .").concat(f.deny)),k=()=>y(".".concat(f.loader)),A=()=>y(".".concat(f.actions," .").concat(f.cancel)),O=()=>v(f.actions),P=()=>v(f.footer),R=()=>v(f["timer-progress-bar"]),N=()=>v(f.close),D=()=>{const t=r(_().querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])')).sort((t,e)=>(t=parseInt(t.getAttribute("tabindex")))>(e=parseInt(e.getAttribute("tabindex")))?1:t<e?-1:0),e=r(_().querySelectorAll('\n  a[href],\n  area[href],\n  input:not([disabled]),\n  select:not([disabled]),\n  textarea:not([disabled]),\n  button:not([disabled]),\n  iframe,\n  object,\n  embed,\n  [tabindex="0"],\n  [contenteditable],\n  audio[controls],\n  video[controls],\n  summary\n')).filter(t=>"-1"!==t.getAttribute("tabindex"));return(t=>{const e=[];for(let n=0;n<t.length;n++)-1===e.indexOf(t[n])&&e.push(t[n]);return e})(t.concat(e)).filter(t=>J(t))},L=()=>!F()&&!document.body.classList.contains(f["no-backdrop"]),F=()=>document.body.classList.contains(f["toast-shown"]),U={previousBodyPadding:null},M=(t,e)=>{if(t.textContent="",e){const n=(new DOMParser).parseFromString(e,"text/html");r(n.querySelector("head").childNodes).forEach(e=>{t.appendChild(e)}),r(n.querySelector("body").childNodes).forEach(e=>{t.appendChild(e)})}},q=(t,e)=>{if(!e)return!1;const n=e.split(/\s+/);for(let r=0;r<n.length;r++)if(!t.classList.contains(n[r]))return!1;return!0},j=(t,e,n)=>{if(((t,e)=>{r(t.classList).forEach(n=>{Object.values(f).includes(n)||Object.values(g).includes(n)||Object.values(e.showClass).includes(n)||t.classList.remove(n)})})(t,e),e.customClass&&e.customClass[n]){if("string"!=typeof e.customClass[n]&&!e.customClass[n].forEach)return i("Invalid type of customClass.".concat(n,'! Expected string or iterable object, got "').concat(typeof e.customClass[n],'"'));G(t,e.customClass[n])}},V=(t,e)=>{if(!e)return null;switch(e){case"select":case"textarea":case"file":return H(t,f[e]);case"checkbox":return t.querySelector(".".concat(f.checkbox," input"));case"radio":return t.querySelector(".".concat(f.radio," input:checked"))||t.querySelector(".".concat(f.radio," input:first-child"));case"range":return t.querySelector(".".concat(f.range," input"));default:return H(t,f.input)}},B=t=>{if(t.focus(),"file"!==t.type){const e=t.value;t.value="",t.value=e}},Z=(t,e,n)=>{t&&e&&("string"==typeof e&&(e=e.split(/\s+/).filter(Boolean)),e.forEach(e=>{t.forEach?t.forEach(t=>{n?t.classList.add(e):t.classList.remove(e)}):n?t.classList.add(e):t.classList.remove(e)}))},G=(t,e)=>{Z(t,e,!0)},z=(t,e)=>{Z(t,e,!1)},H=(t,e)=>{for(let n=0;n<t.childNodes.length;n++)if(q(t.childNodes[n],e))return t.childNodes[n]},W=(t,e,n)=>{n==="".concat(parseInt(n))&&(n=parseInt(n)),n||0===parseInt(n)?t.style[e]="number"==typeof n?"".concat(n,"px"):n:t.style.removeProperty(e)},K=(t,e="flex")=>{t.style.display=e},Y=t=>{t.style.display="none"},Q=(t,e,n,r)=>{const i=t.querySelector(e);i&&(i.style[n]=r)},$=(t,e,n)=>{e?K(t,n):Y(t)},J=t=>!(!t||!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)),X=t=>!!(t.scrollHeight>t.clientHeight),tt=t=>{const e=window.getComputedStyle(t),n=parseFloat(e.getPropertyValue("animation-duration")||"0"),r=parseFloat(e.getPropertyValue("transition-duration")||"0");return n>0||r>0},et=(t,e=!1)=>{const n=R();J(n)&&(e&&(n.style.transition="none",n.style.width="100%"),setTimeout(()=>{n.style.transition="width ".concat(t/1e3,"s linear"),n.style.width="0%"},10))},nt=()=>"undefined"==typeof window||"undefined"==typeof document,rt='\n <div aria-labelledby="'.concat(f.title,'" aria-describedby="').concat(f["html-container"],'" class="').concat(f.popup,'" tabindex="-1">\n   <button type="button" class="').concat(f.close,'"></button>\n   <ul class="').concat(f["progress-steps"],'"></ul>\n   <div class="').concat(f.icon,'"></div>\n   <img class="').concat(f.image,'" />\n   <h2 class="').concat(f.title,'" id="').concat(f.title,'"></h2>\n   <div class="').concat(f["html-container"],'"></div>\n   <input class="').concat(f.input,'" />\n   <input type="file" class="').concat(f.file,'" />\n   <div class="').concat(f.range,'">\n     <input type="range" />\n     <output></output>\n   </div>\n   <select class="').concat(f.select,'"></select>\n   <div class="').concat(f.radio,'"></div>\n   <label for="').concat(f.checkbox,'" class="').concat(f.checkbox,'">\n     <input type="checkbox" />\n     <span class="').concat(f.label,'"></span>\n   </label>\n   <textarea class="').concat(f.textarea,'"></textarea>\n   <div class="').concat(f["validation-message"],'" id="').concat(f["validation-message"],'"></div>\n   <div class="').concat(f.actions,'">\n     <div class="').concat(f.loader,'"></div>\n     <button type="button" class="').concat(f.confirm,'"></button>\n     <button type="button" class="').concat(f.deny,'"></button>\n     <button type="button" class="').concat(f.cancel,'"></button>\n   </div>\n   <div class="').concat(f.footer,'"></div>\n   <div class="').concat(f["timer-progress-bar-container"],'">\n     <div class="').concat(f["timer-progress-bar"],'"></div>\n   </div>\n </div>\n').replace(/(^|\n)\s*/g,""),it=()=>{Ue.isVisible()&&Ue.resetValidationMessage()},ot=(t,e)=>{t instanceof HTMLElement?e.appendChild(t):"object"==typeof t?st(t,e):t&&M(e,t)},st=(t,e)=>{t.jquery?at(e,t):M(e,t.toString())},at=(t,e)=>{if(t.textContent="",0 in e)for(let n=0;n in e;n++)t.appendChild(e[n].cloneNode(!0));else t.appendChild(e.cloneNode(!0))},ut=(()=>{if(nt())return!1;const t=document.createElement("div"),e={WebkitAnimation:"webkitAnimationEnd",OAnimation:"oAnimationEnd oanimationend",animation:"animationend"};for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&void 0!==t.style[n])return e[n];return!1})();function ct(t,e,r){$(t,r["show".concat(n(e),"Button")],"inline-block"),M(t,r["".concat(e,"ButtonText")]),t.setAttribute("aria-label",r["".concat(e,"ButtonAriaLabel")]),t.className=f[e],j(t,r,"".concat(e,"Button")),G(t,r["".concat(e,"ButtonClass")])}var lt={promise:new WeakMap,innerParams:new WeakMap,domCache:new WeakMap};const ht=["input","file","range","select","radio","checkbox","textarea"],dt=(t,e)=>{t.placeholder&&!e.inputPlaceholder||(t.placeholder=e.inputPlaceholder)},pt=(t,e,n)=>{if(n.inputLabel){t.id=f.input;const r=document.createElement("label"),i=f["input-label"];r.setAttribute("for",t.id),r.className=i,G(r,n.customClass.inputLabel),r.innerText=n.inputLabel,e.insertAdjacentElement("beforebegin",r)}},ft=t=>{const e=f[t]?f[t]:f.input;return H(_(),e)},gt={};gt.text=gt.email=gt.password=gt.number=gt.tel=gt.url=(t,e)=>("string"==typeof e.inputValue||"number"==typeof e.inputValue?t.value=e.inputValue:h(e.inputValue)||i('Unexpected type of inputValue! Expected "string", "number" or "Promise", got "'.concat(typeof e.inputValue,'"')),pt(t,t,e),dt(t,e),t.type=e.input,t),gt.file=(t,e)=>(pt(t,t,e),dt(t,e),t),gt.range=(t,e)=>{const n=t.querySelector("input"),r=t.querySelector("output");return n.value=e.inputValue,n.type=e.input,r.value=e.inputValue,pt(n,t,e),t},gt.select=(t,e)=>{if(t.textContent="",e.inputPlaceholder){const n=document.createElement("option");M(n,e.inputPlaceholder),n.value="",n.disabled=!0,n.selected=!0,t.appendChild(n)}return pt(t,t,e),t},gt.radio=t=>(t.textContent="",t),gt.checkbox=(t,e)=>{const n=V(_(),"checkbox");n.value=1,n.id=f.checkbox,n.checked=Boolean(e.inputValue);const r=t.querySelector("span");return M(r,e.inputPlaceholder),t},gt.textarea=(t,e)=>{if(t.value=e.inputValue,dt(t,e),pt(t,t,e),"MutationObserver"in window){const e=parseInt(window.getComputedStyle(_()).width);new MutationObserver(()=>{const n=t.offsetWidth+(r=t,parseInt(window.getComputedStyle(r).marginLeft)+parseInt(window.getComputedStyle(r).marginRight));var r;_().style.width=n>e?"".concat(n,"px"):null}).observe(t,{attributes:!0,attributeFilter:["style"]})}return t};const mt=(t,e)=>{const n=C();j(n,e,"htmlContainer"),e.html?(ot(e.html,n),K(n,"block")):e.text?(n.textContent=e.text,K(n,"block")):Y(n),((t,e)=>{const n=_(),r=lt.innerParams.get(t),i=!r||e.input!==r.input;ht.forEach(t=>{const r=f[t],o=H(n,r);((t,e)=>{const n=V(_(),t);if(n){(t=>{for(let e=0;e<t.attributes.length;e++){const n=t.attributes[e].name;["type","value","style"].includes(n)||t.removeAttribute(n)}})(n);for(const t in e)n.setAttribute(t,e[t])}})(t,e.inputAttributes),o.className=r,i&&Y(o)}),e.input&&(i&&(t=>{if(!gt[t.input])return o('Unexpected type of input! Expected "text", "email", "password", "number", "tel", "select", "radio", "checkbox", "textarea", "file" or "url", got "'.concat(t.input,'"'));const e=ft(t.input),n=gt[t.input](e,t);K(n),setTimeout(()=>{B(n)})})(e),(t=>{const e=ft(t.input);t.customClass&&G(e,t.customClass.input)})(e))})(t,e)},yt=(t,e)=>{for(const n in g)e.icon!==n&&z(t,g[n]);G(t,g[e.icon]),bt(t,e),vt(),j(t,e,"icon")},vt=()=>{const t=_(),e=window.getComputedStyle(t).getPropertyValue("background-color"),n=t.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let r=0;r<n.length;r++)n[r].style.backgroundColor=e},_t=(t,e)=>{t.textContent="",M(t,e.iconHtml?wt(e.iconHtml):"success"===e.icon?'\n      <div class="swal2-success-circular-line-left"></div>\n      <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>\n      <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>\n      <div class="swal2-success-circular-line-right"></div>\n    ':"error"===e.icon?'\n      <span class="swal2-x-mark">\n        <span class="swal2-x-mark-line-left"></span>\n        <span class="swal2-x-mark-line-right"></span>\n      </span>\n    ':wt({question:"?",warning:"!",info:"i"}[e.icon]))},bt=(t,e)=>{if(e.iconColor){t.style.color=e.iconColor,t.style.borderColor=e.iconColor;for(const n of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])Q(t,n,"backgroundColor",e.iconColor);Q(t,".swal2-success-ring","borderColor",e.iconColor)}},wt=t=>'<div class="'.concat(f["icon-content"],'">').concat(t,"</div>"),Ct=(t,e)=>{((t,e)=>{const n=m(),r=_();e.toast?(W(n,"width",e.width),r.style.width="100%",r.insertBefore(k(),b())):W(r,"width",e.width),W(r,"padding",e.padding),e.background&&(r.style.background=e.background),Y(E()),((t,e)=>{t.className="".concat(f.popup," ").concat(J(t)?e.showClass.popup:""),e.toast?(G([document.documentElement,document.body],f["toast-shown"]),G(t,f.toast)):G(t,f.modal),j(t,e,"popup"),"string"==typeof e.customClass&&G(t,e.customClass),e.icon&&G(t,f["icon-".concat(e.icon)])})(r,e)})(0,e),((t,e)=>{const n=m();n&&(function(t,e){"string"==typeof e?t.style.background=e:e||G([document.documentElement,document.body],f["no-backdrop"])}(n,e.backdrop),!e.backdrop&&e.allowOutsideClick&&i('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`'),function(t,e){e in f?G(t,f[e]):(i('The "position" parameter is not valid, defaulting to "center"'),G(t,f.center))}(n,e.position),function(t,e){if(e&&"string"==typeof e){const n="grow-".concat(e);n in f&&G(t,f[n])}}(n,e.grow),j(n,e,"container"))})(0,e),((t,e)=>{const n=S();if(!e.progressSteps||0===e.progressSteps.length)return Y(n);K(n),n.textContent="",e.currentProgressStep>=e.progressSteps.length&&i("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),e.progressSteps.forEach((t,r)=>{const i=(t=>{const e=document.createElement("li");return G(e,f["progress-step"]),M(e,t),e})(t);if(n.appendChild(i),r===e.currentProgressStep&&G(i,f["active-progress-step"]),r!==e.progressSteps.length-1){const t=(t=>{const e=document.createElement("li");return G(e,f["progress-step-line"]),t.progressStepsDistance&&(e.style.width=t.progressStepsDistance),e})(e);n.appendChild(t)}})})(0,e),((t,e)=>{const n=lt.innerParams.get(t),r=b();n&&e.icon===n.icon?(_t(r,e),yt(r,e)):e.icon||e.iconHtml?e.icon&&-1===Object.keys(g).indexOf(e.icon)?(o('Unknown icon! Expected "success", "error", "warning", "info" or "question", got "'.concat(e.icon,'"')),Y(r)):(K(r),_t(r,e),yt(r,e),G(r,e.showClass.icon)):Y(r)})(t,e),((t,e)=>{const n=T();if(!e.imageUrl)return Y(n);K(n,""),n.setAttribute("src",e.imageUrl),n.setAttribute("alt",e.imageAlt),W(n,"width",e.imageWidth),W(n,"height",e.imageHeight),n.className=f.image,j(n,e,"image")})(0,e),((t,e)=>{const n=w();$(n,e.title||e.titleText,"block"),e.title&&ot(e.title,n),e.titleText&&(n.innerText=e.titleText),j(n,e,"title")})(0,e),((t,e)=>{const n=N();M(n,e.closeButtonHtml),j(n,e,"closeButton"),$(n,e.showCloseButton),n.setAttribute("aria-label",e.closeButtonAriaLabel)})(0,e),mt(t,e),((t,e)=>{const n=O(),r=k(),i=x(),o=I(),s=A();e.showConfirmButton||e.showDenyButton||e.showCancelButton||Y(n),j(n,e,"actions"),ct(i,"confirm",e),ct(o,"deny",e),ct(s,"cancel",e),function(t,e,n,r){if(!r.buttonsStyling)return z([t,e,n],f.styled);G([t,e,n],f.styled),r.confirmButtonColor&&(t.style.backgroundColor=r.confirmButtonColor,G(t,f["default-outline"])),r.denyButtonColor&&(e.style.backgroundColor=r.denyButtonColor,G(e,f["default-outline"])),r.cancelButtonColor&&(n.style.backgroundColor=r.cancelButtonColor,G(n,f["default-outline"]))}(i,o,s,e),e.reverseButtons&&(n.insertBefore(s,r),n.insertBefore(o,r),n.insertBefore(i,r)),M(r,e.loaderHtml),j(r,e,"loader")})(0,e),((t,e)=>{const n=P();$(n,e.footer),e.footer&&ot(e.footer,n),j(n,e,"footer")})(0,e),a(e.didRender,_())},Tt=()=>x()&&x().click(),St=t=>{let e=_();e||Ue.fire(),e=_();const n=k();F()?Y(b()):Et(e,t),K(n),e.setAttribute("data-loading",!0),e.setAttribute("aria-busy",!0),e.focus()},Et=(t,e)=>{const n=O(),r=k();!e&&J(x())&&(e=x()),K(n),e&&(Y(e),r.setAttribute("data-button-to-replace",e.className)),r.parentNode.insertBefore(r,e),G([t,n],f.loading)},xt={},It=()=>{if(xt.timeout)return(()=>{const t=R(),e=parseInt(window.getComputedStyle(t).width);t.style.removeProperty("transition"),t.style.width="100%";const n=parseInt(window.getComputedStyle(t).width),r=parseInt(e/n*100);t.style.removeProperty("transition"),t.style.width="".concat(r,"%")})(),xt.timeout.stop()},kt=()=>{if(xt.timeout){const t=xt.timeout.start();return et(t),t}};let At=!1;const Ot={},Pt=t=>{for(let e=t.target;e&&e!==document;e=e.parentNode)for(const t in Ot){const n=e.getAttribute(t);if(n)return void Ot[t].fire({template:n})}},Rt={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},Nt=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],Dt={},Lt=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],Ft=t=>Object.prototype.hasOwnProperty.call(Rt,t),Ut=t=>Dt[t],Mt=t=>{Ft(t)||i('Unknown parameter "'.concat(t,'"'))},qt=t=>{Lt.includes(t)&&i('The parameter "'.concat(t,'" is incompatible with toasts'))},jt=t=>{var e,n,r;Ut(t)&&(e=t,n=Ut(t),r='"'.concat(e,'" is deprecated and will be removed in the next major release. Please use "').concat(n,'" instead.'),s.includes(r)||(s.push(r),i(r)))};var Vt=Object.freeze({isValidParameter:Ft,isUpdatableParameter:t=>-1!==Nt.indexOf(t),isDeprecatedParameter:Ut,argsToParams:t=>{const e={};return"object"!=typeof t[0]||d(t[0])?["title","html","icon"].forEach((n,r)=>{const i=t[r];"string"==typeof i||d(i)?e[n]=i:void 0!==i&&o("Unexpected type of ".concat(n,'! Expected "string" or "Element", got ').concat(typeof i))}):Object.assign(e,t[0]),e},isVisible:()=>J(_()),clickConfirm:Tt,clickDeny:()=>I()&&I().click(),clickCancel:()=>A()&&A().click(),getContainer:m,getPopup:_,getTitle:w,getHtmlContainer:C,getImage:T,getIcon:b,getInputLabel:()=>v(f["input-label"]),getCloseButton:N,getActions:O,getConfirmButton:x,getDenyButton:I,getCancelButton:A,getLoader:k,getFooter:P,getTimerProgressBar:R,getFocusableElements:D,getValidationMessage:E,isLoading:()=>_().hasAttribute("data-loading"),fire:function(...t){return new this(...t)},mixin:function(t){return class extends(this){_main(e,n){return super._main(e,Object.assign({},t,n))}}},showLoading:St,enableLoading:St,getTimerLeft:()=>xt.timeout&&xt.timeout.getTimerLeft(),stopTimer:It,resumeTimer:kt,toggleTimer:()=>{const t=xt.timeout;return t&&(t.running?It():kt())},increaseTimer:t=>{if(xt.timeout){const e=xt.timeout.increase(t);return et(e,!0),e}},isTimerRunning:()=>xt.timeout&&xt.timeout.isRunning(),bindClickHandler:function(t="data-swal-template"){Ot[t]=this,At||(document.body.addEventListener("click",Pt),At=!0)}});function Bt(){const t=lt.innerParams.get(this);if(!t)return;const e=lt.domCache.get(this);Y(e.loader),F()?t.icon&&K(b()):Zt(e),z([e.popup,e.actions],f.loading),e.popup.removeAttribute("aria-busy"),e.popup.removeAttribute("data-loading"),e.confirmButton.disabled=!1,e.denyButton.disabled=!1,e.cancelButton.disabled=!1}const Zt=t=>{const e=t.popup.getElementsByClassName(t.loader.getAttribute("data-button-to-replace"));e.length?K(e[0],"inline-block"):!J(x())&&!J(I())&&!J(A())&&Y(t.actions)},Gt=t=>{const e=t.target,n=m();return!(zt(t)||Ht(t)||e!==n&&(X(n)||"INPUT"===e.tagName||X(C())&&C().contains(e)))},zt=t=>t.touches&&t.touches.length&&"stylus"===t.touches[0].touchType,Ht=t=>t.touches&&t.touches.length>1;var Wt={swalPromiseResolve:new WeakMap};function Kt(t,e,n,i){F()?Xt(t,i):((t=>new Promise(e=>{if(!t)return e();const n=window.scrollX,r=window.scrollY;xt.restoreFocusTimeout=setTimeout(()=>{xt.previousActiveElement&&xt.previousActiveElement.focus?(xt.previousActiveElement.focus(),xt.previousActiveElement=null):document.body&&document.body.focus(),e()},100),window.scrollTo(n,r)}))(n).then(()=>Xt(t,i)),xt.keydownTarget.removeEventListener("keydown",xt.keydownHandler,{capture:xt.keydownListenerCapture}),xt.keydownHandlerAdded=!1),e.parentNode&&e.remove(),L()&&(null!==U.previousBodyPadding&&(document.body.style.paddingRight="".concat(U.previousBodyPadding,"px"),U.previousBodyPadding=null),(()=>{if(q(document.body,f.iosfix)){const t=parseInt(document.body.style.top,10);z(document.body,f.iosfix),document.body.style.top="",document.body.scrollTop=-1*t}})(),r(document.body.children).forEach(t=>{t.hasAttribute("data-previous-aria-hidden")?(t.setAttribute("aria-hidden",t.getAttribute("data-previous-aria-hidden")),t.removeAttribute("data-previous-aria-hidden")):t.removeAttribute("aria-hidden")})),z([document.documentElement,document.body],[f.shown,f["height-auto"],f["no-backdrop"],f["toast-shown"]])}function Yt(t){const e=_();if(!e)return;t=Qt(t);const n=lt.innerParams.get(this);if(!n||q(e,n.hideClass.popup))return;const r=Wt.swalPromiseResolve.get(this);z(e,n.showClass.popup),G(e,n.hideClass.popup);const i=m();z(i,n.showClass.backdrop),G(i,n.hideClass.backdrop),$t(this,e,n),r(t)}const Qt=t=>void 0===t?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},t),$t=(t,e,n)=>{const r=m(),i=ut&&tt(e);a(n.willClose,e),i?Jt(t,e,r,n.returnFocus,n.didClose):Kt(t,r,n.returnFocus,n.didClose)},Jt=(t,e,n,r,i)=>{xt.swalCloseEventFinishedCallback=Kt.bind(null,t,n,r,i),e.addEventListener(ut,function(t){t.target===e&&(xt.swalCloseEventFinishedCallback(),delete xt.swalCloseEventFinishedCallback)})},Xt=(t,e)=>{setTimeout(()=>{a(e),t._destroy()})};function te(t,e,n){const r=lt.domCache.get(t);e.forEach(t=>{r[t].disabled=n})}function ee(t,e){if(!t)return!1;if("radio"===t.type){const n=t.parentNode.parentNode.querySelectorAll("input");for(let t=0;t<n.length;t++)n[t].disabled=e}else t.disabled=e}class ne{constructor(t,e){this.callback=t,this.remaining=e,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date-this.started),this.remaining}increase(t){const e=this.running;return e&&this.stop(),this.remaining+=t,e&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}var re={email:(t,e)=>/^[a-zA-Z0-9.+_-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]{2,24}$/.test(t)?Promise.resolve():Promise.resolve(e||"Invalid email address"),url:(t,e)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(t)?Promise.resolve():Promise.resolve(e||"Invalid URL")};function ie(t){(function(t){t.inputValidator||Object.keys(re).forEach(e=>{t.input===e&&(t.inputValidator=re[e])})})(t),t.showLoaderOnConfirm&&!t.preConfirm&&i("showLoaderOnConfirm is set to true, but preConfirm is not defined.\nshowLoaderOnConfirm should be used together with preConfirm, see usage example:\nhttps://sweetalert2.github.io/#ajax-request"),function(t){(!t.target||"string"==typeof t.target&&!document.querySelector(t.target)||"string"!=typeof t.target&&!t.target.appendChild)&&(i('Target parameter is not valid, defaulting to "body"'),t.target="body")}(t),"string"==typeof t.title&&(t.title=t.title.split("\n").join("<br />")),(t=>{const e=(()=>{const t=m();return!!t&&(t.remove(),z([document.documentElement,document.body],[f["no-backdrop"],f["toast-shown"],f["has-column"]]),!0)})();if(nt())return void o("SweetAlert2 requires document to initialize");const n=document.createElement("div");n.className=f.container,e&&G(n,f["no-transition"]),M(n,rt);const r="string"==typeof(i=t.target)?document.querySelector(i):i;var i;r.appendChild(n),(t=>{const e=_();e.setAttribute("role",t.toast?"alert":"dialog"),e.setAttribute("aria-live",t.toast?"polite":"assertive"),t.toast||e.setAttribute("aria-modal","true")})(t),(t=>{"rtl"===window.getComputedStyle(t).direction&&G(m(),f.rtl)})(r),(()=>{const t=_(),e=H(t,f.input),n=H(t,f.file),r=t.querySelector(".".concat(f.range," input")),i=t.querySelector(".".concat(f.range," output")),o=H(t,f.select),s=t.querySelector(".".concat(f.checkbox," input")),a=H(t,f.textarea);e.oninput=it,n.onchange=it,o.onchange=it,s.onchange=it,a.oninput=it,r.oninput=()=>{it(),i.value=r.value},r.onchange=()=>{it(),r.nextSibling.value=r.value}})()})(t)}const oe=["swal-title","swal-html","swal-footer"],se=(t,e)=>{r(t.attributes).forEach(n=>{-1===e.indexOf(n.name)&&i(['Unrecognized attribute "'.concat(n.name,'" on <').concat(t.tagName.toLowerCase(),">."),"".concat(e.length?"Allowed attributes are: ".concat(e.join(", ")):"To set the value, use HTML within the element.")])})},ae=t=>{const e=_();if(t.target!==e)return;const n=m();e.removeEventListener(ut,ae),n.style.overflowY="auto"},ue=(t,e)=>{ut&&tt(e)?(t.style.overflowY="hidden",e.addEventListener(ut,ae)):t.style.overflowY="auto"},ce=(t,e,n)=>{(()=>{if((/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1)&&!q(document.body,f.iosfix)){const t=document.body.scrollTop;document.body.style.top="".concat(-1*t,"px"),G(document.body,f.iosfix),(()=>{const t=m();let e;t.ontouchstart=t=>{e=Gt(t)},t.ontouchmove=t=>{e&&(t.preventDefault(),t.stopPropagation())}})(),(()=>{if(!navigator.userAgent.match(/(CriOS|FxiOS|EdgiOS|YaBrowser|UCBrowser)/i)){const t=44;_().scrollHeight>window.innerHeight-t&&(m().style.paddingBottom="".concat(t,"px"))}})()}})(),e&&"hidden"!==n&&(null===U.previousBodyPadding&&document.body.scrollHeight>window.innerHeight&&(U.previousBodyPadding=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight="".concat(U.previousBodyPadding+(()=>{const t=document.createElement("div");t.className=f["scrollbar-measure"],document.body.appendChild(t);const e=t.getBoundingClientRect().width-t.clientWidth;return document.body.removeChild(t),e})(),"px"))),setTimeout(()=>{t.scrollTop=0})},le=(t,e,n)=>{G(t,n.showClass.backdrop),e.style.setProperty("opacity","0","important"),K(e,"grid"),setTimeout(()=>{G(e,n.showClass.popup),e.style.removeProperty("opacity")},10),G([document.documentElement,document.body],f.shown),n.heightAuto&&n.backdrop&&!n.toast&&G([document.documentElement,document.body],f["height-auto"])},he={select:(t,e,n)=>{const r=H(t,f.select),i=(t,e,r)=>{const i=document.createElement("option");i.value=r,M(i,e),i.selected=pe(r,n.inputValue),t.appendChild(i)};e.forEach(t=>{const e=t[0],n=t[1];if(Array.isArray(n)){const t=document.createElement("optgroup");t.label=e,t.disabled=!1,r.appendChild(t),n.forEach(e=>i(t,e[1],e[0]))}else i(r,n,e)}),r.focus()},radio:(t,e,n)=>{const r=H(t,f.radio);e.forEach(t=>{const e=t[0],i=t[1],o=document.createElement("input"),s=document.createElement("label");o.type="radio",o.name=f.radio,o.value=e,pe(e,n.inputValue)&&(o.checked=!0);const a=document.createElement("span");M(a,i),a.className=f.label,s.appendChild(o),s.appendChild(a),r.appendChild(s)});const i=r.querySelectorAll("input");i.length&&i[0].focus()}},de=t=>{const e=[];return"undefined"!=typeof Map&&t instanceof Map?t.forEach((t,n)=>{let r=t;"object"==typeof r&&(r=de(r)),e.push([n,r])}):Object.keys(t).forEach(n=>{let r=t[n];"object"==typeof r&&(r=de(r)),e.push([n,r])}),e},pe=(t,e)=>e&&e.toString()===t.toString(),fe=(t,e,n)=>{const r=((t,e)=>{const n=t.getInput();if(!n)return null;switch(e.input){case"checkbox":return(t=>t.checked?1:0)(n);case"radio":return(t=>t.checked?t.value:null)(n);case"file":return(t=>t.files.length?null!==t.getAttribute("multiple")?t.files:t.files[0]:null)(n);default:return e.inputAutoTrim?n.value.trim():n.value}})(t,e);e.inputValidator?ge(t,e,r,n):t.getInput().checkValidity()?"deny"===n?me(t,e,r):ve(t,e,r):(t.enableButtons(),t.showValidationMessage(e.validationMessage))},ge=(t,e,n,r)=>{t.disableInput(),Promise.resolve().then(()=>l(e.inputValidator(n,e.validationMessage))).then(i=>{t.enableButtons(),t.enableInput(),i?t.showValidationMessage(i):"deny"===r?me(t,e,n):ve(t,e,n)})},me=(t,e,n)=>{e.showLoaderOnDeny&&St(I()),e.preDeny?Promise.resolve().then(()=>l(e.preDeny(n,e.validationMessage))).then(e=>{!1===e?t.hideLoading():t.closePopup({isDenied:!0,value:void 0===e?n:e})}):t.closePopup({isDenied:!0,value:n})},ye=(t,e)=>{t.closePopup({isConfirmed:!0,value:e})},ve=(t,e,n)=>{e.showLoaderOnConfirm&&St(),e.preConfirm?(t.resetValidationMessage(),Promise.resolve().then(()=>l(e.preConfirm(n,e.validationMessage))).then(e=>{J(E())||!1===e?t.hideLoading():ye(t,void 0===e?n:e)})):ye(t,n)},_e=(t,e,n)=>{const r=D();if(r.length)return(e+=n)===r.length?e=0:-1===e&&(e=r.length-1),r[e].focus();_().focus()},be=["ArrowRight","ArrowDown"],we=["ArrowLeft","ArrowUp"],Ce=(t,e,n)=>{if(!e.isComposing&&e.target&&t.getInput()&&e.target.outerHTML===t.getInput().outerHTML){if(["textarea","file"].includes(n.input))return;Tt(),e.preventDefault()}},Te=(t,e)=>{const n=t.target,r=D();let i=-1;for(let o=0;o<r.length;o++)if(n===r[o]){i=o;break}_e(0,i,t.shiftKey?-1:1),t.stopPropagation(),t.preventDefault()},Se=t=>{if(![x(),I(),A()].includes(document.activeElement))return;const e=be.includes(t)?"nextElementSibling":"previousElementSibling",n=document.activeElement[e];n&&n.focus()},Ee=(e,n,r)=>{u(n.allowEscapeKey)&&(e.preventDefault(),r(t.esc))};let xe=!1;const Ie=(t,e)=>{const o=(t=>{const e="string"==typeof t.template?document.querySelector(t.template):t.template;if(!e)return{};const o=e.content;return(t=>{const e=oe.concat(["swal-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);r(t.children).forEach(t=>{const n=t.tagName.toLowerCase();-1===e.indexOf(n)&&i("Unrecognized element <".concat(n,">"))})})(o),Object.assign((t=>{const e={};return r(t.querySelectorAll("swal-param")).forEach(t=>{se(t,["name","value"]);const n=t.getAttribute("name");let r=t.getAttribute("value");"boolean"==typeof Rt[n]&&"false"===r&&(r=!1),"object"==typeof Rt[n]&&(r=JSON.parse(r)),e[n]=r}),e})(o),(t=>{const e={};return r(t.querySelectorAll("swal-button")).forEach(t=>{se(t,["type","color","aria-label"]);const r=t.getAttribute("type");e["".concat(r,"ButtonText")]=t.innerHTML,e["show".concat(n(r),"Button")]=!0,t.hasAttribute("color")&&(e["".concat(r,"ButtonColor")]=t.getAttribute("color")),t.hasAttribute("aria-label")&&(e["".concat(r,"ButtonAriaLabel")]=t.getAttribute("aria-label"))}),e})(o),(t=>{const e={},n=t.querySelector("swal-image");return n&&(se(n,["src","width","height","alt"]),n.hasAttribute("src")&&(e.imageUrl=n.getAttribute("src")),n.hasAttribute("width")&&(e.imageWidth=n.getAttribute("width")),n.hasAttribute("height")&&(e.imageHeight=n.getAttribute("height")),n.hasAttribute("alt")&&(e.imageAlt=n.getAttribute("alt"))),e})(o),(t=>{const e={},n=t.querySelector("swal-icon");return n&&(se(n,["type","color"]),n.hasAttribute("type")&&(e.icon=n.getAttribute("type")),n.hasAttribute("color")&&(e.iconColor=n.getAttribute("color")),e.iconHtml=n.innerHTML),e})(o),(t=>{const e={},n=t.querySelector("swal-input");n&&(se(n,["type","label","placeholder","value"]),e.input=n.getAttribute("type")||"text",n.hasAttribute("label")&&(e.inputLabel=n.getAttribute("label")),n.hasAttribute("placeholder")&&(e.inputPlaceholder=n.getAttribute("placeholder")),n.hasAttribute("value")&&(e.inputValue=n.getAttribute("value")));const i=t.querySelectorAll("swal-input-option");return i.length&&(e.inputOptions={},r(i).forEach(t=>{se(t,["value"]);const n=t.getAttribute("value");e.inputOptions[n]=t.innerHTML})),e})(o),((t,e)=>{const n={};for(const r in e){const i=e[r],o=t.querySelector(i);o&&(se(o,[]),n[i.replace(/^swal-/,"")]=o.innerHTML.trim())}return n})(o,oe))})(t),s=Object.assign({},Rt,e,o,t);return s.showClass=Object.assign({},Rt.showClass,s.showClass),s.hideClass=Object.assign({},Rt.hideClass,s.hideClass),s},ke=(e,n,i)=>new Promise(s=>{const d=t=>{e.closePopup({isDismissed:!0,dismiss:t})};Wt.swalPromiseResolve.set(e,s),n.confirmButton.onclick=()=>((t,e)=>{t.disableButtons(),e.input?fe(t,e,"confirm"):ve(t,e,!0)})(e,i),n.denyButton.onclick=()=>((t,e)=>{t.disableButtons(),e.returnInputValueOnDeny?fe(t,e,"deny"):me(t,e,!1)})(e,i),n.cancelButton.onclick=()=>((e,n)=>{e.disableButtons(),n(t.cancel)})(e,d),n.closeButton.onclick=()=>d(t.close),((e,n,r)=>{lt.innerParams.get(e).toast?((e,n,r)=>{n.popup.onclick=()=>{const n=lt.innerParams.get(e);n.showConfirmButton||n.showDenyButton||n.showCancelButton||n.showCloseButton||n.timer||n.input||r(t.close)}})(e,n,r):((t=>{t.popup.onmousedown=()=>{t.container.onmouseup=function(e){t.container.onmouseup=void 0,e.target===t.container&&(xe=!0)}}})(n),(t=>{t.container.onmousedown=()=>{t.popup.onmouseup=function(e){t.popup.onmouseup=void 0,(e.target===t.popup||t.popup.contains(e.target))&&(xe=!0)}}})(n),((e,n,r)=>{n.container.onclick=i=>{const o=lt.innerParams.get(e);xe?xe=!1:i.target===n.container&&u(o.allowOutsideClick)&&r(t.backdrop)}})(e,n,r))})(e,n,d),((t,e,n,r)=>{e.keydownTarget&&e.keydownHandlerAdded&&(e.keydownTarget.removeEventListener("keydown",e.keydownHandler,{capture:e.keydownListenerCapture}),e.keydownHandlerAdded=!1),n.toast||(e.keydownHandler=e=>((t,e,n)=>{const r=lt.innerParams.get(t);r&&(r.stopKeydownPropagation&&e.stopPropagation(),"Enter"===e.key?Ce(t,e,r):"Tab"===e.key?Te(e,r):[...be,...we].includes(e.key)?Se(e.key):"Escape"===e.key&&Ee(e,r,n))})(t,e,r),e.keydownTarget=n.keydownListenerCapture?window:_(),e.keydownListenerCapture=n.keydownListenerCapture,e.keydownTarget.addEventListener("keydown",e.keydownHandler,{capture:e.keydownListenerCapture}),e.keydownHandlerAdded=!0)})(e,xt,i,d),((t,e)=>{"select"===e.input||"radio"===e.input?((t,e)=>{const n=_(),r=t=>he[e.input](n,de(t),e);c(e.inputOptions)||h(e.inputOptions)?(St(x()),l(e.inputOptions).then(e=>{t.hideLoading(),r(e)})):"object"==typeof e.inputOptions?r(e.inputOptions):o("Unexpected type of inputOptions! Expected object, Map or Promise, got ".concat(typeof e.inputOptions))})(t,e):["text","email","number","tel","textarea"].includes(e.input)&&(c(e.inputValue)||h(e.inputValue))&&((t,e)=>{const n=t.getInput();Y(n),l(e.inputValue).then(r=>{n.value="number"===e.input?parseFloat(r)||0:"".concat(r),K(n),n.focus(),t.hideLoading()}).catch(e=>{o("Error in inputValue promise: ".concat(e)),n.value="",K(n),n.focus(),t.hideLoading()})})(t,e)})(e,i),(t=>{const e=m(),n=_();a(t.willOpen,n);const i=window.getComputedStyle(document.body).overflowY;le(e,n,t),setTimeout(()=>{ue(e,n)},10),L()&&(ce(e,t.scrollbarPadding,i),r(document.body.children).forEach(t=>{t===m()||t.contains(m())||(t.hasAttribute("aria-hidden")&&t.setAttribute("data-previous-aria-hidden",t.getAttribute("aria-hidden")),t.setAttribute("aria-hidden","true"))})),F()||xt.previousActiveElement||(xt.previousActiveElement=document.activeElement),setTimeout(()=>a(t.didOpen,n)),z(e,f["no-transition"])})(i),Ae(xt,i,d),Oe(n,i),setTimeout(()=>{n.container.scrollTop=0})}),Ae=(t,e,n)=>{const r=R();Y(r),e.timer&&(t.timeout=new ne(()=>{n("timer"),delete t.timeout},e.timer),e.timerProgressBar&&(K(r),setTimeout(()=>{t.timeout&&t.timeout.running&&et(e.timer)})))},Oe=(t,e)=>{if(!e.toast)return u(e.allowEnterKey)?void(Pe(t,e)||_e(0,-1,1)):Re()},Pe=(t,e)=>e.focusDeny&&J(t.denyButton)?(t.denyButton.focus(),!0):e.focusCancel&&J(t.cancelButton)?(t.cancelButton.focus(),!0):!(!e.focusConfirm||!J(t.confirmButton)||(t.confirmButton.focus(),0)),Re=()=>{document.activeElement&&"function"==typeof document.activeElement.blur&&document.activeElement.blur()},Ne=t=>{for(const e in t)t[e]=new WeakMap};var De=Object.freeze({hideLoading:Bt,disableLoading:Bt,getInput:function(t){const e=lt.innerParams.get(t||this),n=lt.domCache.get(t||this);return n?V(n.popup,e.input):null},close:Yt,closePopup:Yt,closeModal:Yt,closeToast:Yt,enableButtons:function(){te(this,["confirmButton","denyButton","cancelButton"],!1)},disableButtons:function(){te(this,["confirmButton","denyButton","cancelButton"],!0)},enableInput:function(){return ee(this.getInput(),!1)},disableInput:function(){return ee(this.getInput(),!0)},showValidationMessage:function(t){const e=lt.domCache.get(this),n=lt.innerParams.get(this);M(e.validationMessage,t),e.validationMessage.className=f["validation-message"],n.customClass&&n.customClass.validationMessage&&G(e.validationMessage,n.customClass.validationMessage),K(e.validationMessage);const r=this.getInput();r&&(r.setAttribute("aria-invalid",!0),r.setAttribute("aria-describedBy",f["validation-message"]),B(r),G(r,f.inputerror))},resetValidationMessage:function(){const t=lt.domCache.get(this);t.validationMessage&&Y(t.validationMessage);const e=this.getInput();e&&(e.removeAttribute("aria-invalid"),e.removeAttribute("aria-describedBy"),z(e,f.inputerror))},getProgressSteps:function(){return lt.domCache.get(this).progressSteps},_main:function(t,e={}){(t=>{for(const e in t)Mt(e),t.toast&&qt(e),jt(e)})(Object.assign({},e,t)),xt.currentInstance&&xt.currentInstance._destroy(),xt.currentInstance=this;const n=Ie(t,e);ie(n),Object.freeze(n),xt.timeout&&(xt.timeout.stop(),delete xt.timeout),clearTimeout(xt.restoreFocusTimeout);const r=(t=>{const e={popup:_(),container:m(),actions:O(),confirmButton:x(),denyButton:I(),cancelButton:A(),loader:k(),closeButton:N(),validationMessage:E(),progressSteps:S()};return lt.domCache.set(t,e),e})(this);return Ct(this,n),lt.innerParams.set(this,n),ke(this,r,n)},update:function(t){const e=_(),n=lt.innerParams.get(this);if(!e||q(e,n.hideClass.popup))return i("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");const r={};Object.keys(t).forEach(e=>{Ue.isUpdatableParameter(e)?r[e]=t[e]:i('Invalid parameter to update: "'.concat(e,'". Updatable params are listed here: https://github.com/sweetalert2/sweetalert2/blob/master/src/utils/params.js\n\nIf you think this parameter should be updatable, request it here: https://github.com/sweetalert2/sweetalert2/issues/new?template=02_feature_request.md'))});const o=Object.assign({},n,r);Ct(this,o),lt.innerParams.set(this,o),Object.defineProperties(this,{params:{value:Object.assign({},this.params,t),writable:!1,enumerable:!0}})},_destroy:function(){const t=lt.domCache.get(this),e=lt.innerParams.get(this);e&&(t.popup&&xt.swalCloseEventFinishedCallback&&(xt.swalCloseEventFinishedCallback(),delete xt.swalCloseEventFinishedCallback),xt.deferDisposalTimer&&(clearTimeout(xt.deferDisposalTimer),delete xt.deferDisposalTimer),a(e.didDestroy),delete this.params,delete xt.keydownHandler,delete xt.keydownTarget,Ne(lt),Ne(Wt))}});let Le;class Fe{constructor(...t){if("undefined"==typeof window)return;Le=this;const e=Object.freeze(this.constructor.argsToParams(t));Object.defineProperties(this,{params:{value:e,writable:!1,enumerable:!0,configurable:!0}});const n=this._main(this.params);lt.promise.set(this,n)}then(t){return lt.promise.get(this).then(t)}finally(t){return lt.promise.get(this).finally(t)}}Object.assign(Fe.prototype,De),Object.assign(Fe,Vt),Object.keys(De).forEach(t=>{Fe[t]=function(...e){if(Le)return Le[t](...e)}}),Fe.DismissReason=t,Fe.version="11.0.7";const Ue=Fe;return Ue.default=Ue,Ue}(),void 0!==this&&this.Sweetalert2&&(this.swal=this.sweetAlert=this.Swal=this.SweetAlert=this.Sweetalert2),"undefined"!=typeof document&&function(t,e){var n=t.createElement("style");if(t.getElementsByTagName("head")[0].appendChild(n),n.styleSheet)n.styleSheet.disabled||(n.styleSheet.cssText=e);else try{n.innerHTML=e}catch(t){n.innerText=e}}(document,'.swal2-popup.swal2-toast{box-sizing:border-box;grid-column:1/4!important;grid-row:1/4!important;grid-template-columns:1fr 99fr 1fr;padding:1em;overflow-y:hidden;background:#fff;box-shadow:0 0 .625em #d9d9d9}.swal2-popup.swal2-toast>*{grid-column:2}.swal2-popup.swal2-toast .swal2-title{margin:1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-loading{justify-content:center}.swal2-popup.swal2-toast .swal2-input{height:2em;margin:.5em;font-size:1em}.swal2-popup.swal2-toast .swal2-validation-message{font-size:1em}.swal2-popup.swal2-toast .swal2-footer{margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-popup.swal2-toast .swal2-close{grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-popup.swal2-toast .swal2-html-container{margin:1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-html-container:empty{padding:0}.swal2-popup.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-popup.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:700}.swal2-popup.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-popup.swal2-toast .swal2-actions{justify-content:flex-start;height:auto;margin:0;margin-top:.3125em;padding:0}.swal2-popup.swal2-toast .swal2-styled{margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-popup.swal2-toast .swal2-styled:focus{box-shadow:0 0 0 1px #fff,0 0 0 3px rgba(100,150,200,.5)}.swal2-popup.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;transform:rotate(45deg);border-radius:50%}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-.8em;left:-.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-popup.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{-webkit-animation:swal2-toast-animate-success-line-tip .75s;animation:swal2-toast-animate-success-line-tip .75s}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{-webkit-animation:swal2-toast-animate-success-line-long .75s;animation:swal2-toast-animate-success-line-long .75s}.swal2-popup.swal2-toast.swal2-show{-webkit-animation:swal2-toast-show .5s;animation:swal2-toast-show .5s}.swal2-popup.swal2-toast.swal2-hide{-webkit-animation:swal2-toast-hide .1s forwards;animation:swal2-toast-hide .1s forwards}.swal2-container{display:grid;position:fixed;z-index:1060;top:0;right:0;bottom:0;left:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end" "gap gap gap";grid-template-rows:auto auto auto .625em;height:100%;padding:.625em .625em 0;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}.swal2-container::after{content:"";grid-column:1/4;grid-row:4;height:.625em}.swal2-container.swal2-backdrop-show,.swal2-container.swal2-noanimation{background:rgba(0,0,0,.4)}.swal2-container.swal2-backdrop-hide{background:0 0!important}.swal2-container.swal2-bottom-start,.swal2-container.swal2-center-start,.swal2-container.swal2-top-start{grid-template-columns:minmax(0,1fr) auto auto}.swal2-container.swal2-bottom,.swal2-container.swal2-center,.swal2-container.swal2-top{grid-template-columns:auto minmax(0,1fr) auto}.swal2-container.swal2-bottom-end,.swal2-container.swal2-center-end,.swal2-container.swal2-top-end{grid-template-columns:auto auto minmax(0,1fr)}.swal2-container.swal2-top-start>.swal2-popup{align-self:start}.swal2-container.swal2-top>.swal2-popup{grid-column:2;align-self:start;justify-self:center}.swal2-container.swal2-top-end>.swal2-popup,.swal2-container.swal2-top-right>.swal2-popup{grid-column:3;align-self:start;justify-self:end}.swal2-container.swal2-center-left>.swal2-popup,.swal2-container.swal2-center-start>.swal2-popup{grid-row:2;align-self:center}.swal2-container.swal2-center>.swal2-popup{grid-column:2;grid-row:2;align-self:center;justify-self:center}.swal2-container.swal2-center-end>.swal2-popup,.swal2-container.swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;align-self:center;justify-self:end}.swal2-container.swal2-bottom-left>.swal2-popup,.swal2-container.swal2-bottom-start>.swal2-popup{grid-column:1;grid-row:3;align-self:end}.swal2-container.swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;justify-self:center;align-self:end}.swal2-container.swal2-bottom-end>.swal2-popup,.swal2-container.swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;align-self:end;justify-self:end}.swal2-container.swal2-grow-fullscreen>.swal2-popup,.swal2-container.swal2-grow-row>.swal2-popup{grid-column:1/4;width:100%}.swal2-container.swal2-grow-column>.swal2-popup,.swal2-container.swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}.swal2-container.swal2-no-transition{transition:none!important}.swal2-popup{display:none;position:relative;box-sizing:border-box;width:32em;max-width:100%;padding:0 0 1.25em;border:none;border-radius:5px;background:#fff;font-family:inherit;font-size:1rem}.swal2-popup:focus{outline:0}.swal2-popup.swal2-loading{overflow-y:hidden}.swal2-title{position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:#595959;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word}.swal2-actions{display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:100%;margin:1.25em auto 0;padding:0}.swal2-actions:not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}.swal2-actions:not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0,0,0,.1),rgba(0,0,0,.1))}.swal2-actions:not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0,0,0,.2),rgba(0,0,0,.2))}.swal2-loader{display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;-webkit-animation:swal2-rotate-loading 1.5s linear 0s infinite normal;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 transparent #2778c4 transparent}.swal2-styled{margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px transparent;font-weight:500}.swal2-styled:not([disabled]){cursor:pointer}.swal2-styled.swal2-confirm{border:0;border-radius:.25em;background:initial;background-color:#7367f0;color:#fff;font-size:1em}.swal2-styled.swal2-confirm:focus{box-shadow:0 0 0 3px rgba(115,103,240,.5)}.swal2-styled.swal2-deny{border:0;border-radius:.25em;background:initial;background-color:#ea5455;color:#fff;font-size:1em}.swal2-styled.swal2-deny:focus{box-shadow:0 0 0 3px rgba(234,84,85,.5)}.swal2-styled.swal2-cancel{border:0;border-radius:.25em;background:initial;background-color:#6e7d88;color:#fff;font-size:1em}.swal2-styled.swal2-cancel:focus{box-shadow:0 0 0 3px rgba(110,125,136,.5)}.swal2-styled.swal2-default-outline:focus{box-shadow:0 0 0 3px rgba(100,150,200,.5)}.swal2-styled:focus{outline:0}.swal2-styled::-moz-focus-inner{border:0}.swal2-footer{justify-content:center;margin:1em 0 0;padding:1em 1em 0;border-top:1px solid #eee;color:#545454;font-size:1em}.swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto!important;height:.25em;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}.swal2-timer-progress-bar{width:100%;height:.25em;background:rgba(0,0,0,.2)}.swal2-image{max-width:100%;margin:2em auto 1em}.swal2-close{z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:5px;background:0 0;color:#ccc;font-family:serif;font-family:monospace;font-size:2.5em;cursor:pointer;justify-self:end}.swal2-close:hover{transform:none;background:0 0;color:#f27474}.swal2-close:focus{outline:0;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}.swal2-close::-moz-focus-inner{border:0}.swal2-html-container{z-index:1;justify-content:center;margin:0;padding:1em 1.6em .3em;color:#545454;font-size:1.125em;font-weight:400;line-height:normal;text-align:center;word-wrap:break-word}.swal2-checkbox,.swal2-file,.swal2-input,.swal2-radio,.swal2-select,.swal2-textarea{margin:1em 2em 0}.swal2-file,.swal2-input,.swal2-textarea{box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid #d9d9d9;border-radius:.1875em;background:inherit;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px transparent;color:inherit;font-size:1.125em}.swal2-file.swal2-inputerror,.swal2-input.swal2-inputerror,.swal2-textarea.swal2-inputerror{border-color:#f27474!important;box-shadow:0 0 2px #f27474!important}.swal2-file:focus,.swal2-input:focus,.swal2-textarea:focus{border:1px solid #b4dbed;outline:0;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}.swal2-file::-moz-placeholder,.swal2-input::-moz-placeholder,.swal2-textarea::-moz-placeholder{color:#ccc}.swal2-file:-ms-input-placeholder,.swal2-input:-ms-input-placeholder,.swal2-textarea:-ms-input-placeholder{color:#ccc}.swal2-file::placeholder,.swal2-input::placeholder,.swal2-textarea::placeholder{color:#ccc}.swal2-range{margin:1em 2em 0;background:#fff}.swal2-range input{width:80%}.swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}.swal2-range input,.swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}.swal2-input{height:2.625em;padding:0 .75em}.swal2-input[type=number]{max-width:10em}.swal2-file{width:75%;margin-right:auto;margin-left:auto;background:inherit;font-size:1.125em}.swal2-textarea{height:6.75em;padding:.75em}.swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:inherit;color:inherit;font-size:1.125em}.swal2-checkbox,.swal2-radio{align-items:center;justify-content:center;background:#fff;color:inherit}.swal2-checkbox label,.swal2-radio label{margin:0 .6em;font-size:1.125em}.swal2-checkbox input,.swal2-radio input{flex-shrink:0;margin:0 .4em}.swal2-input-label{display:flex;justify-content:center;margin:1em auto 0}.swal2-validation-message{align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:#f0f0f0;color:#666;font-size:1em;font-weight:300}.swal2-validation-message::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}.swal2-icon{position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:.25em solid transparent;border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}.swal2-icon.swal2-error{border-color:#f27474;color:#f27474}.swal2-icon.swal2-error .swal2-x-mark{position:relative;flex-grow:1}.swal2-icon.swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}.swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}.swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}.swal2-icon.swal2-error.swal2-icon-show{-webkit-animation:swal2-animate-error-icon .5s;animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-error.swal2-icon-show .swal2-x-mark{-webkit-animation:swal2-animate-error-x-mark .5s;animation:swal2-animate-error-x-mark .5s}.swal2-icon.swal2-warning{border-color:#facea8;color:#f8bb86}.swal2-icon.swal2-info{border-color:#9de0f6;color:#3fc3ee}.swal2-icon.swal2-question{border-color:#c9dae1;color:#87adbd}.swal2-icon.swal2-success{border-color:#a5dc86;color:#a5dc86}.swal2-icon.swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;transform:rotate(45deg);border-radius:50%}.swal2-icon.swal2-success [class^=swal2-success-circular-line][class$=left]{top:-.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}.swal2-icon.swal2-success [class^=swal2-success-circular-line][class$=right]{top:-.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}.swal2-icon.swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-.25em;left:-.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}.swal2-icon.swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}.swal2-icon.swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}.swal2-icon.swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}.swal2-icon.swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-line-tip{-webkit-animation:swal2-animate-success-line-tip .75s;animation:swal2-animate-success-line-tip .75s}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-line-long{-webkit-animation:swal2-animate-success-line-long .75s;animation:swal2-animate-success-line-long .75s}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-circular-line-right{-webkit-animation:swal2-rotate-success-circular-line 4.25s ease-in;animation:swal2-rotate-success-circular-line 4.25s ease-in}.swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:inherit;font-weight:600}.swal2-progress-steps li{display:inline-block;position:relative}.swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}.swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}[class^=swal2]{-webkit-tap-highlight-color:transparent}.swal2-show{-webkit-animation:swal2-show .3s;animation:swal2-show .3s}.swal2-hide{-webkit-animation:swal2-hide .15s forwards;animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}@-webkit-keyframes swal2-toast-show{0%{transform:translateY(-.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0)}}@keyframes swal2-toast-show{0%{transform:translateY(-.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0)}}@-webkit-keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@-webkit-keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@-webkit-keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@-webkit-keyframes swal2-show{0%{transform:scale(.7)}45%{transform:scale(1.05)}80%{transform:scale(.95)}100%{transform:scale(1)}}@keyframes swal2-show{0%{transform:scale(.7)}45%{transform:scale(1.05)}80%{transform:scale(.95)}100%{transform:scale(1)}}@-webkit-keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(.5);opacity:0}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(.5);opacity:0}}@-webkit-keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@-webkit-keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@-webkit-keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@-webkit-keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(.4);opacity:0}50%{margin-top:1.625em;transform:scale(.4);opacity:0}80%{margin-top:-.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(.4);opacity:0}50%{margin-top:1.625em;transform:scale(.4);opacity:0}80%{margin-top:-.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@-webkit-keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0);opacity:1}}@-webkit-keyframes swal2-rotate-loading{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}@keyframes swal2-rotate-loading{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto!important}body.swal2-no-backdrop .swal2-container{top:auto;right:auto;bottom:auto;left:auto;max-width:calc(100% - .625em * 2);background-color:transparent!important}body.swal2-no-backdrop .swal2-container>.swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}body.swal2-no-backdrop .swal2-container.swal2-top{top:0;left:50%;transform:translateX(-50%)}body.swal2-no-backdrop .swal2-container.swal2-top-left,body.swal2-no-backdrop .swal2-container.swal2-top-start{top:0;left:0}body.swal2-no-backdrop .swal2-container.swal2-top-end,body.swal2-no-backdrop .swal2-container.swal2-top-right{top:0;right:0}body.swal2-no-backdrop .swal2-container.swal2-center{top:50%;left:50%;transform:translate(-50%,-50%)}body.swal2-no-backdrop .swal2-container.swal2-center-left,body.swal2-no-backdrop .swal2-container.swal2-center-start{top:50%;left:0;transform:translateY(-50%)}body.swal2-no-backdrop .swal2-container.swal2-center-end,body.swal2-no-backdrop .swal2-container.swal2-center-right{top:50%;right:0;transform:translateY(-50%)}body.swal2-no-backdrop .swal2-container.swal2-bottom{bottom:0;left:50%;transform:translateX(-50%)}body.swal2-no-backdrop .swal2-container.swal2-bottom-left,body.swal2-no-backdrop .swal2-container.swal2-bottom-start{bottom:0;left:0}body.swal2-no-backdrop .swal2-container.swal2-bottom-end,body.swal2-no-backdrop .swal2-container.swal2-bottom-right{right:0;bottom:0}@media print{body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow-y:scroll!important}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown) .swal2-container{position:static!important}}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:transparent}body.swal2-toast-shown .swal2-container.swal2-top{top:0;right:auto;bottom:auto;left:50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{top:0;right:0;bottom:auto;left:auto}body.swal2-toast-shown .swal2-container.swal2-top-left,body.swal2-toast-shown .swal2-container.swal2-top-start{top:0;right:auto;bottom:auto;left:0}body.swal2-toast-shown .swal2-container.swal2-center-left,body.swal2-toast-shown .swal2-container.swal2-center-start{top:50%;right:auto;bottom:auto;left:0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{top:50%;right:auto;bottom:auto;left:50%;transform:translate(-50%,-50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{top:50%;right:0;bottom:auto;left:auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-left,body.swal2-toast-shown .swal2-container.swal2-bottom-start{top:auto;right:auto;bottom:0;left:0}body.swal2-toast-shown .swal2-container.swal2-bottom{top:auto;right:auto;bottom:0;left:50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{top:auto;right:0;bottom:0;left:auto}')},8191:(t,e,n)=>{"use strict";var r=n(5366);let i=null;function o(){return i}const s=new r.OlP("DocumentToken");let a=(()=>{class t{historyGo(t){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=(0,r.Yz7)({factory:u,token:t,providedIn:"platform"}),t})();function u(){return(0,r.LFG)(l)}const c=new r.OlP("Location Initialized");let l=(()=>{class t extends a{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return o().getBaseHref(this._doc)}onPopState(t){const e=o().getGlobalEventTarget(this._doc,"window");return e.addEventListener("popstate",t,!1),()=>e.removeEventListener("popstate",t)}onHashChange(t){const e=o().getGlobalEventTarget(this._doc,"window");return e.addEventListener("hashchange",t,!1),()=>e.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){h()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){h()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(s))},t.\u0275prov=(0,r.Yz7)({factory:d,token:t,providedIn:"platform"}),t})();function h(){return!!window.history.pushState}function d(){return new l((0,r.LFG)(s))}function p(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function f(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function g(t){return t&&"?"!==t[0]?"?"+t:t}let m=(()=>{class t{historyGo(t){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=(0,r.Yz7)({factory:y,token:t,providedIn:"root"}),t})();function y(t){const e=(0,r.LFG)(s).location;return new _((0,r.LFG)(a),e&&e.origin||"")}const v=new r.OlP("appBaseHref");let _=(()=>{class t extends m{constructor(t,e){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return p(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+g(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var e,n;null===(n=(e=this._platformLocation).historyGo)||void 0===n||n.call(e,t)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(a),r.LFG(v,8))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),b=(()=>{class t extends m{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=e&&(this._baseHref=e)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=p(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var e,n;null===(n=(e=this._platformLocation).historyGo)||void 0===n||n.call(e,t)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(a),r.LFG(v,8))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),w=(()=>{class t{constructor(t,e){this._subject=new r.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=f(T(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+g(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,T(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+g(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+g(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var e,n;null===(n=(e=this._platformStrategy).historyGo)||void 0===n||n.call(e,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(m),r.LFG(a))},t.normalizeQueryParams=g,t.joinWithSlash=p,t.stripTrailingSlash=f,t.\u0275prov=(0,r.Yz7)({factory:C,token:t,providedIn:"root"}),t})();function C(){return new w((0,r.LFG)(m),(0,r.LFG)(a))}function T(t){return t.replace(/\/index.html$/,"")}var S=function(t){return t[t.Decimal=0]="Decimal",t[t.Percent=1]="Percent",t[t.Currency=2]="Currency",t[t.Scientific=3]="Scientific",t}({}),E=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({}),x=function(t){return t[t.Decimal=0]="Decimal",t[t.Group=1]="Group",t[t.List=2]="List",t[t.PercentSign=3]="PercentSign",t[t.PlusSign=4]="PlusSign",t[t.MinusSign=5]="MinusSign",t[t.Exponential=6]="Exponential",t[t.SuperscriptingExponent=7]="SuperscriptingExponent",t[t.PerMille=8]="PerMille",t[t[1/0]=9]="Infinity",t[t.NaN=10]="NaN",t[t.TimeSeparator=11]="TimeSeparator",t[t.CurrencyDecimal=12]="CurrencyDecimal",t[t.CurrencyGroup=13]="CurrencyGroup",t}({});function I(t,e){const n=(0,r.cg1)(t),i=n[r.wAp.NumberSymbols][e];if(void 0===i){if(e===x.CurrencyDecimal)return n[r.wAp.NumberSymbols][x.Decimal];if(e===x.CurrencyGroup)return n[r.wAp.NumberSymbols][x.Group]}return i}const k=r.kL8,A=/^(\d+)?\.((\d+)(-(\d+))?)?$/,O=".",P="0";function R(t){const e=parseInt(t);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+t);return e}class N{}let D=(()=>{class t extends N{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(k(e||this.locale)(t)){case E.Zero:return"zero";case E.One:return"one";case E.Two:return"two";case E.Few:return"few";case E.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.soG))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();function L(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}class F{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let U=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;if(!this._differ&&e)try{this._differ=this._differs.find(e).create(this.ngForTrackBy)}catch(UC){throw new Error(`Cannot find a differ supporting object '${e}' of type '${t=e,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new F(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new M(t,n);e.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const o=new M(t,i);e.push(o)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=r,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.s_b),r.Y36(r.Rgc),r.Y36(r.ZZ4))},t.\u0275dir=r.lG2({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class M{constructor(t,e){this.record=t,this.view=e}}let q=(()=>{class t{constructor(t,e){this._viewContainer=t,this._context=new j,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){V("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){V("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.s_b),r.Y36(r.Rgc))},t.\u0275dir=r.lG2({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class j{constructor(){this.$implicit=null,this.ngIf=null}}function V(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${(0,r.AaK)(e)}'.`)}let B=(()=>{class t{constructor(t,e,n){this._ngEl=t,this._differs=e,this._renderer=n,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,e){const[n,r]=t.split(".");null!=(e=null!=e&&r?`${e}${r}`:e)?this._renderer.setStyle(this._ngEl.nativeElement,n,e):this._renderer.removeStyle(this._ngEl.nativeElement,n)}_applyChanges(t){t.forEachRemovedItem(t=>this._setStyle(t.key,null)),t.forEachAddedItem(t=>this._setStyle(t.key,t.currentValue)),t.forEachChangedItem(t=>this._setStyle(t.key,t.currentValue))}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.SBq),r.Y36(r.aQg),r.Y36(r.Qsj))},t.\u0275dir=r.lG2({type:t,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),t})();function Z(t,e){return Error(`InvalidPipeArgument: '${e}' for pipe '${(0,r.AaK)(t)}'`)}class G{createSubscription(t,e){return t.subscribe({next:e,error:t=>{throw t}})}dispose(t){t.unsubscribe()}onDestroy(t){t.unsubscribe()}}class z{createSubscription(t,e){return t.then(e,t=>{throw t})}dispose(t){}onDestroy(t){}}const H=new z,W=new G;let K=(()=>{class t{constructor(t){this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,e=>this._updateLatestValue(t,e))}_selectStrategy(e){if((0,r.QGY)(e))return H;if((0,r.F4k)(e))return W;throw Z(t,e)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,e){t===this._obj&&(this._latestValue=e,this._ref.markForCheck())}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.sBO,16))},t.\u0275pipe=r.Yjl({name:"async",type:t,pure:!1}),t})(),Y=(()=>{class t{constructor(t){this._locale=t}transform(e,n,i){if(!function(t){return!(null==t||""===t||t!=t)}(e))return null;i=i||this._locale;try{return function(t,e,n){return function(t,e,n,r,i,o,s=!1){let a="",u=!1;if(isFinite(t)){let c=function(t){let e,n,r,i,o,s=Math.abs(t)+"",a=0;for((n=s.indexOf(O))>-1&&(s=s.replace(O,"")),(r=s.search(/e/i))>0?(n<0&&(n=r),n+=+s.slice(r+1),s=s.substring(0,r)):n<0&&(n=s.length),r=0;s.charAt(r)===P;r++);if(r===(o=s.length))e=[0],n=1;else{for(o--;s.charAt(o)===P;)o--;for(n-=r,e=[],i=0;r<=o;r++,i++)e[i]=Number(s.charAt(r))}return n>22&&(e=e.splice(0,21),a=n-1,n=1),{digits:e,exponent:a,integerLen:n}}(t);s&&(c=function(t){if(0===t.digits[0])return t;const e=t.digits.length-t.integerLen;return t.exponent?t.exponent+=2:(0===e?t.digits.push(0,0):1===e&&t.digits.push(0),t.integerLen+=2),t}(c));let l=e.minInt,h=e.minFrac,d=e.maxFrac;if(o){const t=o.match(A);if(null===t)throw new Error(`${o} is not a valid digit info`);const e=t[1],n=t[3],r=t[5];null!=e&&(l=R(e)),null!=n&&(h=R(n)),null!=r?d=R(r):null!=n&&h>d&&(d=h)}!function(t,e,n){if(e>n)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${n}).`);let r=t.digits,i=r.length-t.integerLen;const o=Math.min(Math.max(e,i),n);let s=o+t.integerLen,a=r[s];if(s>0){r.splice(Math.max(t.integerLen,s));for(let t=s;t<r.length;t++)r[t]=0}else{i=Math.max(0,i),t.integerLen=1,r.length=Math.max(1,s=o+1),r[0]=0;for(let t=1;t<s;t++)r[t]=0}if(a>=5)if(s-1<0){for(let e=0;e>s;e--)r.unshift(0),t.integerLen++;r.unshift(1),t.integerLen++}else r[s-1]++;for(;i<Math.max(0,o);i++)r.push(0);let u=0!==o;const c=e+t.integerLen,l=r.reduceRight(function(t,e,n,r){return r[n]=(e+=t)<10?e:e-10,u&&(0===r[n]&&n>=c?r.pop():u=!1),e>=10?1:0},0);l&&(r.unshift(l),t.integerLen++)}(c,h,d);let p=c.digits,f=c.integerLen;const g=c.exponent;let m=[];for(u=p.every(t=>!t);f<l;f++)p.unshift(0);for(;f<0;f++)p.unshift(0);f>0?m=p.splice(f,p.length):(m=p,p=[0]);const y=[];for(p.length>=e.lgSize&&y.unshift(p.splice(-e.lgSize,p.length).join(""));p.length>e.gSize;)y.unshift(p.splice(-e.gSize,p.length).join(""));p.length&&y.unshift(p.join("")),a=y.join(I(n,r)),m.length&&(a+=I(n,i)+m.join("")),g&&(a+=I(n,x.Exponential)+"+"+g)}else a=I(n,x.Infinity);return a=t<0&&!u?e.negPre+a+e.negSuf:e.posPre+a+e.posSuf,a}(t,function(t,e="-"){const n={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=t.split(";"),i=r[0],o=r[1],s=-1!==i.indexOf(O)?i.split(O):[i.substring(0,i.lastIndexOf(P)+1),i.substring(i.lastIndexOf(P)+1)],a=s[0],u=s[1]||"";n.posPre=a.substr(0,a.indexOf("#"));for(let l=0;l<u.length;l++){const t=u.charAt(l);t===P?n.minFrac=n.maxFrac=l+1:"#"===t?n.maxFrac=l+1:n.posSuf+=t}const c=a.split(",");if(n.gSize=c[1]?c[1].length:0,n.lgSize=c[2]||c[1]?(c[2]||c[1]).length:0,o){const t=i.length-n.posPre.length-n.posSuf.length,e=o.indexOf("#");n.negPre=o.substr(0,e).replace(/'/g,""),n.negSuf=o.substr(e+t).replace(/'/g,"")}else n.negPre=e+n.posPre,n.negSuf=n.posSuf;return n}(function(t,e){return(0,r.cg1)(t)[r.wAp.NumberFormats][e]}(e,S.Decimal),I(e,x.MinusSign)),e,x.Group,x.Decimal,n)}(function(t){if("string"==typeof t&&!isNaN(Number(t)-parseFloat(t)))return Number(t);if("number"!=typeof t)throw new Error(`${t} is not a number`);return t}(e),i,n)}catch(o){throw Z(t,o.message)}}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.soG,16))},t.\u0275pipe=r.Yjl({name:"number",type:t,pure:!0}),t})(),Q=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[{provide:N,useClass:D}]}),t})();function $(t){return"browser"===t}function J(t){return"server"===t}let X=(()=>{class t{}return t.\u0275prov=(0,r.Yz7)({token:t,providedIn:"root",factory:()=>new tt((0,r.LFG)(s),window)}),t})();class tt{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&(t.body.createShadowRoot||t.body.attachShadow)){const n=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let r=n.currentNode;for(;r;){const t=r.shadowRoot;if(t){const n=t.getElementById(e)||t.querySelector(`[name="${e}"]`);if(n)return n}r=n.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),this.attemptFocus(e))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=et(this.window.history)||et(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(UC){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(UC){return!1}}}function et(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class nt{}class rt extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var t;t=new rt,i||(i=t)}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=(ot=ot||document.querySelector("base"),ot?ot.getAttribute("href"):null);return null==e?null:function(t){it=it||document.createElement("a"),it.setAttribute("href",t);const e=it.pathname;return"/"===e.charAt(0)?e:`/${e}`}(e)}resetBaseElement(){ot=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return L(document.cookie,t)}}let it,ot=null;const st=new r.OlP("TRANSITION_ID"),at=[{provide:r.ip1,useFactory:function(t,e,n){return()=>{n.get(r.CZH).donePromise.then(()=>{const n=o();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[st,s,r.zs3],multi:!0}];class ut{static init(){(0,r.VLi)(new ut)}addToWindow(t){r.dqk.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},r.dqk.getAllAngularTestabilities=()=>t.getAllTestabilities(),r.dqk.getAllAngularRootElements=()=>t.getAllRootElements(),r.dqk.frameworkStabilizers||(r.dqk.frameworkStabilizers=[]),r.dqk.frameworkStabilizers.push(t=>{const e=r.dqk.getAllAngularTestabilities();let n=e.length,i=!1;const o=function(e){i=i||e,n--,0==n&&t(i)};e.forEach(function(t){t.whenStable(o)})})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?o().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}let ct=(()=>{class t{build(){return new XMLHttpRequest}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const lt=new r.OlP("EventManagerPlugins");let ht=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error(`No event manager plugin found for event ${t}`)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(lt),r.LFG(r.R0b))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();class dt{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=o().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let pt=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),ft=(()=>{class t extends pt{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,e,n){t.forEach(t=>{const r=this._doc.createElement("style");r.textContent=t,n.push(e.appendChild(r))})}addHost(t){const e=[];this._addStylesToHost(this._stylesSet,t,e),this._hostNodes.set(t,e)}removeHost(t){const e=this._hostNodes.get(t);e&&e.forEach(gt),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((e,n)=>{this._addStylesToHost(t,n,e)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(gt))}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(s))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();function gt(t){o().remove(t)}const mt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},yt=/%COMP%/g;function vt(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?vt(t,i,n):(i=i.replace(yt,t),n.push(i))}return n}function _t(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let bt=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new wt(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case r.ifc.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new Ct(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case 1:case r.ifc.ShadowDom:return new Tt(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=vt(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(ht),r.LFG(ft),r.LFG(r.AFp))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();class wt{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(mt[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=mt[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=mt[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,i){i&(r.JOm.DashCase|r.JOm.Important)?t.style.setProperty(e,n,i&r.JOm.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&r.JOm.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,_t(n)):this.eventManager.addEventListener(t,e,_t(n))}}class Ct extends wt{constructor(t,e,n,r){super(t),this.component=n;const i=vt(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(yt,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(yt,r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class Tt extends wt{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=vt(r.id,r.styles,[]);for(let o=0;o<i.length;o++){const t=document.createElement("style");t.textContent=i[o],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let St=(()=>{class t extends dt{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(s))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const Et=["alt","control","meta","shift"],xt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},It={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},kt={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let At=(()=>{class t extends dt{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),s=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>o().onAndCancel(e,i.domEventName,s))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let o="";if(Et.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),o+=t+".")}),o+=i,0!=n.length||0===i.length)return null;const s={};return s.domEventName=r,s.fullKey=o,s}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&It.hasOwnProperty(e)&&(e=It[e]))}return xt[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),Et.forEach(r=>{r!=n&&(0,kt[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(s))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const Ot=(0,r.eFA)(r._c5,"browser",[{provide:r.Lbi,useValue:"browser"},{provide:r.g9A,useValue:function(){rt.makeCurrent(),ut.init()},multi:!0},{provide:s,useFactory:function(){return(0,r.RDi)(document),document},deps:[]}]),Pt=[[],{provide:r.zSh,useValue:"root"},{provide:r.qLn,useFactory:function(){return new r.qLn},deps:[]},{provide:lt,useClass:St,multi:!0,deps:[s,r.R0b,r.Lbi]},{provide:lt,useClass:At,multi:!0,deps:[s]},[],{provide:bt,useClass:bt,deps:[ht,ft,r.AFp]},{provide:r.FYo,useExisting:bt},{provide:pt,useExisting:ft},{provide:ft,useClass:ft,deps:[s]},{provide:r.dDg,useClass:r.dDg,deps:[r.R0b]},{provide:ht,useClass:ht,deps:[lt,r.R0b]},{provide:nt,useClass:ct,deps:[]},[]];let Rt=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:r.AFp,useValue:e.appId},{provide:st,useExisting:r.AFp},at]}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(t,12))},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:Pt,imports:[Q,r.hGG]}),t})();function Nt(){return new Dt((0,r.LFG)(s))}let Dt=(()=>{class t{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(s))},t.\u0275prov=(0,r.Yz7)({factory:Nt,token:t,providedIn:"root"}),t})();"undefined"!=typeof window&&window;var Lt=n(9764),Ft=n(8318),Ut=n(8470),Mt=n(9996),qt=n(2056);function jt(t,e){return new Ft.y(n=>{const r=t.length;if(0===r)return void n.complete();const i=new Array(r);let o=0,s=0;for(let a=0;a<r;a++){const u=(0,Lt.D)(t[a]);let c=!1;n.add(u.subscribe({next:t=>{c||(c=!0,s++),i[a]=t},error:t=>n.error(t),complete:()=>{o++,o!==r&&c||(s===r&&n.next(e?e.reduce((t,e,n)=>(t[e]=i[n],t),{}):i),n.complete())}}))}})}let Vt=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}setProperty(t,e){this._renderer.setProperty(this._elementRef.nativeElement,t,e)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.Qsj),r.Y36(r.SBq))},t.\u0275dir=r.lG2({type:t}),t})(),Bt=(()=>{class t extends Vt{}return t.\u0275fac=function(){let e;return function(n){return(e||(e=r.n5z(t)))(n||t)}}(),t.\u0275dir=r.lG2({type:t,features:[r.qOj]}),t})();const Zt=new r.OlP("NgValueAccessor"),Gt={provide:Zt,useExisting:(0,r.Gpc)(()=>Ht),multi:!0},zt=new r.OlP("CompositionEventMode");let Ht=(()=>{class t extends Vt{constructor(t,e,n){super(t,e),this._compositionMode=n,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=o()?o().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.Qsj),r.Y36(r.SBq),r.Y36(zt,8))},t.\u0275dir=r.lG2({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,e){1&t&&r.NdJ("input",function(t){return e._handleInput(t.target.value)})("blur",function(){return e.onTouched()})("compositionstart",function(){return e._compositionStart()})("compositionend",function(t){return e._compositionEnd(t.target.value)})},features:[r._Bn([Gt]),r.qOj]}),t})();const Wt=new r.OlP("NgValidators"),Kt=new r.OlP("NgAsyncValidators");function Yt(t){return null!=t}function Qt(t){const e=(0,r.QGY)(t)?(0,Lt.D)(t):t;return(0,r.CqO)(e),e}function $t(t){let e={};return t.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function Jt(t,e){return e.map(e=>e(t))}function Xt(t){return t.map(t=>function(t){return!t.validate}(t)?t:e=>t.validate(e))}function te(t){return null!=t?function(t){if(!t)return null;const e=t.filter(Yt);return 0==e.length?null:function(t){return $t(Jt(t,e))}}(Xt(t)):null}function ee(t){return null!=t?function(t){if(!t)return null;const e=t.filter(Yt);return 0==e.length?null:function(t){return function(...t){if(1===t.length){const e=t[0];if((0,Ut.k)(e))return jt(e,null);if((0,qt.K)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return jt(t.map(t=>e[t]),t)}}if("function"==typeof t[t.length-1]){const e=t.pop();return jt(t=1===t.length&&(0,Ut.k)(t[0])?t[0]:t,null).pipe((0,Mt.U)(t=>e(...t)))}return jt(t,null)}(Jt(t,e).map(Qt)).pipe((0,Mt.U)($t))}}(Xt(t)):null}function ne(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}function re(t){return t._rawValidators}function ie(t){return t._rawAsyncValidators}let oe=(()=>{class t{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=te(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=ee(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.lG2({type:t}),t})(),se=(()=>{class t extends oe{get formDirective(){return null}get path(){return null}}return t.\u0275fac=function(){let e;return function(n){return(e||(e=r.n5z(t)))(n||t)}}(),t.\u0275dir=r.lG2({type:t,features:[r.qOj]}),t})();class ae extends oe{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class ue{constructor(t){this._cd=t}is(t){var e,n;return!!(null===(n=null===(e=this._cd)||void 0===e?void 0:e.control)||void 0===n?void 0:n[t])}}let ce=(()=>{class t extends ue{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(ae,2))},t.\u0275dir=r.lG2({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,e){2&t&&r.ekj("ng-untouched",e.is("untouched"))("ng-touched",e.is("touched"))("ng-pristine",e.is("pristine"))("ng-dirty",e.is("dirty"))("ng-valid",e.is("valid"))("ng-invalid",e.is("invalid"))("ng-pending",e.is("pending"))},features:[r.qOj]}),t})(),le=(()=>{class t extends ue{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(se,10))},t.\u0275dir=r.lG2({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:14,hostBindings:function(t,e){2&t&&r.ekj("ng-untouched",e.is("untouched"))("ng-touched",e.is("touched"))("ng-pristine",e.is("pristine"))("ng-dirty",e.is("dirty"))("ng-valid",e.is("valid"))("ng-invalid",e.is("invalid"))("ng-pending",e.is("pending"))},features:[r.qOj]}),t})();function he(t,e){return[...e.path,t]}function de(t,e){ge(t,e,!0),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&ye(t,e)})}(t,e),function(t,e){const n=(t,n)=>{e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&ye(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function(t,e){if(e.valueAccessor.setDisabledState){const n=t=>{e.valueAccessor.setDisabledState(t)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function pe(t,e,n=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),me(t,e,!0),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function fe(t,e){t.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function ge(t,e,n){const r=re(t);null!==e.validator?t.setValidators(ne(r,e.validator)):"function"==typeof r&&t.setValidators([r]);const i=ie(t);if(null!==e.asyncValidator?t.setAsyncValidators(ne(i,e.asyncValidator)):"function"==typeof i&&t.setAsyncValidators([i]),n){const n=()=>t.updateValueAndValidity();fe(e._rawValidators,n),fe(e._rawAsyncValidators,n)}}function me(t,e,n){let r=!1;if(null!==t){if(null!==e.validator){const n=re(t);if(Array.isArray(n)&&n.length>0){const i=n.filter(t=>t!==e.validator);i.length!==n.length&&(r=!0,t.setValidators(i))}}if(null!==e.asyncValidator){const n=ie(t);if(Array.isArray(n)&&n.length>0){const i=n.filter(t=>t!==e.asyncValidator);i.length!==n.length&&(r=!0,t.setAsyncValidators(i))}}}if(n){const t=()=>{};fe(e._rawValidators,t),fe(e._rawAsyncValidators,t)}return r}function ye(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function ve(t,e){ge(t,e,!1)}function _e(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}function be(t,e){t._syncPendingControls(),e.forEach(t=>{const e=t.control;"submit"===e.updateOn&&e._pendingChange&&(t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1)})}function we(t,e){if(!e)return null;let n,r,i;return Array.isArray(e),e.forEach(t=>{t.constructor===Ht?n=t:Object.getPrototypeOf(t.constructor)===Bt?r=t:i=t}),i||r||n||null}function Ce(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const Te="VALID",Se="INVALID",Ee="PENDING",xe="DISABLED";function Ie(t){return(Pe(t)?t.validators:t)||null}function ke(t){return Array.isArray(t)?te(t):t||null}function Ae(t,e){return(Pe(e)?e.asyncValidators:t)||null}function Oe(t){return Array.isArray(t)?ee(t):t||null}function Pe(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class Re{constructor(t,e){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=ke(this._rawValidators),this._composedAsyncValidatorFn=Oe(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===Te}get invalid(){return this.status===Se}get pending(){return this.status==Ee}get disabled(){return this.status===xe}get enabled(){return this.status!==xe}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=ke(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=Oe(t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=Ee,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=xe,this.errors=null,this._forEachChild(e=>{e.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Te,this._forEachChild(e=>{e.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==Te&&this.status!==Ee||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?xe:Te}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=Ee,this._hasOwnPendingAsyncValidator=!0;const e=Qt(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(e=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(e,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(t,e,n){if(null==e)return null;if(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length)return null;let r=t;return e.forEach(t=>{r=r instanceof De?r.controls.hasOwnProperty(t)?r.controls[t]:null:r instanceof Le&&r.at(t)||null}),r}(this,t)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new r.vpe,this.statusChanges=new r.vpe}_calculateStatus(){return this._allControlsDisabled()?xe:this.errors?Se:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ee)?Ee:this._anyControlsHaveStatus(Se)?Se:Te}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Pe(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Ne extends Re{constructor(t=null,e,n){super(Ie(e),Ae(n,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(t=>t(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){Ce(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){Ce(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class De extends Re{constructor(t,e,n){super(Ie(e),Ae(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,n={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e instanceof Ne?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(t,e)=>!!e._syncPendingControls()||t);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const n=this.controls[e];n&&t(n,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const n=this.controls[e];if(this.contains(e)&&t(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((t,r)=>{n=e(n,t,r)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class Le extends Re{constructor(t,e,n){super(Ie(e),Ae(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}at(t){return this.controls[t]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,n={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:n.emitEvent})}removeAt(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((t,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((t,n)=>{this.at(n)&&this.at(n).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof Ne?t.value:t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_syncPendingControls(){let t=this.controls.reduce((t,e)=>!!e._syncPendingControls()||t,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error(`Cannot find form control at index ${t}`)}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const Fe={provide:se,useExisting:(0,r.Gpc)(()=>Me)},Ue=(()=>Promise.resolve(null))();let Me=(()=>{class t extends se{constructor(t,e){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new r.vpe,this.form=new De({},te(t),ee(e))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Ue.then(()=>{const e=this._findContainer(t.path);t.control=e.registerControl(t.name,t.control),de(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Ue.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name),Ce(this._directives,t)})}addFormGroup(t){Ue.then(()=>{const e=this._findContainer(t.path),n=new De({});ve(n,t),e.registerControl(t.name,n),n.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Ue.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,e){Ue.then(()=>{this.form.get(t.path).setValue(e)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,be(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(Wt,10),r.Y36(Kt,10))},t.\u0275dir=r.lG2({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,e){1&t&&r.NdJ("submit",function(t){return e.onSubmit(t)})("reset",function(){return e.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[r._Bn([Fe]),r.qOj]}),t})();const qe={provide:ae,useExisting:(0,r.Gpc)(()=>Ve)},je=(()=>Promise.resolve(null))();let Ve=(()=>{class t extends ae{constructor(t,e,n,i){super(),this.control=new Ne,this._registered=!1,this.update=new r.vpe,this._parent=t,this._setValidators(e),this._setAsyncValidators(n),this.valueAccessor=we(0,i)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),_e(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?he(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){de(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){je.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const e=t.isDisabled.currentValue,n=""===e||e&&"false"!==e;je.then(()=>{n&&!this.control.disabled?this.control.disable():!n&&this.control.disabled&&this.control.enable()})}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(se,9),r.Y36(Wt,10),r.Y36(Kt,10),r.Y36(Zt,10))},t.\u0275dir=r.lG2({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[r._Bn([qe]),r.qOj,r.TTD]}),t})(),Be=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.lG2({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t})(),Ze=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({}),t})();const Ge=new r.OlP("NgModelWithFormControlWarning"),ze={provide:se,useExisting:(0,r.Gpc)(()=>He)};let He=(()=>{class t extends se{constructor(t,e){super(),this.validators=t,this.asyncValidators=e,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new r.vpe,this._setValidators(t),this._setAsyncValidators(e)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(me(this.form,this,!1),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const e=this.form.get(t.path);return de(e,t),e.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),e}getControl(t){return this.form.get(t.path)}removeControl(t){pe(t.control||null,t,!1),Ce(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,e){this.form.get(t.path).setValue(e)}onSubmit(t){return this.submitted=!0,be(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const e=t.control,n=this.form.get(t.path);e!==n&&(pe(e||null,t),n instanceof Ne&&(de(n,t),t.control=n))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const e=this.form.get(t.path);ve(e,t),e.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const e=this.form.get(t.path);e&&function(t,e){return me(t,e,!1)}(e,t)&&e.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){ge(this.form,this,!1),this._oldForm&&me(this._oldForm,this,!1)}_checkFormPresent(){}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(Wt,10),r.Y36(Kt,10))},t.\u0275dir=r.lG2({type:t,selectors:[["","formGroup",""]],hostBindings:function(t,e){1&t&&r.NdJ("submit",function(t){return e.onSubmit(t)})("reset",function(){return e.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[r._Bn([ze]),r.qOj,r.TTD]}),t})();const We={provide:ae,useExisting:(0,r.Gpc)(()=>Ke)};let Ke=(()=>{class t extends ae{constructor(t,e,n,i,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.update=new r.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(e),this._setAsyncValidators(n),this.valueAccessor=we(0,i)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),_e(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return he(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(se,13),r.Y36(Wt,10),r.Y36(Kt,10),r.Y36(Zt,10),r.Y36(Ge,8))},t.\u0275dir=r.lG2({type:t,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[r._Bn([We]),r.qOj,r.TTD]}),t._ngModelWarningSentOnce=!1,t})();const Ye={provide:Wt,useExisting:(0,r.Gpc)(()=>Qe),multi:!0};let Qe=(()=>{class t{constructor(){this._required=!1}get required(){return this._required}set required(t){this._required=null!=t&&!1!==t&&"false"!=`${t}`,this._onChange&&this._onChange()}validate(t){return this.required?function(t){return null==(e=t.value)||0===e.length?{required:!0}:null;var e}(t):null}registerOnValidatorChange(t){this._onChange=t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.lG2({type:t,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,e){2&t&&r.uIk("required",e.required?"":null)},inputs:{required:"required"},features:[r._Bn([Ye])]}),t})(),$e=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[Ze]]}),t})(),Je=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[$e]}),t})(),Xe=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:Ge,useValue:e.warnOnNgModelWithFormControl}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[$e]}),t})(),tn=(()=>{class t{group(t,e=null){const n=this._reduceControls(t);let r,i=null,o=null;return null!=e&&(function(t){return void 0!==t.asyncValidators||void 0!==t.validators||void 0!==t.updateOn}(e)?(i=null!=e.validators?e.validators:null,o=null!=e.asyncValidators?e.asyncValidators:null,r=null!=e.updateOn?e.updateOn:void 0):(i=null!=e.validator?e.validator:null,o=null!=e.asyncValidator?e.asyncValidator:null)),new De(n,{asyncValidators:o,updateOn:r,validators:i})}control(t,e,n){return new Ne(t,e,n)}array(t,e,n){const r=t.map(t=>this._createControl(t));return new Le(r,e,n)}_reduceControls(t){const e={};return Object.keys(t).forEach(n=>{e[n]=this._createControl(t[n])}),e}_createControl(t){return t instanceof Ne||t instanceof De||t instanceof Le?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=(0,r.Yz7)({factory:function(){return new t},token:t,providedIn:Xe}),t})();var en=n(878),nn=n(3982);function rn(t,e){return(0,nn.zg)(t,e,1)}var on=n(6673);function sn(t,e){return function(n){return n.lift(new an(t,e))}}class an{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new un(t,this.predicate,this.thisArg))}}class un extends on.L{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}class cn{}class ln{}class hn{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(t=>{const e=t.indexOf(":");if(e>0){const n=t.slice(0,e),r=n.toLowerCase(),i=t.slice(e+1).trim();this.maybeSetNormalizedName(n,r),this.headers.has(r)?this.headers.get(r).push(i):this.headers.set(r,[i])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let n=t[e];const r=e.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(r,n),this.maybeSetNormalizedName(e,r))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof hn?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new hn;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof hn?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);const r=("a"===t.op?this.headers.get(e):void 0)||[];r.push(...n),this.headers.set(e,r);break;case"d":const i=t.value;if(i){let t=this.headers.get(e);if(!t)return;t=t.filter(t=>-1===i.indexOf(t)),0===t.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,t)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class dn{encodeKey(t){return pn(t)}encodeValue(t){return pn(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}function pn(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}function fn(t){return`${t}`}class gn{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new dn,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(t,e){const n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(t=>{const r=t.indexOf("="),[i,o]=-1==r?[e.decodeKey(t),""]:[e.decodeKey(t.slice(0,r)),e.decodeValue(t.slice(r+1))],s=n.get(i)||[];s.push(o),n.set(i,s)}),n}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const n=t.fromObject[e];this.map.set(e,Array.isArray(n)?n:[n])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(n=>{const r=t[n];Array.isArray(r)?r.forEach(t=>{e.push({param:n,value:t,op:"a"})}):e.push({param:n,value:r,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(t=>e+"="+this.encoder.encodeValue(t)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new gn({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(fn(t.value)),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let e=this.map.get(t.param)||[];const n=e.indexOf(fn(t.value));-1!==n&&e.splice(n,1),e.length>0?this.map.set(t.param,e):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class mn{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}keys(){return this.map.keys()}}function yn(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function vn(t){return"undefined"!=typeof Blob&&t instanceof Blob}function _n(t){return"undefined"!=typeof FormData&&t instanceof FormData}class bn{constructor(t,e,n,r){let i;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,i=r):i=n,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.context&&(this.context=i.context),i.params&&(this.params=i.params)),this.headers||(this.headers=new hn),this.context||(this.context=new mn),this.params){const t=this.params.toString();if(0===t.length)this.urlWithParams=e;else{const n=e.indexOf("?");this.urlWithParams=e+(-1===n?"?":n<e.length-1?"&":"")+t}}else this.params=new gn,this.urlWithParams=e}serializeBody(){return null===this.body?null:yn(this.body)||vn(this.body)||_n(this.body)||"string"==typeof this.body?this.body:this.body instanceof gn?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||_n(this.body)?null:vn(this.body)?this.body.type||null:yn(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof gn?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){var e;const n=t.method||this.method,r=t.url||this.url,i=t.responseType||this.responseType,o=void 0!==t.body?t.body:this.body,s=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,a=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let u=t.headers||this.headers,c=t.params||this.params;const l=null!==(e=t.context)&&void 0!==e?e:this.context;return void 0!==t.setHeaders&&(u=Object.keys(t.setHeaders).reduce((e,n)=>e.set(n,t.setHeaders[n]),u)),t.setParams&&(c=Object.keys(t.setParams).reduce((e,n)=>e.set(n,t.setParams[n]),c)),new bn(n,r,o,{params:c,headers:u,context:l,reportProgress:a,responseType:i,withCredentials:s})}}var wn=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}({});class Cn{constructor(t,e=200,n="OK"){this.headers=t.headers||new hn,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class Tn extends Cn{constructor(t={}){super(t),this.type=wn.ResponseHeader}clone(t={}){return new Tn({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class Sn extends Cn{constructor(t={}){super(t),this.type=wn.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new Sn({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class En extends Cn{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function xn(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let In=(()=>{class t{constructor(t){this.handler=t}request(t,e,n={}){let r;if(t instanceof bn)r=t;else{let i,o;i=n.headers instanceof hn?n.headers:new hn(n.headers),n.params&&(o=n.params instanceof gn?n.params:new gn({fromObject:n.params})),r=new bn(t,e,void 0!==n.body?n.body:null,{headers:i,context:n.context,params:o,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}const i=(0,en.of)(r).pipe(rn(t=>this.handler.handle(t)));if(t instanceof bn||"events"===n.observe)return i;const o=i.pipe(sn(t=>t instanceof Sn));switch(n.observe||"body"){case"body":switch(r.responseType){case"arraybuffer":return o.pipe((0,Mt.U)(t=>{if(null!==t.body&&!(t.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return t.body}));case"blob":return o.pipe((0,Mt.U)(t=>{if(null!==t.body&&!(t.body instanceof Blob))throw new Error("Response is not a Blob.");return t.body}));case"text":return o.pipe((0,Mt.U)(t=>{if(null!==t.body&&"string"!=typeof t.body)throw new Error("Response is not a string.");return t.body}));case"json":default:return o.pipe((0,Mt.U)(t=>t.body))}case"response":return o;default:throw new Error(`Unreachable: unhandled observe type ${n.observe}}`)}}delete(t,e={}){return this.request("DELETE",t,e)}get(t,e={}){return this.request("GET",t,e)}head(t,e={}){return this.request("HEAD",t,e)}jsonp(t,e){return this.request("JSONP",t,{params:(new gn).append(e,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,e={}){return this.request("OPTIONS",t,e)}patch(t,e,n={}){return this.request("PATCH",t,xn(n,e))}post(t,e,n={}){return this.request("POST",t,xn(n,e))}put(t,e,n={}){return this.request("PUT",t,xn(n,e))}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(cn))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();class kn{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const An=new r.OlP("HTTP_INTERCEPTORS");let On=(()=>{class t{intercept(t,e){return e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const Pn=/^\)\]\}',?\n/;let Rn=(()=>{class t{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Ft.y(e=>{const n=this.xhrFactory.build();if(n.open(t.method,t.urlWithParams),t.withCredentials&&(n.withCredentials=!0),t.headers.forEach((t,e)=>n.setRequestHeader(t,e.join(","))),t.headers.has("Accept")||n.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const e=t.detectContentTypeHeader();null!==e&&n.setRequestHeader("Content-Type",e)}if(t.responseType){const e=t.responseType.toLowerCase();n.responseType="json"!==e?e:"text"}const r=t.serializeBody();let i=null;const o=()=>{if(null!==i)return i;const e=1223===n.status?204:n.status,r=n.statusText||"OK",o=new hn(n.getAllResponseHeaders()),s=function(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(n)||t.url;return i=new Tn({headers:o,status:e,statusText:r,url:s}),i},s=()=>{let{headers:r,status:i,statusText:s,url:a}=o(),u=null;204!==i&&(u=void 0===n.response?n.responseText:n.response),0===i&&(i=u?200:0);let c=i>=200&&i<300;if("json"===t.responseType&&"string"==typeof u){const t=u;u=u.replace(Pn,"");try{u=""!==u?JSON.parse(u):null}catch(l){u=t,c&&(c=!1,u={error:l,text:u})}}c?(e.next(new Sn({body:u,headers:r,status:i,statusText:s,url:a||void 0})),e.complete()):e.error(new En({error:u,headers:r,status:i,statusText:s,url:a||void 0}))},a=t=>{const{url:r}=o(),i=new En({error:t,status:n.status||0,statusText:n.statusText||"Unknown Error",url:r||void 0});e.error(i)};let u=!1;const c=r=>{u||(e.next(o()),u=!0);let i={type:wn.DownloadProgress,loaded:r.loaded};r.lengthComputable&&(i.total=r.total),"text"===t.responseType&&n.responseText&&(i.partialText=n.responseText),e.next(i)},l=t=>{let n={type:wn.UploadProgress,loaded:t.loaded};t.lengthComputable&&(n.total=t.total),e.next(n)};return n.addEventListener("load",s),n.addEventListener("error",a),n.addEventListener("timeout",a),n.addEventListener("abort",a),t.reportProgress&&(n.addEventListener("progress",c),null!==r&&n.upload&&n.upload.addEventListener("progress",l)),n.send(r),e.next({type:wn.Sent}),()=>{n.removeEventListener("error",a),n.removeEventListener("abort",a),n.removeEventListener("load",s),n.removeEventListener("timeout",a),t.reportProgress&&(n.removeEventListener("progress",c),null!==r&&n.upload&&n.upload.removeEventListener("progress",l)),n.readyState!==n.DONE&&n.abort()}})}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(nt))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const Nn=new r.OlP("XSRF_COOKIE_NAME"),Dn=new r.OlP("XSRF_HEADER_NAME");class Ln{}let Fn=(()=>{class t{constructor(t,e,n){this.doc=t,this.platform=e,this.cookieName=n,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=L(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(s),r.LFG(r.Lbi),r.LFG(Nn))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),Un=(()=>{class t{constructor(t,e){this.tokenService=t,this.headerName=e}intercept(t,e){const n=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e.handle(t);const r=this.tokenService.getToken();return null===r||t.headers.has(this.headerName)||(t=t.clone({headers:t.headers.set(this.headerName,r)})),e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Ln),r.LFG(Dn))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),Mn=(()=>{class t{constructor(t,e){this.backend=t,this.injector=e,this.chain=null}handle(t){if(null===this.chain){const t=this.injector.get(An,[]);this.chain=t.reduceRight((t,e)=>new kn(t,e),this.backend)}return this.chain.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(ln),r.LFG(r.zs3))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),qn=(()=>{class t{static disable(){return{ngModule:t,providers:[{provide:Un,useClass:On}]}}static withOptions(e={}){return{ngModule:t,providers:[e.cookieName?{provide:Nn,useValue:e.cookieName}:[],e.headerName?{provide:Dn,useValue:e.headerName}:[]]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[Un,{provide:An,useExisting:Un,multi:!0},{provide:Ln,useClass:Fn},{provide:Nn,useValue:"XSRF-TOKEN"},{provide:Dn,useValue:"X-XSRF-TOKEN"}]}),t})(),jn=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[In,{provide:cn,useClass:Mn},Rn,{provide:ln,useExisting:Rn}],imports:[[qn.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),t})();var Vn=n(5959),Bn=n(3895);class Zn extends Vn.xQ{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Bn.N;return this._value}next(t){super.next(this._value=t)}}var Gn=n(6163);class zn extends on.L{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class Hn extends on.L{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var Wn=n(6015);function Kn(t,e,n,r,i=new Hn(t,n,r)){if(!i.closed)return e instanceof Ft.y?e.subscribe(i):(0,Wn.s)(e)(i)}var Yn=n(9342);const Qn={};class $n{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new Jn(t,this.resultSelector))}}class Jn extends zn{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(Qn),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++)this.add(Kn(this,t[n],void 0,n))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n){const r=this.values,i=this.toRespond?r[n]===Qn?--this.toRespond:this.toRespond:0;r[n]=e,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}const Xn=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})();var tr=n(7471);function er(...t){return(0,tr.J)(1)((0,en.of)(...t))}var nr=n(653);function rr(t){return new Ft.y(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?(0,Lt.D)(n):(0,nr.c)()).subscribe(e)})}var ir=n(2875),or=n(6882);function sr(t,e){return"function"==typeof e?n=>n.pipe(sr((n,r)=>(0,Lt.D)(t(n,r)).pipe((0,Mt.U)((t,i)=>e(n,t,r,i))))):e=>e.lift(new ar(t))}class ar{constructor(t){this.project=t}call(t,e){return e.subscribe(new ur(t,this.project))}}class ur extends or.Ds{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const n=new or.IY(this),r=this.destination;r.add(n),this.innerSubscription=(0,or.ft)(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}const cr=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();function lr(t){return e=>0===t?(0,nr.c)():e.lift(new hr(t))}class hr{constructor(t){if(this.total=t,this.total<0)throw new cr}call(t,e){return e.subscribe(new dr(t,this.total))}}class dr extends on.L{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function pr(...t){const e=t[t.length-1];return(0,Gn.K)(e)?(t.pop(),n=>er(t,n,e)):e=>er(t,e)}function fr(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new gr(t,e,n))}}class gr{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new mr(t,this.accumulator,this.seed,this.hasSeed))}}class mr extends on.L{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}function yr(t){return function(e){const n=new vr(t),r=e.lift(n);return n.caught=r}}class vr{constructor(t){this.selector=t}call(t,e){return e.subscribe(new _r(t,this.selector,this.caught))}}class _r extends or.Ds{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const r=new or.IY(this);this.add(r);const i=(0,or.ft)(n,r);i!==r&&this.add(i)}}}function br(t){return function(e){return 0===t?(0,nr.c)():e.lift(new wr(t))}}class wr{constructor(t){if(this.total=t,this.total<0)throw new cr}call(t,e){return e.subscribe(new Cr(t,this.total))}}class Cr extends on.L{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=e++%n;t.next(r[i])}}t.complete()}}function Tr(t=xr){return e=>e.lift(new Sr(t))}class Sr{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new Er(t,this.errorFactory))}}class Er extends on.L{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(QT){t=QT}this.destination.error(t)}}}function xr(){return new Xn}function Ir(t=null){return e=>e.lift(new kr(t))}class kr{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new Ar(t,this.defaultValue))}}class Ar extends on.L{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var Or=n(3392);function Pr(t,e){const n=arguments.length>=2;return r=>r.pipe(t?sn((e,n)=>t(e,n,r)):Or.y,lr(1),n?Ir(e):Tr(()=>new Xn))}var Rr=n(6599),Nr=n(1564),Dr=n(7570);function Lr(t){return e=>e.lift(new Fr(t))}class Fr{constructor(t){this.callback=t}call(t,e){return e.subscribe(new Ur(t,this.callback))}}class Ur extends on.L{constructor(t,e){super(t),this.add(new Dr.w(e))}}class Mr{constructor(t,e){this.id=t,this.url=e}}class qr extends Mr{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class jr extends Mr{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Vr extends Mr{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Br extends Mr{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Zr extends Mr{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Gr extends Mr{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class zr extends Mr{constructor(t,e,n,r,i){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Hr extends Mr{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Wr extends Mr{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Kr{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Yr{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Qr{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class $r{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Jr{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Xr{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ti{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const ei="primary";class ni{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function ri(t){return new ni(t)}function ii(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function oi(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const e=r[o],n=t[o];if(e.startsWith(":"))i[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function si(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!ai(t[i],e[i]))return!1;return!0}function ai(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((t,e)=>r[e]===t)}return t===e}function ui(t){return Array.prototype.concat.apply([],t)}function ci(t){return t.length>0?t[t.length-1]:null}function li(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function hi(t){return(0,r.CqO)(t)?t:(0,r.QGY)(t)?(0,Lt.D)(Promise.resolve(t)):(0,en.of)(t)}const di={exact:function t(e,n,r){if(!wi(e.segments,n.segments))return!1;if(!yi(e.segments,n.segments,r))return!1;if(e.numberOfChildren!==n.numberOfChildren)return!1;for(const i in n.children){if(!e.children[i])return!1;if(!t(e.children[i],n.children[i],r))return!1}return!0},subset:gi},pi={exact:function(t,e){return si(t,e)},subset:function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>ai(t[n],e[n]))},ignored:()=>!0};function fi(t,e,n){return di[n.paths](t.root,e.root,n.matrixParams)&&pi[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function gi(t,e,n){return mi(t,e,e.segments,n)}function mi(t,e,n,r){if(t.segments.length>n.length){const i=t.segments.slice(0,n.length);return!!wi(i,n)&&!e.hasChildren()&&!!yi(i,n,r)}if(t.segments.length===n.length){if(!wi(t.segments,n))return!1;if(!yi(t.segments,n,r))return!1;for(const n in e.children){if(!t.children[n])return!1;if(!gi(t.children[n],e.children[n],r))return!1}return!0}{const i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!!wi(t.segments,i)&&!!yi(t.segments,i,r)&&!!t.children.primary&&mi(t.children.primary,e,o,r)}}function yi(t,e,n){return e.every((e,r)=>pi[n](t[r].parameters,e.parameters))}class vi{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ri(this.queryParams)),this._queryParamMap}toString(){return Si.serialize(this)}}class _i{constructor(t,e){this.segments=t,this.children=e,this.parent=null,li(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ei(this)}}class bi{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=ri(this.parameters)),this._parameterMap}toString(){return Ri(this)}}function wi(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}class Ci{}class Ti{parse(t){const e=new Ui(t);return new vi(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){var e;return`/${xi(t.root,!0)}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${ki(e)}=${ki(t)}`).join("&"):`${ki(e)}=${ki(n)}`});return e.length?`?${e.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${e=t.fragment,encodeURI(e)}`:""}`}}const Si=new Ti;function Ei(t){return t.segments.map(t=>Ri(t)).join("/")}function xi(t,e){if(!t.hasChildren())return Ei(t);if(e){const e=t.children.primary?xi(t.children.primary,!1):"",n=[];return li(t.children,(t,e)=>{e!==ei&&n.push(`${e}:${xi(t,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=function(t,e){let n=[];return li(t.children,(t,r)=>{r===ei&&(n=n.concat(e(t,r)))}),li(t.children,(t,r)=>{r!==ei&&(n=n.concat(e(t,r)))}),n}(t,(e,n)=>n===ei?[xi(t.children.primary,!1)]:[`${n}:${xi(e,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children.primary?`${Ei(t)}/${e[0]}`:`${Ei(t)}/(${e.join("//")})`}}function Ii(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ki(t){return Ii(t).replace(/%3B/gi,";")}function Ai(t){return Ii(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Oi(t){return decodeURIComponent(t)}function Pi(t){return Oi(t.replace(/\+/g,"%20"))}function Ri(t){return`${Ai(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${Ai(t)}=${Ai(e[t])}`).join("")}`;var e}const Ni=/^[^\/()?;=#]+/;function Di(t){const e=t.match(Ni);return e?e[0]:""}const Li=/^[^=?&#]+/,Fi=/^[^?&#]+/;class Ui{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new _i([],{}):new _i([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new _i(t,e)),n}parseSegment(){const t=Di(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new bi(Oi(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=Di(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=Di(this.remaining);t&&(n=t,this.capture(n))}t[Oi(e)]=Oi(n)}parseQueryParam(t){const e=function(t){const e=t.match(Li);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(Fi);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const r=Pi(e),i=Pi(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(e=[e],t[r]=e),e.push(i)}else t[r]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=Di(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=ei);const o=this.parseChildren();e[i]=1===Object.keys(o).length?o.primary:new _i([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class Mi{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=qi(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=qi(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=ji(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return ji(t,this._root).map(t=>t.value)}}function qi(t,e){if(t===e.value)return e;for(const n of e.children){const e=qi(t,n);if(e)return e}return null}function ji(t,e){if(t===e.value)return[e];for(const n of e.children){const r=ji(t,n);if(r.length)return r.unshift(e),r}return[]}class Vi{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function Bi(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class Zi extends Mi{constructor(t,e){super(t),this.snapshot=e,Yi(this,t)}toString(){return this.snapshot.toString()}}function Gi(t,e){const n=function(t,e){const n=new Wi([],{},{},"",{},ei,e,null,t.root,-1,{});return new Ki("",new Vi(n,[]))}(t,e),r=new Zn([new bi("",{})]),i=new Zn({}),o=new Zn({}),s=new Zn({}),a=new Zn(""),u=new zi(r,i,s,a,o,ei,e,n.root);return u.snapshot=n.root,new Zi(new Vi(u,[]),n)}class zi{constructor(t,e,n,r,i,o,s,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Mt.U)(t=>ri(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Mt.U)(t=>ri(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Hi(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class Wi{constructor(t,e,n,r,i,o,s,a,u,c,l){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this.routeConfig=a,this._urlSegment=u,this._lastPathIndex=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ri(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ri(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Ki extends Mi{constructor(t,e){super(e),this.url=t,Yi(this,e)}toString(){return Qi(this._root)}}function Yi(t,e){e.value._routerState=t,e.children.forEach(e=>Yi(t,e))}function Qi(t){const e=t.children.length>0?` { ${t.children.map(Qi).join(", ")} } `:"";return`${t.value}${e}`}function $i(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,si(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),si(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!si(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),si(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function Ji(t,e){return si(t.params,e.params)&&function(t,e){return wi(t,e)&&t.every((t,n)=>si(t.parameters,e[n].parameters))}(t.url,e.url)&&!(!t.parent!=!e.parent)&&(!t.parent||Ji(t.parent,e.parent))}function Xi(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function(t,e,n){return e.children.map(e=>{for(const r of n.children)if(t.shouldReuseRoute(e.value,r.value.snapshot))return Xi(t,e,r);return Xi(t,e)})}(t,e,n);return new Vi(r,i)}{if(t.shouldAttach(e.value)){const n=t.retrieve(e.value);if(null!==n){const t=n.route;return to(e,t),t}}const n=new zi(new Zn((r=e.value).url),new Zn(r.params),new Zn(r.queryParams),new Zn(r.fragment),new Zn(r.data),r.outlet,r.component,r),i=e.children.map(e=>Xi(t,e));return new Vi(n,i)}var r}function to(t,e){if(t.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=t.value;for(let n=0;n<t.children.length;++n)to(t.children[n],e.children[n])}function eo(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function no(t){return"object"==typeof t&&null!=t&&t.outlets}function ro(t,e,n,r,i){let o={};return r&&li(r,(t,e)=>{o[e]=Array.isArray(t)?t.map(t=>`${t}`):`${t}`}),new vi(n.root===t?e:io(n.root,t,e),o,i)}function io(t,e,n){const r={};return li(t.children,(t,i)=>{r[i]=t===e?n:io(t,e,n)}),new _i(t.segments,r)}class oo{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&eo(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(no);if(r&&r!==ci(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class so{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function ao(t,e,n){if(t||(t=new _i([],{})),0===t.segments.length&&t.hasChildren())return uo(t,e,n);const r=function(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const e=t.segments[i],s=n[r];if(no(s))break;const a=`${s}`,u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===a)break;if(a&&u&&"object"==typeof u&&void 0===u.outlets){if(!po(a,u,e))return o;r+=2}else{if(!po(a,{},e))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new _i(t.segments.slice(0,r.pathIndex),{});return e.children.primary=new _i(t.segments.slice(r.pathIndex),t.children),uo(e,0,i)}return r.match&&0===i.length?new _i(t.segments,{}):r.match&&!t.hasChildren()?co(t,e,n):r.match?uo(t,0,i):co(t,e,n)}function uo(t,e,n){if(0===n.length)return new _i(t.segments,{});{const r=function(t){return no(t[0])?t[0].outlets:{[ei]:t}}(n),i={};return li(r,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(i[r]=ao(t.children[r],e,n))}),li(t.children,(t,e)=>{void 0===r[e]&&(i[e]=t)}),new _i(t.segments,i)}}function co(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const o=n[i];if(no(o)){const t=lo(o.outlets);return new _i(r,t)}if(0===i&&eo(n[0])){r.push(new bi(t.segments[e].path,ho(n[0]))),i++;continue}const s=no(o)?o.outlets.primary:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&eo(a)?(r.push(new bi(s,ho(a))),i+=2):(r.push(new bi(s,{})),i++)}return new _i(r,{})}function lo(t){const e={};return li(t,(t,n)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[n]=co(new _i([],{}),0,t))}),e}function ho(t){const e={};return li(t,(t,n)=>e[n]=`${t}`),e}function po(t,e,n){return t==n.path&&si(e,n.parameters)}class fo{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),$i(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=Bi(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),li(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,i=Bi(t);for(const o of Object.keys(i))this.deactivateRouteAndItsChildren(i[o],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}activateChildRoutes(t,e,n){const r=Bi(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new Xr(t.value.snapshot))}),t.children.length&&this.forwardEvent(new $r(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if($i(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),go(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=i,e.outlet&&e.outlet.activateWith(r,i),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function go(t){$i(t.value),t.children.forEach(go)}class mo{constructor(t,e){this.routes=t,this.module=e}}function yo(t){return"function"==typeof t}function vo(t){return t instanceof vi}const _o=Symbol("INITIAL_VALUE");function bo(){return sr(t=>function(...t){let e,n;return(0,Gn.K)(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&(0,Ut.k)(t[0])&&(t=t[0]),(0,Yn.n)(t,n).lift(new $n(e))}(t.map(t=>t.pipe(lr(1),pr(_o)))).pipe(fr((t,e)=>{let n=!1;return e.reduce((t,r,i)=>{if(t!==_o)return t;if(r===_o&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||vo(r))return r}return t},t)},_o),sn(t=>t!==_o),(0,Mt.U)(t=>vo(t)?t:!0===t),lr(1)))}let wo=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&r._UZ(0,"router-outlet")},directives:function(){return[ys]},encapsulation:2}),t})();function Co(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];To(r,So(e,r))}}function To(t,e){t.children&&Co(t.children,e)}function So(t,e){return e?t||e.path?t&&!e.path?`${t}/`:!t&&e.path?e.path:`${t}/${e.path}`:"":t}function Eo(t){const e=t.children&&t.children.map(Eo),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==ei&&(n.component=wo),n}function xo(t){return t.outlet||ei}function Io(t,e){const n=t.filter(t=>xo(t)===e);return n.push(...t.filter(t=>xo(t)!==e)),n}const ko={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Ao(t,e,n){var r;if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?Object.assign({},ko):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const i=(e.matcher||oi)(n,t,e);if(!i)return Object.assign({},ko);const o={};li(i.posParams,(t,e)=>{o[e]=t.path});const s=i.consumed.length>0?Object.assign(Object.assign({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:s,positionalParamSegments:null!==(r=i.posParams)&&void 0!==r?r:{}}}function Oo(t,e,n,r,i="corrected"){if(n.length>0&&function(t,e,n){return n.some(n=>Po(t,e,n)&&xo(n)!==ei)}(t,n,r)){const i=new _i(e,function(t,e,n,r){const i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const o of n)if(""===o.path&&xo(o)!==ei){const n=new _i([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,i[xo(o)]=n}return i}(t,e,r,new _i(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>Po(t,e,n))}(t,n,r)){const o=new _i(t.segments,function(t,e,n,r,i,o){const s={};for(const a of r)if(Po(t,n,a)&&!i[xo(a)]){const n=new _i([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===o?t.segments.length:e.length,s[xo(a)]=n}return Object.assign(Object.assign({},i),s)}(t,e,n,r,t.children,i));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}const o=new _i(t.segments,t.children);return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}function Po(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}function Ro(t,e,n,r){return!!(xo(t)===r||r!==ei&&Po(e,n,t))&&("**"===t.path||Ao(e,t,n).matched)}function No(t,e,n){return 0===e.length&&!t.children[n]}class Do{constructor(t){this.segmentGroup=t||null}}class Lo{constructor(t){this.urlTree=t}}function Fo(t){return new Ft.y(e=>e.error(new Do(t)))}function Uo(t){return new Ft.y(e=>e.error(new Lo(t)))}function Mo(t){return new Ft.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class qo{constructor(t,e,n,i,o){this.configLoader=e,this.urlSerializer=n,this.urlTree=i,this.config=o,this.allowRedirects=!0,this.ngModule=t.get(r.h0i)}apply(){const t=Oo(this.urlTree.root,[],[],this.config).segmentGroup,e=new _i(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,ei).pipe((0,Mt.U)(t=>this.createUrlTree(jo(t),this.urlTree.queryParams,this.urlTree.fragment))).pipe(yr(t=>{if(t instanceof Lo)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof Do)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,ei).pipe((0,Mt.U)(e=>this.createUrlTree(jo(e),t.queryParams,t.fragment))).pipe(yr(t=>{if(t instanceof Do)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new _i([],{[ei]:t}):t;return new vi(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe((0,Mt.U)(t=>new _i([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){const r=[];for(const i of Object.keys(n.children))"primary"===i?r.unshift(i):r.push(i);return(0,Lt.D)(r).pipe(rn(r=>{const i=n.children[r],o=Io(e,r);return this.expandSegmentGroup(t,o,i,r).pipe((0,Mt.U)(t=>({segment:t,outlet:r})))}),fr((t,e)=>(t[e.outlet]=e.segment,t),{}),function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?sn((e,n)=>t(e,n,r)):Or.y,br(1),n?Ir(e):Tr(()=>new Xn))}())}expandSegment(t,e,n,r,i,o){return(0,Lt.D)(n).pipe(rn(s=>this.expandSegmentAgainstRoute(t,e,n,s,r,i,o).pipe(yr(t=>{if(t instanceof Do)return(0,en.of)(null);throw t}))),Pr(t=>!!t),yr((t,n)=>{if(t instanceof Xn||"EmptyError"===t.name){if(No(e,r,i))return(0,en.of)(new _i([],{}));throw new Do(e)}throw t}))}expandSegmentAgainstRoute(t,e,n,r,i,o,s){return Ro(r,e,i,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i,o):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o):Fo(e):Fo(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?Uo(i):this.lineralizeSegments(n,i).pipe((0,nn.zg)(n=>{const i=new _i(n,{});return this.expandSegment(t,i,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){const{matched:s,consumedSegments:a,lastChild:u,positionalParamSegments:c}=Ao(e,r,i);if(!s)return Fo(e);const l=this.applyRedirectCommands(a,r.redirectTo,c);return r.redirectTo.startsWith("/")?Uo(l):this.lineralizeSegments(r,l).pipe((0,nn.zg)(r=>this.expandSegment(t,e,n,r.concat(i.slice(u)),o,!1)))}matchSegmentAgainstRoute(t,e,n,r,i){if("**"===n.path)return n.loadChildren?(n._loadedConfig?(0,en.of)(n._loadedConfig):this.configLoader.load(t.injector,n)).pipe((0,Mt.U)(t=>(n._loadedConfig=t,new _i(r,{})))):(0,en.of)(new _i(r,{}));const{matched:o,consumedSegments:s,lastChild:a}=Ao(e,n,r);if(!o)return Fo(e);const u=r.slice(a);return this.getChildConfig(t,n,r).pipe((0,nn.zg)(t=>{const r=t.module,o=t.routes,{segmentGroup:a,slicedSegments:c}=Oo(e,s,u,o),l=new _i(a.segments,a.children);if(0===c.length&&l.hasChildren())return this.expandChildren(r,o,l).pipe((0,Mt.U)(t=>new _i(s,t)));if(0===o.length&&0===c.length)return(0,en.of)(new _i(s,{}));const h=xo(n)===i;return this.expandSegment(r,l,o,c,h?ei:i,!0).pipe((0,Mt.U)(t=>new _i(s.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?(0,en.of)(new mo(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?(0,en.of)(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe((0,nn.zg)(n=>n?this.configLoader.load(t.injector,e).pipe((0,Mt.U)(t=>(e._loadedConfig=t,t))):function(t){return new Ft.y(e=>e.error(ii(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):(0,en.of)(new mo([],t))}runCanLoadGuards(t,e,n){const r=e.canLoad;if(!r||0===r.length)return(0,en.of)(!0);const i=r.map(r=>{const i=t.get(r);let o;if(function(t){return t&&yo(t.canLoad)}(i))o=i.canLoad(e,n);else{if(!yo(i))throw new Error("Invalid CanLoad guard");o=i(e,n)}return hi(o)});return(0,en.of)(i).pipe(bo(),(0,Rr.b)(t=>{if(!vo(t))return;const e=ii(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),(0,Mt.U)(t=>!0===t))}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return(0,en.of)(n);if(r.numberOfChildren>1||!r.children.primary)return Mo(t.redirectTo);r=r.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const i=this.createSegmentGroup(t,e.root,n,r);return new vi(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return li(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const i=this.createSegments(t,e.segments,n,r);let o={};return li(e.children,(e,i)=>{o[i]=this.createSegmentGroup(t,e,n,r)}),new _i(i,o)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function jo(t){const e={};for(const n of Object.keys(t.children)){const r=jo(t.children[n]);(r.segments.length>0||r.hasChildren())&&(e[n]=r)}return function(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new _i(t.segments.concat(e.segments),e.children)}return t}(new _i(t.segments,e))}class Vo{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class Bo{constructor(t,e){this.component=t,this.route=e}}function Zo(t,e,n){const r=t._root;return zo(r,e?e._root:null,n,[r.value])}function Go(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function zo(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=Bi(e);return t.children.forEach(t=>{!function(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const u=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!wi(t.url,e.url);case"pathParamsOrQueryParamsChange":return!wi(t.url,e.url)||!si(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ji(t,e)||!si(t.queryParams,e.queryParams);case"paramsChange":default:return!Ji(t,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Vo(r)):(o.data=s.data,o._resolvedData=s._resolvedData),zo(t,e,o.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Bo(a.outlet.component,s))}else s&&Ho(e,a,i),i.canActivateChecks.push(new Vo(r)),zo(t,null,o.component?a?a.children:null:n,r,i)}(t,o[t.value.outlet],n,r.concat([t.value]),i),delete o[t.value.outlet]}),li(o,(t,e)=>Ho(t,n.getContext(e),i)),i}function Ho(t,e,n){const r=Bi(t),i=t.value;li(r,(t,r)=>{Ho(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new Bo(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class Wo{}function Ko(t){return new Ft.y(e=>e.error(t))}class Yo{constructor(t,e,n,r,i,o){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=o}recognize(){const t=Oo(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,ei);if(null===e)return null;const n=new Wi([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},ei,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Vi(n,e),i=new Ki(this.url,r);return this.inheritParamsAndData(i._root),i}inheritParamsAndData(t){const e=t.value,n=Hi(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=[];for(const i of Object.keys(e.children)){const r=e.children[i],o=Io(t,i),s=this.processSegmentGroup(o,r,i);if(null===s)return null;n.push(...s)}const r=$o(n);return r.sort((t,e)=>t.value.outlet===ei?-1:e.value.outlet===ei?1:t.value.outlet.localeCompare(e.value.outlet)),r}processSegment(t,e,n,r){for(const i of t){const t=this.processSegmentAgainstRoute(i,e,n,r);if(null!==t)return t}return No(e,n,r)?[]:null}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo||!Ro(t,e,n,r))return null;let i,o=[],s=[];if("**"===t.path){const r=n.length>0?ci(n).parameters:{};i=new Wi(n,r,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,ts(t),xo(t),t.component,t,Jo(e),Xo(e)+n.length,es(t))}else{const r=Ao(e,t,n);if(!r.matched)return null;o=r.consumedSegments,s=n.slice(r.lastChild),i=new Wi(o,r.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,ts(t),xo(t),t.component,t,Jo(e),Xo(e)+o.length,es(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:u,slicedSegments:c}=Oo(e,o,s,a.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution);if(0===c.length&&u.hasChildren()){const t=this.processChildren(a,u);return null===t?null:[new Vi(i,t)]}if(0===a.length&&0===c.length)return[new Vi(i,[])];const l=xo(t)===r,h=this.processSegment(a,u,c,l?ei:r);return null===h?null:[new Vi(i,h)]}}function Qo(t){const e=t.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function $o(t){const e=[],n=new Set;for(const r of t){if(!Qo(r)){e.push(r);continue}const t=e.find(t=>r.value.routeConfig===t.value.routeConfig);void 0!==t?(t.children.push(...r.children),n.add(t)):e.push(r)}for(const r of n){const t=$o(r.children);e.push(new Vi(r.value,t))}return e.filter(t=>!n.has(t))}function Jo(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Xo(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function ts(t){return t.data||{}}function es(t){return t.resolve||{}}function ns(t){return sr(e=>{const n=t(e);return n?(0,Lt.D)(n).pipe((0,Mt.U)(()=>e)):(0,en.of)(e)})}class rs extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const is=new r.OlP("ROUTES");class os{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const n=this.loadModuleFactory(e.loadChildren).pipe((0,Mt.U)(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const i=n.create(t);return new mo(ui(i.injector.get(is,void 0,r.XFs.Self|r.XFs.Optional)).map(Eo),i)}),yr(t=>{throw e._loader$=void 0,t}));return e._loader$=new ir.c(n,()=>new Vn.xQ).pipe((0,Nr.x)()),e._loader$}loadModuleFactory(t){return"string"==typeof t?(0,Lt.D)(this.loader.load(t)):hi(t()).pipe((0,nn.zg)(t=>t instanceof r.YKP?(0,en.of)(t):(0,Lt.D)(this.compiler.compileModuleAsync(t))))}}class ss{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new as,this.attachRef=null}}class as{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new ss,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class us{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function cs(t){throw t}function ls(t,e,n){return e.parse("/")}function hs(t,e){return(0,en.of)(null)}const ds={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},ps={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let fs=(()=>{class t{constructor(t,e,n,i,o,s,a,u){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=i,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new Vn.xQ,this.errorHandler=cs,this.malformedUriErrorHandler=ls,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:hs,afterPreactivation:hs},this.urlHandlingStrategy=new us,this.routeReuseStrategy=new rs,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.ngModule=o.get(r.h0i),this.console=o.get(r.c2e);const c=o.get(r.R0b);this.isNgZoneEnabled=c instanceof r.R0b&&r.R0b.isInAngularZone(),this.resetConfig(u),this.currentUrlTree=new vi(new _i([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new os(s,a,t=>this.triggerEvent(new Kr(t)),t=>this.triggerEvent(new Yr(t))),this.routerState=Gi(this.currentUrlTree,this.rootComponentType),this.transitions=new Zn({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe(sn(t=>0!==t.id),(0,Mt.U)(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),sr(t=>{let n=!1,r=!1;return(0,en.of)(t).pipe((0,Rr.b)(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),sr(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return(0,en.of)(t).pipe(sr(t=>{const n=this.transitions.getValue();return e.next(new qr(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?nr.E:Promise.resolve(t)}),(r=this.ngModule.injector,i=this.configLoader,o=this.urlSerializer,s=this.config,sr(t=>function(t,e,n,r,i){return new qo(t,e,n,r,i).apply()}(r,i,o,t.extractedUrl,s).pipe((0,Mt.U)(e=>Object.assign(Object.assign({},t),{urlAfterRedirects:e}))))),(0,Rr.b)(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,i){return(0,nn.zg)(o=>function(t,e,n,r,i="emptyOnly",o="legacy"){try{const s=new Yo(t,e,n,r,i,o).recognize();return null===s?Ko(new Wo):(0,en.of)(s)}catch(QT){return Ko(QT)}}(t,e,o.urlAfterRedirects,n(o.urlAfterRedirects),r,i).pipe((0,Mt.U)(t=>Object.assign(Object.assign({},o),{targetSnapshot:t}))))}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Rr.b)(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects);const n=new Zr(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));var r,i,o,s;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:o,extras:s}=t,a=new qr(n,this.serializeUrl(r),i,o);e.next(a);const u=Gi(r,this.rootComponentType).snapshot;return(0,en.of)(Object.assign(Object.assign({},t),{targetSnapshot:u,urlAfterRedirects:r,extras:Object.assign(Object.assign({},s),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),nr.E}),ns(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),(0,Rr.b)(t=>{const e=new Gr(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),(0,Mt.U)(t=>Object.assign(Object.assign({},t),{guards:Zo(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return(0,nn.zg)(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?(0,en.of)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return(0,Lt.D)(t).pipe((0,nn.zg)(t=>function(t,e,n,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||0===o.length)return(0,en.of)(!0);const s=o.map(o=>{const s=Go(o,e,i);let a;if(function(t){return t&&yo(t.canDeactivate)}(s))a=hi(s.canDeactivate(t,e,n,r));else{if(!yo(s))throw new Error("Invalid CanDeactivate guard");a=hi(s(t,e,n,r))}return a.pipe(Pr())});return(0,en.of)(s).pipe(bo())}(t.component,t.route,n,e,r)),Pr(t=>!0!==t,!0))}(s,r,i,t).pipe((0,nn.zg)(n=>n&&function(t){return"boolean"==typeof t}(n)?function(t,e,n,r){return(0,Lt.D)(e).pipe(rn(e=>er(function(t,e){return null!==t&&e&&e(new Qr(t)),(0,en.of)(!0)}(e.route.parent,r),function(t,e){return null!==t&&e&&e(new Jr(t)),(0,en.of)(!0)}(e.route,r),function(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>rr(()=>{const i=e.guards.map(i=>{const o=Go(i,e.node,n);let s;if(function(t){return t&&yo(t.canActivateChild)}(o))s=hi(o.canActivateChild(r,t));else{if(!yo(o))throw new Error("Invalid CanActivateChild guard");s=hi(o(r,t))}return s.pipe(Pr())});return(0,en.of)(i).pipe(bo())}));return(0,en.of)(i).pipe(bo())}(t,e.path,n),function(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return(0,en.of)(!0);const i=r.map(r=>rr(()=>{const i=Go(r,e,n);let o;if(function(t){return t&&yo(t.canActivate)}(i))o=hi(i.canActivate(e,t));else{if(!yo(i))throw new Error("Invalid CanActivate guard");o=hi(i(e,t))}return o.pipe(Pr())}));return(0,en.of)(i).pipe(bo())}(t,e.route,n))),Pr(t=>!0!==t,!0))}(r,o,t,e):(0,en.of)(n)),(0,Mt.U)(t=>Object.assign(Object.assign({},n),{guardsResult:t})))})}(this.ngModule.injector,t=>this.triggerEvent(t)),(0,Rr.b)(t=>{if(vo(t.guardsResult)){const e=ii(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}const e=new zr(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),sn(t=>{if(!t.guardsResult){this.resetUrlToCurrentUrlTree();const n=new Vr(t.id,this.serializeUrl(t.extractedUrl),"");return e.next(n),t.resolve(!1),!1}return!0}),ns(t=>{if(t.guards.canActivateChecks.length)return(0,en.of)(t).pipe((0,Rr.b)(t=>{const e=new Hr(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),sr(t=>{let n=!1;return(0,en.of)(t).pipe((r=this.paramsInheritanceStrategy,i=this.ngModule.injector,(0,nn.zg)(t=>{const{targetSnapshot:e,guards:{canActivateChecks:n}}=t;if(!n.length)return(0,en.of)(t);let o=0;return(0,Lt.D)(n).pipe(rn(t=>function(t,e,n,r){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return(0,en.of)({});const o={};return(0,Lt.D)(i).pipe((0,nn.zg)(i=>function(t,e,n,r){const i=Go(t,e,r);return hi(i.resolve?i.resolve(e,n):i(e,n))}(t[i],e,n,r).pipe((0,Rr.b)(t=>{o[i]=t}))),br(1),(0,nn.zg)(()=>Object.keys(o).length===i.length?(0,en.of)(o):nr.E))}(t._resolve,t,e,r).pipe((0,Mt.U)(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),Hi(t,n).resolve),null)))}(t.route,e,r,i)),(0,Rr.b)(()=>o++),br(1),(0,nn.zg)(e=>o===n.length?(0,en.of)(t):nr.E))})),(0,Rr.b)({next:()=>n=!0,complete:()=>{if(!n){const n=new Vr(t.id,this.serializeUrl(t.extractedUrl),"At least one route resolver didn't emit any value.");e.next(n),t.resolve(!1)}}}));var r,i}),(0,Rr.b)(t=>{const e=new Wr(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),ns(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),(0,Mt.U)(t=>{const e=function(t,e,n){const r=Xi(t,e._root,n?n._root:void 0);return new Zi(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),(0,Rr.b)(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),(i=this.rootContexts,o=this.routeReuseStrategy,s=t=>this.triggerEvent(t),(0,Mt.U)(t=>(new fo(o,t.targetRouterState,t.currentRouterState,s).activate(i),t))),(0,Rr.b)({next(){n=!0},complete(){n=!0}}),Lr(()=>{if(!n&&!r){this.resetUrlToCurrentUrlTree();const n=new Vr(t.id,this.serializeUrl(t.extractedUrl),`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`);e.next(n),t.resolve(!1)}this.currentNavigation=null}),yr(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=vo(n.url);r||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const i=new Vr(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(i),r?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const r=new Br(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(Tg){t.reject(Tg)}}var i;return nr.E}));var i,o,s}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const e=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,e)&&setTimeout(()=>{const{source:t,state:n,urlTree:r}=e,i={replaceUrl:!0};if(n){const t=Object.assign({},n);delete t.navigationId,0!==Object.keys(t).length&&(i.state=t)}this.scheduleNavigation(r,t,n,i)},0),this.lastLocationChangeInfo=e}))}extractLocationChangeInfoFromEvent(t){var e;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(e=t.state)||void 0===e?void 0:e.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,e){if(!t)return!0;const n=e.urlTree.toString()===t.urlTree.toString();return!(e.transitionId===t.transitionId&&n&&("hashchange"===e.source&&"popstate"===t.source||"popstate"===e.source&&"hashchange"===t.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Co(t),this.config=t.map(Eo),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,e={}){const{relativeTo:n,queryParams:r,fragment:i,queryParamsHandling:o,preserveFragment:s}=e,a=n||this.routerState.root,u=s?this.currentUrlTree.fragment:i;let c=null;switch(o){case"merge":c=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=r||null}return null!==c&&(c=this.removeEmptyProps(c)),function(t,e,n,r,i){if(0===n.length)return ro(e.root,e.root,e,r,i);const o=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new oo(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return li(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new oo(n,e,r)}(n);if(o.toRoot())return ro(e.root,new _i([],{}),e,r,i);const s=function(t,e,n){if(t.isAbsolute)return new so(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const t=n.snapshot._urlSegment;return new so(t,t===e.root,0)}const r=eo(t.commands[0])?0:1;return function(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new so(r,!1,i-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(o,e,t),a=s.processChildren?uo(s.segmentGroup,s.index,o.commands):ao(s.segmentGroup,s.index,o.commands);return ro(s.segmentGroup,a,e,r,i)}(a,this.currentUrlTree,t,c,null!=u?u:null)}navigateByUrl(t,e={skipLocationChange:!1}){const n=vo(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(QT){e=this.malformedUriErrorHandler(QT,this.urlSerializer,t)}return e}isActive(t,e){let n;if(n=!0===e?Object.assign({},ds):!1===e?Object.assign({},ps):e,vo(t))return fi(this.currentUrlTree,t,n);const r=this.parseUrl(t);return fi(this.currentUrlTree,r,n)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.events.next(new jr(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r,i){if(this.disposed)return Promise.resolve(!1);const o=this.getTransition(),s="imperative"!==e&&"imperative"===(null==o?void 0:o.source),a=(this.lastSuccessfulId===o.id||this.currentNavigation?o.rawUrl:o.urlAfterRedirects).toString()===t.toString();if(s&&a)return Promise.resolve(!0);let u,c,l;i?(u=i.resolve,c=i.reject,l=i.promise):l=new Promise((t,e)=>{u=t,c=e});const h=++this.navigationId;return this.setTransition({id:h,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:u,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(t=>Promise.reject(t))}setBrowserUrl(t,e,n,r){const i=this.urlSerializer.serialize(t);r=r||{},this.location.isCurrentPathEqualTo(i)||e?this.location.replaceState(i,"",Object.assign(Object.assign({},r),{navigationId:n})):this.location.go(i,"",Object.assign(Object.assign({},r),{navigationId:n}))}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.DyG),r.LFG(Ci),r.LFG(as),r.LFG(w),r.LFG(r.zs3),r.LFG(r.v3s),r.LFG(r.Sil),r.LFG(void 0))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),gs=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.route=e,this.commands=[],this.onChanges=new Vn.xQ,null==n&&r.setAttribute(i.nativeElement,"tabindex","0")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}onClick(){const t={skipLocationChange:ms(this.skipLocationChange),replaceUrl:ms(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:ms(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(fs),r.Y36(zi),r.$8M("tabindex"),r.Y36(r.Qsj),r.Y36(r.SBq))},t.\u0275dir=r.lG2({type:t,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,e){1&t&&r.NdJ("click",function(){return e.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[r.TTD]}),t})();function ms(t){return""===t||!!t}let ys=(()=>{class t{constructor(t,e,n,i,o){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new r.vpe,this.deactivateEvents=new r.vpe,this.name=i||ei,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new vs(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(as),r.Y36(r.s_b),r.Y36(r._Vd),r.$8M("name"),r.Y36(r.sBO))},t.\u0275dir=r.lG2({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class vs{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===zi?this.route:t===as?this.childContexts:this.parent.get(t,e)}}class _s{}class bs{preload(t,e){return(0,en.of)(null)}}let ws=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new os(e,n,e=>t.triggerEvent(new Kr(e)),e=>t.triggerEvent(new Yr(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(sn(t=>t instanceof jr),rn(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(r.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return(0,Lt.D)(n).pipe((0,tr.J)(),(0,Mt.U)(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>(e._loadedConfig?(0,en.of)(e._loadedConfig):this.loader.load(t.injector,e)).pipe((0,nn.zg)(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(fs),r.LFG(r.v3s),r.LFG(r.Sil),r.LFG(r.zs3),r.LFG(_s))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),Cs=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof qr?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof jr&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof ti&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new ti(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(fs),r.LFG(X),r.LFG(void 0))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const Ts=new r.OlP("ROUTER_CONFIGURATION"),Ss=new r.OlP("ROUTER_FORROOT_GUARD"),Es=[w,{provide:Ci,useClass:Ti},{provide:fs,useFactory:function(t,e,n,r,i,o,s,a={},u,c){const l=new fs(null,t,e,n,r,i,o,ui(s));return u&&(l.urlHandlingStrategy=u),c&&(l.routeReuseStrategy=c),function(t,e){t.errorHandler&&(e.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(e.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(e.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(e.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(e.urlUpdateStrategy=t.urlUpdateStrategy)}(a,l),a.enableTracing&&l.events.subscribe(t=>{var e,n;null===(e=console.group)||void 0===e||e.call(console,`Router Event: ${t.constructor.name}`),console.log(t.toString()),console.log(t),null===(n=console.groupEnd)||void 0===n||n.call(console)}),l},deps:[Ci,as,w,r.zs3,r.v3s,r.Sil,is,Ts,[class{},new r.FiY],[class{},new r.FiY]]},as,{provide:zi,useFactory:function(t){return t.routerState.root},deps:[fs]},{provide:r.v3s,useClass:r.EAV},ws,bs,class{preload(t,e){return e().pipe(yr(()=>(0,en.of)(null)))}},{provide:Ts,useValue:{enableTracing:!1}}];function xs(){return new r.PXZ("Router",fs)}let Is=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[Es,Ps(e),{provide:Ss,useFactory:Os,deps:[[fs,new r.FiY,new r.tp0]]},{provide:Ts,useValue:n||{}},{provide:m,useFactory:As,deps:[a,[new r.tBr(v),new r.FiY],Ts]},{provide:Cs,useFactory:ks,deps:[fs,X,Ts]},{provide:_s,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:bs},{provide:r.PXZ,multi:!0,useFactory:xs},[Rs,{provide:r.ip1,multi:!0,useFactory:Ns,deps:[Rs]},{provide:Ls,useFactory:Ds,deps:[Rs]},{provide:r.tb,multi:!0,useExisting:Ls}]]}}static forChild(e){return{ngModule:t,providers:[Ps(e)]}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Ss,8),r.LFG(fs,8))},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({}),t})();function ks(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new Cs(t,e,n)}function As(t,e,n={}){return n.useHash?new b(t,e):new _(t,e)}function Os(t){return"guarded"}function Ps(t){return[{provide:r.deG,multi:!0,useValue:t},{provide:is,multi:!0,useValue:t}]}let Rs=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new Vn.xQ}appInitializer(){return this.injector.get(c,Promise.resolve(null)).then(()=>{let t=null;const e=new Promise(e=>t=e),n=this.injector.get(fs),r=this.injector.get(Ts);return"disabled"===r.initialNavigation?(n.setUpLocationChangeListener(),t(!0)):"enabled"===r.initialNavigation||"enabledBlocking"===r.initialNavigation?(n.hooks.afterPreactivation=()=>this.initNavigation?(0,en.of)(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()):t(!0),e})}bootstrapListener(t){const e=this.injector.get(Ts),n=this.injector.get(ws),i=this.injector.get(Cs),o=this.injector.get(fs),s=this.injector.get(r.z2F);t===s.components[0]&&("enabledNonBlocking"!==e.initialNavigation&&void 0!==e.initialNavigation||o.initialNavigation(),n.setUpPreloading(),i.init(),o.resetRootComponentType(s.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.zs3))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();function Ns(t){return t.appInitializer.bind(t)}function Ds(t){return t.bootstrapListener.bind(t)}const Ls=new r.OlP("Router Initializer");class Fs{constructor(){this.id="",this.deposito="",this.usuario="",this.udp="",this.id_usuario="",this.id_deposito="",this.id_plantilla="",this.campo1="",this.campo2="",this.campo3="",this.campo4="",this.campo5="",this.campo6="",this.campo7="",this.campo8="",this.campo9="",this.campo10="",this.campo11="",this.campo12="",this.campo13="",this.campo14="",this.campo15="",this.campo16="",this.campo17="",this.campo18="",this.campo19="",this.campo20="",this.campo21="",this.campo22="",this.campo23="",this.campo24="",this.campo25="",this.campo26="",this.campo27="",this.campo28="",this.campo29="",this.campo30="",this.campoubicacion="",this.estado=!0,this.pathimagen=!1}}var Us=n(2501),Ms=n.n(Us),qs=n(8569);class js{constructor(t,e){this.dueTime=t,this.scheduler=e}call(t,e){return e.subscribe(new Vs(t,this.dueTime,this.scheduler))}}class Vs extends on.L{constructor(t,e,n){super(t),this.dueTime=e,this.scheduler=n,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(Bs,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:t}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}}clearDebounce(){const t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)}}function Bs(t){t.debouncedNext()}var Zs=n(9098),Gs=n(2346),zs=n(1062),Hs=n(4762),Ws=n(250),Ks=n(5119),Ys="firebasestorage.googleapis.com",Qs=function(t){function e(n,r){var i=t.call(this,$s(n),"Firebase Storage: "+r+" ("+$s(n)+")")||this;return i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(i,e.prototype),i}return(0,Hs.ZT)(e,t),e.prototype._codeEquals=function(t){return $s(t)===this.code},Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t,this.message=this.customData.serverResponse?this._baseMessage+"\n"+this.customData.serverResponse:this._baseMessage},enumerable:!1,configurable:!0}),e}(Ws.ZR);function $s(t){return"storage/"+t}function Js(){return new Qs("unknown","An unknown error occurred, please check the error payload for server response.")}function Xs(){return new Qs("canceled","User canceled the upload/download.")}function ta(){return new Qs("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function ea(t){return new Qs("invalid-argument",t)}function na(){return new Qs("app-deleted","The Firebase app was deleted.")}function ra(t){return new Qs("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ia(t,e){return new Qs("invalid-format","String does not match format '"+t+"': "+e)}function oa(t){throw new Qs("internal-error","Internal error: "+t)}var sa={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},aa=function(){return function(t,e){this.data=t,this.contentType=e||null}}();function ua(t,e){switch(t){case sa.RAW:return new aa(ca(e));case sa.BASE64:case sa.BASE64URL:return new aa(la(t,e));case sa.DATA_URL:return new aa((n=new ha(e)).base64?la(sa.BASE64,n.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(QT){throw ia(sa.DATA_URL,"Malformed data URL.")}return ca(e)}(n.rest),new ha(e).contentType)}var n;throw Js()}function ca(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|63&r);else if(55296==(64512&r))if(n<t.length-1&&56320==(64512&t.charCodeAt(n+1))){var i=r,o=t.charCodeAt(++n);e.push(240|(r=65536|(1023&i)<<10|1023&o)>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else e.push(239,191,189);else 56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function la(t,e){switch(t){case sa.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw ia(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case sa.BASE64URL:var i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw ia(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var s;try{s=atob(e)}catch(QT){throw ia(t,"Invalid character found")}for(var a=new Uint8Array(s.length),u=0;u<s.length;u++)a[u]=s.charCodeAt(u);return a}var ha=function(){return function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw ia(sa.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,r,i=e[1]||null;null!=i&&(this.base64=(n=i).length>=(r=";base64").length&&n.substring(n.length-r.length)===r,this.contentType=this.base64?i.substring(0,i.length-";base64".length):i),this.rest=t.substring(t.indexOf(",")+1)}}(),da={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function pa(t){switch(t){case"running":case"pausing":case"canceling":return da.RUNNING;case"paused":return da.PAUSED;case"success":return da.SUCCESS;case"canceled":return da.CANCELED;case"error":default:return da.ERROR}}var fa=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}({}),ga=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=fa.NO_ERROR,this.sendPromise_=new Promise(function(e){t.xhr_.addEventListener("abort",function(){t.errorCode_=fa.ABORT,e(t)}),t.xhr_.addEventListener("error",function(){t.errorCode_=fa.NETWORK_ERROR,e(t)}),t.xhr_.addEventListener("load",function(){e(t)})})}return t.prototype.send=function(t,e,n,r){if(this.sent_)throw oa("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw oa("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw oa("cannot .getStatus() before sending");try{return this.xhr_.status}catch(QT){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw oa("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)},t}(),ma=function(){function t(){}return t.prototype.createXhrIo=function(){return new ga},t}(),ya=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(e,n){var r;try{r=t.makeFromUrl(e,n)}catch(QT){return new t(e,"")}if(""===r.path)return r;throw new Qs("invalid-default-bucket","Invalid default bucket '"+e+"'.")},t.makeFromUrl=function(e,n){var r=null,i="([A-Za-z0-9.\\-_]+)",o=new RegExp("^gs://"+i+"(/(.*))?$","i");function s(t){t.path_=decodeURIComponent(t.path)}for(var a=n.replace(/[.]/g,"\\."),u=[{regex:o,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+a+"/v[A-Za-z0-9_]+/b/"+i+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:s},{regex:new RegExp("^https?://"+(n===Ys?"(?:storage.googleapis.com|storage.cloud.google.com)":n)+"/"+i+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:s}],c=0;c<u.length;c++){var l=u[c],h=l.regex.exec(e);if(h){var d=h[l.indices.path];d||(d=""),r=new t(h[l.indices.bucket],d),l.postModify(r);break}}if(null==r)throw function(t){return new Qs("invalid-url","Invalid URL '"+t+"'.")}(e);return r},t}(),va=function(){function t(t){this.promise_=Promise.reject(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){},t}();function _a(t){return"string"==typeof t||t instanceof String}function ba(t){return wa()&&t instanceof Blob}function wa(){return"undefined"!=typeof Blob}function Ca(t,e,n,r){if(r<e)throw ea("Invalid value for '"+t+"'. Expected "+e+" or greater.");if(r>n)throw ea("Invalid value for '"+t+"'. Expected "+n+" or less.")}function Ta(t,e){var n=e.match(/^(\w+):\/\/.+/),r=e;return null==(null==n?void 0:n[1])&&(r="https://"+e),r+"/v0"+t}function Sa(t){var e=encodeURIComponent,n="?";for(var r in t)t.hasOwnProperty(r)&&(n=n+(e(r)+"=")+e(t[r])+"&");return n.slice(0,-1)}var Ea=function(){function t(t,e,n,r,i,o,s,a,u,c,l){var h=this;this.pendingXhr_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=s,this.errorCallback_=a,this.progressCallback_=c,this.timeout_=u,this.pool_=l,this.promise_=new Promise(function(t,e){h.resolve_=t,h.reject_=e,h.start_()})}return t.prototype.start_=function(){var t=this;function e(e,n){var r,i=t.resolve_,o=t.reject_,s=n.xhr;if(n.wasSuccessCode)try{var a=t.callback_(s,s.getResponseText());!function(t){return void 0!==t}(a)?i():i(a)}catch(QT){o(QT)}else null!==s?((r=Js()).serverResponse=s.getResponseText(),o(t.errorCallback_?t.errorCallback_(s,r):r)):o(r=n.canceled?t.appDelete_?na():Xs():new Qs("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?e(0,new xa(!1,null,!0)):this.backoffId_=function(e,n,r){var i=1,o=null,s=!1,a=0;function u(){return 2===a}var c=!1;function l(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];c||(c=!0,n.apply(null,t))}function h(e){o=setTimeout(function(){o=null,function(e,n){if(n)e(!1,new xa(!1,null,!0));else{var r=t.pool_.createXhrIo();t.pendingXhr_=r,null!==t.progressCallback_&&r.addUploadProgressListener(i),r.send(t.url_,t.method_,t.body_,t.headers_).then(function(n){null!==t.progressCallback_&&n.removeUploadProgressListener(i),t.pendingXhr_=null;var r=(n=n).getErrorCode()===fa.NO_ERROR,o=n.getStatus();if(r&&!t.isRetryStatusCode_(o)){var s=-1!==t.successCodes_.indexOf(o);e(!0,new xa(s,n))}else{var a=n.getErrorCode()===fa.ABORT;e(!1,new xa(!1,null,a))}})}function i(e){null!==t.progressCallback_&&t.progressCallback_(e.loaded,e.lengthComputable?e.total:-1)}}(d,u())},e)}function d(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!c)if(t)l.call.apply(l,(0,Hs.ev)([null,t],e));else{var r;u()||s?l.call.apply(l,(0,Hs.ev)([null,t],e)):(i<64&&(i*=2),1===a?(a=2,r=0):r=1e3*(i+Math.random()),h(r))}}var p=!1;function f(t){p||(p=!0,c||(null!==o?(t||(a=2),clearTimeout(o),h(0)):t||(a=1)))}return h(0),setTimeout(function(){s=!0,f(!0)},r),f}(0,e,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&function(t){t(!1)}(this.backoffId_),null!==this.pendingXhr_&&this.pendingXhr_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},t}(),xa=function(){return function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n}}();function Ia(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function ka(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Ia();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(wa())return new Blob(t);throw new Qs("unsupported-environment","This browser doesn't seem to support creating Blobs")}var Aa=function(){function t(t,e){var n=0,r="";ba(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(ba(this.data_)){var r=(o=e,s=n,(i=this.data_).webkitSlice?i.webkitSlice(o,s):i.mozSlice?i.mozSlice(o,s):i.slice?i.slice(o,s):null);return null===r?null:new t(r)}var i,o,s;return new t(new Uint8Array(this.data_.buffer,e,n-e),!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(wa()){var r=e.map(function(e){return e instanceof t?e.data_:e});return new t(ka.apply(null,r))}var i=e.map(function(t){return _a(t)?ua(sa.RAW,t).data:t.data_}),o=0;i.forEach(function(t){o+=t.byteLength});var s=new Uint8Array(o),a=0;return i.forEach(function(t){for(var e=0;e<t.length;e++)s[a++]=t[e]}),new t(s,!0)},t.prototype.uploadData=function(){return this.data_},t}();function Oa(t){var e;try{e=JSON.parse(t)}catch(QT){return null}return function(t){return"object"==typeof t&&!Array.isArray(t)}(e)?e:null}function Pa(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function Ra(t,e){return e}var Na=function(){return function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||Ra}}(),Da=null;function La(){if(Da)return Da;var t=[];t.push(new Na("bucket")),t.push(new Na("generation")),t.push(new Na("metageneration")),t.push(new Na("name","fullPath",!0));var e=new Na("name");e.xform=function(t,e){return function(t){return!_a(t)||t.length<2?t:Pa(t)}(e)},t.push(e);var n=new Na("size");return n.xform=function(t,e){return void 0!==e?Number(e):e},t.push(n),t.push(new Na("timeCreated")),t.push(new Na("updated")),t.push(new Na("md5Hash",null,!0)),t.push(new Na("cacheControl",null,!0)),t.push(new Na("contentDisposition",null,!0)),t.push(new Na("contentEncoding",null,!0)),t.push(new Na("contentLanguage",null,!0)),t.push(new Na("contentType",null,!0)),t.push(new Na("metadata","customMetadata",!0)),Da=t}function Fa(t,e,n){var r=Oa(e);return null===r?null:function(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var s=n[o];r[s.local]=s.xform(r,e[s.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var n=new ya(t.bucket,t.fullPath);return e._makeStorageReference(n)}})}(r,t),r}(t,r,n)}function Ua(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}var Ma=function(){return function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}();function qa(t){if(!t)throw Js()}function ja(t,e){return function(n,r){var i=Fa(t,r,e);return qa(null!==i),i}}function Va(t){return function(e,n){var r;return(r=401===e.getStatus()?e.getResponseText().includes("Firebase App Check token is invalid")?new Qs("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new Qs("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?new Qs("quota-exceeded","Quota for bucket '"+t.bucket+"' exceeded, please view quota on https://firebase.google.com/pricing/."):403===e.getStatus()?new Qs("unauthorized","User does not have permission to access '"+t.path+"'."):n).serverResponse=n.serverResponse,r}}function Ba(t){var e=Va(t);return function(n,r){var i=e(n,r);return 404===n.getStatus()&&(i=new Qs("object-not-found","Object '"+t.path+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function Za(t,e,n){var r=Ta(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime,o=new Ma(r,"GET",ja(t,n),i);return o.errorHandler=Ba(e),o}function Ga(t,e,n){var r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return e&&e.type()||"application/octet-stream"}(0,e)),r}var za=function(){return function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null}}();function Ha(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(QT){qa(!1)}return qa(!!n&&-1!==(e||["active"]).indexOf(n)),n}var Wa=262144,Ka=function(){return function(t,e,n){if(function(t){return"function"==typeof t}(t)||null!=e||null!=n)this.next=t,this.error=e,this.complete=n;else{var r=t;this.next=r.next,this.error=r.error,this.complete=r.complete}}}();function Ya(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then(function(){return t.apply(void 0,e)})}}var Qa=function(){function t(t,e,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=n,this._mappings=La(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(t){r._request=void 0,r._chunkMultiplier=1,t._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=t,r._transition("error"))},this._metadataErrorHandler=function(t){r._request=void 0,t._codeEquals("canceled")?r.completeTransitions_():(r._error=t,r._transition("error"))},this._promise=new Promise(function(t,e){r._resolve=t,r._reject=e,r._start()}),this._promise.then(null,function(){})}return t.prototype._makeProgressCallback=function(){var t=this,e=this._transferred;return function(n){return t._updateProgress(e+n)}},t.prototype._shouldDoResumable=function(t){return t.size()>262144},t.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},t.prototype._resolveToken=function(t){var e=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(function(n){var r=n[0],i=n[1];switch(e._state){case"running":t(r,i);break;case"canceling":e._transition("canceled");break;case"pausing":e._transition("paused")}})},t.prototype._createResumable=function(){var t=this;this._resolveToken(function(e,n){var r=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s=Ga(e,r,i),a={name:s.fullPath},u=Ta(o,t.host),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},l=Ua(s,n),h=new Ma(u,"POST",function(t){var e;Ha(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(QT){qa(!1)}return qa(_a(e)),e},t.maxUploadRetryTime);return h.urlParams=a,h.headers=c,h.body=l,h.errorHandler=Va(e),h}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then(function(e){t._request=void 0,t._uploadUrl=e,t._needToFetchStatus=!1,t.completeTransitions_()},t._errorHandler)})},t.prototype._fetchStatus=function(){var t=this,e=this._uploadUrl;this._resolveToken(function(n,r){var i=function(t,e,n,r){var i=new Ma(n,"POST",function(t){var e=Ha(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(QT){qa(!1)}n||qa(!1);var i=Number(n);return qa(!isNaN(i)),new za(i,r.size(),"final"===e)},t.maxUploadRetryTime);return i.headers={"X-Goog-Upload-Command":"query"},i.errorHandler=Va(e),i}(t._ref.storage,t._ref._location,e,t._blob),o=t._ref.storage._makeRequest(i,n,r);t._request=o,o.getPromise().then(function(e){e=e,t._request=void 0,t._updateProgress(e.current),t._needToFetchStatus=!1,e.finalized&&(t._needToFetchMetadata=!0),t.completeTransitions_()},t._errorHandler)})},t.prototype._continueUpload=function(){var t=this,e=Wa*this._chunkMultiplier,n=new za(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken(function(i,o){var s;try{s=function(t,e,n,r,i,o,s,a){var u=new za(0,0);if(s?(u.current=s.current,u.total=s.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new Qs("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,l=c;i>0&&(l=Math.min(l,i));var h=u.current,d={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":u.current},p=r.slice(h,h+l);if(null===p)throw ta();var f=new Ma(n,"POST",function(t,n){var i,s=Ha(t,["active","final"]),a=u.current+l,c=r.size();return i="final"===s?ja(e,o)(t,n):null,new za(a,c,"final"===s,i)},e.maxUploadRetryTime);return f.headers=d,f.body=p.uploadData(),f.progressCallback=a||null,f.errorHandler=Va(t),f}(t._ref._location,t._ref.storage,r,t._blob,e,t._mappings,n,t._makeProgressCallback())}catch(QT){return t._error=QT,void t._transition("error")}var a=t._ref.storage._makeRequest(s,i,o);t._request=a,a.getPromise().then(function(e){t._increaseMultiplier(),t._request=void 0,t._updateProgress(e.current),e.finalized?(t._metadata=e.metadata,t._transition("success")):t.completeTransitions_()},t._errorHandler)})},t.prototype._increaseMultiplier=function(){Wa*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},t.prototype._fetchMetadata=function(){var t=this;this._resolveToken(function(e,n){var r=Za(t._ref.storage,t._ref._location,t._mappings),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then(function(e){t._request=void 0,t._metadata=e,t._transition("success")},t._metadataErrorHandler)})},t.prototype._oneShotUpload=function(){var t=this;this._resolveToken(function(e,n){var r=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"},a=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();s["Content-Type"]="multipart/related; boundary="+a;var u=Ga(e,r,i),c=Ua(u,n),l=Aa.getBlob("--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+c+"\r\n--"+a+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",r,"\r\n--"+a+"--");if(null===l)throw ta();var h={name:u.fullPath},d=Ta(o,t.host),p=t.maxUploadRetryTime,f=new Ma(d,"POST",ja(t,n),p);return f.urlParams=h,f.headers=s,f.body=l.uploadData(),f.errorHandler=Va(e),f}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then(function(e){t._request=void 0,t._metadata=e,t._updateProgress(t._blob.size()),t._transition("success")},t._errorHandler)})},t.prototype._updateProgress=function(t){var e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()},t.prototype._transition=function(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":var e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=Xs(),this._state=t,this._notifyObservers();break;case"error":case"success":this._state=t,this._notifyObservers()}},t.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=pa(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),t.prototype.on=function(t,e,n,r){var i=this,o=new Ka(e,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},t.prototype.then=function(t,e){return this._promise.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},t.prototype._removeObserver=function(t){var e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)},t.prototype._notifyObservers=function(){var t=this;this._finishPromise(),this._observers.slice().forEach(function(e){t._notifyObserver(e)})},t.prototype._finishPromise=function(){if(void 0!==this._resolve){var t=!0;switch(pa(this._state)){case da.SUCCESS:Ya(this._resolve.bind(null,this.snapshot))();break;case da.CANCELED:case da.ERROR:Ya(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}},t.prototype._notifyObserver=function(t){switch(pa(this._state)){case da.RUNNING:case da.PAUSED:t.next&&Ya(t.next.bind(t,this.snapshot))();break;case da.SUCCESS:t.complete&&Ya(t.complete.bind(t))();break;case da.CANCELED:case da.ERROR:t.error&&Ya(t.error.bind(t,this._error))();break;default:t.error&&Ya(t.error.bind(t,this._error))()}},t.prototype.resume=function(){var t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t},t.prototype.pause=function(){var t="running"===this._state;return t&&this._transition("pausing"),t},t.prototype.cancel=function(){var t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t},t}(),$a=function(){function t(t,e){this._service=t,this._location=e instanceof ya?e:ya.makeFromUrl(e,t.host)}return t.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},t.prototype._newRef=function(e,n){return new t(e,n)},Object.defineProperty(t.prototype,"root",{get:function(){var t=new ya(this._location.bucket,"");return this._newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return Pa(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===e)return null;var n=new ya(this._location.bucket,e);return new t(this._service,n)},enumerable:!1,configurable:!0}),t.prototype._throwIfRoot=function(t){if(""===this._location.path)throw ra(t)},t}();function Ja(t){var e={prefixes:[],items:[]};return Xa(t,e).then(function(){return e})}function Xa(t,e,n){return(0,Hs.mG)(this,void 0,void 0,function(){var r,i,o;return(0,Hs.Jh)(this,function(s){switch(s.label){case 0:return[4,tu(t,{pageToken:n})];case 1:return r=s.sent(),(i=e.prefixes).push.apply(i,r.prefixes),(o=e.items).push.apply(o,r.items),null==r.nextPageToken?[3,3]:[4,Xa(t,e,r.nextPageToken)];case 2:s.sent(),s.label=3;case 3:return[2]}})})}function tu(t,e){return(0,Hs.mG)(this,void 0,void 0,function(){var n,r;return(0,Hs.Jh)(this,function(i){switch(i.label){case 0:return null!=e&&"number"==typeof e.maxResults&&Ca("options.maxResults",1,1e3,e.maxResults),r=function(t,e,n,r,i){var o={};o.prefix=e.isRoot?"":e.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var s=Ta(e.bucketOnlyServerUrl(),t.host),a=t.maxOperationRetryTime,u=new Ma(s,"GET",function(t,e){return function(n,r){var i=function(t,e,n){var r=Oa(n);return null===r?null:function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(var i=0,o=n.prefixes;i<o.length;i++){var s=o[i].replace(/\/$/,""),a=t._makeStorageReference(new ya(e,s));r.prefixes.push(a)}if(n.items)for(var u=0,c=n.items;u<c.length;u++)a=t._makeStorageReference(new ya(e,c[u].name)),r.items.push(a);return r}(t,e,r)}(t,e,r);return qa(null!==i),i}}(t,e.bucket),a);return u.urlParams=o,u.errorHandler=Va(e),u}(t.storage,t._location,"/",(n=e||{}).pageToken,n.maxResults),[4,t.storage.makeRequestWithTokens(r)];case 1:return[2,i.sent().getPromise()]}})})}function eu(t,e){var n=function(t,e){var n=e.split("/").filter(function(t){return t.length>0}).join("/");return 0===t.length?n:t+"/"+n}(t._location.path,e),r=new ya(t._location.bucket,n);return new $a(t.storage,r)}function nu(t){return/^[A-Za-z]+:\/\//.test(t)}function ru(t,e){if(t instanceof su){var n=t;if(null==n._bucket)throw new Qs("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new $a(n,n._bucket);return null!=e?ru(r,e):r}if(void 0!==e){if(e.includes(".."))throw ea('`path` param cannot contain ".."');return eu(t,e)}return t}function iu(t,e){if(e&&nu(e)){if(t instanceof su)return new $a(t,e);throw ea("To use ref(service, url), the first argument must be a Storage instance.")}return ru(t,e)}function ou(t,e){var n=null==e?void 0:e.storageBucket;return null==n?null:ya.makeFromBucketSpec(n,t)}var su=function(){function t(t,e,n,r,i,o){this.app=t,this._authProvider=e,this._appCheckProvider=n,this._pool=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=Ys,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?ya.makeFromBucketSpec(i,this._host):ou(this._host,this.app.options)}return Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){this._host=t,this._bucket=null!=this._url?ya.makeFromBucketSpec(this._url,t):ou(t,this.app.options)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){Ca("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){Ca("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),t.prototype._getAuthToken=function(){return(0,Hs.mG)(this,void 0,void 0,function(){var t,e;return(0,Hs.Jh)(this,function(n){switch(n.label){case 0:return(t=this._authProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:if(null!==(e=n.sent()))return[2,e.accessToken];n.label=2;case 2:return[2,null]}})})},t.prototype._getAppCheckToken=function(){return(0,Hs.mG)(this,void 0,void 0,function(){var t;return(0,Hs.Jh)(this,function(e){switch(e.label){case 0:return(t=this._appCheckProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:return[2,e.sent().token];case 2:return[2,null]}})})},t.prototype._delete=function(){return this._deleted=!0,this._requests.forEach(function(t){return t.cancel()}),this._requests.clear(),Promise.resolve()},t.prototype._makeStorageReference=function(t){return new $a(this,t)},t.prototype._makeRequest=function(t,e,n){var r=this;if(this._deleted)return new va(na());var i=function(t,e,n,r,i,o){var s=Sa(t.urlParams),a=t.url+s,u=Object.assign({},t.headers);return function(t,e){e&&(t["X-Firebase-GMPID"]=e)}(u,e),function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(u,n),function(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(u,o),function(t,e){null!==e&&(t["X-Firebase-AppCheck"]=e)}(u,r),new Ea(a,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i)}(t,this._appId,e,n,this._pool,this._firebaseVersion);return this._requests.add(i),i.getPromise().then(function(){return r._requests.delete(i)},function(){return r._requests.delete(i)}),i},t.prototype.makeRequestWithTokens=function(t){return(0,Hs.mG)(this,void 0,void 0,function(){var e;return(0,Hs.Jh)(this,function(n){switch(n.label){case 0:return[4,Promise.all([this._getAuthToken(),this._getAppCheckToken()])];case 1:return e=n.sent(),[2,this._makeRequest(t,e[0],e[1])]}})})},t}();function au(t,e){return iu(t=(0,Ws.m9)(t),e)}var uu,cu,lu=function(){function t(t,e,n){this._delegate=t,this.task=e,this.ref=n}return Object.defineProperty(t.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),t}(),hu=function(){function t(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object.defineProperty(t.prototype,"snapshot",{get:function(){return new lu(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),t.prototype.then=function(t,e){var n=this;return this._delegate.then(function(e){if(t)return t(new lu(e,n,n._ref))},e)},t.prototype.on=function(t,e,n,r){var i=this,o=void 0;return e&&(o="function"==typeof e?function(t){return e(new lu(t,i,i._ref))}:{next:e.next?function(t){return e.next(new lu(t,i,i._ref))}:void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,n||void 0,r||void 0)},t}(),du=function(){function t(t,e){this._delegate=t,this._service=e}return Object.defineProperty(t.prototype,"prefixes",{get:function(){var t=this;return this._delegate.prefixes.map(function(e){return new pu(e,t._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){var t=this;return this._delegate.items.map(function(e){return new pu(e,t._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),t}(),pu=function(){function t(t,e){this._delegate=t,this.storage=e}return Object.defineProperty(t.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return this._delegate.toString()},t.prototype.child=function(e){return new t(function(t,e){return eu(t,e)}(this._delegate,e),this.storage)},Object.defineProperty(t.prototype,"root",{get:function(){return new t(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return null==e?null:new t(e,this.storage)},enumerable:!1,configurable:!0}),t.prototype.put=function(t,e){return this._throwIfRoot("put"),new hu(function(t,e,n){return function(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new Qa(t,new Aa(e),n)}(t=(0,Ws.m9)(t),e,n)}(this._delegate,t,e),this)},t.prototype.putString=function(t,e,n){void 0===e&&(e=sa.RAW),this._throwIfRoot("putString");var r=ua(e,t),i=(0,Hs.pi)({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new hu(new Qa(this._delegate,new Aa(r.data,!0),i),this)},t.prototype.listAll=function(){var t=this;return function(t){return Ja(t=(0,Ws.m9)(t))}(this._delegate).then(function(e){return new du(e,t.storage)})},t.prototype.list=function(t){var e=this;return function(t,e){return tu(t=(0,Ws.m9)(t),e)}(this._delegate,t||void 0).then(function(t){return new du(t,e.storage)})},t.prototype.getMetadata=function(){return function(t){return function(t){return(0,Hs.mG)(this,void 0,void 0,function(){var e;return(0,Hs.Jh)(this,function(n){switch(n.label){case 0:return t._throwIfRoot("getMetadata"),e=Za(t.storage,t._location,La()),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise()]}})})}(t=(0,Ws.m9)(t))}(this._delegate)},t.prototype.updateMetadata=function(t){return function(t,e){return function(t,e){return(0,Hs.mG)(this,void 0,void 0,function(){var n;return(0,Hs.Jh)(this,function(r){switch(r.label){case 0:return t._throwIfRoot("updateMetadata"),n=function(t,e,n,r){var i=Ta(e.fullServerUrl(),t.host),o=Ua(n,r),s=t.maxOperationRetryTime,a=new Ma(i,"PATCH",ja(t,r),s);return a.headers={"Content-Type":"application/json; charset=utf-8"},a.body=o,a.errorHandler=Ba(e),a}(t.storage,t._location,e,La()),[4,t.storage.makeRequestWithTokens(n)];case 1:return[2,r.sent().getPromise()]}})})}(t=(0,Ws.m9)(t),e)}(this._delegate,t)},t.prototype.getDownloadURL=function(){return function(t){return function(t){return(0,Hs.mG)(this,void 0,void 0,function(){var e;return(0,Hs.Jh)(this,function(n){switch(n.label){case 0:return t._throwIfRoot("getDownloadURL"),e=function(t,e,n){var r=Ta(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime,o=new Ma(r,"GET",function(t,e){return function(n,r){var i=Fa(t,r,e);return qa(null!==i),function(t,e,n){var r=Oa(e);if(null===r)return null;if(!_a(r.downloadTokens))return null;var i=r.downloadTokens;if(0===i.length)return null;var o=encodeURIComponent;return i.split(",").map(function(e){var r=t.fullPath;return Ta("/b/"+o(t.bucket)+"/o/"+o(r),n)+Sa({alt:"media",token:e})})[0]}(i,r,t.host)}}(t,n),i);return o.errorHandler=Ba(e),o}(t.storage,t._location,La()),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise().then(function(t){if(null===t)throw new Qs("no-download-url","The given file does not have any download URLs.");return t})]}})})}(t=(0,Ws.m9)(t))}(this._delegate)},t.prototype.delete=function(){return this._throwIfRoot("delete"),function(t){return function(t){return(0,Hs.mG)(this,void 0,void 0,function(){var e;return(0,Hs.Jh)(this,function(n){switch(n.label){case 0:return t._throwIfRoot("deleteObject"),e=function(t,e){var n=Ta(e.fullServerUrl(),t.host),r=new Ma(n,"DELETE",function(t,e){},t.maxOperationRetryTime);return r.successCodes=[200,204],r.errorHandler=Ba(e),r}(t.storage,t._location),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise()]}})})}(t=(0,Ws.m9)(t))}(this._delegate)},t.prototype._throwIfRoot=function(t){if(""===this._delegate._location.path)throw ra(t)},t}(),fu=function(){function t(t,e){var n=this;this.app=t,this._delegate=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),t.prototype.ref=function(t){if(nu(t))throw ea("ref() expected a child path but got a URL, use refFromURL instead.");return new pu(au(this._delegate,t),this)},t.prototype.refFromURL=function(t){if(!nu(t))throw ea("refFromURL() expected a full URL but got a child path, use ref() instead.");try{ya.makeFromUrl(t,this._delegate.host)}catch(QT){throw ea("refFromUrl() expected a valid full URL but got an invalid one.")}return new pu(au(this._delegate,t),this)},t.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},t.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},t.prototype.useEmulator=function(t,e){!function(t,e,n){t.host="http://"+e+":"+n}(this._delegate,t,e)},t}();function gu(t){const e=function(t){return new Ft.y(e=>{const n=t=>e.next(t);n(t.snapshot);const r=t.on("state_changed",n);return t.then(t=>{n(t),e.complete()},r=>{n(t.snapshot),(t=>{e.error(t)})(r)}),function(){r()}}).pipe(function(t,e=qs.P){return n=>n.lift(new js(t,e))}(0))}(t);return{task:t,then:t.then.bind(t),catch:t.catch.bind(t),pause:t.pause.bind(t),cancel:t.cancel.bind(t),resume:t.resume.bind(t),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,Mt.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function mu(t,e,n){return{getDownloadURL:()=>(0,en.of)(void 0).pipe((0,Zs.QV)(e.outsideAngular),sr(()=>t.getDownloadURL()),n),getMetadata:()=>(0,en.of)(void 0).pipe((0,Zs.QV)(e.outsideAngular),sr(()=>t.getMetadata()),n),delete:()=>(0,Lt.D)(t.delete()),child:r=>mu(t.child(r),e,n),updateMetadata:e=>(0,Lt.D)(t.updateMetadata(e)),put:(e,n)=>gu(t.put(e,n)),putString:(e,n,r)=>gu(t.putString(e,n,r)),listAll:()=>(0,Lt.D)(t.listAll())}}cu={TaskState:da,TaskEvent:{STATE_CHANGED:"state_changed"},StringFormat:sa,Storage:su,Reference:pu},(uu=zs.Z).INTERNAL.registerComponent(new Ks.wA("storage",function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return new fu(r,new su(r,i,o,new ma,n,zs.Z.SDK_VERSION))},"PUBLIC").setServiceProps(cu).setMultipleInstances(!0)),uu.registerVersion("@firebase/storage","0.5.2");const yu=new r.OlP("angularfire2.storageBucket"),vu=new r.OlP("angularfire2.storage.maxUploadRetryTime"),_u=new r.OlP("angularfire2.storage.maxOperationRetryTime");let bu=(()=>{class t{constructor(t,e,n,r,i,o,s){this.schedulers=new Gs.HU(i),this.keepUnstableUntilFirst=(0,Gs.ss)(this.schedulers);const a=(0,Gs.on)(t,i,e);this.storage=(0,Gs.sI)(`${a.name}.storage.${n}`,"AngularFireStorage",a,()=>{const t=i.runOutsideAngular(()=>a.storage(n||void 0));return o&&t.setMaxUploadRetryTime(o),s&&t.setMaxOperationRetryTime(s),t},[o,s])}ref(t){return mu(this.storage.ref(t),this.schedulers,this.keepUnstableUntilFirst)}refFromURL(t){return mu(this.storage.refFromURL(t),this.schedulers,this.keepUnstableUntilFirst)}upload(t,e,n){return mu(this.storage.ref(t),this.schedulers,this.keepUnstableUntilFirst).put(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Gs.Dh),r.LFG(Gs.xv,8),r.LFG(yu,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(vu,8),r.LFG(_u,8))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(Gs.Dh),r.LFG(Gs.xv,8),r.LFG(yu,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(vu,8),r.LFG(_u,8))},token:t,providedIn:"any"}),t})(),wu=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({}),t})(),Cu=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[bu],imports:[wu]}),t})();var Tu=n(1906),Su=n(1055);function Eu(t,e){return n=>n.lift(new xu(t,e))}class xu{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new Iu(t,this.compare,this.keySelector))}}class Iu extends on.L{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}class ku{constructor(t,e){this.observables=t,this.project=e}call(t,e){return e.subscribe(new Au(t,this.observables,this.project))}}class Au extends zn{constructor(t,e,n){super(t),this.observables=e,this.project=n,this.toRespond=[];const r=e.length;this.values=new Array(r);for(let i=0;i<r;i++)this.toRespond.push(i);for(let i=0;i<r;i++)this.add(Kn(this,e[i],void 0,i))}notifyNext(t,e,n){this.values[n]=e;const r=this.toRespond;if(r.length>0){const t=r.indexOf(n);-1!==t&&r.splice(t,1)}}notifyComplete(){}_next(t){if(0===this.toRespond.length){const e=[t,...this.values];this.project?this._tryProject(e):this.destination.next(e)}}_tryProject(t){let e;try{e=this.project.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}class Ou{constructor(t){this.predicate=t}call(t,e){return e.subscribe(new Pu(t,this.predicate))}}class Pu extends on.L{constructor(t,e){super(t),this.predicate=e,this.skipping=!0,this.index=0}_next(t){const e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)}tryCallPredicate(t){try{const e=this.predicate(t,this.index++);this.skipping=Boolean(e)}catch(e){this.destination.error(e)}}}n(2107);var Ru=n(8489),Nu=n(9291);class Du extends Vn.xQ{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){if(!this.isStopped){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}super.next(t)}nextTimeWindow(t){this.isStopped||(this._events.push(new Lu(this._getNow(),t)),this._trimBufferThenGetEvents()),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,n=e?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,i=n.length;let o;if(this.closed)throw new Bn.N;if(this.isStopped||this.hasError?o=Dr.w.EMPTY:(this.observers.push(t),o=new Nu.W(this,t)),r&&t.add(t=new Zs.ht(t,r)),e)for(let s=0;s<i&&!t.closed;s++)t.next(n[s]);else for(let s=0;s<i&&!t.closed;s++)t.next(n[s].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),o}_getNow(){return(this.scheduler||Ru.c).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length;let o=0;for(;o<i&&!(t-r[o].time<n);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&r.splice(0,o),r}}class Lu{constructor(t,e){this.time=t,this.value=e}}function Fu(t,e,n){let r;return r=t&&"object"==typeof t?t:{bufferSize:t,windowTime:e,refCount:!1,scheduler:n},t=>t.lift(function({bufferSize:t=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:n,scheduler:r}){let i,o,s=0,a=!1,u=!1;return function(c){let l;s++,!i||a?(a=!1,i=new Du(t,e,r),l=i.subscribe(this),o=c.subscribe({next(t){i.next(t)},error(t){a=!0,i.error(t)},complete(){u=!0,o=void 0,i.complete()}}),u&&(o=void 0)):l=i.subscribe(this),this.add(()=>{s--,l.unsubscribe(),l=void 0,o&&!u&&n&&0===s&&(o.unsubscribe(),o=void 0,i=void 0)})}}(r))}function Uu(t,e){return e?sr(()=>t,e):sr(()=>t)}var Mu=n(4187);const qu=new r.OlP("angularfire2.auth.use-emulator"),ju=new r.OlP("angularfire2.auth.settings"),Vu=new r.OlP("angularfire2.auth.tenant-id"),Bu=new r.OlP("angularfire2.auth.langugage-code"),Zu=new r.OlP("angularfire2.auth.use-device-language"),Gu=new r.OlP("angularfire.auth.persistence");let zu=(()=>{class t{constructor(t,e,r,i,o,s,a,u,c,l){const h=new Gs.HU(i),d=(0,Gs.ss)(h),p=new Vn.xQ,f=(0,en.of)(void 0).pipe((0,Zs.QV)(h.outsideAngular),sr(()=>i.runOutsideAngular(()=>n.e(420).then(n.bind(n,7420)))),(0,Mt.U)(()=>(0,Gs.on)(t,i,e)),(0,Mt.U)(t=>i.runOutsideAngular(()=>{const e=o,n=s;return(0,Gs.sI)(`${t.name}.auth`,"AngularFireAuth",t,()=>{const r=i.runOutsideAngular(()=>t.auth());if(e&&r.useEmulator(`http://${e.join(":")}`),a&&(r.tenantId=a),r.languageCode=u,c&&r.useDeviceLanguage(),n)for(const[t,e]of Object.entries(n))r.settings[t]=e;return l&&r.setPersistence(l),r},[e,a,u,c,n,l])})),Fu({bufferSize:1,refCount:!1}));if(J(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,en.of)(null);else{f.pipe(Pr()).subscribe();const t=f.pipe(sr(t=>t.getRedirectResult().then(t=>t,()=>null)),d,Fu({bufferSize:1,refCount:!1})),e=t=>new Ft.y(e=>({unsubscribe:i.runOutsideAngular(()=>t(e))})),n=f.pipe(sr(t=>e(t.onAuthStateChanged.bind(t)))),r=f.pipe(sr(t=>e(t.onIdTokenChanged.bind(t))));this.authState=t.pipe(Uu(n),(0,Mu.R)(h.outsideAngular),(0,Zs.QV)(h.insideAngular)),this.user=t.pipe(Uu(r),(0,Mu.R)(h.outsideAngular),(0,Zs.QV)(h.insideAngular)),this.idToken=this.user.pipe(sr(t=>t?(0,Lt.D)(t.getIdToken()):(0,en.of)(null))),this.idTokenResult=this.user.pipe(sr(t=>t?(0,Lt.D)(t.getIdTokenResult()):(0,en.of)(null))),this.credential=(0,Tu.T)(t,p,this.authState.pipe(sn(t=>!t))).pipe((0,Mt.U)(t=>(null==t?void 0:t.user)?t:null),(0,Mu.R)(h.outsideAngular),(0,Zs.QV)(h.insideAngular))}return(0,Gs.pX)(this,f,i,{spy:{apply:(t,e,n)=>{(t.startsWith("signIn")||t.startsWith("createUser"))&&n.then(t=>p.next(t))}}})}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Gs.Dh),r.LFG(Gs.xv,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(qu,8),r.LFG(ju,8),r.LFG(Vu,8),r.LFG(Bu,8),r.LFG(Zu,8),r.LFG(Gu,8))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(Gs.Dh),r.LFG(Gs.xv,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(qu,8),r.LFG(ju,8),r.LFG(Vu,8),r.LFG(Bu,8),r.LFG(Zu,8),r.LFG(Gu,8))},token:t,providedIn:"any"}),t})();(0,Gs.GT)(zu,[{app:null,applyActionCode:null,checkActionCode:null,confirmPasswordReset:null,createUserWithEmailAndPassword:null,currentUser:null,fetchSignInMethodsForEmail:null,isSignInWithEmailLink:null,getRedirectResult:null,languageCode:null,settings:null,onAuthStateChanged:null,onIdTokenChanged:null,sendSignInLinkToEmail:null,sendPasswordResetEmail:null,setPersistence:null,signInAndRetrieveDataWithCredential:null,signInAnonymously:null,signInWithCredential:null,signInWithCustomToken:null,signInWithEmailAndPassword:null,signInWithPhoneNumber:null,signInWithEmailLink:null,signInWithPopup:null,signInWithRedirect:null,signOut:null,tenantId:null,updateCurrentUser:null,useDeviceLanguage:null,useEmulator:null,verifyPasswordResetCode:null}]);var Hu=n(1858);function Wu(t){return null==t}function Ku(t){return"function"==typeof t.set}function Yu(t,e){return Ku(e)?e:t.ref(e)}function Qu(t,e){if("string"==typeof t)return e.stringCase();if(Ku(t))return e.firebaseCase();if("function"==typeof t.exportVal)return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof t)}function $u(t,e,n="on",r=qs.z){return new Ft.y(i=>{let o=null;return o=t[n](e,(t,e)=>{r.schedule(()=>{i.next({snapshot:t,prevKey:e})}),"once"===n&&r.schedule(()=>i.complete())},t=>{r.schedule(()=>i.error(t))}),"on"===n?{unsubscribe(){null!=o&&t.off(e,o)}}:{unsubscribe(){}}}).pipe((0,Mt.U)(t=>{const{snapshot:n,prevKey:r}=t;let i=null;return n.exists()&&(i=n.key),{type:e,payload:n,prevKey:r,key:i}}),(0,Su.B)())}function Ju(t,e){const n=t.length;for(let r=0;r<n;r++)if(t[r].payload.key===e)return r;return-1}function Xu(t,e){const{payload:n,prevKey:r,key:i}=e,o=Ju(t,i),s=function(t,e){if(Wu(e))return 0;{const n=Ju(t,e);return-1===n?t.length:n+1}}(t,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let n=null;e.payload.forEach(e=>{const r={payload:e,type:"value",prevKey:n,key:e.key};return n=e.key,t=[...t,r],!1})}return t;case"child_added":if(o>-1){const i=t[o-1];(i&&i.key||null)!==r&&(t=t.filter(t=>t.payload.key!==n.key)).splice(s,0,e)}else{if(null==r)return[e,...t];(t=t.slice()).splice(s,0,e)}return t;case"child_removed":return t.filter(t=>t.payload.key!==n.key);case"child_changed":return t.map(t=>t.payload.key===i?e:t);case"child_moved":if(o>-1){const e=t.splice(o,1)[0];return(t=t.slice()).splice(s,0,e),t}return t;default:return t}}function tc(t){return(Wu(t)||0===t.length)&&(t=["child_added","child_removed","child_changed","child_moved"]),t}function ec(t,e,n){return function(t,e,n){return $u(t,"value","once",n).pipe(sr(r=>{const i=[(0,en.of)(r)];return e.forEach(e=>i.push($u(t,e,"on",n))),(0,Tu.T)(...i).pipe(fr(Xu,[]))}),Eu())}(t,e=tc(e),n)}function nc(t,e,n){const r=(e=tc(e)).map(e=>$u(t,e,"on",n));return(0,Tu.T)(...r)}function rc(t,e){return function(n,r){return Qu(n,{stringCase:()=>t.child(n)[e](r),firebaseCase:()=>n[e](r),snapshotCase:()=>n.ref[e](r)})}}function ic(t){return function(e){return e?Qu(e,{stringCase:()=>t.child(e).remove(),firebaseCase:()=>e.remove(),snapshotCase:()=>e.ref.remove()}):t.remove()}}function oc(t,e){return function(){return $u(t,"value","on",e)}}const sc=new r.OlP("angularfire2.realtimeDatabaseURL"),ac=new r.OlP("angularfire2.database.use-emulator");let uc=(()=>{class t{constructor(t,e,n,r,i,o,s){this.schedulers=new Gs.HU(i),this.keepUnstableUntilFirst=(0,Gs.ss)(this.schedulers);const a=o,u=(0,Gs.on)(t,i,e);!Hu.Z.auth&&s&&(0,Gs.yq)(),this.database=(0,Gs.sI)(`${u.name}.database.${n}`,"AngularFireDatabase",u,()=>{const t=i.runOutsideAngular(()=>u.database(n||void 0));return a&&t.useEmulator(...a),t},[a])}list(t,e){const n=this.schedulers.ngZone.runOutsideAngular(()=>Yu(this.database,t));let r=n;return e&&(r=e(n)),function(t,e){const n=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>t.ref);return{query:t,update:rc(r,"update"),set:rc(r,"set"),push:t=>r.push(t),remove:ic(r),snapshotChanges:r=>ec(t,r,n).pipe(e.keepUnstableUntilFirst),stateChanges:r=>nc(t,r,n).pipe(e.keepUnstableUntilFirst),auditTrail:r=>function(t,e,n){return function(t,e,n){return function(t,e){return $u(t,"value","on",e).pipe((0,Mt.U)(t=>{let e;return t.payload.forEach(t=>(e=t.key,!1)),{data:t,lastKeyToLoad:e}}))}(t,n).pipe(function(...t){return e=>{let n;return"function"==typeof t[t.length-1]&&(n=t.pop()),e.lift(new ku(t,n))}}(e),(0,Mt.U)(([t,e])=>{const n=t.lastKeyToLoad,r=e.map(t=>t.key);return{actions:e,lastKeyToLoad:n,loadedKeys:r}}),(r=t=>-1===t.loadedKeys.indexOf(t.lastKeyToLoad),t=>t.lift(new Ou(r))),(0,Mt.U)(t=>t.actions));var r}(t,nc(t,e).pipe(fr((t,e)=>[...t,e],[])),n)}(t,r,n).pipe(e.keepUnstableUntilFirst),valueChanges:(r,i)=>ec(t,r,n).pipe((0,Mt.U)(t=>t.map(t=>i&&i.idField?Object.assign(Object.assign({},t.payload.val()),{[i.idField]:t.key}):t.payload.val())),e.keepUnstableUntilFirst)}}(r,this)}object(t){const e=this.schedulers.ngZone.runOutsideAngular(()=>Yu(this.database,t));return r=this,{query:n=e,snapshotChanges:()=>oc(n,r.schedulers.outsideAngular)().pipe(r.keepUnstableUntilFirst),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>oc(n,r.schedulers.outsideAngular)().pipe(r.keepUnstableUntilFirst,(0,Mt.U)(t=>t.payload.exists()?t.payload.val():null))};var n,r}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Gs.Dh),r.LFG(Gs.xv,8),r.LFG(sc,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(ac,8),r.LFG(qu,8))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(Gs.Dh),r.LFG(Gs.xv,8),r.LFG(sc,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(ac,8),r.LFG(qu,8))},token:t,providedIn:"any"}),t})(),cc=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[uc]}),t})(),lc=(()=>{class t{constructor(t,e,n){this.http=t,this.storage=e,this.db=n,this.url="https://lockers-59f72-default-rtdb.firebaseio.com"}crearImagen(t){return this.http.post("https://lockers-59f72-default-rtdb.firebaseio.com/Images.json",t).pipe((0,Mt.U)(e=>(t.id=e.name,t)))}actualizarImagen(t){const e={id:t.id,deposito:t.deposito,usuario:t.usuario,udp:t.udp,id_usuario:t.id_usuario,id_deposito:t.id_deposito,id_plantilla:t.id_plantilla,campoubicacion:t.campoubicacion,campo1:t.campo1,campo2:t.campo2,campo3:t.campo3,campo4:t.campo4,campo5:t.campo5,campo6:t.campo6,campo7:t.campo7,campo8:t.campo8,campo9:t.campo9,campo10:t.campo10,campo11:t.campo11,campo12:t.campo12,campo13:t.campo13,campo14:t.campo14,campo15:t.campo15,campo16:t.campo16,campo17:t.campo17,campo18:t.campo18,campo19:t.campo19,campo20:t.campo20,campo21:t.campo21,campo22:t.campo22,campo23:t.campo23,campo24:t.campo24,campo25:t.campo25,campo26:t.campo26,campo27:t.campo27,campo28:t.campo28,campo29:t.campo29,campo30:t.campo30,estado:t.estado,pathimagen:t.pathimagen};return e.id="",this.http.put(`https://lockers-59f72-default-rtdb.firebaseio.com/Images/${t.id}.json`,e)}addSponsor(t){const e={id:t.id,deposito:t.deposito,usuario:t.usuario,udp:t.udp,id_usuario:t.id_usuario,id_deposito:t.id_deposito,id_plantilla:t.id_plantilla,campoubicacion:t.campoubicacion,campo1:t.campo1,campo2:t.campo2,campo3:t.campo3,campo4:t.campo4,campo5:t.campo5,campo6:t.campo6,campo7:t.campo7,campo8:t.campo8,campo9:t.campo9,campo10:t.campo10,campo11:t.campo11,campo12:t.campo12,campo13:t.campo13,campo14:t.campo14,campo15:t.campo15,campo16:t.campo16,campo17:t.campo17,campo18:t.campo18,campo19:t.campo19,campo20:t.campo20,campo21:t.campo21,campo22:t.campo22,campo23:t.campo23,campo24:t.campo24,campo25:t.campo25,campo26:t.campo26,campo27:t.campo27,campo28:t.campo28,campo29:t.campo29,campo30:t.campo30,estado:t.estado,pathimagen:t.pathimagen};return e.id="",this.http.put(`https://lockers-59f72-default-rtdb.firebaseio.com/Images/${t.id}.json`,e)}borrarheroe(t){return this.http.delete(`https://lockers-59f72-default-rtdb.firebaseio.com/Images/${t}.json`)}GetHeroeID(t){return this.http.get(`https://lockers-59f72-default-rtdb.firebaseio.com/Images/${t}.json`)}GetHeroes(){return this.http.get("https://lockers-59f72-default-rtdb.firebaseio.com/Images.json").pipe((0,Mt.U)(this.crearArreglo))}crearArreglo(t){const e=[];return console.log(t),null===t?[]:(Object.keys(t).forEach(n=>{const r=t[n];r.id=n,e.push(r)}),e)}getAllDataImages(){return this.messages=this.db.list("Images"),this.messages.valueChanges()}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(In),r.LFG(bu),r.LFG(uc))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function hc(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"button",26),r.NdJ("click",function(){return r.CHM(t),r.oxw().imagenes.estado=!0}),r._UZ(1,"i",27),r._uU(2,"Activo"),r.qZA()}}function dc(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"button",28),r.NdJ("click",function(){return r.CHM(t),r.oxw().imagenes.estado=!1}),r._UZ(1,"i",29),r._uU(2,"Inactivo"),r.qZA()}}function pc(t,e){1&t&&(r.TgZ(0,"small",30),r._uU(1," Debe seleccionar una imagen"),r.qZA())}function fc(t,e){if(1&t&&(r.TgZ(0,"div"),r.TgZ(1,"h3"),r._uU(2,"Results!"),r.qZA(),r._UZ(3,"img",31),r._UZ(4,"br"),r.TgZ(5,"a",32),r._uU(6,"Download Me!"),r.qZA(),r.qZA()),2&t){const t=e.ngIf;r.xp6(3),r.Q6J("src",t,r.LSH),r.xp6(2),r.Q6J("href",t,r.LSH)}}let gc=(()=>{class t{constructor(t,e,n,r){this.storage=t,this.imageService=e,this.capturarparametro=n,this.imagenes={id:"",deposito:"",usuario:"",udp:"",id_usuario:"",id_deposito:"",id_plantilla:"",campo1:"",campo2:"",campo3:"",campo4:"",campo5:"",campo6:"",campo7:"",campo8:"",campo9:"",campo10:"",campo11:"",campo12:"",campo13:"",campo14:"",campo15:"",campo16:"",campo17:"",campo18:"",campo19:"",campo20:"",campo21:"",campo22:"",campo23:"",campo24:"",campo25:"",campo26:"",campo27:"",campo28:"",campo29:"",campo30:"",campoubicacion:"",estado:!0,pathimagen:!1},this.imageType="",this.fileError=!1,this.capturarparametro.params.subscribe(t=>{this.ids=t.id,console.log("Ids:"+this.ids),"nuevo"!==this.ids&&this.imageService.GetHeroeID(this.ids).subscribe(t=>{this.imagenes=t,this.imagenes.id=this.ids})})}ngOnInit(){}uploads(t){this.fileError=!1,this.path=t.target.files,this.archivos=t.target.files,this.imageType=t.target.files[0].type,console.log("upload path: "+this.path+" \n "+t.target.files[0]),console.log("upload imageType: "+this.imageType),console.log("archivos: "+this.archivos.length)}upload(t){console.log(t)}guardarf(t){if(t.invalid)return void console.log("Formulario no valido");let e;if(Ms().fire({icon:"info",title:"Espere",text:"Guardando Informaci\xf3n",allowOutsideClick:!1}),Ms().showLoading(),this.imagenes.id){e=this.imageService.actualizarImagen(this.imagenes),this.imageName=this.ids;const t=`Test/${this.imageName}`;console.log("path: "+t);const n=this.storage.ref(t);console.log("ref: "+n),this.storage.upload(t,this.path).then(()=>{n.getDownloadURL().subscribe(t=>{console.log("url: "+t),this.downloadURL=t;const e=new Fs;e.id=this.ids,e.deposito=this.imagenes.deposito,e.usuario=this.imagenes.usuario,e.udp=this.imagenes.udp,e.id_usuario=this.imagenes.id_usuario,e.id_deposito=this.imagenes.id_deposito,e.id_plantilla=this.imagenes.id_plantilla,e.campoubicacion=this.imagenes.campoubicacion,e.campo1=this.imagenes.campo1,e.campo2=this.imagenes.campo2,e.campo3=this.imagenes.campo3,e.campo4=this.imagenes.campo4,e.campo5=this.imagenes.campo5,e.campo6=this.imagenes.campo6,e.campo7=this.imagenes.campo7,e.campo8=this.imagenes.campo8,e.campo9=this.imagenes.campo9,e.campo10=this.imagenes.campo10,e.campo11=this.imagenes.campo11,e.campo12=this.imagenes.campo12,e.campo13=this.imagenes.campo13,e.campo14=this.imagenes.campo14,e.campo15=this.imagenes.campo15,e.campo16=this.imagenes.campo16,e.campo17=this.imagenes.campo17,e.campo18=this.imagenes.campo18,e.campo19=this.imagenes.campo19,e.campo20=this.imagenes.campo20,e.campo21=this.imagenes.campo21,e.campo22=this.imagenes.campo22,e.campo23=this.imagenes.campo23,e.campo24=this.imagenes.campo24,e.campo25=this.imagenes.campo25,e.campo26=this.imagenes.campo26,e.campo27=this.imagenes.campo27,e.campo28=this.imagenes.campo28,e.campo29=this.imagenes.campo29,e.campo30=this.imagenes.campo30,e.estado=this.imagenes.estado,e.pathimagen=!1,this.dbAddSponsor=this.imageService.addSponsor(e).subscribe(t=>{this.dbAddSponsor.unsubscribe(),Ms().fire({title:"Registro completado de la Im\xe1gen",icon:"success",text:"Se completo el registro del documento con \xe9xito."})})})}).catch(t=>{console.log(t),Ms().fire({title:"Algo sali\xf3 mal!",icon:"error",text:"Algo sali\xf3 mal al subir la imagen de su empresa, int\xe9ntalo de nuevo."})})}else e=this.imageService.crearImagen(this.imagenes);e.subscribe(t=>{Ms().fire({title:this.imagenes.deposito,text:"Se Actualizo correctamente",icon:"success"})})}guardar(t){for(const e of this.archivos)console.log(` nombre: ${e.name?e.name:"NOT SUPPORTED"}  tipo: ${e.type?e.type:"NOT SUPPORTED"}  tama\xf1o: ${e.size?e.size:"NOT SUPPORTED"}`)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(bu),r.Y36(lc),r.Y36(zi),r.Y36(fs))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-insert-image"]],decls:50,vars:7,consts:[[1,"container"],[1,"row"],[1,"col","text-right"],["routerLink","/users",1,"btn","btn-danger"],[1,"fa","fa-arrow-left"],[1,"row","animated","fadeIn","faster"],[1,"col"],[3,"ngSubmit"],["f","ngForm"],[1,"form-group"],["name","id","type","text","disabled","disabled","placeholder","Firebase ID",1,"form-control",3,"ngModel","ngModelChange"],[1,"form-text","text-muted"],["name","nombre","type","text","disabled","disabled","required","","placeholder","Nombre de la imagen",1,"form-control",3,"ngModel","ngModelChange"],["name","poder","type","text","disabled","disabled","required","","placeholder","Path",1,"form-control",3,"ngModel","ngModelChange"],["class","btn btn-outline-success w-50","type","button",3,"click",4,"ngIf"],["class","btn btn-outline-danger w-50","type","button",3,"click",4,"ngIf"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"material-icons"],["multiple","","type","file",1,"form-control",3,"change"],["class","text-danger",4,"ngIf"],[1,"form-group","text-center"],["type","submit","disabled","",1,"btn","btn-primary","w-25"],[1,"fa","fa-save"],[4,"ngIf"],["type","button",1,"btn","btn-outline-success","w-50",3,"click"],[1,"fa","fa-smile-wink"],["type","button",1,"btn","btn-outline-danger","w-50",3,"click"],[1,"fa","fa-dizzy"],[1,"text-danger"],[2,"height","50",3,"src"],["target","_blank","rel","noopener",3,"href"]],template:function(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"div",0),r.TgZ(1,"h1"),r._uU(2,"Im\xe1genes"),r.qZA(),r._UZ(3,"hr"),r.TgZ(4,"div",1),r.TgZ(5,"div",2),r.TgZ(6,"button",3),r._UZ(7,"i",4),r._uU(8," Regresar "),r.qZA(),r.qZA(),r.qZA(),r.TgZ(9,"div",5),r.TgZ(10,"div",6),r.TgZ(11,"form",7,8),r.NdJ("ngSubmit",function(){r.CHM(t);const n=r.MAs(12);return e.guardar(n)}),r.TgZ(13,"div",9),r.TgZ(14,"label"),r._uU(15,"Firebase ID"),r.qZA(),r.TgZ(16,"input",10),r.NdJ("ngModelChange",function(t){return e.imagenes.id=t}),r.qZA(),r.TgZ(17,"small",11),r._uU(18,"Campo autogenerado"),r.qZA(),r.qZA(),r.TgZ(19,"div",9),r.TgZ(20,"label"),r._uU(21,"NOMBRE DEL DEPOSITO"),r.qZA(),r.TgZ(22,"input",12),r.NdJ("ngModelChange",function(t){return e.imagenes.deposito=t}),r.qZA(),r.qZA(),r.TgZ(23,"div",9),r.TgZ(24,"label"),r._uU(25,"USUARIO"),r.qZA(),r.TgZ(26,"input",13),r.NdJ("ngModelChange",function(t){return e.imagenes.usuario=t}),r.qZA(),r.qZA(),r.TgZ(27,"div",9),r.TgZ(28,"label"),r._uU(29,"ESTADO IM\xc1GEN"),r.qZA(),r._UZ(30,"br"),r.YNc(31,hc,3,0,"button",14),r.YNc(32,dc,3,0,"button",15),r.qZA(),r.TgZ(33,"div",16),r.TgZ(34,"div",17),r.TgZ(35,"span",18),r.TgZ(36,"i",19),r._uU(37,"insert_photo"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(38,"div",6),r.TgZ(39,"label"),r._uU(40,"Seleccione los documentos:"),r.qZA(),r.TgZ(41,"input",20),r.NdJ("change",function(t){return e.uploads(t)}),r.qZA(),r.YNc(42,pc,2,0,"small",21),r.qZA(),r.qZA(),r._UZ(43,"hr"),r.TgZ(44,"div",22),r.TgZ(45,"button",23),r._UZ(46,"i",24),r._uU(47,"Guardar"),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(48,"div",0),r.YNc(49,fc,7,2,"div",25),r.qZA(),r.qZA()}2&t&&(r.xp6(16),r.Q6J("ngModel",e.imagenes.id),r.xp6(6),r.Q6J("ngModel",e.imagenes.deposito),r.xp6(4),r.Q6J("ngModel",e.imagenes.usuario),r.xp6(5),r.Q6J("ngIf",e.imagenes.estado),r.xp6(1),r.Q6J("ngIf",!e.imagenes.estado),r.xp6(10),r.Q6J("ngIf",e.fileError),r.xp6(7),r.Q6J("ngIf",e.downloadURL))},directives:[gs,Be,le,Me,Ht,ce,Ve,Qe,q],styles:[""]}),t})(),mc=(()=>{class t{constructor(t,e,n,r,i){this.fb=t,this.storage=e,this.imageService=n,this.capturarparametro=r,this.router=i,this.Loginform=new De({usuario:new Ne(null),password:new Ne(null)})}ngOnInit(){}register(){var t,e;const n=null===(t=this.Loginform.get("usuario"))||void 0===t?void 0:t.value,r=null===(e=this.Loginform.get("password"))||void 0===e?void 0:e.value;"lockers"===n&&"admin"===r?(Ms().fire({title:"EXITO",allowOutsideClick:!1,icon:"success",text:"DATOS CORRECTOS"}),this.Loginform.reset(),this.router.navigateByUrl("/users")):Ms().fire({title:"ERROR",icon:"error",text:"DATOS INCORRECTOS."})}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(tn),r.Y36(bu),r.Y36(lc),r.Y36(zi),r.Y36(fs))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-login"]],decls:19,vars:1,consts:[["src","./assets/img/login/wave.png",1,"wave"],[1,"container"],[1,"img"],["src","./assets/img/login/bg.svg"],[1,"login-content"],[3,"formGroup","ngSubmit"],["src","./assets/img/login/avatar.svg"],[1,"title"],[1,"form-group"],["for","exampleInputEmail1"],["type","text","formControlName","usuario","id","exampleInputEmail1","aria-describedby","emailHelp","placeholder","Ingrese su Usuario",1,"form-control"],["for","exampleInputPassword1"],["type","password","formControlName","password","id","exampleInputPassword1","placeholder","Ingrese su Contrase\xf1a",1,"form-control"],["type","submit",1,"btn","btn-primary"]],template:function(t,e){1&t&&(r._UZ(0,"img",0),r.TgZ(1,"div",1),r.TgZ(2,"div",2),r._UZ(3,"img",3),r.qZA(),r.TgZ(4,"div",4),r.TgZ(5,"form",5),r.NdJ("ngSubmit",function(){return e.register()}),r._UZ(6,"img",6),r.TgZ(7,"h2",7),r._uU(8,"Bienvenido"),r.qZA(),r.TgZ(9,"div",8),r.TgZ(10,"label",9),r._uU(11,"USUARIO"),r.qZA(),r._UZ(12,"input",10),r.qZA(),r.TgZ(13,"div",8),r.TgZ(14,"label",11),r._uU(15,"CONTRASE\xd1A"),r.qZA(),r._UZ(16,"input",12),r.qZA(),r.TgZ(17,"button",13),r._uU(18,"ENVIAR"),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&t&&(r.xp6(5),r.Q6J("formGroup",e.Loginform))},directives:[Be,le,He,Ht,ce,Ke],styles:['.wave[_ngcontent-%COMP%]{position:fixed;bottom:0;left:0;height:100%;z-index:-1}.container[_ngcontent-%COMP%]{width:100vw;height:100vh;display:grid;grid-template-columns:repeat(2,1fr);grid-gap:7rem;padding:0 2rem}.img[_ngcontent-%COMP%]{justify-content:flex-end}.img[_ngcontent-%COMP%], .login-content[_ngcontent-%COMP%]{display:flex;align-items:center}.login-content[_ngcontent-%COMP%]{justify-content:flex-start;text-align:center}.img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:500px}form[_ngcontent-%COMP%]{width:360px}.login-content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100px}.login-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:15px 0;color:#333;text-transform:uppercase;font-size:2.9rem}.login-content[_ngcontent-%COMP%]   .input-div[_ngcontent-%COMP%]{position:relative;display:grid;grid-template-columns:7% 93%;margin:25px 0;padding:5px 0;border-bottom:2px solid #d9d9d9}.login-content[_ngcontent-%COMP%]   .input-div.one[_ngcontent-%COMP%]{margin-top:0}.i[_ngcontent-%COMP%]{color:#d9d9d9;display:flex;justify-content:center;align-items:center}.i[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{transition:.3s}.input-div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:relative;height:45px}.input-div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > h5[_ngcontent-%COMP%]{position:absolute;left:10px;top:50%;transform:translateY(-50%);color:#999;font-size:18px;transition:.3s}.input-div[_ngcontent-%COMP%]:after, .input-div[_ngcontent-%COMP%]:before{content:"";position:absolute;bottom:-2px;width:0;height:2px;background-color:#38d39f;transition:.4s}.input-div[_ngcontent-%COMP%]:before{right:50%}.input-div[_ngcontent-%COMP%]:after{left:50%}.input-div.focus[_ngcontent-%COMP%]:after, .input-div.focus[_ngcontent-%COMP%]:before{width:50%}.input-div.focus[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > h5[_ngcontent-%COMP%]{top:-5px;font-size:15px}.input-div.focus[_ngcontent-%COMP%] > .i[_ngcontent-%COMP%] > i[_ngcontent-%COMP%]{color:#38d39f}.input-div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]{position:absolute;left:0;top:0;width:100%;height:100%;border:none;outline:none;background:none;padding:.5rem .7rem;font-size:1.2rem;color:#555;font-family:poppins,sans-serif}.input-div.pass[_ngcontent-%COMP%]{margin-bottom:4px}a[_ngcontent-%COMP%]{display:block;text-align:right;text-decoration:none;color:#999;font-size:.9rem;transition:.3s}a[_ngcontent-%COMP%]:hover{color:#38d39f}.btn[_ngcontent-%COMP%]{display:block;width:100%;height:50px;border-radius:25px;outline:none;border:none;background-color:#303030;background-size:200%;font-size:1.2rem;color:#fff;font-family:Poppins,sans-serif;text-transform:uppercase;margin:1rem 0;cursor:pointer;transition:.5s}.btn[_ngcontent-%COMP%]:hover{background-position:100%}@media screen and (max-width:1050px){.container[_ngcontent-%COMP%]{grid-gap:5rem}}@media screen and (max-width:1000px){form[_ngcontent-%COMP%]{width:290px}.login-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.4rem;margin:8px 0}.img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:400px}}@media screen and (max-width:900px){.container[_ngcontent-%COMP%]{grid-template-columns:1fr}.img[_ngcontent-%COMP%], .wave[_ngcontent-%COMP%]{display:none}.login-content[_ngcontent-%COMP%]{justify-content:center}}']}),t})();class yc{constructor(){}}let vc=(()=>{class t{constructor(t,e,n){this.http=t,this.db=e,this.storage=n,this.dbPath="/Storage",this.listaestate=[!0],this.tutorialsRef=e.list(this.dbPath)}getAll(){return this.tutorialsRef}create(t){return this.tutorialsRef.push(t)}crearImagen(t){return this.http.post("https://lockers-59f72-default-rtdb.firebaseio.com/Storage.json",t).pipe((0,Mt.U)(e=>(t.id=e.name,t)))}GetHeroes(){return this.http.get("https://lockers-59f72-default-rtdb.firebaseio.com/Images.json").pipe((0,Mt.U)(this.AllDataImages))}actualizarIdImagen(t){return this.http.put(`https://lockers-59f72-default-rtdb.firebaseio.com/Images/${t.id}.json`,{id:t.id,deposito:t.deposito,usuario:t.usuario,udp:t.udp,id_usuario:t.id_usuario,id_deposito:t.id_deposito,id_plantilla:t.id_plantilla,campoubicacion:t.campoubicacion,campo1:t.campo1,campo2:t.campo2,campo3:t.campo3,campo4:t.campo4,campo5:t.campo5,campo6:t.campo6,campo7:t.campo7,campo8:t.campo8,campo9:t.campo9,campo10:t.campo10,campo11:t.campo11,campo12:t.campo12,campo13:t.campo13,campo14:t.campo14,campo15:t.campo15,campo16:t.campo16,campo17:t.campo17,campo18:t.campo18,campo19:t.campo19,campo20:t.campo20,campo21:t.campo21,campo22:t.campo22,campo23:t.campo23,campo24:t.campo24,campo25:t.campo25,campo26:t.campo26,campo27:t.campo27,campo28:t.campo28,campo29:t.campo29,campo30:t.campo30,estado:t.estado,pathimagen:t.pathimagen})}AllDataImages(t){const e=[];return null===t?[]:(Object.keys(t).forEach(n=>{const r=t[n];r.id=n,e.push(r)}),e)}actualizarImagen(t){return this.http.put(`https://lockers-59f72-default-rtdb.firebaseio.com/Storage/${t.id}.json`,{id:t.id,nombre:t.nombre,url:t.url,deposito:t.deposito,udp:t.udp})}actualizaridImagen(t){return this.http.put(`https://lockers-59f72-default-rtdb.firebaseio.com/Images/${t.id}.json`,{id:t.id,deposito:t.deposito,usuario:t.usuario,udp:t.udp,id_usuario:t.id_usuario,id_deposito:t.id_deposito,id_plantilla:t.id_plantilla,campoubicacion:t.campoubicacion,campo1:t.campo1,campo2:t.campo2,campo3:t.campo3,campo4:t.campo4,campo5:t.campo5,campo6:t.campo6,campo7:t.campo7,campo8:t.campo8,campo9:t.campo9,campo10:t.campo10,campo11:t.campo11,campo12:t.campo12,campo13:t.campo13,campo14:t.campo14,campo15:t.campo15,campo16:t.campo16,campo17:t.campo17,campo18:t.campo18,campo19:t.campo19,campo20:t.campo20,campo21:t.campo21,campo22:t.campo22,campo23:t.campo23,campo24:t.campo24,campo25:t.campo25,campo26:t.campo26,campo27:t.campo27,campo28:t.campo28,campo29:t.campo29,campo30:t.campo30,estado:t.estado,pathimagen:t.pathimagen})}update(t,e){return this.tutorialsRef.update(t,e)}delete(t){return this.tutorialsRef.remove(t)}deleteAll(){return this.tutorialsRef.remove()}subirImagenes(t,e){for(const n of t){n.uploading=!0;const t=this.generateFileName(n.name),r=this.storage.ref(t),i=this.storage.upload(t,n.file);n.uploadPercent=i.percentageChanges(),i.snapshotChanges().pipe(Lr(()=>{r.getDownloadURL().subscribe(t=>{n.downloadURL=t,console.log("res: "+t);const r=new yc;r.nombre=n.name,r.udp=this.Split(n.name),console.log(this.Split(n.name)),console.log("UDP: "+r.udp),console.log("nombre file : "+n.downloadURL),r.url=t,r.deposito=e,this.crearImagen(r).subscribe(t=>{this.actualizarImagen(t).subscribe()})}),n.uploading=!1})).subscribe(t=>{})}}updateidImages(t){for(const e of t)this.dataimage=e,this.actualizaridImagen(this.dataimage).subscribe()}generateFileName(t){return`Test/${t}`}getDataStorageFilterMessages(t){return this.messages=this.db.list("Storage",e=>e.orderByChild("deposito").equalTo(t)),this.messages.valueChanges()}getDataStorageFilterDeposito_UDP(t,e){return this.messages=this.db.list("Storage",n=>n.orderByChild("deposito").equalTo(t)&&n.orderByChild("udp").equalTo(e)),this.messages.valueChanges()}getDataStorageFilterDeposito_UDPestado(t,e){return this.messages=this.db.list("Storage",n=>n.orderByChild("deposito").equalTo(t)&&n.orderByChild("udp").equalTo(e)),this.messages.valueChanges()}getAllDataStorage(){return this.messages=this.db.list("Storage"),this.messages.valueChanges()}getKeys(){}Split(t){t.split("_");const e=t.split("_")[1];return t.split("_"),e}Update_State_images(t){this.listaestate=[];for(const e of t)this.dbs=this.getDataStorageFilterDeposito_UDPestado(e.deposito,e.udp).subscribe(t=>{0===t.length?this.listaestate.push(!1):this.actualizardataidImagen({id:e.id,deposito:e.deposito,usuario:e.usuario,udp:e.udp,id_usuario:e.id_usuario,id_deposito:e.id_deposito,id_plantilla:e.id_plantilla,campoubicacion:e.campoubicacion,campo1:e.campo1,campo2:e.campo2,campo3:e.campo3,campo4:e.campo4,campo5:e.campo5,campo6:e.campo6,campo7:e.campo7,campo8:e.campo8,campo9:e.campo9,campo10:e.campo10,campo11:e.campo11,campo12:e.campo12,campo13:e.campo13,campo14:e.campo14,campo15:e.campo15,campo16:e.campo16,campo17:e.campo17,campo18:e.campo18,campo19:e.campo19,campo20:e.campo20,campo21:e.campo21,campo22:e.campo22,campo23:e.campo23,campo24:e.campo24,campo25:e.campo25,campo26:e.campo26,campo27:e.campo27,campo28:e.campo28,campo29:e.campo29,campo30:e.campo30,estado:e.estado,pathimagen:!0}).subscribe()})}actualizardataidImagen(t){return this.http.put(`https://lockers-59f72-default-rtdb.firebaseio.com/Images/${t.id}.json`,{id:t.id,deposito:t.deposito,usuario:t.usuario,udp:t.udp,id_usuario:t.id_usuario,id_deposito:t.id_deposito,id_plantilla:t.id_plantilla,campoubicacion:t.campoubicacion,campo1:t.campo1,campo2:t.campo2,campo3:t.campo3,campo4:t.campo4,campo5:t.campo5,campo6:t.campo6,campo7:t.campo7,campo8:t.campo8,campo9:t.campo9,campo10:t.campo10,campo11:t.campo11,campo12:t.campo12,campo13:t.campo13,campo14:t.campo14,campo15:t.campo15,campo16:t.campo16,campo17:t.campo17,campo18:t.campo18,campo19:t.campo19,campo20:t.campo20,campo21:t.campo21,campo22:t.campo22,campo23:t.campo23,campo24:t.campo24,campo25:t.campo25,campo26:t.campo26,campo27:t.campo27,campo28:t.campo28,campo29:t.campo29,campo30:t.campo30,estado:t.estado,pathimagen:!0})}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(In),r.LFG(uc),r.LFG(bu))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const _c=function(t,e){return["/register",t,e]};function bc(t,e){if(1&t&&(r.TgZ(0,"button",20),r._UZ(1,"i",25),r.qZA()),2&t){const t=r.oxw().$implicit;r.Q6J("routerLink",r.WLB(1,_c,t.deposito,t.udp))}}const wc=function(t){return["/images",t]};function Cc(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"tr"),r.TgZ(1,"td"),r._uU(2),r.qZA(),r.TgZ(3,"td"),r.TgZ(4,"button",20),r._UZ(5,"i",21),r.qZA(),r.TgZ(6,"button",22),r.NdJ("click",function(){const e=r.CHM(t),n=e.$implicit,i=e.index;return r.oxw(2).borrar(n,i)}),r._UZ(7,"i",23),r.qZA(),r.qZA(),r.TgZ(8,"td"),r.YNc(9,bc,2,4,"button",24),r.qZA(),r.TgZ(10,"td"),r._uU(11),r.qZA(),r.TgZ(12,"td"),r._uU(13),r.qZA(),r.TgZ(14,"td"),r._uU(15),r.qZA(),r.TgZ(16,"td"),r._uU(17),r.qZA(),r.TgZ(18,"td"),r._uU(19),r.qZA(),r.TgZ(20,"td"),r._uU(21),r.qZA(),r.TgZ(22,"td"),r._uU(23),r.qZA(),r.TgZ(24,"td"),r._uU(25),r.qZA(),r.TgZ(26,"td"),r._uU(27),r.qZA(),r.TgZ(28,"td"),r._uU(29),r.qZA(),r.TgZ(30,"td"),r._uU(31),r.qZA(),r.TgZ(32,"td"),r._uU(33),r.qZA(),r.TgZ(34,"td"),r._uU(35),r.qZA(),r.TgZ(36,"td"),r._uU(37),r.qZA(),r.TgZ(38,"td"),r._uU(39),r.qZA(),r.TgZ(40,"td"),r._uU(41),r.qZA(),r.TgZ(42,"td"),r._uU(43),r.qZA(),r.TgZ(44,"td"),r._uU(45),r.qZA(),r.TgZ(46,"td"),r._uU(47),r.qZA(),r.TgZ(48,"td"),r._uU(49),r.qZA(),r.TgZ(50,"td"),r._uU(51),r.qZA(),r.TgZ(52,"td"),r._uU(53),r.qZA(),r.TgZ(54,"td"),r._uU(55),r.qZA(),r.TgZ(56,"td"),r._uU(57),r.qZA(),r.TgZ(58,"td"),r._uU(59),r.qZA(),r.TgZ(60,"td"),r._uU(61),r.qZA(),r.TgZ(62,"td"),r._uU(63),r.qZA(),r.TgZ(64,"td"),r._uU(65),r.qZA(),r.TgZ(66,"td"),r._uU(67),r.qZA(),r.TgZ(68,"td"),r._uU(69),r.qZA(),r.TgZ(70,"td"),r._uU(71),r.qZA(),r.TgZ(72,"td"),r._uU(73),r.qZA(),r.TgZ(74,"td"),r._uU(75),r.qZA(),r.qZA()}if(2&t){const t=e.$implicit,n=e.index;r.xp6(2),r.Oqu(n+1),r.xp6(2),r.Q6J("routerLink",r.VKq(36,wc,t.id)),r.xp6(5),r.Q6J("ngIf",t.pathimagen),r.xp6(2),r.Oqu(t.deposito),r.xp6(2),r.Oqu(t.usuario),r.xp6(2),r.Oqu(t.campoubicacion),r.xp6(2),r.Oqu(t.campo1),r.xp6(2),r.Oqu(t.campo2),r.xp6(2),r.Oqu(t.campo3),r.xp6(2),r.Oqu(t.campo4),r.xp6(2),r.Oqu(t.campo5),r.xp6(2),r.Oqu(t.campo6),r.xp6(2),r.Oqu(t.campo7),r.xp6(2),r.Oqu(t.campo8),r.xp6(2),r.Oqu(t.campo9),r.xp6(2),r.Oqu(t.campo10),r.xp6(2),r.Oqu(t.campo11),r.xp6(2),r.Oqu(t.campo12),r.xp6(2),r.Oqu(t.campo13),r.xp6(2),r.Oqu(t.campo14),r.xp6(2),r.Oqu(t.campo15),r.xp6(2),r.Oqu(t.campo16),r.xp6(2),r.Oqu(t.campo17),r.xp6(2),r.Oqu(t.campo18),r.xp6(2),r.Oqu(t.campo19),r.xp6(2),r.Oqu(t.campo20),r.xp6(2),r.Oqu(t.campo21),r.xp6(2),r.Oqu(t.campo22),r.xp6(2),r.Oqu(t.campo23),r.xp6(2),r.Oqu(t.campo24),r.xp6(2),r.Oqu(t.campo25),r.xp6(2),r.Oqu(t.campo26),r.xp6(2),r.Oqu(t.campo27),r.xp6(2),r.Oqu(t.campo28),r.xp6(2),r.Oqu(t.campo29),r.xp6(2),r.Oqu(t.campo30)}}function Tc(t,e){if(1&t&&(r.TgZ(0,"table",16),r.TgZ(1,"thead",17),r.TgZ(2,"tr"),r.TgZ(3,"th",18),r._uU(4,"#"),r.qZA(),r.TgZ(5,"th",18),r._uU(6,"Tools"),r.qZA(),r.TgZ(7,"th",18),r._uU(8,"Im\xe1gen"),r.qZA(),r.TgZ(9,"th",18),r._uU(10,"Deposito"),r.qZA(),r.TgZ(11,"th",18),r._uU(12,"Usuario"),r.qZA(),r.TgZ(13,"th",18),r._uU(14,"Ubicaci\xf3n"),r.qZA(),r.TgZ(15,"th",18),r._uU(16,"Campo1"),r.qZA(),r.TgZ(17,"th",18),r._uU(18,"Campo2"),r.qZA(),r.TgZ(19,"th",18),r._uU(20,"Campo3"),r.qZA(),r.TgZ(21,"th",18),r._uU(22,"Campo4"),r.qZA(),r.TgZ(23,"th",18),r._uU(24,"Campo5"),r.qZA(),r.TgZ(25,"th",18),r._uU(26,"Campo6"),r.qZA(),r.TgZ(27,"th",18),r._uU(28,"Campo7"),r.qZA(),r.TgZ(29,"th",18),r._uU(30,"Campo8"),r.qZA(),r.TgZ(31,"th",18),r._uU(32,"Campo9"),r.qZA(),r.TgZ(33,"th",18),r._uU(34,"Campo10"),r.qZA(),r.TgZ(35,"th",18),r._uU(36,"Campo11"),r.qZA(),r.TgZ(37,"th",18),r._uU(38,"Campo12"),r.qZA(),r.TgZ(39,"th",18),r._uU(40,"Campo13"),r.qZA(),r.TgZ(41,"th",18),r._uU(42,"Campo14"),r.qZA(),r.TgZ(43,"th",18),r._uU(44,"Campo15"),r.qZA(),r.TgZ(45,"th",18),r._uU(46,"Campo16"),r.qZA(),r.TgZ(47,"th",18),r._uU(48,"Campo17"),r.qZA(),r.TgZ(49,"th",18),r._uU(50,"Campo18"),r.qZA(),r.TgZ(51,"th",18),r._uU(52,"Campo19"),r.qZA(),r.TgZ(53,"th",18),r._uU(54,"Campo20"),r.qZA(),r.TgZ(55,"th",18),r._uU(56,"Campo21"),r.qZA(),r.TgZ(57,"th",18),r._uU(58,"Campo22"),r.qZA(),r.TgZ(59,"th",18),r._uU(60,"Campo23"),r.qZA(),r.TgZ(61,"th",18),r._uU(62,"Campo24"),r.qZA(),r.TgZ(63,"th",18),r._uU(64,"Campo25"),r.qZA(),r.TgZ(65,"th",18),r._uU(66,"Campo26"),r.qZA(),r.TgZ(67,"th",18),r._uU(68,"Campo27"),r.qZA(),r.TgZ(69,"th",18),r._uU(70,"Campo28"),r.qZA(),r.TgZ(71,"th",18),r._uU(72,"Campo29"),r.qZA(),r.TgZ(73,"th",18),r._uU(74,"Campo30"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(75,"tbody"),r.YNc(76,Cc,76,38,"tr",19),r.qZA(),r.qZA()),2&t){const t=r.oxw();r.xp6(76),r.Q6J("ngForOf",t.heroesarray)}}function Sc(t,e){1&t&&(r.TgZ(0,"div",26),r.TgZ(1,"h4",27),r._uU(2,"No existen registros"),r.qZA(),r.TgZ(3,"p"),r._UZ(4,"i",28),r.qZA(),r.qZA())}function Ec(t,e){1&t&&(r.TgZ(0,"div",29),r.TgZ(1,"h4",27),r._uU(2,"Cargando"),r.qZA(),r.TgZ(3,"p"),r._UZ(4,"i",30),r.qZA(),r.TgZ(5,"p",31),r._uU(6," Espere por favor "),r.qZA(),r.qZA())}let xc=(()=>{class t{constructor(t,e){this.imageService=t,this.storageService=e,this.heroesarray=[],this.imageidarray=[],this.cargando=!1,this.filemodelarray=[],this.estado=!1,this.listaestado=[]}ngOnInit(){this.cargando=!0,this.imageService.getAllDataImages().subscribe(t=>{this.heroesarray=t,this.cargando=!1,this.storageService.GetHeroes().subscribe(t=>{this.imageidarray=t,this.storageService.Update_State_images(this.imageidarray)})})}borrar(t,e){Ms().fire({icon:"question",title:`\xbfEsta seguro de borrar a ${t.deposito}?`,showCancelButton:!0}).then(n=>{n.value&&(this.heroesarray.splice(e,1),this.imageService.borrarheroe(t.id).subscribe())})}verImagen(t,e){}Split(){let t="Comteco_04_revisar.pdf";t.split("_"),t.split("_"),t.split("_")}ExistImage(t,e){return this.storageService.getDataStorageFilterDeposito_UDP(t,e).subscribe(t=>{this.filemodelarray=t}),this.estado}Keys(){this.storageService.GetHeroes().subscribe(t=>{this.imageidarray=t})}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(lc),r.Y36(vc))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-users"]],decls:20,vars:3,consts:[[1,"container-fluid"],[1,"jumbotron","jumbotron-fluid"],[1,"container-fluid","text-center"],[1,"display-5"],[1,"row"],[1,"col-md-1"],[1,"col-md-10","text-center"],[1,"row","mb-3"],[2,"visibility","visible"],[1,"col","text-right"],["routerLink","/company",1,"btn","btn-primary"],[1,"fa","fa-plus"],[1,"table-responsive","text-nowrap"],["class","table table-striped table  animated fadeIn faster animated fadeIn",4,"ngIf"],["class","alert alert-warning text-center mt-3",4,"ngIf"],["class","alert alert-info text-center mt-3",4,"ngIf"],[1,"table","table-striped","table","animated","fadeIn","faster","animated","fadeIn"],[1,"thead-dark"],["scope","col"],[4,"ngFor","ngForOf"],[1,"btn","btn-primary",3,"routerLink"],[1,"fa","fa-pen"],[1,"btn","btn-danger",3,"click"],[1,"fa","fa-trash"],["class","btn btn-primary",3,"routerLink",4,"ngIf"],["aria-hidden","true",1,"fa","fa-user-circle"],[1,"alert","alert-warning","text-center","mt-3"],[1,"alert-heading"],[1,"fa","fa-exclamation","fa-2x"],[1,"alert","alert-info","text-center","mt-3"],[1,"fa","fa-sync-alt","fa-spin","fa-2x"],[1,"mb-0"]],template:function(t,e){1&t&&(r.TgZ(0,"div",0),r.TgZ(1,"div"),r.TgZ(2,"div",1),r.TgZ(3,"div",2),r.TgZ(4,"h2",3),r._uU(5,"Listado de todos Registros"),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(6,"div",4),r._UZ(7,"div",5),r.TgZ(8,"div",6),r.TgZ(9,"div",7),r.TgZ(10,"div",8),r.TgZ(11,"div",9),r.TgZ(12,"button",10),r._UZ(13,"i",11),r._uU(14," Ver Depositos "),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(15,"div",12),r.YNc(16,Tc,77,1,"table",13),r.qZA(),r.YNc(17,Sc,5,0,"div",14),r.YNc(18,Ec,7,0,"div",15),r.qZA(),r._UZ(19,"div",5),r.qZA(),r.qZA()),2&t&&(r.xp6(16),r.Q6J("ngIf",!e.cargando&&e.heroesarray.length>0),r.xp6(1),r.Q6J("ngIf",!e.cargando&&0===e.heroesarray.length),r.xp6(1),r.Q6J("ngIf",e.cargando))},directives:[gs,q,U],styles:[""]}),t})();class Ic{constructor(t=t){this.file=t,this.uploading=!1,this.name=t.name}}function kc(t,e){1&t&&(r.TgZ(0,"small",23),r._uU(1," Debe seleccionar una imagen"),r.qZA())}function Ac(t,e){if(1&t&&(r.TgZ(0,"tr"),r.TgZ(1,"td"),r._uU(2),r.qZA(),r.qZA()),2&t){const t=e.$implicit;r.xp6(2),r.Oqu(t.nombre)}}const Oc=function(t){return{width:t}};function Pc(t,e){if(1&t&&(r.TgZ(0,"td"),r.TgZ(1,"div",25),r.TgZ(2,"div",26),r._uU(3),r.ALo(4,"number"),r.qZA(),r.qZA(),r.qZA()),2&t){const t=e.ngIf;r.xp6(2),r.Q6J("ngStyle",r.VKq(5,Oc,t+"%")),r.xp6(1),r.hij(" ",r.xi3(4,2,t,"1.0-0"),"% ")}}function Rc(t,e){if(1&t&&(r.TgZ(0,"tr"),r.TgZ(1,"td"),r._uU(2),r.qZA(),r.TgZ(3,"td"),r._uU(4),r.ALo(5,"number"),r.qZA(),r.YNc(6,Pc,5,7,"td",24),r.ALo(7,"async"),r.qZA()),2&t){const t=e.$implicit;r.xp6(2),r.Oqu(t.name),r.xp6(2),r.hij("",r.xi3(5,3,t.file.size/1024/1024,".2-2")," MB"),r.xp6(2),r.Q6J("ngIf",r.lcZ(7,6,t.uploadPercent))}}const Nc=function(t){return["/uploadimage",t]};function Dc(t,e){if(1&t&&(r.TgZ(0,"tr"),r.TgZ(1,"td"),r.TgZ(2,"button",12),r._UZ(3,"i",13),r.qZA(),r.qZA(),r.TgZ(4,"td"),r._uU(5),r.qZA(),r.TgZ(6,"td"),r._uU(7),r.qZA(),r.qZA()),2&t){const t=e.$implicit;r.xp6(2),r.Q6J("routerLink",r.VKq(3,Nc,t.deposito)),r.xp6(3),r.Oqu(t.deposito),r.xp6(2),r.hij("",t.usuario," ")}}function Lc(t,e){if(1&t&&(r.TgZ(0,"tr"),r.TgZ(1,"td"),r._uU(2),r.qZA(),r.TgZ(3,"td"),r._uU(4),r.qZA(),r.TgZ(5,"td"),r.TgZ(6,"button",11),r.TgZ(7,"a",12),r._UZ(8,"i",13),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&t){const t=e.$implicit;r.xp6(2),r.Oqu(t.deposito),r.xp6(2),r.Oqu(t.nombre),r.xp6(3),r.Q6J("href",t.url,r.LSH)}}const Fc=[{path:"login",component:mc},{path:"uploadimage/:deposito",component:(()=>{class t{constructor(t,e,n,r,i){this.storage=t,this.imageService=e,this.capturarparametro=n,this.storageService=i,this.imagenes={id:"",deposito:"",usuario:"",udp:"",id_usuario:"",id_deposito:"",id_plantilla:"",campo1:"",campo2:"",campo3:"",campo4:"",campo5:"",campo6:"",campo7:"",campo8:"",campo9:"",campo10:"",campo11:"",campo12:"",campo13:"",campo14:"",campo15:"",campo16:"",campo17:"",campo18:"",campo19:"",campo20:"",campo21:"",campo22:"",campo23:"",campo24:"",campo25:"",campo26:"",campo27:"",campo28:"",campo29:"",campo30:"",campoubicacion:"",estado:!0,pathimagen:!1},this.imageType="",this.files=[],this.fileError=!1,this.filemodelarray=[],this.dataimage=new yc,this.cargando=!1,this.capturarparametro.params.subscribe(t=>{this.depositocapturer=t.deposito,console.log("Ids:"+this.depositocapturer)})}ngOnInit(){this.cargando=!0,this.storageService.getDataStorageFilterMessages(this.depositocapturer).subscribe(t=>{this.filemodelarray=t,console.log(this.filemodelarray),this.cargando=!1})}uploads(t){this.files=[],this.fileError=!1,this.path=t.target.files,this.archivos=t.target.files,this.imageType=t.target.files[0].type,console.log("upload path: "+this.path+" \n "+t.target.files[0]),console.log("upload imageType: "+this.imageType),console.log("archivos: "+this.archivos.length),this.ExtraerArchivos(this.archivos),console.log("TAMA\xd1O FILES: "+this.files.length),this.guardarFilesFiltrado()}upload(t){console.log(t)}guardar(){for(const t of this.archivos)console.log(` nombre: ${t.name?t.name:"NOT SUPPORTED"}  tipo: ${t.type?t.type:"NOT SUPPORTED"}  tama\xf1o: ${t.size?t.size:"NOT SUPPORTED"}`)}guardarFilesFiltrado(){for(const t of this.filemodelarray){let e=0;for(const n of this.files)n.name===t.nombre&&(console.log(`index: ${e} nombre: ${n.name} Deposito: ${t.deposito}  URL: ${t.url}`),this.files.splice(e,1)),e++}console.log("newdata: "+this.newdata),console.log(this.files)}GetAllData(){this.storageService.getAllDataStorage().subscribe(t=>{console.log(t)})}ExtraerArchivos(t){for(const e in Object.getOwnPropertyNames(t)){const n=new Ic(t[e]);this.files.push(n)}}CargarArchivosWeb(){this.storageService.subirImagenes(this.files,this.depositocapturer)}Register(){console.log("PERCENT "+this.files)}CreateRegisterStorage(t){this.storageService.crearImagen(t).subscribe(t=>{console.log("entro:"+t)})}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(bu),r.Y36(lc),r.Y36(zi),r.Y36(fs),r.Y36(vc))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-upload-images"]],decls:53,vars:4,consts:[[1,"container"],[1,"row","justify-content-between","align-items-center"],[1,""],["routerLink","/company",1,"btn","btn-danger"],[1,"fa","fa-arrow-left"],["routerLink","/users",1,"btn","btn-primary"],[1,"fa","fa-users"],[1,"row"],[1,"col-md-5","mt-5"],[1,"card","text-center"],[1,"card-header"],[1,"input-group"],[1,"col"],["multiple","","type","file",1,"form-control",3,"change"],["class","text-danger",4,"ngIf"],[1,"card"],[1,"card-body"],[1,"table"],[4,"ngFor","ngForOf"],[1,"col-md-7","mt-5"],[1,"thead-dark"],[1,"bth","btn-danger",3,"click"],[1,"bth","btn-primary",3,"disabled","click"],[1,"text-danger"],[4,"ngIf"],[1,"progress"],["role","progressbar",1,"progress-bar",3,"ngStyle"]],template:function(t,e){1&t&&(r.TgZ(0,"div",0),r._UZ(1,"hr"),r.TgZ(2,"div",1),r.TgZ(3,"div",2),r.TgZ(4,"button",3),r._UZ(5,"i",4),r._uU(6," Regresar "),r.qZA(),r.qZA(),r.TgZ(7,"div",2),r.TgZ(8,"button",5),r._UZ(9,"i",6),r._uU(10," Lista Registros "),r.qZA(),r.qZA(),r.qZA(),r.TgZ(11,"div",7),r.TgZ(12,"div",8),r.TgZ(13,"div",9),r.TgZ(14,"div",10),r.TgZ(15,"span"),r._uU(16,"ARCHIVOS"),r.qZA(),r.qZA(),r.TgZ(17,"div",11),r.TgZ(18,"div",12),r.TgZ(19,"label"),r._uU(20,"Seleccione los documentos:"),r.qZA(),r.TgZ(21,"input",13),r.NdJ("change",function(t){return e.uploads(t)}),r.qZA(),r.YNc(22,kc,2,0,"small",14),r.qZA(),r.qZA(),r.qZA(),r.TgZ(23,"div",15),r.TgZ(24,"div",16),r.TgZ(25,"table",17),r.TgZ(26,"thead"),r.TgZ(27,"tr"),r.TgZ(28,"th"),r._uU(29,"Nombre Archivo"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(30,"tbody"),r.YNc(31,Ac,3,1,"tr",18),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(32,"div",19),r.TgZ(33,"div",15),r.TgZ(34,"div",10),r.TgZ(35,"span"),r._uU(36,"ARCHIVOS CARGADOS"),r.qZA(),r.qZA(),r.TgZ(37,"div",16),r.TgZ(38,"table",17),r.TgZ(39,"thead",20),r.TgZ(40,"tr"),r.TgZ(41,"th"),r._uU(42,"Nombre del Archivo"),r.qZA(),r.TgZ(43,"th"),r._uU(44,"Tama\xf1o"),r.qZA(),r.TgZ(45,"th"),r._uU(46,"Progress"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(47,"tbody"),r.YNc(48,Rc,8,8,"tr",18),r.qZA(),r.qZA(),r.TgZ(49,"button",21),r.NdJ("click",function(){return e.files=[]}),r._uU(50,"QUITAR"),r.qZA(),r.TgZ(51,"button",22),r.NdJ("click",function(){return e.CargarArchivosWeb()}),r._uU(52,"CARGAR ARCHIVOS"),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&t&&(r.xp6(22),r.Q6J("ngIf",e.fileError),r.xp6(9),r.Q6J("ngForOf",e.filemodelarray),r.xp6(17),r.Q6J("ngForOf",e.files),r.xp6(3),r.Q6J("disabled",0===e.files.length))},directives:[gs,q,U,B],pipes:[Y,K],styles:[""]}),t})()},{path:"users",component:xc},{path:"company",component:(()=>{class t{constructor(t){this.imageService=t,this.cargando=!1,this.imagemodelarray=[],this.filterimagemodelarray=[]}ngOnInit(){this.cargando=!0,this.imageService.getAllDataImages().subscribe(t=>{this.imagemodelarray=t,console.log(this.imagemodelarray),this.cargando=!1,this.filterimagemodelarray=this.imagemodelarray.filter((t,e)=>this.imagemodelarray.findIndex(e=>e.deposito==t.deposito)===e),console.log("listaform: "+this.filterimagemodelarray[0].deposito)})}Send(t,e){console.log(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(lc))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-company"]],decls:28,vars:1,consts:[[1,"container","text-center"],[1,"row"],[1,"col","text-right"],["routerLink","/users",1,"btn","btn-danger"],[1,"fa","fa-arrow-left"],[1,"col-md-12","mt-5"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"table"],[1,"thead-dark"],[4,"ngFor","ngForOf"],[1,"btn","btn-primary",3,"routerLink"],["aria-hidden","true",1,"fa","fa-picture-o"]],template:function(t,e){1&t&&(r.TgZ(0,"div",0),r._UZ(1,"br"),r.TgZ(2,"h3"),r._uU(3,"Todos los Depositos Existentes"),r.qZA(),r._UZ(4,"hr"),r.TgZ(5,"div",1),r.TgZ(6,"div",2),r.TgZ(7,"button",3),r._UZ(8,"i",4),r._uU(9," Regresar "),r.qZA(),r.qZA(),r.qZA(),r.TgZ(10,"div",1),r.TgZ(11,"div",5),r.TgZ(12,"div",6),r.TgZ(13,"div",7),r.TgZ(14,"span"),r._uU(15,"DEPOSITOS EXISTENTES"),r.qZA(),r.qZA(),r.TgZ(16,"div",8),r.TgZ(17,"table",9),r.TgZ(18,"thead",10),r.TgZ(19,"tr"),r.TgZ(20,"th"),r._uU(21,"Agregar Archivo"),r.qZA(),r.TgZ(22,"th"),r._uU(23,"Deposito"),r.qZA(),r.TgZ(24,"th"),r._uU(25,"Usuario"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(26,"tbody"),r.YNc(27,Dc,8,5,"tr",11),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&t&&(r.xp6(27),r.Q6J("ngForOf",e.filterimagemodelarray))},directives:[gs,U],styles:[""]}),t})()},{path:"register/:deposito/:udp",component:(()=>{class t{constructor(t,e){this.capturarparametro=t,this.storageService=e,this.cargando=!1,this.imagemodelarray=[],this.filterimagemodelarray=[],this.filemodelarray=[],this.capturarparametro.params.subscribe(t=>{this.depositocapturer=t.deposito,this.udpcapturer=t.udp,console.log("Deposito:"+this.depositocapturer+"\n UDP: "+this.udpcapturer)})}ngOnInit(){this.cargando=!0,this.storageService.getDataStorageFilterDeposito_UDP(this.depositocapturer,this.udpcapturer).subscribe(t=>{this.filemodelarray=t,console.log(this.filemodelarray),this.cargando=!1})}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(zi),r.Y36(vc))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-registerimages"]],decls:29,vars:2,consts:[[1,"container","text-center"],[1,"row"],[1,"col","text-right"],["routerLink","/users",1,"btn","btn-danger"],[1,"fa","fa-arrow-left"],[1,"col-md-12","mt-5"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"table"],[4,"ngFor","ngForOf"],[1,"btn","btn-primary"],["target","_blank",3,"href"],["aria-hidden","true",1,"fa","fa-picture-o",2,"color","white"]],template:function(t,e){1&t&&(r.TgZ(0,"div",0),r._UZ(1,"br"),r.TgZ(2,"h3"),r._uU(3),r.qZA(),r._UZ(4,"hr"),r.TgZ(5,"div",1),r.TgZ(6,"div",2),r.TgZ(7,"button",3),r._UZ(8,"i",4),r._uU(9," Regresar "),r.qZA(),r.qZA(),r.qZA(),r.TgZ(10,"div",1),r.TgZ(11,"div",5),r.TgZ(12,"div",6),r.TgZ(13,"div",7),r.TgZ(14,"span"),r._uU(15,"IM\xc1GENES EXISTENTES"),r.qZA(),r.qZA(),r.TgZ(16,"div",6),r.TgZ(17,"div",8),r.TgZ(18,"table",9),r.TgZ(19,"thead"),r.TgZ(20,"tr"),r.TgZ(21,"th"),r._uU(22,"Deposito"),r.qZA(),r.TgZ(23,"th"),r._uU(24,"Nombre Archivo"),r.qZA(),r.TgZ(25,"th"),r._uU(26,"URL"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(27,"tbody"),r.YNc(28,Lc,9,3,"tr",10),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&t&&(r.xp6(3),r.hij("Im\xe1genes del Deposito ",e.depositocapturer,""),r.xp6(25),r.Q6J("ngForOf",e.filemodelarray))},directives:[gs,U],styles:[""]}),t})()},{path:"images/:id",component:gc},{path:"**",pathMatch:"full",redirectTo:"login"}];let Uc=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[Is.forRoot(Fc)],Is]}),t})(),Mc=(()=>{class t{constructor(){this.title="Locker"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-root"]],decls:1,vars:0,template:function(t,e){1&t&&r._UZ(0,"router-outlet")},directives:[ys],styles:["",'[_nghost-%COMP%] {\n        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";\n        font-size: 14px;\n        color: #333;\n        box-sizing: border-box;\n        -webkit-font-smoothing: antialiased;\n        -moz-osx-font-smoothing: grayscale;\n    }\n\n    h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%] {\n        margin: 8px 0;\n    }\n\n    p[_ngcontent-%COMP%] {\n        margin: 0;\n    }\n\n    .spacer[_ngcontent-%COMP%] {\n        flex: 1;\n    }\n\n    .toolbar[_ngcontent-%COMP%] {\n        position: absolute;\n        top: 0;\n        left: 0;\n        right: 0;\n        height: 10px;\n        display: flex;\n        align-items: center;\n        background-color: #1976d2;\n        color: white;\n        font-weight: 600;\n    }\n\n    .toolbar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%] {\n        margin: 0 16px;\n    }\n\n    .toolbar[_ngcontent-%COMP%]   #twitter-logo[_ngcontent-%COMP%] {\n        height: 40px;\n        margin: 0 8px;\n    }\n\n    .toolbar[_ngcontent-%COMP%]   #youtube-logo[_ngcontent-%COMP%] {\n        height: 40px;\n        margin: 0 16px;\n    }\n\n    .toolbar[_ngcontent-%COMP%]   #twitter-logo[_ngcontent-%COMP%]:hover, .toolbar[_ngcontent-%COMP%]   #youtube-logo[_ngcontent-%COMP%]:hover {\n        opacity: 0.8;\n    }\n\n    .content[_ngcontent-%COMP%] {\n        display: flex;\n        margin: 82px auto 32px;\n        padding: 0 16px;\n        max-width: 960px;\n        flex-direction: column;\n        align-items: center;\n    }\n\n    svg.material-icons[_ngcontent-%COMP%] {\n        height: 24px;\n        width: auto;\n    }\n\n    svg.material-icons[_ngcontent-%COMP%]:not(:last-child) {\n        margin-right: 8px;\n    }\n\n    .card[_ngcontent-%COMP%]   svg.material-icons[_ngcontent-%COMP%]   path[_ngcontent-%COMP%] {\n        fill: #888;\n    }\n\n    .card-container[_ngcontent-%COMP%] {\n        display: flex;\n        flex-wrap: wrap;\n        justify-content: center;\n        margin-top: 16px;\n    }\n\n    .card[_ngcontent-%COMP%] {\n        border-radius: 4px;\n        border: 1px solid #eee;\n        background-color: #fafafa;\n        height: 40px;\n        width: 200px;\n        margin: 0 8px 16px;\n        padding: 16px;\n        display: flex;\n        flex-direction: row;\n        justify-content: center;\n        align-items: center;\n        transition: all 0.2s ease-in-out;\n        line-height: 24px;\n    }\n\n    .card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:not(:last-child) {\n        margin-right: 0;\n    }\n\n    .card.card-small[_ngcontent-%COMP%] {\n        height: 16px;\n        width: 168px;\n    }\n\n    .card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:not(.highlight-card) {\n        cursor: pointer;\n    }\n\n    .card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:not(.highlight-card):hover {\n        transform: translateY(-3px);\n        box-shadow: 0 4px 17px rgba(0, 0, 0, 0.35);\n    }\n\n    .card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:not(.highlight-card):hover   .material-icons[_ngcontent-%COMP%]   path[_ngcontent-%COMP%] {\n        fill: rgb(105, 103, 103);\n    }\n\n    .card.highlight-card[_ngcontent-%COMP%] {\n        background-color: #1976d2;\n        color: white;\n        font-weight: 600;\n        border: none;\n        width: auto;\n        min-width: 30%;\n        position: relative;\n    }\n\n    .card.card.highlight-card[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] {\n        margin-left: 60px;\n    }\n\n    svg#rocket[_ngcontent-%COMP%] {\n        width: 80px;\n        position: absolute;\n        left: -10px;\n        top: -24px;\n    }\n\n    svg#rocket-smoke[_ngcontent-%COMP%] {\n        height: calc(100vh - 95px);\n        position: absolute;\n        top: 10px;\n        right: 180px;\n        z-index: -10;\n    }\n\n    a[_ngcontent-%COMP%], a[_ngcontent-%COMP%]:visited, a[_ngcontent-%COMP%]:hover {\n        color: #1976d2;\n        text-decoration: none;\n    }\n\n    a[_ngcontent-%COMP%]:hover {\n        color: #125699;\n    }\n\n    .terminal[_ngcontent-%COMP%] {\n        position: relative;\n        width: 80%;\n        max-width: 600px;\n        border-radius: 6px;\n        padding-top: 45px;\n        margin-top: 8px;\n        overflow: hidden;\n        background-color: rgb(15, 15, 16);\n    }\n\n    .terminal[_ngcontent-%COMP%]::before {\n        content: "\\2022 \\2022 \\2022";\n        position: absolute;\n        top: 0;\n        left: 0;\n        height: 4px;\n        background: rgb(58, 58, 58);\n        color: #c2c3c4;\n        width: 100%;\n        font-size: 2rem;\n        line-height: 0;\n        padding: 14px 0;\n        text-indent: 4px;\n    }\n\n    .terminal[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%] {\n        font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, monospace;\n        color: white;\n        padding: 0 1rem 1rem;\n        margin: 0;\n    }\n\n    .circle-link[_ngcontent-%COMP%] {\n        height: 40px;\n        width: 40px;\n        border-radius: 40px;\n        margin: 8px;\n        background-color: white;\n        border: 1px solid #eeeeee;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        cursor: pointer;\n        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);\n        transition: 1s ease-out;\n    }\n\n    .circle-link[_ngcontent-%COMP%]:hover {\n        transform: translateY(-0.25rem);\n        box-shadow: 0px 3px 15px rgba(0, 0, 0, 0.2);\n    }\n\n    footer[_ngcontent-%COMP%] {\n        margin-top: 8px;\n        display: flex;\n        align-items: center;\n        line-height: 20px;\n    }\n\n    footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%] {\n        display: flex;\n        align-items: center;\n    }\n\n    .github-star-badge[_ngcontent-%COMP%] {\n        color: #24292e;\n        display: flex;\n        align-items: center;\n        font-size: 12px;\n        padding: 3px 10px;\n        border: 1px solid rgba(27, 31, 35, .2);\n        border-radius: 3px;\n        background-image: linear-gradient(-180deg, #fafbfc, #eff3f6 90%);\n        margin-left: 4px;\n        font-weight: 600;\n        font-family: -apple-system, BlinkMacSystemFont, Segoe UI, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji, Segoe UI Symbol;\n    }\n\n    .github-star-badge[_ngcontent-%COMP%]:hover {\n        background-image: linear-gradient(-180deg, #f0f3f6, #e6ebf1 90%);\n        border-color: rgba(27, 31, 35, .35);\n        background-position: -.5em;\n    }\n\n    .github-star-badge[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%] {\n        height: 16px;\n        width: 16px;\n        margin-right: 4px;\n    }\n\n    svg#clouds[_ngcontent-%COMP%] {\n        position: fixed;\n        bottom: -160px;\n        left: -230px;\n        z-index: -10;\n        width: 1920px;\n    }\n\n    \n\n    @media screen and (max-width: 767px) {\n\n        .card-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:not(.circle-link), .terminal[_ngcontent-%COMP%] {\n            width: 100%;\n        }\n\n        .card[_ngcontent-%COMP%]:not(.highlight-card) {\n            height: 16px;\n            margin: 8px 0;\n        }\n\n        .card.highlight-card[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] {\n            margin-left: 72px;\n        }\n\n        svg#rocket-smoke[_ngcontent-%COMP%] {\n            right: 120px;\n            transform: rotate(-5deg);\n        }\n    }\n\n    @media screen and (max-width: 575px) {\n        svg#rocket-smoke[_ngcontent-%COMP%] {\n            display: none;\n            visibility: hidden;\n        }\n    }']}),t})();function qc(){return t=>t.lift(new jc)}class jc{call(t,e){return e.subscribe(new Vc(t))}}class Vc extends on.L{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}var Bc=n(308),Zc=function(t,e){return(Zc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Gc(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var zc,Hc="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Wc=Wc||{},Kc=Hc||self;function Yc(){}function Qc(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function $c(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Jc="closure_uid_"+(1e9*Math.random()>>>0),Xc=0;function tl(t,e,n){return t.call.apply(t.bind,arguments)}function el(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function nl(t,e,n){return(nl=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?tl:el).apply(null,arguments)}function rl(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function il(){return Date.now()}function ol(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function sl(){this.j=this.j,this.i=this.i}sl.prototype.j=!1,sl.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,Jc)&&t[Jc]||(t[Jc]=++Xc)}(this)},sl.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var al=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},ul=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function cl(t){return Array.prototype.concat.apply([],arguments)}function ll(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function hl(t){return/^[\s\xa0]*$/.test(t)}var dl,pl=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function fl(t,e){return-1!=t.indexOf(e)}function gl(t,e){return t<e?-1:t>e?1:0}t:{var ml=Kc.navigator;if(ml){var yl=ml.userAgent;if(yl){dl=yl;break t}}dl=""}function vl(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function _l(t){var e={};for(var n in t)e[n]=t[n];return e}var bl="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function wl(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<bl.length;o++)n=bl[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Cl(t){return Cl[" "](t),t}Cl[" "]=Yc;var Tl,Sl,El=fl(dl,"Opera"),xl=fl(dl,"Trident")||fl(dl,"MSIE"),Il=fl(dl,"Edge"),kl=Il||xl,Al=fl(dl,"Gecko")&&!(fl(dl.toLowerCase(),"webkit")&&!fl(dl,"Edge"))&&!(fl(dl,"Trident")||fl(dl,"MSIE"))&&!fl(dl,"Edge"),Ol=fl(dl.toLowerCase(),"webkit")&&!fl(dl,"Edge");function Pl(){var t=Kc.document;return t?t.documentMode:void 0}t:{var Rl="",Nl=(Sl=dl,Al?/rv:([^\);]+)(\)|;)/.exec(Sl):Il?/Edge\/([\d\.]+)/.exec(Sl):xl?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Sl):Ol?/WebKit\/(\S+)/.exec(Sl):El?/(?:Version)[ \/]?(\S+)/.exec(Sl):void 0);if(Nl&&(Rl=Nl?Nl[1]:""),xl){var Dl=Pl();if(null!=Dl&&Dl>parseFloat(Rl)){Tl=String(Dl);break t}}Tl=Rl}var Ll={};function Fl(t){return function(t,e){var n=Ll;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,function(){for(var e=0,n=pl(String(Tl)).split("."),r=pl(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=gl(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||gl(0==s[2].length,0==a[2].length)||gl(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e})}var Ul=Kc.document&&xl&&(Pl()||parseInt(Tl,10))||void 0,Ml=!xl||9<=Number(Ul),ql=xl&&!Fl("9"),jl=function(){if(!Kc.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Kc.addEventListener("test",Yc,e),Kc.removeEventListener("test",Yc,e)}catch(n){}return t}();function Vl(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function Bl(t,e){if(Vl.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(Al){t:{try{Cl(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Zl[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}Vl.prototype.b=function(){this.defaultPrevented=!0},ol(Bl,Vl);var Zl={2:"touch",3:"pen",4:"mouse"};Bl.prototype.b=function(){Bl.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,ql)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var Gl="closure_listenable_"+(1e6*Math.random()|0),zl=0;function Hl(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++zl,this.Y=this.Z=!1}function Wl(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function Kl(t){this.src=t,this.a={},this.b=0}function Yl(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=al(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(Wl(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function Ql(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}Kl.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=Ql(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new Hl(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var $l="closure_lm_"+(1e6*Math.random()|0),Jl={};function Xl(t,e,n,r,i){if(r&&r.once)return eh(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Xl(t,e[o],n,r,i);return null}return n=ch(n),t&&t[Gl]?t.va(e,n,$c(r)?!!r.capture:!!r,i):th(t,e,n,!1,r,i)}function th(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=$c(i)?!!i.capture:!!i;if(s&&!Ml)return null;var a=ah(t);if(a||(t[$l]=a=new Kl(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=sh,e=Ml?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)jl||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(ih(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function eh(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)eh(t,e[o],n,r,i);return null}return n=ch(n),t&&t[Gl]?t.wa(e,n,$c(r)?!!r.capture:!!r,i):th(t,e,n,!0,r,i)}function nh(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)nh(t,e[o],n,r,i);else r=$c(r)?!!r.capture:!!r,n=ch(n),t&&t[Gl]?(t=t.c,(e=String(e).toString())in t.a&&-1<(n=Ql(o=t.a[e],n,r,i))&&(Wl(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=ah(t))&&(e=t.a[e.toString()],t=-1,e&&(t=Ql(e,n,r,i)),(n=-1<t?e[t]:null)&&rh(n))}function rh(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[Gl])Yl(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(ih(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=ah(e))?(Yl(n,t),0==n.b&&(n.src=null,e[$l]=null)):Wl(t)}}}function ih(t){return t in Jl?Jl[t]:Jl[t]="on"+t}function oh(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&rh(t),n.call(r,e)}function sh(t,e){if(t.Y)return!0;if(!Ml){if(!e)t:{e=["window","event"];for(var n=Kc,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return oh(t,e=new Bl(e,this))}return oh(t,new Bl(e,this))}function ah(t){return(t=t[$l])instanceof Kl?t:null}var uh="__closure_events_fn_"+(1e9*Math.random()>>>0);function ch(t){return"function"==typeof t?t:(t[uh]||(t[uh]=function(e){return t.handleEvent(e)}),t[uh])}function lh(){sl.call(this),this.c=new Kl(this),this.J=this,this.C=null}function hh(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new Vl(e,t);else if(e instanceof Vl)e.target=e.target||t;else{var i=e;wl(e=new Vl(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.a=n[o];i=dh(s,r,!0,e)&&i}if(i=dh(s=e.a=t,r,!0,e)&&i,i=dh(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=dh(s=e.a=n[o],r,!1,e)&&i}function dh(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var a=s.listener,u=s.ca||s.src;s.Z&&Yl(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}ol(lh,sl),lh.prototype[Gl]=!0,(zc=lh.prototype).addEventListener=function(t,e,n,r){Xl(this,t,e,n,r)},zc.removeEventListener=function(t,e,n,r){nh(this,t,e,n,r)},zc.G=function(){if(lh.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Wl(n[r]);delete e.a[t],e.b--}}this.C=null},zc.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},zc.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var ph=Kc.JSON.stringify;function fh(){this.b=this.a=null}var gh,mh=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,this.a=(t=this.a).next,t.next=null):t=this.c(),t},t}())(function(){return new vh},function(t){t.reset()});function yh(){var t=Ch,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function vh(){this.next=this.b=this.a=null}function _h(t){Kc.setTimeout(function(){throw t},0)}function bh(t,e){gh||function(){var t=Kc.Promise.resolve(void 0);gh=function(){t.then(Th)}}(),wh||(gh(),wh=!0),Ch.add(t,e)}fh.prototype.add=function(t,e){var n=mh.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},vh.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},vh.prototype.reset=function(){this.next=this.b=this.a=null};var wh=!1,Ch=new fh;function Th(){for(var t;t=yh();){try{t.a.call(t.b)}catch(n){_h(n)}var e=mh;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}wh=!1}function Sh(t,e){lh.call(this),this.b=t||1,this.a=e||Kc,this.f=nl(this.Za,this),this.g=il()}function Eh(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function xh(t,e,n){if("function"==typeof t)n&&(t=nl(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=nl(t.handleEvent,t)}return 2147483647<Number(e)?-1:Kc.setTimeout(t,e||0)}function Ih(t){t.a=xh(function(){t.a=null,t.c&&(t.c=!1,Ih(t))},t.h);var e=t.b;t.b=null,t.g.apply(null,e)}ol(Sh,lh),(zc=Sh.prototype).aa=!1,zc.M=null,zc.Za=function(){if(this.aa){var t=il()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),hh(this,"tick"),this.aa&&(Eh(this),this.start()))}},zc.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=il())},zc.G=function(){Sh.X.G.call(this),Eh(this),delete this.a};var kh=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}Zc(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:Ih(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(Kc.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(sl);function Ah(t){sl.call(this),this.b=t,this.a={}}ol(Ah,sl);var Oh=[];function Ph(t,e,n,r){Array.isArray(n)||(n&&(Oh[0]=n.toString()),n=Oh);for(var i=0;i<n.length;i++){var o=Xl(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function Rh(t){vl(t.a,function(t,e){this.a.hasOwnProperty(e)&&rh(t)},t),t.a={}}function Nh(){this.a=!0}function Dh(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return ph(n)}catch(a){return e}}(t,n)+(r?" "+r:"")})}Ah.prototype.G=function(){Ah.X.G.call(this),Rh(this)},Ah.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Nh.prototype.info=function(){};var Lh={},Fh=null;function Uh(){return Fh=Fh||new lh}function Mh(t){Vl.call(this,Lh.Fa,t)}function qh(t){var e=Uh();hh(e,new Mh(e,t))}function jh(t,e){Vl.call(this,Lh.STAT_EVENT,t),this.stat=e}function Vh(t){var e=Uh();hh(e,new jh(e,t))}function Bh(t){Vl.call(this,Lh.Ga,t)}function Zh(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return Kc.setTimeout(function(){t()},e)}Lh.Fa="serverreachability",ol(Mh,Vl),Lh.STAT_EVENT="statevent",ol(jh,Vl),Lh.Ga="timingevent",ol(Bh,Vl);var Gh={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},zh={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function Hh(){}function Wh(){}Hh.prototype.a=null;var Kh,Yh={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function Qh(){Vl.call(this,"d")}function $h(){Vl.call(this,"c")}function Jh(){}function Xh(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new Ah(this),this.P=td,this.R=new Sh(t=kl?125:void 0),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}ol(Qh,Vl),ol($h,Vl),ol(Jh,Hh),Kh=new Jh;var td=45e3,ed={},nd={};function rd(t,e,n){t.H=1,t.i=Ed(_d(e)),t.j=n,t.I=!0,id(t,null)}function id(t,e){t.u=il(),ad(t),t.l=_d(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),Md(n.b,"t",r),t.D=0,t.a=Rp(t.g,t.g.C?e:null),0<t.O&&(t.F=new kh(nl(t.Ca,t,t.a),t.O)),Ph(t.J,t.a,"readystatechange",t.Xa),e=t.B?_l(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),qh(1),function(t,e,n,r,i,o){t.info(function(){if(t.a)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+c+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s})}(t.c,t.m,t.l,t.f,t.S,t.j)}function od(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=sd(t,n);if(i==nd){4==e&&(t.h=4,Vh(14),r=!1),Dh(t.c,t.f,null,"[Incomplete Response]");break}if(i==ed){t.h=4,Vh(15),Dh(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}Dh(t.c,t.f,i,null),dd(t,i)}4==e&&0==n.length&&(t.h=1,Vh(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),Sp(e),e.F=!0,Vh(11))):(Dh(t.c,t.f,n,"[Invalid Chunked Response]"),hd(t),ld(t))}function sd(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?nd:(n=Number(e.substring(n,r)),isNaN(n)?ed:(r+=1)+n>e.length?nd:(e=e.substr(r,n),t.D=r+n,e))}function ad(t){t.T=il()+t.P,ud(t,t.P)}function ud(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=Zh(nl(t.Va,t),e)}function cd(t){t.o&&(Kc.clearTimeout(t.o),t.o=null)}function ld(t){0==t.g.v||t.A||Ip(t.g,t)}function hd(t){cd(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,Eh(t.R),Rh(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function dd(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||zd(n.b,t)))if(n.I=t.N,!t.C&&zd(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(pT){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;xp(n),gp(n)}Tp(n),Vh(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=Zh(nl(n.Sa,n),6e3));if(1>=Gd(n.b)&&n.ea){try{n.ea()}catch(pT){}n.ea=void 0}}else Ap(n,11)}else if((t.C||n.a==t)&&xp(n),!hl(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(n.P=(i=e[r])[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=i[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var a=i[5];if(null!=a&&"number"==typeof a&&0<a){var u=1.5*a;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var l=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=u.b;!h.a&&(fl(l,"spdy")||fl(l,"quic")||fl(l,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(Hd(h,h.b),h.b=null))}if(u.A){var d=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;d&&(u.na=d,Sd(u.B,u.A,d))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=il()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var p=t;if((u=n).la=Pp(u,u.C?u.ga:null,u.fa),p.C){Wd(u.b,p);var f=p,g=u.D;g&&f.setTimeout(g),f.o&&(cd(f),ad(f)),u.a=p}else Cp(u);0<n.g.length&&vp(n)}else"stop"!=i[0]&&"close"!=i[0]||Ap(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?Ap(n,7):fp(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);qh(4)}catch(pT){}}function pd(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Qc(t)||"string"==typeof t)ul(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(Qc(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(Qc(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function fd(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof fd)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function gd(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];md(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)md(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function md(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(zc=Xh.prototype).setTimeout=function(t){this.P=t},zc.Xa=function(t){t=t.target;var e=this.F;e&&3==lp(t)?e.f():this.Ca(t)},zc.Ca=function(t){try{if(t==this.a)t:{var e=lp(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!kl&&!this.a.$())){this.A||4!=e||7==n||qh(8==n||0>=r?3:2),cd(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s})}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var s,a=this.a;if((s=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!hl(s)){var u=s;break e}}u=null}if(!u){this.b=!1,this.h=3,Vh(12),hd(this),ld(this);break t}Dh(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,dd(this,u)}this.I?(od(this,e,o),kl&&this.b&&3==e&&(Ph(this.J,this.R,"tick",this.Wa),this.R.start())):(Dh(this.c,this.f,o,null),dd(this,o)),4==e&&hd(this),this.b&&!this.A&&(4==e?Ip(this.g,this):(this.b=!1,ad(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,Vh(12)):(this.h=0,Vh(13)),hd(this),ld(this)}}}catch(c){}},zc.Wa=function(){if(this.a){var t=lp(this.a),e=this.a.$();this.D<e.length&&(cd(this),od(this,t,e),this.b&&4!=t&&ad(this))}},zc.cancel=function(){this.A=!0,hd(this)},zc.Va=function(){this.o=null;var t=il();0<=t-this.T?(function(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.c,this.l),2!=this.H&&(qh(3),Vh(17)),hd(this),this.h=2,ld(this)):ud(this,this.T-t)},(zc=fd.prototype).K=function(){gd(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},zc.L=function(){return gd(this),this.a.concat()},zc.get=function(t,e){return md(this.b,t)?this.b[t]:e},zc.set=function(t,e){md(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},zc.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var yd=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function vd(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof vd){this.a=void 0!==e?e:t.a,bd(this,t.f),this.j=t.j,wd(this,t.c),Cd(this,t.h),this.g=t.g,e=t.b;var n=new Dd;n.c=e.c,e.a&&(n.a=new fd(e.a),n.b=e.b),Td(this,n),this.i=t.i}else t&&(n=String(t).match(yd))?(this.a=!!e,bd(this,n[1]||"",!0),this.j=xd(n[2]||""),wd(this,n[3]||"",!0),Cd(this,n[4]),this.g=xd(n[5]||"",!0),Td(this,n[6]||"",!0),this.i=xd(n[7]||"")):(this.a=!!e,this.b=new Dd(null,this.a))}function _d(t){return new vd(t)}function bd(t,e,n){t.f=n?xd(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function wd(t,e,n){t.c=n?xd(e,!0):e}function Cd(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function Td(t,e,n){e instanceof Dd?(t.b=e,function(t,e){e&&!t.f&&(Ld(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Fd(this,e),Md(this,n,t))},t)),t.f=e}(t.b,t.a)):(n||(e=Id(e,Rd)),t.b=new Dd(e,t.a))}function Sd(t,e,n){t.b.set(e,n)}function Ed(t){return Sd(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^il()).toString(36)),t}function xd(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Id(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,kd),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function kd(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}vd.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Id(e,Ad,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(Id(e,Ad,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(Id(n,"/"==n.charAt(0)?Pd:Od,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",Id(n,Nd)),t.join("")};var Ad=/[#\/\?@]/g,Od=/[#\?:]/g,Pd=/[#\?]/g,Rd=/[#\?@]/g,Nd=/#/g;function Dd(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Ld(t){t.a||(t.a=new fd,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function Fd(t,e){Ld(t),e=qd(t,e),md(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,md((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&gd(t)))}function Ud(t,e){return Ld(t),e=qd(t,e),md(t.a.b,e)}function Md(t,e,n){Fd(t,e),0<n.length&&(t.c=null,t.a.set(qd(t,e),ll(n)),t.b+=n.length)}function qd(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(zc=Dd.prototype).add=function(t,e){Ld(this),this.c=null,t=qd(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},zc.forEach=function(t,e){Ld(this),this.a.forEach(function(n,r){ul(n,function(n){t.call(e,n,r,this)},this)},this)},zc.L=function(){Ld(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},zc.K=function(t){Ld(this);var e=[];if("string"==typeof t)Ud(this,t)&&(e=cl(e,this.a.get(qd(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=cl(e,t[n])}return e},zc.set=function(t,e){return Ld(this),this.c=null,Ud(this,t=qd(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},zc.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},zc.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var jd=function(){return function(t,e){this.b=t,this.a=e}}();function Vd(t){this.g=t||Bd,t=Kc.PerformanceNavigationTiming?0<(t=Kc.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(Kc.ia&&Kc.ia.ya&&Kc.ia.ya()&&Kc.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var Bd=10;function Zd(t){return!!t.b||!!t.a&&t.a.size>=t.f}function Gd(t){return t.b?1:t.a?t.a.size:0}function zd(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function Hd(t,e){t.a?t.a.add(e):t.b=e}function Wd(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function Kd(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=Gc(t.a.values()),o=i.next();!o.done;o=i.next())r=r.concat(o.value.s)}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return ll(t.c)}function Yd(){}function Qd(){this.a=new Yd}function $d(t,e,n){var r=n||"";try{pd(t,function(t,n){var i=t;$c(t)&&(i=ph(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(QT){throw e.push(r+"type="+encodeURIComponent("_badmap")),QT}}function Jd(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}Vd.prototype.cancel=function(){var t,e;if(this.c=Kd(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=Gc(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},Yd.prototype.stringify=function(t){return Kc.JSON.stringify(t,void 0)},Yd.prototype.parse=function(t){return Kc.JSON.parse(t,void 0)};var Xd=Kc.JSON.parse;function tp(t){lh.call(this),this.headers=new fd,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=ep,this.D=this.F=!1}ol(tp,lh);var ep="",np=/^https?$/i,rp=["POST","PUT"];function ip(t){return"content-type"==t.toLowerCase()}function op(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,sp(t),up(t)}function sp(t){t.u||(t.u=!0,hh(t,"complete"),hh(t,"error"))}function ap(t){if(t.b&&void 0!==Wc&&(!t.s[1]||4!=lp(t)||2!=t.W()))if(t.l&&4==lp(t))xh(t.za,0,t);else if(hh(t,"readystatechange"),4==lp(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(yd)[1]||null;if(!o&&Kc.self&&Kc.self.location){var s=Kc.self.location.protocol;o=s.substr(0,s.length-1)}i=!np.test(o?o.toLowerCase():"")}e=i}if(e)hh(t,"complete"),hh(t,"success");else{t.h=6;try{var a=2<lp(t)?t.a.statusText:""}catch(n){a=""}t.f=a+" ["+t.W()+"]",sp(t)}}finally{up(t)}}}function up(t,e){if(t.a){cp(t);var n=t.a,r=t.s[0]?Yc:null;t.a=null,t.s=null,e||hh(t,"ready");try{n.onreadystatechange=r}catch(QT){}}}function cp(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(Kc.clearTimeout(t.m),t.m=null)}function lp(t){return t.a?t.a.readyState:0}function hp(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return vl(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Sd(t,e,n))}function dp(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function pp(t){this.pa=0,this.g=[],this.c=new Nh,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=dp("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=dp("baseRetryDelayMs",5e3,t),this.Ra=dp("retryDelaySeedMs",1e4,t),this.Ma=dp("forwardChannelMaxRetries",2,t),this.ma=dp("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new Vd(t&&t.concurrentRequestLimit),this.ka=new Qd,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function fp(t){if(mp(t),3==t.v){var e=t.R++,n=_d(t.B);Sd(n,"SID",t.J),Sd(n,"RID",e),Sd(n,"TYPE","terminate"),bp(t,n),(e=new Xh(t,t.c,e,void 0)).H=2,e.i=Ed(_d(n)),n=!1,Kc.navigator&&Kc.navigator.sendBeacon&&(n=Kc.navigator.sendBeacon(e.i.toString(),"")),!n&&Kc.Image&&((new Image).src=e.i,n=!0),n||(e.a=Rp(e.g,null),e.a.ba(e.i)),e.u=il(),ad(e)}Op(t)}function gp(t){t.a&&(Sp(t),t.a.cancel(),t.a=null)}function mp(t){gp(t),t.j&&(Kc.clearTimeout(t.j),t.j=null),xp(t),t.b.cancel(),t.h&&("number"==typeof t.h&&Kc.clearTimeout(t.h),t.h=null)}function yp(t,e){t.g.push(new jd(t.Oa++,e)),3==t.v&&vp(t)}function vp(t){Zd(t.b)||t.h||(t.h=!0,bh(t.Ba,t),t.u=0)}function _p(t,e){var n;n=e?e.f:t.R++;var r=_d(t.B);Sd(r,"SID",t.J),Sd(r,"RID",n),Sd(r,"AID",t.P),bp(t,r),t.i&&t.l&&hp(r,t.i,t.l),n=new Xh(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=wp(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),Hd(t.b,n),rd(n,r,e)}function bp(t,e){t.f&&pd({},function(t,n){Sd(e,n,t)})}function wp(t,e,n){n=Math.min(t.g.length,n);var r=t.f?nl(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?s.push("ofs="+(o=i[0].b)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),a=!1;else try{$d(l,s,"req"+c+"_")}catch(cf){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function Cp(t){t.a||t.j||(t.T=1,bh(t.Aa,t),t.o=0)}function Tp(t){return!(t.a||t.j||3<=t.o||(t.T++,t.j=Zh(nl(t.Aa,t),kp(t,t.o)),t.o++,0))}function Sp(t){null!=t.s&&(Kc.clearTimeout(t.s),t.s=null)}function Ep(t){t.a=new Xh(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=_d(t.la);Sd(e,"RID","rpc"),Sd(e,"SID",t.J),Sd(e,"CI",t.H?"0":"1"),Sd(e,"AID",t.P),bp(t,e),Sd(e,"TYPE","xmlhttp"),t.i&&t.l&&hp(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=Ed(_d(e)),n.j=null,n.I=!0,id(n,t)}function xp(t){null!=t.m&&(Kc.clearTimeout(t.m),t.m=null)}function Ip(t,e){var n=null;if(t.a==e){xp(t),Sp(t),t.a=null;var r=2}else{if(!zd(t.b,e))return;n=e.s,Wd(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=il()-e.u;var i=t.u;hh(r=Uh(),new Bh(r,n,e,i)),vp(t)}else Cp(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(Gd(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)||(t.h=Zh(nl(t.Ba,t,e),kp(t,t.u)),t.u++,0)))}(t,e)||2==r&&Tp(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:Ap(t,5);break;case 4:Ap(t,10);break;case 3:Ap(t,6);break;default:Ap(t,2)}}function kp(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function Ap(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=nl(t.Ya,t);n||(n=new vd("//www.google.com/images/cleardot.gif"),Kc.location&&"http"==Kc.location.protocol||bd(n,"https"),Ed(n)),function(t,e){var n=new Nh;if(Kc.Image){var r=new Image;r.onload=rl(Jd,n,r,"TestLoadImage: loaded",!0,e),r.onerror=rl(Jd,n,r,"TestLoadImage: error",!1,e),r.onabort=rl(Jd,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=rl(Jd,n,r,"TestLoadImage: timeout",!1,e),Kc.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else Vh(2);t.v=0,t.f&&t.f.ra(e),Op(t),mp(t)}function Op(t){t.v=0,t.I=-1,t.f&&(0==Kd(t.b).length&&0==t.g.length||(t.b.c.length=0,ll(t.g),t.g.length=0),t.f.qa())}function Pp(t,e,n){var r=function(t){return t instanceof vd?_d(t):new vd(t,void 0)}(n);if(""!=r.c)e&&wd(r,e+"."+r.c),Cd(r,r.h);else{var i=Kc.location;r=function(t,e,n,r){var i=new vd(null,void 0);return t&&bd(i,t),e&&wd(i,e),n&&Cd(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&vl(t.V,function(t,e){Sd(r,e,t)}),n=t.na,(e=t.A)&&n&&Sd(r,e,n),Sd(r,"VER",t.ha),bp(t,r),r}function Rp(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new tp(t.Na)).F=t.C,e}function Np(){}function Dp(){if(xl&&!(10<=Number(Ul)))throw Error("Environmental error: no available transport.")}function Lp(t,e){lh.call(this),this.a=new pp(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!hl(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!hl(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new Mp(this)}function Fp(t){Qh.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function Up(){$h.call(this),this.status=1}function Mp(t){this.a=t}(zc=tp.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function(t){var e;return(e=t.a)||(e=t.a={}),e}(this.H?this.H:Kh),this.a.onreadystatechange=nl(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(o){return void op(this,o)}t=n||"";var i=new fd(this.headers);r&&pd(r,function(t,e){i.set(e,t)}),r=function(t){t:{for(var e=ip,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=Kc.FormData&&t instanceof Kc.FormData,!(0<=al(rp,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{cp(this),0<this.o&&((this.D=function(t){return xl&&Fl(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=nl(this.xa,this)):this.m=xh(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){op(this,o)}},zc.xa=function(){void 0!==Wc&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,hh(this,"timeout"),this.abort(8))},zc.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,hh(this,"complete"),hh(this,"abort"),up(this))},zc.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),up(this,!0)),tp.X.G.call(this)},zc.za=function(){this.j||(this.A||this.l||this.g?ap(this):this.Ua())},zc.Ua=function(){ap(this)},zc.W=function(){try{return 2<lp(this)?this.a.status:-1}catch(Sl){return-1}},zc.$=function(){try{return this.a?this.a.responseText:""}catch(Sl){return""}},zc.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Xd(e)}},zc.ua=function(){return this.h},zc.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(zc=pp.prototype).ha=8,zc.v=1,zc.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new Xh(this,this.c,t,void 0),r=this.l;if(this.O&&(r?wl(r=_l(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=wp(this,n,e),Sd(i=_d(this.B),"RID",t),Sd(i,"CVER",22),this.A&&Sd(i,"X-HTTP-Session-Id",this.A),bp(this,i),this.i&&r&&hp(i,this.i,r),Hd(this.b,n),this.Ia&&Sd(i,"TYPE","init"),this.da?(Sd(i,"$req",e),Sd(i,"SID","null"),n.U=!0,rd(n,i,null)):rd(n,i,e),this.v=2}}else 3==this.v&&(t?_p(this,t):0==this.g.length||Zd(this.b)||_p(this))},zc.Aa=function(){if(this.j=null,Ep(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=Zh(nl(this.Ta,this),t)}},zc.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,Vh(10),gp(this),Ep(this))},zc.Sa=function(){null!=this.m&&(this.m=null,gp(this),Tp(this),Vh(19))},zc.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),Vh(2)):(this.c.info("Failed to ping google.com"),Vh(1))},(zc=Np.prototype).ta=function(){},zc.sa=function(){},zc.ra=function(){},zc.qa=function(){},zc.Ja=function(){},Dp.prototype.a=function(t,e){return new Lp(t,e)},ol(Lp,lh),Lp.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;Vh(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=Pp(t,null,t.fa),vp(t)},Lp.prototype.close=function(){fp(this.a)},Lp.prototype.h=function(t){if("string"==typeof t){var e={};e.__data__=t,yp(this.a,e)}else this.l?((e={}).__data__=ph(t),yp(this.a,e)):yp(this.a,t)},Lp.prototype.G=function(){this.a.f=null,delete this.f,fp(this.a),delete this.a,Lp.X.G.call(this)},ol(Fp,Qh),ol(Up,$h),ol(Mp,Np),Mp.prototype.ta=function(){hh(this.a,"a")},Mp.prototype.sa=function(t){hh(this.a,new Fp(t))},Mp.prototype.ra=function(t){hh(this.a,new Up(t))},Mp.prototype.qa=function(){hh(this.a,"b")},Dp.prototype.createWebChannel=Dp.prototype.a,Lp.prototype.send=Lp.prototype.h,Lp.prototype.open=Lp.prototype.g,Lp.prototype.close=Lp.prototype.close,Gh.NO_ERROR=0,Gh.TIMEOUT=8,Gh.HTTP_ERROR=6,zh.COMPLETE="complete",Wh.EventType=Yh,Yh.OPEN="a",Yh.CLOSE="b",Yh.ERROR="c",Yh.MESSAGE="d",lh.prototype.listen=lh.prototype.va,tp.prototype.listenOnce=tp.prototype.wa,tp.prototype.getLastError=tp.prototype.Qa,tp.prototype.getLastErrorCode=tp.prototype.ua,tp.prototype.getStatus=tp.prototype.W,tp.prototype.getResponseJson=tp.prototype.Pa,tp.prototype.getResponseText=tp.prototype.$,tp.prototype.send=tp.prototype.ba;var qp=Gh,jp=zh,Vp=Lh,Bp=Wh,Zp=tp,Gp=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();Gp.o=-1;var zp={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Hp=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return(0,Hs.ZT)(e,t),e}(Error),Wp=new Bc.Yd("@firebase/firestore");function Kp(){return Wp.logLevel}function Yp(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Wp.logLevel<=Bc.in.DEBUG){var r=e.map(Jp);Wp.debug.apply(Wp,(0,Hs.ev)(["Firestore (8.5.0): "+t],r))}}function Qp(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Wp.logLevel<=Bc.in.ERROR){var r=e.map(Jp);Wp.error.apply(Wp,(0,Hs.ev)(["Firestore (8.5.0): "+t],r))}}function $p(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Wp.logLevel<=Bc.in.WARN){var r=e.map(Jp);Wp.warn.apply(Wp,(0,Hs.ev)(["Firestore (8.5.0): "+t],r))}}function Jp(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(QT){return t}}function Xp(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.5.0) INTERNAL ASSERTION FAILED: "+t;throw Qp(e),new Error(e)}function tf(t,e){t||Xp()}function ef(t,e){return t}function nf(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var rf=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=nf(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function of(t,e){return t<e?-1:t>e?1:0}function sf(t,e,n){return t.length===e.length&&t.every(function(t,r){return n(t,e[r])})}function af(t){return t+"\0"}var uf=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Hp(zp.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Hp(zp.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Hp(zp.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Hp(zp.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?of(this.nanoseconds,t.nanoseconds):of(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),cf=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new uf(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();function lf(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function hf(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function df(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var pf=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&Xp(),void 0===n?n=t.length-e:n>t.length-e&&Xp(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),ff=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Hs.ZT)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new Hp(zp.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter(function(t){return t.length>0}))}return new e(r)},e.emptyPath=function(){return new e([])},e}(pf),gf=/^[_a-zA-Z][_a-zA-Z0-9]*$/,mf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Hs.ZT)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return gf.test(t)},e.prototype.canonicalString=function(){return this.toArray().map(function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new Hp(zp.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new Hp(zp.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Hp(zp.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new Hp(zp.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(pf),yf=function(){function t(t){this.fields=t,t.sort(mf.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return sf(this.fields,t.fields,function(t,e){return t.isEqual(e)})},t}(),vf=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.binaryString)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return of(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();vf.EMPTY_BYTE_STRING=new vf("");var _f=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function bf(t){if(tf(!!t),"string"==typeof t){var e=0,n=_f.exec(t);if(tf(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:wf(t.seconds),nanos:wf(t.nanos)}}function wf(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Cf(t){return"string"==typeof t?vf.fromBase64String(t):vf.fromUint8Array(t)}function Tf(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Sf(t){var e=t.mapValue.fields.__previous_value__;return Tf(e)?Sf(e):e}function Ef(t){var e=bf(t.mapValue.fields.__local_write_time__.timestampValue);return new uf(e.seconds,e.nanos)}function xf(t){return null==t}function If(t){return 0===t&&1/t==-1/0}function kf(t){return"number"==typeof t&&Number.isInteger(t)&&!If(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var Af=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(ff.fromString(e))},t.fromName=function(e){return new t(ff.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===ff.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return ff.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new ff(e.slice()))},t}();function Of(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Tf(t)?4:10:Xp()}function Pf(t,e){var n=Of(t);if(n!==Of(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ef(t).isEqual(Ef(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=bf(t.timestampValue),r=bf(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Cf(t.bytesValue).isEqual(Cf(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return wf(t.geoPointValue.latitude)===wf(e.geoPointValue.latitude)&&wf(t.geoPointValue.longitude)===wf(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return wf(t.integerValue)===wf(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=wf(t.doubleValue),r=wf(e.doubleValue);return n===r?If(n)===If(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return sf(t.arrayValue.values||[],e.arrayValue.values||[],Pf);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(lf(n)!==lf(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Pf(n[i],r[i])))return!1;return!0}(t,e);default:return Xp()}}function Rf(t,e){return void 0!==(t.values||[]).find(function(t){return Pf(t,e)})}function Nf(t,e){var n=Of(t),r=Of(e);if(n!==r)return of(n,r);switch(n){case 0:return 0;case 1:return of(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=wf(t.integerValue||t.doubleValue),r=wf(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return Df(t.timestampValue,e.timestampValue);case 4:return Df(Ef(t),Ef(e));case 5:return of(t.stringValue,e.stringValue);case 6:return function(t,e){var n=Cf(t),r=Cf(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=of(n[i],r[i]);if(0!==o)return o}return of(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=of(wf(t.latitude),wf(e.latitude));return 0!==n?n:of(wf(t.longitude),wf(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Nf(n[i],r[i]);if(o)return o}return of(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=of(r[s],o[s]);if(0!==a)return a;var u=Nf(n[r[s]],i[o[s]]);if(0!==u)return u}return of(r.length,o.length)}(t.mapValue,e.mapValue);default:throw Xp()}}function Df(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return of(t,e);var n=bf(t),r=bf(e),i=of(n.seconds,r.seconds);return 0!==i?i:of(n.nanos,r.nanos)}function Lf(t){return Ff(t)}function Ff(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=bf(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Cf(t.bytesValue).toBase64():"referenceValue"in t?Af.fromName(t.referenceValue).toString():"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=Ff(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+Ff(t.fields[o])}return e+"}"}(t.mapValue):Xp();var e}function Uf(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function Mf(t){return!!t&&"integerValue"in t}function qf(t){return!!t&&"arrayValue"in t}function jf(t){return!!t&&"nullValue"in t}function Vf(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Bf(t){return!!t&&"mapValue"in t}var Zf=function(){function t(t){this.overlayMap=new Map,this.partialValue=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(e){return t.extractNestedValue(this.buildProto(),e)},t.prototype.toProto=function(){return this.field(mf.emptyPath())},t.prototype.set=function(t,e){this.setOverlay(t,e)},t.prototype.setAll=function(t){var e=this;t.forEach(function(t,n){t?e.set(n,t):e.delete(n)})},t.prototype.delete=function(t){this.setOverlay(t,null)},t.prototype.isEqual=function(t){return Pf(this.buildProto(),t.buildProto())},t.prototype.setOverlay=function(t,e){for(var n=this.overlayMap,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===Of(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.lastSegment(),e)},t.prototype.applyOverlay=function(e,n){var r=this,i=!1,o=t.extractNestedValue(this.partialValue,e),s=Bf(o)?Object.assign({},o.mapValue.fields):{};return n.forEach(function(t,n){if(t instanceof Map){var o=r.applyOverlay(e.child(n),t);null!=o&&(s[n]=o,i=!0)}else null!==t?(s[n]=t,i=!0):s.hasOwnProperty(n)&&(delete s[n],i=!0)}),i?{mapValue:{fields:s}}:null},t.prototype.buildProto=function(){var t=this.applyOverlay(mf.emptyPath(),this.overlayMap);return null!=t&&(this.partialValue=t,this.overlayMap.clear()),this.partialValue},t.extractNestedValue=function(t,e){if(e.isEmpty())return t;for(var n=t,r=0;r<e.length-1;++r){if(!n.mapValue.fields)return null;if(!Bf(n=n.mapValue.fields[e.get(r)]))return null}return(n=(n.mapValue.fields||{})[e.lastSegment()])||null},t.prototype.clone=function(){return new t(this.buildProto())},t}();function Gf(t){var e=[];return hf(t.fields||{},function(t,n){var r=new mf([t]);if(Bf(n)){var i=Gf(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++)e.push(r.child(s[o]))}else e.push(r)}),new yf(e)}var zf=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,cf.min(),Zf.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,Zf.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,Zf.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=Zf.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=Zf.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.toProto())+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),Hf=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.h=null};function Wf(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new Hf(t,e,n,r,i,o,s)}function Kf(t){var e=ef(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(function(t){return function(t){return t.field.canonicalString()+t.op.toString()+Lf(t.value)}(t)}).join(","),n+="|ob:",n+=e.orderBy.map(function(t){return function(t){return t.field.canonicalString()+t.dir}(t)}).join(","),xf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=ag(e.startAt)),e.endAt&&(n+="|ub:",n+=ag(e.endAt)),e.h=n}return e.h}function Yf(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!cg(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(o=e.filters[r]).op||!i.field.isEqual(o.field)||!Pf(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!hg(t.startAt,e.startAt)&&hg(t.endAt,e.endAt)}function Qf(t){return Af.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var $f=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return(0,Hs.ZT)(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new Jf(t,n,r):"array-contains"===n?new ng(t,r):"in"===n?new rg(t,r):"not-in"===n?new ig(t,r):"array-contains-any"===n?new og(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new Xf(t,n):new tg(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(Nf(e,this.value)):null!==e&&Of(this.value)===Of(e)&&this.m(Nf(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Xp()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}(function(){}),Jf=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=Af.fromName(r.referenceValue),i}return(0,Hs.ZT)(e,t),e.prototype.matches=function(t){var e=Af.comparator(t.key,this.key);return this.m(e)},e}($f),Xf=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=eg(0,n),r}return(0,Hs.ZT)(e,t),e.prototype.matches=function(t){return this.keys.some(function(e){return e.isEqual(t.key)})},e}($f),tg=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=eg(0,n),r}return(0,Hs.ZT)(e,t),e.prototype.matches=function(t){return!this.keys.some(function(e){return e.isEqual(t.key)})},e}($f);function eg(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(t){return Af.fromName(t.referenceValue)})}var ng=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return(0,Hs.ZT)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return qf(e)&&Rf(e.arrayValue,this.value)},e}($f),rg=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return(0,Hs.ZT)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&Rf(this.value.arrayValue,e)},e}($f),ig=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return(0,Hs.ZT)(e,t),e.prototype.matches=function(t){if(Rf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!Rf(this.value.arrayValue,e)},e}($f),og=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return(0,Hs.ZT)(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!qf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(t){return Rf(e.value.arrayValue,t)})},e}($f),sg=function(t,e){this.position=t,this.before=e};function ag(t){return(t.before?"b":"a")+":"+t.position.map(function(t){return Lf(t)}).join(",")}var ug=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function cg(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function lg(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.isKeyField()?Af.comparator(Af.fromName(s.referenceValue),n.key):Nf(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function hg(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Pf(t.position[n],e.position[n]))return!1;return!0}var dg=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.p=null,this.T=null};function pg(t,e,n,r,i,o,s,a){return new dg(t,e,n,r,i,o,s,a)}function fg(t){return new dg(t)}function gg(t){return!xf(t.limit)&&"F"===t.limitType}function mg(t){return!xf(t.limit)&&"L"===t.limitType}function yg(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function vg(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function _g(t){return null!==t.collectionGroup}function bg(t){var e=ef(t);if(null===e.p){e.p=[];var n=vg(e),r=yg(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new ug(n)),e.p.push(new ug(mf.keyField(),"asc"));else{for(var i=!1,o=0,s=e.explicitOrderBy;o<s.length;o++){var a=s[o];e.p.push(a),a.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new ug(mf.keyField(),u))}}}return e.p}function wg(t){var e=ef(t);if(!e.T)if("F"===e.limitType)e.T=Wf(e.path,e.collectionGroup,bg(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=bg(e);r<i.length;r++){var o=i[r];n.push(new ug(o.field,"desc"===o.dir?"asc":"desc"))}var s=e.endAt?new sg(e.endAt.position,!e.endAt.before):null,a=e.startAt?new sg(e.startAt.position,!e.startAt.before):null;e.T=Wf(e.path,e.collectionGroup,n,e.filters,e.limit,s,a)}return e.T}function Cg(t,e,n){return new dg(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Tg(t,e){return Yf(wg(t),wg(e))&&t.limitType===e.limitType}function Sg(t){return Kf(wg(t))+"|lt:"+t.limitType}function Eg(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map(function(t){return(e=t).field.canonicalString()+" "+e.op+" "+Lf(e.value);var e}).join(", ")+"]"),xf(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map(function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)}).join(", ")+"]"),t.startAt&&(e+=", startAt: "+ag(t.startAt)),t.endAt&&(e+=", endAt: "+ag(t.endAt)),"Target("+e+")"}(wg(t))+"; limitType="+t.limitType+")"}function xg(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):Af.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!lg(t.startAt,bg(t),e)||t.endAt&&lg(t.endAt,bg(t),e))}(t,e)}function Ig(t){return function(e,n){for(var r=!1,i=0,o=bg(t);i<o.length;i++){var s=o[i],a=kg(s,e,n);if(0!==a)return a;r=r||s.field.isKeyField()}return 0}}function kg(t,e,n){var r=t.field.isKeyField()?Af.comparator(e.key,n.key):function(t,e,n){var r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?Nf(r,i):Xp()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Xp()}}function Ag(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:If(e)?"-0":e}}function Og(t){return{integerValue:""+t}}function Pg(t,e){return kf(e)?Og(e):Ag(t,e)}var Rg=function(){this._=void 0};function Ng(t,e,n){return t instanceof Fg?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Ug?Mg(t,e):t instanceof qg?jg(t,e):function(t,e){var n=Lg(t,e),r=Bg(n)+Bg(t.A);return Mf(n)&&Mf(t.A)?Og(r):Ag(t.R,r)}(t,e)}function Dg(t,e,n){return t instanceof Ug?Mg(t,e):t instanceof qg?jg(t,e):n}function Lg(t,e){return t instanceof Vg?Mf(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var Fg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Hs.ZT)(e,t),e}(Rg),Ug=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return(0,Hs.ZT)(e,t),e}(Rg);function Mg(t,e){for(var n=Zg(e),r=function(t){n.some(function(e){return Pf(e,t)})||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var qg=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return(0,Hs.ZT)(e,t),e}(Rg);function jg(t,e){for(var n=Zg(e),r=function(t){n=n.filter(function(e){return!Pf(e,t)})},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Vg=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return(0,Hs.ZT)(e,t),e}(Rg);function Bg(t){return wf(t.integerValue||t.doubleValue)}function Zg(t){return qf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Gg=function(t,e){this.field=t,this.transform=e},zg=function(t,e){this.version=t,this.transformResults=e},Hg=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function Wg(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var Kg=function(){};function Yg(t,e,n){t instanceof tm?function(t,e,n){var r=t.value.clone(),i=rm(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof em?function(t,e,n){if(Wg(t.precondition,e)){var r=rm(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(nm(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function Qg(t,e,n){t instanceof tm?function(t,e,n){if(Wg(t.precondition,e)){var r=t.value.clone(),i=im(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(Xg(e),r).setHasLocalMutations()}}(t,e,n):t instanceof em?function(t,e,n){if(Wg(t.precondition,e)){var r=im(t.fieldTransforms,n,e),i=e.data;i.setAll(nm(t)),i.setAll(r),e.convertToFoundDocument(Xg(e),i).setHasLocalMutations()}}(t,e,n):function(t,e){Wg(t.precondition,e)&&e.convertToNoDocument(cf.min())}(t,e)}function $g(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e.data.field(o.field),a=Lg(o.transform,s||null);null!=a&&(null==n&&(n=Zf.empty()),n.set(o.field,a))}return n||null}function Jg(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&sf(t,e,function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Ug&&e instanceof Ug||t instanceof qg&&e instanceof qg?sf(t.elements,e.elements,Pf):t instanceof Vg&&e instanceof Vg?Pf(t.A,e.A):t instanceof Fg&&e instanceof Fg}(t.transform,e.transform)}(t,e)})}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function Xg(t){return t.isFoundDocument()?t.version:cf.min()}var tm=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return(0,Hs.ZT)(e,t),e}(Kg),em=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.fieldMask=r,s.precondition=i,s.fieldTransforms=o,s.type=1,s}return(0,Hs.ZT)(e,t),e}(Kg);function nm(t){var e=new Map;return t.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}}),e}function rm(t,e,n){var r=new Map;tf(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,Dg(s,a,n[i]))}return r}function im(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var s=o[i],a=s.transform,u=n.data.field(s.field);r.set(s.field,Ng(a,u,e))}return r}var om,sm,am=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return(0,Hs.ZT)(e,t),e}(Kg),um=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return(0,Hs.ZT)(e,t),e}(Kg),cm=function(t){this.count=t};function lm(t){switch(t){case zp.OK:return Xp();case zp.CANCELLED:case zp.UNKNOWN:case zp.DEADLINE_EXCEEDED:case zp.RESOURCE_EXHAUSTED:case zp.INTERNAL:case zp.UNAVAILABLE:case zp.UNAUTHENTICATED:return!1;case zp.INVALID_ARGUMENT:case zp.NOT_FOUND:case zp.ALREADY_EXISTS:case zp.PERMISSION_DENIED:case zp.FAILED_PRECONDITION:case zp.ABORTED:case zp.OUT_OF_RANGE:case zp.UNIMPLEMENTED:case zp.DATA_LOSS:return!0;default:return Xp()}}function hm(t){if(void 0===t)return Qp("GRPC error has no .code"),zp.UNKNOWN;switch(t){case om.OK:return zp.OK;case om.CANCELLED:return zp.CANCELLED;case om.UNKNOWN:return zp.UNKNOWN;case om.DEADLINE_EXCEEDED:return zp.DEADLINE_EXCEEDED;case om.RESOURCE_EXHAUSTED:return zp.RESOURCE_EXHAUSTED;case om.INTERNAL:return zp.INTERNAL;case om.UNAVAILABLE:return zp.UNAVAILABLE;case om.UNAUTHENTICATED:return zp.UNAUTHENTICATED;case om.INVALID_ARGUMENT:return zp.INVALID_ARGUMENT;case om.NOT_FOUND:return zp.NOT_FOUND;case om.ALREADY_EXISTS:return zp.ALREADY_EXISTS;case om.PERMISSION_DENIED:return zp.PERMISSION_DENIED;case om.FAILED_PRECONDITION:return zp.FAILED_PRECONDITION;case om.ABORTED:return zp.ABORTED;case om.OUT_OF_RANGE:return zp.OUT_OF_RANGE;case om.UNIMPLEMENTED:return zp.UNIMPLEMENTED;case om.DATA_LOSS:return zp.DATA_LOSS;default:return Xp()}}(sm=om||(om={}))[sm.OK=0]="OK",sm[sm.CANCELLED=1]="CANCELLED",sm[sm.UNKNOWN=2]="UNKNOWN",sm[sm.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",sm[sm.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",sm[sm.NOT_FOUND=5]="NOT_FOUND",sm[sm.ALREADY_EXISTS=6]="ALREADY_EXISTS",sm[sm.PERMISSION_DENIED=7]="PERMISSION_DENIED",sm[sm.UNAUTHENTICATED=16]="UNAUTHENTICATED",sm[sm.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",sm[sm.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",sm[sm.ABORTED=10]="ABORTED",sm[sm.OUT_OF_RANGE=11]="OUT_OF_RANGE",sm[sm.UNIMPLEMENTED=12]="UNIMPLEMENTED",sm[sm.INTERNAL=13]="INTERNAL",sm[sm.UNAVAILABLE=14]="UNAVAILABLE",sm[sm.DATA_LOSS=15]="DATA_LOSS";var dm=function(){function t(t,e){this.comparator=t,this.root=e||fm.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,fm.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,fm.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal(function(e,n){return t(e,n),!1})},t.prototype.toString=function(){var t=[];return this.inorderTraversal(function(e,n){return t.push(e+":"+n),!1}),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new pm(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new pm(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new pm(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new pm(this.root,t,this.comparator,!0)},t}(),pm=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),fm=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw Xp();if(this.right.isRed())throw Xp();var t=this.left.check();if(t!==this.right.check())throw Xp();return t+(this.isRed()?0:1)},t}();fm.EMPTY=null,fm.RED=!0,fm.BLACK=!1,fm.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw Xp()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw Xp()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw Xp()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw Xp()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw Xp()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new fm(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var gm=function(){function t(t){this.comparator=t,this.data=new dm(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new mm(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new mm(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),mm=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),ym=new dm(Af.comparator);function vm(){return ym}var _m=new dm(Af.comparator);function bm(){return _m}var wm=new dm(Af.comparator);function Cm(){return wm}var Tm=new gm(Af.comparator);function Sm(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Tm,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Em=new gm(of);function xm(){return Em}var Im=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,km.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(cf.min(),r,xm(),vm(),Sm())},t}(),km=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(vf.EMPTY_BYTE_STRING,n,Sm(),Sm(),Sm())},t}(),Am=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},Om=function(t,e){this.targetId=t,this.V=e},Pm=function(t,e,n,r){void 0===n&&(n=vf.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Rm=function(){function t(){this.S=0,this.D=Lm(),this.C=vf.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"O",{get:function(){return this.F},enumerable:!1,configurable:!0}),t.prototype.$=function(t){t.approximateByteSize()>0&&(this.F=!0,this.C=t)},t.prototype.M=function(){var t=Sm(),e=Sm(),n=Sm();return this.D.forEach(function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Xp()}}),new km(this.C,this.N,t,e,n)},t.prototype.L=function(){this.F=!1,this.D=Lm()},t.prototype.B=function(t,e){this.F=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.F=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.F=!0,this.N=!0},t}(),Nm=function(){function t(t){this.W=t,this.G=new Map,this.H=vm(),this.J=Dm(),this.Y=new gm(of)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.tt(r=o[i],t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.$(t.resumeToken);break;case 1:r.K(),r.k||r.L(),r.$(t.resumeToken);break;case 2:r.K(),r.k||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.$(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.$(t.resumeToken));break;default:Xp()}})},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach(function(t,r){n.st(r)&&e(r)})},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(Qf(i))if(0===n){var o=new Af(i.path);this.tt(e,o,zf.newNoDocument(o,cf.min()))}else tf(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach(function(r,i){var o=e.ot(i);if(o){if(r.current&&Qf(o.target)){var s=new Af(o.target.path);null!==e.H.get(s)||e.at(i,s)||e.tt(i,s,zf.newNoDocument(s,t))}r.O&&(n.set(i,r.M()),r.L())}});var r=Sm();this.J.forEach(function(t,n){var i=!0;n.forEachWhile(function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)}),i&&(r=r.add(t))});var i=new Im(t,n,this.Y,this.H,r);return this.H=vm(),this.J=Dm(),this.Y=new gm(of),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new Rm,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new gm(of),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||Yp("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.k?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new Rm),this.W.getRemoteKeysForTarget(t).forEach(function(n){e.tt(t,n,null)})},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function Dm(){return new dm(Af.comparator)}function Lm(){return new dm(Af.comparator)}var Fm={asc:"ASCENDING",desc:"DESCENDING"},Um={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Mm=function(t,e){this.databaseId=t,this.I=e};function qm(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function jm(t,e){return t.I?e.toBase64():e.toUint8Array()}function Vm(t,e){return qm(t,e.toTimestamp())}function Bm(t){return tf(!!t),cf.fromTimestamp(function(t){var e=bf(t);return new uf(e.seconds,e.nanos)}(t))}function Zm(t,e){return function(t){return new ff(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function Gm(t){var e=ff.fromString(t);return tf(fy(e)),e}function zm(t,e){return Zm(t.databaseId,e.path)}function Hm(t,e){var n=Gm(e);if(n.get(1)!==t.databaseId.projectId)throw new Hp(zp.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Hp(zp.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Af(Qm(n))}function Wm(t,e){return Zm(t.databaseId,e)}function Km(t){var e=Gm(t);return 4===e.length?ff.emptyPath():Qm(e)}function Ym(t){return new ff(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Qm(t){return tf(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function $m(t,e,n){return{name:zm(t,e),fields:n.toProto().mapValue.fields}}function Jm(t,e,n){var r=Hm(t,e.name),i=Bm(e.updateTime),o=new Zf({mapValue:{fields:e.fields}}),s=zf.newFoundDocument(r,i,o);return n&&s.setHasCommittedMutations(),n?s.setHasCommittedMutations():s}function Xm(t,e){var n;if(e instanceof tm)n={update:$m(t,e.key,e.value)};else if(e instanceof am)n={delete:zm(t,e.key)};else if(e instanceof em)n={update:$m(t,e.key,e.data),updateMask:py(e.fieldMask)};else{if(!(e instanceof um))return Xp();n={verify:zm(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(function(t){return function(t,e){var n=e.transform;if(n instanceof Fg)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Ug)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof qg)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Vg)return{fieldPath:e.field.canonicalString(),increment:n.A};throw Xp()}(0,t)})),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Vm(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:Xp()}(t,e.precondition)),n}function ty(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?Hg.updateTime(Bm(t.updateTime)):void 0!==t.exists?Hg.exists(t.exists):Hg.none()}(e.currentDocument):Hg.none(),r=e.updateTransforms?e.updateTransforms.map(function(e){return function(t,e){var n=null;"setToServerValue"in e?(tf("REQUEST_TIME"===e.setToServerValue),n=new Fg):"appendMissingElements"in e?n=new Ug(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new qg(e.removeAllFromArray.values||[]):"increment"in e?n=new Vg(t,e.increment):Xp();var r=mf.fromServerFormat(e.fieldPath);return new Gg(r,n)}(t,e)}):[];if(e.update){var i=Hm(t,e.update.name),o=new Zf({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){return new yf((t.fieldPaths||[]).map(function(t){return mf.fromServerFormat(t)}))}(e.updateMask);return new em(i,o,s,n,r)}return new tm(i,o,n,r)}if(e.delete){var a=Hm(t,e.delete);return new am(a,n)}if(e.verify){var u=Hm(t,e.verify);return new um(u,n)}return Xp()}function ey(t,e){return{documents:[Wm(t,e.path)]}}function ny(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Wm(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Wm(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map(function(t){return function(t){if("=="===t.op){if(Vf(t.value))return{unaryFilter:{field:cy(t.field),op:"IS_NAN"}};if(jf(t.value))return{unaryFilter:{field:cy(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Vf(t.value))return{unaryFilter:{field:cy(t.field),op:"IS_NOT_NAN"}};if(jf(t.value))return{unaryFilter:{field:cy(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:cy(t.field),op:uy(t.op),value:t.value}}}(t)});return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map(function(t){return function(t){return{field:cy(t.field),direction:ay(t.dir)}}(t)})}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.I||xf(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=oy(e.startAt)),e.endAt&&(n.structuredQuery.endAt=oy(e.endAt)),n}function ry(t){var e=Km(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){tf(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=iy(n.where));var a=[];n.orderBy&&(a=n.orderBy.map(function(t){return function(t){return new ug(ly(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)}));var u=null;n.limit&&(u=function(t){var e;return xf(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=sy(n.startAt));var l=null;return n.endAt&&(l=sy(n.endAt)),pg(e,i,a,s,u,"F",c,l)}function iy(t){return t?void 0!==t.unaryFilter?[dy(t)]:void 0!==t.fieldFilter?[hy(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return iy(t)}).reduce(function(t,e){return t.concat(e)}):Xp():[]}function oy(t){return{before:t.before,values:t.position}}function sy(t){return new sg(t.values||[],!!t.before)}function ay(t){return Fm[t]}function uy(t){return Um[t]}function cy(t){return{fieldPath:t.canonicalString()}}function ly(t){return mf.fromServerFormat(t.fieldPath)}function hy(t){return $f.create(ly(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Xp()}}(t.fieldFilter.op),t.fieldFilter.value)}function dy(t){switch(t.unaryFilter.op){case"IS_NAN":var e=ly(t.unaryFilter.field);return $f.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=ly(t.unaryFilter.field);return $f.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=ly(t.unaryFilter.field);return $f.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=ly(t.unaryFilter.field);return $f.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Xp()}}function py(t){var e=[];return t.fields.forEach(function(t){return e.push(t.canonicalString())}),{fieldPaths:e}}function fy(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function gy(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=yy(e)),e=my(t.get(n),e);return yy(e)}function my(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function yy(t){return t+"\x01\x01"}function vy(t){var e=t.length;if(tf(e>=2),2===e)return tf("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),ff.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("\x01",o);switch((s<0||s>n)&&Xp(),t.charAt(s+1)){case"\x01":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:Xp()}o=s+2}return new ff(r)}var _y=function(t,e){this.seconds=t,this.nanoseconds=e},by=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};by.store="owner",by.key="owner";var wy=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};wy.store="mutationQueues",wy.keyPath="userId";var Cy=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Cy.store="mutations",Cy.keyPath="batchId",Cy.userMutationsIndex="userMutationsIndex",Cy.userMutationsKeyPath=["userId","batchId"];var Ty=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,gy(e)]},t.key=function(t,e,n){return[t,gy(e),n]},t}();Ty.store="documentMutations",Ty.PLACEHOLDER=new Ty;var Sy=function(t,e){this.path=t,this.readTime=e},Ey=function(t,e){this.path=t,this.version=e},xy=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};xy.store="remoteDocuments",xy.readTimeIndex="readTimeIndex",xy.readTimeIndexPath="readTime",xy.collectionReadTimeIndex="collectionReadTimeIndex",xy.collectionReadTimeIndexPath=["parentPath","readTime"];var Iy=function(t){this.byteSize=t};Iy.store="remoteDocumentGlobal",Iy.key="remoteDocumentGlobalKey";var ky=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};ky.store="targets",ky.keyPath="targetId",ky.queryTargetsIndexName="queryTargetsIndex",ky.queryTargetsKeyPath=["canonicalId","targetId"];var Ay=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Ay.store="targetDocuments",Ay.keyPath=["targetId","path"],Ay.documentTargetsIndex="documentTargetsIndex",Ay.documentTargetsKeyPath=["path","targetId"];var Oy=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Oy.key="targetGlobalKey",Oy.store="targetGlobal";var Py=function(t,e){this.collectionId=t,this.parent=e};Py.store="collectionParents",Py.keyPath=["collectionId","parent"];var Ry=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};Ry.store="clientMetadata",Ry.keyPath="clientId";var Ny=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};Ny.store="bundles",Ny.keyPath="bundleId";var Dy=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};Dy.store="namedQueries",Dy.keyPath="name";var Ly=(0,Hs.ev)((0,Hs.ev)([],(0,Hs.ev)((0,Hs.ev)([],(0,Hs.ev)((0,Hs.ev)([],(0,Hs.ev)((0,Hs.ev)([],[wy.store,Cy.store,Ty.store,xy.store,ky.store,by.store,Oy.store,Ay.store]),[Ry.store])),[Iy.store])),[Py.store])),[Ny.store,Dy.store]),Fy="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Uy=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(t){return t()})},t}(),My=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})},qy=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)},function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)})}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&Xp(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t(function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}})},t.prototype.toPromise=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.waitFor=function(e){return new t(function(t,n){var r=0,i=0,o=!1;e.forEach(function(e){++r,e.next(function(){++i,o&&i===r&&t()},function(t){return n(t)})}),o=!0,i===r&&t()})},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next(function(n){return n?t.resolve(n):e()})},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach(function(t,i){r.push(e.call(n,t,i))}),this.waitFor(r)},t}(),jy=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new My,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new Zy(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=Ky(e.target.error);n.ft.reject(new Zy(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new Zy(n,e)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(Yp("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new zy(e)},t}(),Vy=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t((0,Ws.z$)())&&Qp("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return Yp("SimpleDb","Removing database:",t),Hy(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=(0,Ws.z$)(),n=t._t(e),r=0<n&&n<10,i=t.Et(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return(0,Hs.mG)(this,void 0,void 0,function(){var e,n=this;return(0,Hs.Jh)(this,function(r){switch(r.label){case 0:return this.db?[3,2]:(Yp("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new Zy(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new Hp(zp.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new Zy(t,n))},i.onupgradeneeded=function(t){Yp("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.wt.Rt(t.target.result,i.transaction,t.oldVersion,n.version).next(function(){Yp("SimpleDb","Database upgrade to version "+n.version+" complete")})}})]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}})})},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return(0,Hs.mG)(this,void 0,void 0,function(){var i,o,s,a,u;return(0,Hs.Jh)(this,function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u,c,l;return(0,Hs.Jh)(this,function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,a.At(t)];case 2:return a.db=h.sent(),e=jy.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch(function(t){return e.abort(t),qy.reject(t)}).toPromise(),u={},s.catch(function(){}),[4,e.dt];case 3:return[2,(u.value=(h.sent(),s),u)];case 4:return Yp("SimpleDb","Transaction failed with error:",(c=h.sent()).message,"Retrying:",l="FirebaseError"!==c.name&&o<3),a.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}})},a=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}})})},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),By=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return Hy(this.Pt.delete())},t}(),Zy=function(t){function e(e,n){var r=this;return(r=t.call(this,zp.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return(0,Hs.ZT)(e,t),e}(Hp);function Gy(t){return"IndexedDbTransactionError"===t.name}var zy=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(Yp("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(Yp("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Hy(n)},t.prototype.add=function(t){return Yp("SimpleDb","ADD",this.store.name,t,t),Hy(this.store.add(t))},t.prototype.get=function(t){var e=this;return Hy(this.store.get(t)).next(function(n){return void 0===n&&(n=null),Yp("SimpleDb","GET",e.store.name,t,n),n})},t.prototype.delete=function(t){return Yp("SimpleDb","DELETE",this.store.name,t),Hy(this.store.delete(t))},t.prototype.count=function(){return Yp("SimpleDb","COUNT",this.store.name),Hy(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.Ft=function(t,e){Yp("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.kt=!1;var r=this.cursor(n);return this.xt(r,function(t,e,n){return n.delete()})},t.prototype.Ot=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.$t=function(t){var e=this.cursor({});return new qy(function(n,r){e.onerror=function(t){var e=Ky(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next(function(t){t?r.continue():n()}):n()}})},t.prototype.xt=function(t,e){var n=[];return new qy(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new By(i),s=e(i.primaryKey,i.value,o);if(s instanceof qy){var a=s.catch(function(t){return o.done(),qy.reject(t)});n.push(a)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}}).next(function(){return qy.waitFor(n)})},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.kt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Hy(t){return new qy(function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=Ky(t.target.error);n(e)}})}var Wy=!1;function Ky(t){var e=Vy._t((0,Ws.z$)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new Hp("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Wy||(Wy=!0,setTimeout(function(){throw r},0)),r}}return t}var Yy=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return(0,Hs.ZT)(e,t),e}(Uy);function Qy(t,e){var n=ef(t);return Vy.It(n.Mt,e)}var $y=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&Yg(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(o=n[e]).key.isEqual(t.key)&&Qg(o,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(t.key)&&Qg(o,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach(function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(cf.min())})},t.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},Sm())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&sf(this.mutations,t.mutations,function(t,e){return Jg(t,e)})&&sf(this.baseMutations,t.baseMutations,function(t,e){return Jg(t,e)})},t}(),Jy=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){tf(e.mutations.length===r.length);for(var i=Cm(),o=e.mutations,s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),Xy=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=cf.min()),void 0===o&&(o=cf.min()),void 0===s&&(s=vf.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),tv=function(t){this.Lt=t};function ev(t,e){if(e.document)return Jm(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=Af.fromSegments(e.noDocument.path),r=sv(e.noDocument.readTime),i=zf.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=Af.fromSegments(e.unknownDocument.path);return r=sv(e.unknownDocument.version),zf.newUnknownDocument(o,r)}return Xp()}function nv(t,e,n){var r=rv(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var o=function(t,e){return{name:zm(t,e.key),fields:e.data.toProto().mapValue.fields,updateTime:qm(t,e.version.toTimestamp())}}(t.Lt,e),s=e.hasCommittedMutations;return new xy(null,null,o,s,r,i)}if(e.isNoDocument()){var a=e.key.path.toArray(),u=ov(e.version);return s=e.hasCommittedMutations,new xy(null,new Sy(a,u),null,s,r,i)}if(e.isUnknownDocument()){var c=e.key.path.toArray(),l=ov(e.version);return new xy(new Ey(c,l),null,null,!0,r,i)}return Xp()}function rv(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function iv(t){var e=new uf(t[0],t[1]);return cf.fromTimestamp(e)}function ov(t){var e=t.toTimestamp();return new _y(e.seconds,e.nanoseconds)}function sv(t){var e=new uf(t.seconds,t.nanoseconds);return cf.fromTimestamp(e)}function av(t,e){for(var n=(e.baseMutations||[]).map(function(e){return ty(t.Lt,e)}),r=0;r<e.mutations.length-1;++r)r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform&&(e.mutations[r].updateTransforms=e.mutations[r+1].transform.fieldTransforms,e.mutations.splice(r+1,1),++r);var i=e.mutations.map(function(e){return ty(t.Lt,e)}),o=uf.fromMillis(e.localWriteTimeMs);return new $y(e.batchId,o,n,i)}function uv(t){var e,n,r=sv(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?sv(t.lastLimboFreeSnapshotVersion):cf.min();return void 0!==t.query.documents?(tf(1===(n=t.query).documents.length),e=wg(fg(Km(n.documents[0])))):e=function(t){return wg(ry(t))}(t.query),new Xy(e,t.targetId,0,t.lastListenSequenceNumber,r,i,vf.fromBase64String(t.resumeToken))}function cv(t,e){var n,r=ov(e.snapshotVersion),i=ov(e.lastLimboFreeSnapshotVersion);n=Qf(e.target)?ey(t.Lt,e.target):ny(t.Lt,e.target);var o=e.resumeToken.toBase64();return new ky(e.targetId,Kf(e.target),r,o,e.sequenceNumber,i,n)}function lv(t){var e=ry({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Cg(e,e.limit,"L"):e}var hv=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return dv(t).get(e).next(function(t){if(t)return{id:(e=t).bundleId,createTime:sv(e.createTime),version:e.version};var e})},t.prototype.saveBundleMetadata=function(t,e){return dv(t).put({bundleId:(n=e).id,createTime:ov(Bm(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return pv(t).get(e).next(function(t){if(t)return{name:(e=t).name,query:lv(e.bundledQuery),readTime:sv(e.readTime)};var e})},t.prototype.saveNamedQuery=function(t,e){return pv(t).put(function(t){return{name:t.name,readTime:ov(Bm(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function dv(t){return Qy(t,Ny.store)}function pv(t){return Qy(t,Dy.store)}var fv=function(){function t(){this.Bt=new gv}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),qy.resolve()},t.prototype.getCollectionParents=function(t,e){return qy.resolve(this.Bt.getEntries(e))},t}(),gv=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new gm(ff.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new gm(ff.comparator)).toArray()},t}(),mv=function(){function t(){this.qt=new gv}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener(function(){n.qt.add(e)});var o={collectionId:r,parent:gy(i)};return yv(t).put(o)}return qy.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[af(e),""],!1,!0);return yv(t).Nt(r).next(function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(vy(o.parent))}return n})},t}();function yv(t){return Qy(t,Py.store)}var vv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},_v=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function bv(t,e,n){var r=t.store(Cy.store),i=t.store(Ty.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.Ot({range:s},function(t,e,n){return a++,n.delete()});o.push(u.next(function(){tf(1===a)}));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var d=h[l],p=Ty.key(e,d.key.path,n.batchId);o.push(i.delete(p)),c.push(d.key)}return qy.waitFor(o).next(function(){return c})}function wv(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Xp();e=t.noDocument}return JSON.stringify(e).length}_v.DEFAULT_COLLECTION_PERCENTILE=10,_v.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_v.DEFAULT=new _v(41943040,_v.DEFAULT_COLLECTION_PERCENTILE,_v.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_v.DISABLED=new _v(-1,0,0);var Cv=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Qt={}}return t.Kt=function(e,n,r,i){return tf(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Sv(t).Ot({index:Cy.userMutationsIndex,range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=Ev(t),s=Sv(t);return s.add({}).next(function(a){tf("number"==typeof a);for(var u=new $y(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map(function(e){return Xm(t.Lt,e)}),i=n.mutations.map(function(e){return Xm(t.Lt,e)});return new Cy(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),l=[],h=new gm(function(t,e){return of(t.canonicalString(),e.canonicalString())}),d=0,p=r;d<p.length;d++){var f=p[d],g=Ty.key(i.userId,f.key.path,a);h=h.add(f.key.path.popLast()),l.push(s.put(c)),l.push(o.put(g,Ty.PLACEHOLDER))}return h.forEach(function(e){l.push(i.Ut.addToCollectionParentIndex(t,e))}),t.addOnCommittedListener(function(){i.Qt[a]=u.keys()}),qy.waitFor(l).next(function(){return u})})},t.prototype.lookupMutationBatch=function(t,e){var n=this;return Sv(t).get(e).next(function(t){return t?(tf(t.userId===n.userId),av(n.R,t)):null})},t.prototype.jt=function(t,e){var n=this;return this.Qt[e]?qy.resolve(this.Qt[e]):this.lookupMutationBatch(t,e).next(function(t){if(t){var r=t.keys();return n.Qt[e]=r,r}return null})},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Sv(t).Ot({index:Cy.userMutationsIndex,range:i},function(t,e,i){e.userId===n.userId&&(tf(e.batchId>=r),o=av(n.R,e)),i.done()}).next(function(){return o})},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Sv(t).Ot({index:Cy.userMutationsIndex,range:e,reverse:!0},function(t,e,r){n=e.batchId,r.done()}).next(function(){return n})},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Sv(t).Nt(Cy.userMutationsIndex,n).next(function(t){return t.map(function(t){return av(e.R,t)})})},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=Ty.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return Ev(t).Ot({range:i},function(r,i,s){var a=r[0],u=r[2],c=vy(r[1]);if(a===n.userId&&e.path.isEqual(c))return Sv(t).get(u).next(function(t){if(!t)throw Xp();tf(t.userId===n.userId),o.push(av(n.R,t))});s.done()}).next(function(){return o})},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new gm(of),i=[];return e.forEach(function(e){var o=Ty.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=Ev(t).Ot({range:s},function(t,i,o){var s=t[0],a=t[2],u=vy(t[1]);s===n.userId&&e.path.isEqual(u)?r=r.add(a):o.done()});i.push(a)}),qy.waitFor(i).next(function(){return n.Wt(t,r)})},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=Ty.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new gm(of);return Ev(t).Ot({range:s},function(t,e,o){var s=t[0],u=t[2],c=vy(t[1]);s===n.userId&&r.isPrefixOf(c)?c.length===i&&(a=a.add(u)):o.done()}).next(function(){return n.Wt(t,a)})},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(Sv(t).get(e).next(function(t){if(null===t)throw Xp();tf(t.userId===n.userId),r.push(av(n.R,t))}))}),qy.waitFor(i).next(function(){return r})},t.prototype.removeMutationBatch=function(t,e){var n=this;return bv(t.Mt,this.userId,e).next(function(r){return t.addOnCommittedListener(function(){n.Gt(e.batchId)}),qy.forEach(r,function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)})})},t.prototype.Gt=function(t){delete this.Qt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next(function(n){if(!n)return qy.resolve();var r=IDBKeyRange.lowerBound(Ty.prefixForUser(e.userId)),i=[];return Ev(t).Ot({range:r},function(t,n,r){if(t[0]===e.userId){var o=vy(t[1]);i.push(o)}else r.done()}).next(function(){tf(0===i.length)})})},t.prototype.containsKey=function(t,e){return Tv(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return xv(t).get(this.userId).next(function(t){return t||new wy(e.userId,-1,"")})},t}();function Tv(t,e,n){var r=Ty.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Ev(t).Ot({range:o,kt:!0},function(t,n,r){t[0]===e&&t[1]===i&&(s=!0),r.done()}).next(function(){return s})}function Sv(t){return Qy(t,Cy.store)}function Ev(t){return Qy(t,Ty.store)}function xv(t){return Qy(t,wy.store)}var Iv=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),kv=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next(function(n){var r=new Iv(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next(function(){return n.highestTargetId})})},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next(function(t){return cf.fromTimestamp(new uf(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next(function(t){return t.highestListenSequenceNumber})},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next(function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)})},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next(function(){return n.Xt(t).next(function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)})})},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next(function(){return Av(t).delete(e.targetId)}).next(function(){return n.Xt(t)}).next(function(e){return tf(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)})},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return Av(t).Ot(function(s,a){var u=uv(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))}).next(function(){return qy.waitFor(o)}).next(function(){return i})},t.prototype.forEachTarget=function(t,e){return Av(t).Ot(function(t,n){var r=uv(n);e(r)})},t.prototype.Xt=function(t){return Ov(t).get(Oy.key).next(function(t){return tf(null!==t),t})},t.prototype.Zt=function(t,e){return Ov(t).put(Oy.key,e)},t.prototype.te=function(t,e){return Av(t).put(cv(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next(function(t){return t.targetCount})},t.prototype.getTargetData=function(t,e){var n=Kf(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Av(t).Ot({range:r,index:ky.queryTargetsIndexName},function(t,n,r){var o=uv(n);Yf(e,o.target)&&(i=o,r.done())}).next(function(){return i})},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=Pv(t);return e.forEach(function(e){var s=gy(e.path);i.push(o.put(new Ay(n,s))),i.push(r.referenceDelegate.addReference(t,n,e))}),qy.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=Pv(t);return qy.forEach(e,function(e){var o=gy(e.path);return qy.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])})},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=Pv(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Pv(t),i=Sm();return r.Ot({range:n,kt:!0},function(t,e,n){var r=vy(t[1]),o=new Af(r);i=i.add(o)}).next(function(){return i})},t.prototype.containsKey=function(t,e){var n=gy(e.path),r=IDBKeyRange.bound([n],[af(n)],!1,!0),i=0;return Pv(t).Ot({index:Ay.documentTargetsIndex,kt:!0,range:r},function(t,e,n){0!==t[0]&&(i++,n.done())}).next(function(){return i>0})},t.prototype.lt=function(t,e){return Av(t).get(e).next(function(t){return t?uv(t):null})},t}();function Av(t){return Qy(t,ky.store)}function Ov(t){return Qy(t,Oy.store)}function Pv(t){return Qy(t,Ay.store)}function Rv(t){return(0,Hs.mG)(this,void 0,void 0,function(){return(0,Hs.Jh)(this,function(e){if(t.code!==zp.FAILED_PRECONDITION||t.message!==Fy)throw t;return Yp("LocalStore","Unexpectedly lost primary lease"),[2]})})}function Nv(t,e){var n=t[1],r=e[1],i=of(t[0],e[0]);return 0===i?of(n,r):i}var Dv=function(){function t(t){this.ne=t,this.buffer=new gm(Nv),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Nv(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),Lv=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;Yp("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,function(){return(0,Hs.mG)(e,void 0,void 0,function(){var e;return(0,Hs.Jh)(this,function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return Gy(e=n.sent())?(Yp("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,Rv(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}})})})},t}(),Fv=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next(function(t){return Math.floor(e/100*t)})},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return qy.resolve(Gp.o);var r=new Dv(e);return this.ae.forEachTarget(t,function(t){return r.re(t.sequenceNumber)}).next(function(){return n.ae.le(t,function(t){return r.re(t)})}).next(function(){return r.maxValue})},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Yp("LruGarbageCollector","Garbage collection skipped; disabled"),qy.resolve(vv)):this.getCacheSize(t).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(Yp("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),vv):n.fe(t,e)})},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,o,s,a,u,c=this,l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(function(e){return e>c.params.maximumSequenceNumbersToCollect?(Yp("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),c.nthSequenceNumber(t,r)}).next(function(r){return n=r,s=Date.now(),c.removeTargets(t,n,e)}).next(function(e){return i=e,a=Date.now(),c.removeOrphanedDocuments(t,n)}).next(function(t){return u=Date.now(),Kp()<=Bc.in.DEBUG&&Yp("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-l)+"ms"),qy.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})})},t}(),Uv=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new Fv(t,e)}(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.de=function(t){var e=0;return this.le(t,function(t){e++}).next(function(){return e})},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,function(t,n){return e(n)})},t.prototype.addReference=function(t,e,n){return Mv(t,n)},t.prototype.removeReference=function(t,e,n){return Mv(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return Mv(t,e)},t.prototype._e=function(t,e){return function(t,e){var n=!1;return xv(t).$t(function(r){return Tv(t,r,e).next(function(t){return t&&(n=!0),qy.resolve(!t)})}).next(function(){return n})}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,function(s,a){if(a<=e){var u=n._e(t,s).next(function(e){if(!e)return o++,r.getEntry(t,s).next(function(){return r.removeEntry(s),Pv(t).delete([0,gy(s.path)])})});i.push(u)}}).next(function(){return qy.waitFor(i)}).next(function(){return r.apply(t)}).next(function(){return o})},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return Mv(t,e)},t.prototype.we=function(t,e){var n,r=Pv(t),i=Gp.o;return r.Ot({index:Ay.documentTargetsIndex},function(t,r){var o=r.path,s=r.sequenceNumber;0===t[0]?(i!==Gp.o&&e(new Af(vy(n)),i),i=s,n=o):i=Gp.o}).next(function(){i!==Gp.o&&e(new Af(vy(n)),i)})},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function Mv(t,e){return Pv(t).put(function(t,e){return new Ay(0,gy(t.path),e)}(e,t.currentSequenceNumber))}var qv=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[1];if(this.equalsFn(o[0],t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){hf(this.inner,function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}})},t.prototype.isEmpty=function(){return df(this.inner)},t}(),jv=function(){function t(){this.changes=new qv(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:cf.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:zf.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?qy.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),Vv=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return Gv(t).put(zv(e),n)},t.prototype.removeEntry=function(t,e){var n=Gv(t),r=zv(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next(function(r){return r.byteSize+=e,n.me(t,r)})},t.prototype.getEntry=function(t,e){var n=this;return Gv(t).get(zv(e)).next(function(t){return n.ye(e,t)})},t.prototype.ge=function(t,e){var n=this;return Gv(t).get(zv(e)).next(function(t){return{document:n.ye(e,t),size:wv(t)}})},t.prototype.getEntries=function(t,e){var n=this,r=vm();return this.pe(t,e,function(t,e){var i=n.ye(t,e);r=r.insert(t,i)}).next(function(){return r})},t.prototype.Ee=function(t,e){var n=this,r=vm(),i=new dm(Af.comparator);return this.pe(t,e,function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,wv(e))}).next(function(){return{documents:r,Te:i}})},t.prototype.pe=function(t,e,n){if(e.isEmpty())return qy.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return Gv(t).Ot({range:r},function(t,e,r){for(var s=Af.fromSegments(t);o&&Af.comparator(o,s)<0;)n(o,null),o=i.getNext();o&&o.isEqual(s)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()}).next(function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=vm(),o=e.path.length+1,s={};if(n.isEqual(cf.min())){var a=e.path.toArray();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.toArray(),c=rv(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=xy.collectionReadTimeIndex}return Gv(t).Ot(s,function(t,n,s){if(t.length===o){var a=ev(r.R,n);e.path.isPrefixOf(a.key.path)?xg(e,a)&&(i=i.insert(a.key,a)):s.done()}}).next(function(){return i})},t.prototype.newChangeBuffer=function(t){return new Bv(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},t.prototype.getMetadata=function(t){return Zv(t).get(Iy.key).next(function(t){return tf(!!t),t})},t.prototype.me=function(t,e){return Zv(t).put(Iy.key,e)},t.prototype.ye=function(t,e){if(e){var n=ev(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(cf.min()))return n}return zf.newInvalidDocument(t)},t}(),Bv=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new qv(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),r}return(0,Hs.ZT)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new gm(function(t,e){return of(t.canonicalString(),e.canonicalString())});return this.changes.forEach(function(o,s){var a=e.Ae.get(o);if(s.document.isValidDocument()){var u=nv(e.Ie.R,s.document,e.getReadTime(o));i=i.add(o.path.popLast());var c=wv(u);r+=c-a,n.push(e.Ie.addEntry(t,o,u))}else if(r-=a,e.trackRemovals){var l=nv(e.Ie.R,zf.newNoDocument(o,cf.min()),e.getReadTime(o));n.push(e.Ie.addEntry(t,o,l))}else n.push(e.Ie.removeEntry(t,o))}),i.forEach(function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))}),n.push(this.Ie.updateMetadata(t,r)),qy.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next(function(t){return n.Ae.set(e,t.size),t.document})},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next(function(t){var e=t.documents;return t.Te.forEach(function(t,e){n.Ae.set(t,e)}),e})},e}(jv);function Zv(t){return Qy(t,Iy.store)}function Gv(t){return Qy(t,xy.store)}function zv(t){return t.path.toArray()}var Hv=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;tf(n<r&&n>=0&&r<=11);var o=new jy("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(by.store)}(t),function(t){t.createObjectStore(wy.store,{keyPath:wy.keyPath}),t.createObjectStore(Cy.store,{keyPath:Cy.keyPath,autoIncrement:!0}).createIndex(Cy.userMutationsIndex,Cy.userMutationsKeyPath,{unique:!0}),t.createObjectStore(Ty.store)}(t),Wv(t),function(t){t.createObjectStore(xy.store)}(t));var s=qy.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Ay.store),t.deleteObjectStore(ky.store),t.deleteObjectStore(Oy.store)}(t),Wv(t)),s=s.next(function(){return function(t){var e=t.store(Oy.store),n=new Oy(0,0,cf.min().toTimestamp(),0);return e.put(Oy.key,n)}(o)})),n<4&&r>=4&&(0!==n&&(s=s.next(function(){return function(t,e){return e.store(Cy.store).Nt().next(function(n){t.deleteObjectStore(Cy.store),t.createObjectStore(Cy.store,{keyPath:Cy.keyPath,autoIncrement:!0}).createIndex(Cy.userMutationsIndex,Cy.userMutationsKeyPath,{unique:!0});var r=e.store(Cy.store),i=n.map(function(t){return r.put(t)});return qy.waitFor(i)})}(t,o)})),s=s.next(function(){!function(t){t.createObjectStore(Ry.store,{keyPath:Ry.keyPath})}(t)})),n<5&&r>=5&&(s=s.next(function(){return i.Re(o)})),n<6&&r>=6&&(s=s.next(function(){return function(t){t.createObjectStore(Iy.store)}(t),i.be(o)})),n<7&&r>=7&&(s=s.next(function(){return i.ve(o)})),n<8&&r>=8&&(s=s.next(function(){return i.Pe(t,o)})),n<9&&r>=9&&(s=s.next(function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(xy.store);e.createIndex(xy.readTimeIndex,xy.readTimeIndexPath,{unique:!1}),e.createIndex(xy.collectionReadTimeIndex,xy.collectionReadTimeIndexPath,{unique:!1})}(e)})),n<10&&r>=10&&(s=s.next(function(){return i.Ve(o)})),n<11&&r>=11&&(s=s.next(function(){!function(t){t.createObjectStore(Ny.store,{keyPath:Ny.keyPath})}(t),function(t){t.createObjectStore(Dy.store,{keyPath:Dy.keyPath})}(t)})),s},t.prototype.be=function(t){var e=0;return t.store(xy.store).Ot(function(t,n){e+=wv(n)}).next(function(){var n=new Iy(e);return t.store(Iy.store).put(Iy.key,n)})},t.prototype.Re=function(t){var e=this,n=t.store(wy.store),r=t.store(Cy.store);return n.Nt().next(function(n){return qy.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(Cy.userMutationsIndex,i).next(function(r){return qy.forEach(r,function(r){tf(r.userId===n.userId);var i=av(e.R,r);return bv(t,n.userId,i).next(function(){})})})})})},t.prototype.ve=function(t){var e=t.store(Ay.store),n=t.store(xy.store);return t.store(Oy.store).get(Oy.key).next(function(t){var r=[];return n.Ot(function(n,i){var o=new ff(n),s=function(t){return[0,gy(t)]}(o);r.push(e.get(s).next(function(n){return n?qy.resolve():function(n){return e.put(new Ay(0,gy(n),t.highestListenSequenceNumber))}(o)}))}).next(function(){return qy.waitFor(r)})})},t.prototype.Pe=function(t,e){t.createObjectStore(Py.store,{keyPath:Py.keyPath});var n=e.store(Py.store),r=new gv,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:gy(i)})}};return e.store(xy.store).Ot({kt:!0},function(t,e){var n=new ff(t);return i(n.popLast())}).next(function(){return e.store(Ty.store).Ot({kt:!0},function(t,e){var n=vy(t[1]);return i(n.popLast())})})},t.prototype.Ve=function(t){var e=this,n=t.store(ky.store);return n.Ot(function(t,r){var i=uv(r),o=cv(e.R,i);return n.put(o)})},t}();function Wv(t){t.createObjectStore(Ay.store,{keyPath:Ay.keyPath}).createIndex(Ay.documentTargetsIndex,Ay.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(ky.store,{keyPath:ky.keyPath}).createIndex(ky.queryTargetsIndexName,ky.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Oy.store)}var Kv="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Yv=function(){function t(e,n,r,i,o,s,a,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=s,this.document=a,this.De=c,this.Ce=l,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.Oe=null,this.$e=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new Hp(zp.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Uv(this,i),this.Le=n+"main",this.R=new tv(u),this.Be=new Vy(this.Le,11,new Hv(this.R)),this.qe=new kv(this.referenceDelegate,this.R),this.Ut=new mv,this.Ue=function(t,e){return new Vv(t,e)}(this.R,this.Ut),this.Qe=new hv,this.window&&this.window.localStorage?this.Ke=this.window.localStorage:(this.Ke=null,!1===l&&Qp("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new Hp(zp.FAILED_PRECONDITION,Kv);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(e){return t.qe.getHighestSequenceNumber(e)})}).then(function(e){t.Ne=new Gp(e,t.De)}).then(function(){t.xe=!0}).catch(function(e){return t.Be&&t.Be.close(),Promise.reject(e)})},t.prototype.He=function(t){var e=this;return this.Me=function(n){return(0,Hs.mG)(e,void 0,void 0,function(){return(0,Hs.Jh)(this,function(e){return this.started?[2,t(n)]:[2]})})},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt(function(n){return(0,Hs.mG)(e,void 0,void 0,function(){return(0,Hs.Jh)(this,function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})})},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget(function(){return(0,Hs.mG)(e,void 0,void 0,function(){return(0,Hs.Jh)(this,function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return $v(e).put(new Ry(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.Je(e).next(function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable(function(){return t.Me(!1)}))})}).next(function(){return t.Ye(e)}).next(function(n){return t.isPrimary&&!n?t.Xe(e).next(function(){return!1}):!!n&&t.Ze(e).next(function(){return!0})})}).catch(function(e){if(Gy(e))return Yp("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return Yp("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(function(e){t.isPrimary!==e&&t.Se.enqueueRetryable(function(){return t.Me(e)}),t.isPrimary=e})},t.prototype.Je=function(t){var e=this;return Qv(t).get(by.key).next(function(t){return qy.resolve(e.tn(t))})},t.prototype.en=function(t){return $v(t).delete(this.clientId)},t.prototype.nn=function(){return(0,Hs.mG)(this,void 0,void 0,function(){var t,e,n,r=this;return(0,Hs.Jh)(this,function(i){switch(i.label){case 0:return!this.isPrimary||this.sn(this.$e,18e5)?[3,2]:(this.$e=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var e=Qy(t,Ry.store);return e.Nt().next(function(t){var n=r.rn(t,18e5),i=t.filter(function(t){return-1===n.indexOf(t)});return qy.forEach(i,function(t){return e.delete(t.clientId)}).next(function(){return i})})}).catch(function(){return[]})]);case 1:if(t=i.sent(),this.Ke)for(e=0,n=t;e<n.length;e++)this.Ke.removeItem(this.on(n[e].clientId));i.label=2;case 2:return[2]}})})},t.prototype.ze=function(){var t=this;this.Oe=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return t.je().then(function(){return t.nn()}).then(function(){return t.ze()})})},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?qy.resolve(!0):Qv(t).get(by.key).next(function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new Hp(zp.FAILED_PRECONDITION,Kv);return!1}}return!(!e.networkEnabled||!e.inForeground)||$v(t).Nt().next(function(t){return void 0===e.rn(t,5e3).find(function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))})})}).next(function(t){return e.isPrimary!==t&&Yp("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},t.prototype.shutdown=function(){return(0,Hs.mG)(this,void 0,void 0,function(){var t=this;return(0,Hs.Jh)(this,function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.Oe&&(this.Oe.cancel(),this.Oe=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[by.store,Ry.store],function(e){var n=new Yy(e,Gp.o);return t.Xe(n).next(function(){return t.en(n)})})];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}})})},t.prototype.rn=function(t,e){var n=this;return t.filter(function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)})},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(e){return $v(e).Nt().next(function(e){return t.rn(e,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return Cv.Kt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r,i=this;return Yp("IndexedDbPersistence","Starting transaction:",t),this.Be.runTransaction(t,"readonly"===e?"readonly":"readwrite",Ly,function(o){return r=new Yy(o,i.Ne?i.Ne.next():Gp.o),"readwrite-primary"===e?i.Je(r).next(function(t){return!!t||i.Ye(r)}).next(function(e){if(!e)throw Qp("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Se.enqueueRetryable(function(){return i.Me(!1)}),new Hp(zp.FAILED_PRECONDITION,Fy);return n(r)}).next(function(t){return i.Ze(r).next(function(){return t})}):i.dn(r).next(function(){return n(r)})}).then(function(t){return r.raiseOnCommittedEvent(),t})},t.prototype.dn=function(t){var e=this;return Qv(t).get(by.key).next(function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new Hp(zp.FAILED_PRECONDITION,Kv)})},t.prototype.Ze=function(t){var e=new by(this.clientId,this.allowTabSynchronization,Date.now());return Qv(t).put(by.key,e)},t.yt=function(){return Vy.yt()},t.prototype.Xe=function(t){var e=this,n=Qv(t);return n.get(by.key).next(function(t){return e.tn(t)?(Yp("IndexedDbPersistence","Releasing primary lease."),n.delete(by.key)):qy.resolve()})},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(Qp("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){t.Se.enqueueAndForget(function(){return t.inForeground="visible"===t.document.visibilityState,t.je()})},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Fe=function(){e.un(),e.Se.enqueueAndForget(function(){return e.shutdown()})},this.window.addEventListener("unload",this.Fe))},t.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("unload",this.Fe),this.Fe=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Ke)||void 0===e?void 0:e.getItem(this.on(t)));return Yp("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return Qp("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.un=function(){if(this.Ke)try{this.Ke.setItem(this.on(this.clientId),String(Date.now()))}catch(t){Qp("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Ke)try{this.Ke.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function Qv(t){return Qy(t,by.store)}function $v(t){return Qy(t,Ry.store)}function Jv(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var Xv=function(t,e){this.progress=t,this.wn=e},t_=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next(function(r){return n.yn(t,e,r)})},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next(function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t})},t.prototype.gn=function(t,e){t.forEach(function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)})},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next(function(e){return n.En(t,e).next(function(){return e})})},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next(function(t){return n.gn(e,t)})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return Af.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Tn(t,e.path):_g(e)?this.In(t,e,n):this.An(t,e,n)},t.prototype.Tn=function(t,e){return this.mn(t,new Af(e)).next(function(t){var e=bm();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e})},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=bm();return this.Ut.getCollectionParents(t,i).next(function(s){return qy.forEach(s,function(s){var a=function(t,e){return new dg(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.An(t,a,n).next(function(t){t.forEach(function(t,e){o=o.insert(t,e)})})}).next(function(){return o})})},t.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next(function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)}).next(function(e){return o.Rn(t,i=e,r).next(function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,l=r.get(c);null==l&&(l=zf.newInvalidDocument(c),r=r.insert(c,l)),Qg(u,l,o.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}})}).next(function(){return r.forEach(function(t,n){xg(e,n)||(r=r.remove(t))}),r})},t.prototype.Rn=function(t,e,n){for(var r=Sm(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof em&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next(function(t){return t.forEach(function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))}),c})},t}(),e_=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=Sm(),i=Sm(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),n_=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(cf.min())?this.Dn(t,e):this.Sn.pn(t,r).next(function(o){var s=i.Cn(e,o);return(gg(e)||mg(e))&&i.Nn(e.limitType,s,r,n)?i.Dn(t,e):(Kp()<=Bc.in.DEBUG&&Yp("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Eg(e)),i.Sn.getDocumentsMatchingQuery(t,e,n).next(function(t){return s.forEach(function(e){t=t.insert(e.key,e)}),t}))})},t.prototype.Cn=function(t,e){var n=new gm(Ig(t));return e.forEach(function(e,r){xg(t,r)&&(n=n.add(r))}),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return Kp()<=Bc.in.DEBUG&&Yp("QueryEngine","Using full collection scan to execute query:",Eg(e)),this.Sn.getDocumentsMatchingQuery(t,e,cf.min())},t}(),r_=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.Fn=new dm(of),this.kn=new qv(function(t){return Kf(t)},Yf),this.On=cf.min(),this._n=t.getMutationQueue(n),this.$n=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new t_(this.$n,this._n,this.persistence.getIndexManager()),this.Qe=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return t.collect(n,e.Fn)})},t}();function i_(t,e,n,r){return new r_(t,e,n,r)}function o_(t,e){return(0,Hs.mG)(this,void 0,void 0,function(){var n,r,i,o;return(0,Hs.Jh)(this,function(s){switch(s.label){case 0:return n=ef(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",function(t){var o;return n._n.getAllMutationBatches(t).next(function(s){return o=s,r=n.persistence.getMutationQueue(e),i=new t_(n.$n,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)}).next(function(e){for(var n=[],r=[],s=Sm(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++)s=s.add(h[l].key)}for(var d=0,p=e;d<p.length;d++){var f=p[d];r.push(f.batchId);for(var g=0,m=f.mutations;g<m.length;g++)s=s.add(m[g].key)}return i.pn(t,s).next(function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}})})})];case 1:return o=s.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}})})}function s_(t,e){var n=ef(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var r=e.batch.keys(),i=n.$n.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=qy.resolve();return o.forEach(function(t){s=s.next(function(){return r.getEntry(e,t)}).next(function(e){var o=n.docVersions.get(t);tf(null!==o),e.version.compareTo(o)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))})}),s.next(function(){return t._n.removeMutationBatch(e,i)})}(n,t,e,i).next(function(){return i.apply(t)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}function a_(t){var e=ef(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.qe.getLastRemoteSnapshotVersion(t)})}function u_(t,e){var n=ef(t),r=e.snapshotVersion,i=n.Fn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(t){var o=n.$n.newChangeBuffer({trackRemovals:!0});i=n.Fn;var s=[];e.targetChanges.forEach(function(e,o){var a=i.get(o);if(a){s.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next(function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)}));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=a.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,c),function(t,e,n){return tf(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,c,e)&&s.push(n.qe.updateTargetData(t,c))}}});var a=vm();if(e.documentUpdates.forEach(function(r,i){e.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))}),s.push(c_(t,o,e.documentUpdates,r,void 0).next(function(t){a=t})),!r.isEqual(cf.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next(function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)});s.push(u)}return qy.waitFor(s).next(function(){return o.apply(t)}).next(function(){return n.Mn.En(t,a)}).next(function(){return a})}).then(function(t){return n.Fn=i,t})}function c_(t,e,n,r,i){var o=Sm();return n.forEach(function(t){return o=o.add(t)}),e.getEntries(t,o).next(function(t){var o=vm();return n.forEach(function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s.isNoDocument()&&s.version.isEqual(cf.min())?(e.removeEntry(n,u),o=o.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(s,u),o=o.insert(n,s)):Yp("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)}),o})}function l_(t,e){var n=ef(t);return n.persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)})}function h_(t,e){var n=ef(t);return n.persistence.runTransaction("Allocate target","readwrite",function(t){var r;return n.qe.getTargetData(t,e).next(function(i){return i?qy.resolve(r=i):n.qe.allocateTargetId(t).next(function(i){return r=new Xy(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next(function(){return r})})})}).then(function(t){var r=n.Fn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fn=n.Fn.insert(t.targetId,t),n.kn.set(e,t.targetId)),t})}function d_(t,e,n){return(0,Hs.mG)(this,void 0,void 0,function(){var r,i,o,s;return(0,Hs.Jh)(this,function(a){switch(a.label){case 0:r=ef(t),i=r.Fn.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,function(t){return r.persistence.referenceDelegate.removeTarget(t,i)})];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!Gy(s=a.sent()))throw s;return Yp("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.Fn=r.Fn.remove(e),r.kn.delete(i.target),[2]}})})}function p_(t,e,n){var r=ef(t),i=cf.min(),o=Sm();return r.persistence.runTransaction("Execute query","readonly",function(t){return function(t,e,n){var r=ef(t),i=r.kn.get(n);return void 0!==i?qy.resolve(r.Fn.get(i)):r.qe.getTargetData(e,n)}(r,t,wg(e)).next(function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next(function(t){o=t})}).next(function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:cf.min(),n?o:Sm())}).next(function(t){return{documents:t,Bn:o}})})}function f_(t,e){var n=ef(t),r=ef(n.qe),i=n.Fn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(t){return r.lt(t,e).next(function(t){return t?t.target:null})})}function g_(t){var e=ef(t);return e.persistence.runTransaction("Get new document changes","readonly",function(t){return function(t,e,n){var r=ef(t),i=vm(),o=rv(n),s=Gv(e),a=IDBKeyRange.lowerBound(o,!0);return s.Ot({index:xy.readTimeIndex,range:a},function(t,e){var n=ev(r.R,e);i=i.insert(n.key,n),o=e.readTime}).next(function(){return{wn:i,readTime:iv(o)}})}(e.$n,t,e.On)}).then(function(t){var n=t.wn;return e.On=t.readTime,n})}function m_(t){return(0,Hs.mG)(this,void 0,void 0,function(){var e;return(0,Hs.Jh)(this,function(n){return[2,(e=ef(t)).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return function(t){var e=Gv(t),n=cf.min();return e.Ot({index:xy.readTimeIndex,reverse:!0},function(t,e,r){e.readTime&&(n=iv(e.readTime)),r.done()}).next(function(){return n})}(t)}).then(function(t){e.On=t})]})})}function y_(t,e,n,r){return(0,Hs.mG)(this,void 0,void 0,function(){var i,o,s,a,u,c,l,h,d,p;return(0,Hs.Jh)(this,function(f){switch(f.label){case 0:for(i=ef(t),o=Sm(),s=vm(),a=Cm(),u=0,c=n;u<c.length;u++)h=e.qn((l=c[u]).metadata.name),l.document&&(o=o.add(h)),s=s.insert(h,e.Un(l)),a=a.insert(h,e.Qn(l.metadata.readTime));return d=i.$n.newChangeBuffer({trackRemovals:!0}),[4,h_(i,function(t){return wg(fg(ff.fromString("__bundle__/docs/"+t)))}(r))];case 1:return p=f.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",function(t){return c_(t,d,s,cf.min(),a).next(function(e){return d.apply(t),e}).next(function(e){return i.qe.removeMatchingKeysForTargetId(t,p.targetId).next(function(){return i.qe.addMatchingKeys(t,o,p.targetId)}).next(function(){return i.Mn.En(t,e)}).next(function(){return e})})})]}})})}function v_(t,e,n){return void 0===n&&(n=Sm()),(0,Hs.mG)(this,void 0,void 0,function(){var r,i;return(0,Hs.Jh)(this,function(o){switch(o.label){case 0:return[4,h_(t,wg(lv(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=ef(t)).persistence.runTransaction("Save named query","readwrite",function(t){var o=Bm(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Qe.saveNamedQuery(t,e);var s=r.withResumeToken(vf.EMPTY_BYTE_STRING,o);return i.Fn=i.Fn.insert(s.targetId,s),i.qe.updateTargetData(t,s).next(function(){return i.qe.removeMatchingKeysForTargetId(t,r.targetId)}).next(function(){return i.qe.addMatchingKeys(t,n,r.targetId)}).next(function(){return i.Qe.saveNamedQuery(t,e)})})]}})})}var __=function(){function t(t){this.R=t,this.Kn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return qy.resolve(this.Kn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Kn.set(e.id,{id:(n=e).id,version:n.version,createTime:Bm(n.createTime)}),qy.resolve()},t.prototype.getNamedQuery=function(t,e){return qy.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,function(t){return{name:t.name,query:lv(t.bundledQuery),readTime:Bm(t.readTime)}}(e)),qy.resolve()},t}(),b_=function(){function t(){this.Wn=new gm(w_.Gn),this.zn=new gm(w_.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new w_(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach(function(t){return n.addReference(t,e)})},t.prototype.removeReference=function(t,e){this.Yn(new w_(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach(function(t){return n.removeReference(t,e)})},t.prototype.Zn=function(t){var e=this,n=new Af(new ff([])),r=new w_(n,t),i=new w_(n,t+1),o=[];return this.zn.forEachInRange([r,i],function(t){e.Yn(t),o.push(t.key)}),o},t.prototype.ts=function(){var t=this;this.Wn.forEach(function(e){return t.Yn(e)})},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new Af(new ff([])),n=new w_(e,t),r=new w_(e,t+1),i=Sm();return this.zn.forEachInRange([n,r],function(t){i=i.add(t.key)}),i},t.prototype.containsKey=function(t){var e=new w_(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),w_=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return Af.comparator(t.key,e.key)||of(t.ns,e.ns)},t.Hn=function(t,e){return of(t.ns,e.ns)||Af.comparator(t.key,e.key)},t}(),C_=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new gm(w_.Gn)}return t.prototype.checkEmpty=function(t){return qy.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++;var o=new $y(i,e,n,r);this._n.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.rs=this.rs.add(new w_(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return qy.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return qy.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this.cs(e+1),r=n<0?0:n;return qy.resolve(this._n.length>r?this._n[r]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return qy.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return qy.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new w_(e,0),i=new w_(e,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],function(t){var e=n.os(t.ns);o.push(e)}),qy.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new gm(of);return e.forEach(function(t){var e=new w_(t,0),i=new w_(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],function(t){r=r.add(t.ns)})}),qy.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;Af.isDocumentKey(i)||(i=i.child(""));var o=new w_(new Af(i),0),s=new gm(of);return this.rs.forEachWhile(function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(s=s.add(t.ns)),!0)},o),qy.resolve(this.us(s))},t.prototype.us=function(t){var e=this,n=[];return t.forEach(function(t){var r=e.os(t);null!==r&&n.push(r)}),n},t.prototype.removeMutationBatch=function(t,e){var n=this;tf(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return qy.forEach(e.mutations,function(i){var o=new w_(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(function(){n.rs=r})},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new w_(e,0),r=this.rs.firstAfterOrEqual(n);return qy.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return qy.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),T_=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new dm(Af.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:s,readTime:n}),this.size+=s-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return qy.resolve(n?n.document.clone():zf.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=vm();return e.forEach(function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():zf.newInvalidDocument(t))}),qy.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=vm(),i=new Af(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var s=o.getNext(),a=s.value,u=a.document,c=a.readTime;if(!e.path.isPrefixOf(s.key.path))break;c.compareTo(n)<=0||xg(e,u)&&(r=r.insert(u.key,u.clone()))}return qy.resolve(r)},t.prototype.fs=function(t,e){return qy.forEach(this.docs,function(t){return e(t)})},t.prototype.newChangeBuffer=function(t){return new S_(this)},t.prototype.getSize=function(t){return qy.resolve(this.size)},t}(),S_=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return(0,Hs.ZT)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach(function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)}),qy.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(jv),E_=function(){function t(t){this.persistence=t,this.ds=new qv(function(t){return Kf(t)},Yf),this.lastRemoteSnapshotVersion=cf.min(),this.highestTargetId=0,this.ws=0,this._s=new b_,this.targetCount=0,this.ys=Iv.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach(function(t,n){return e(n)}),qy.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return qy.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return qy.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),qy.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),qy.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new Iv(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,qy.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),qy.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,qy.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach(function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.ds.delete(s),o.push(r.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),qy.waitFor(o).next(function(){return i})},t.prototype.getTargetCount=function(t){return qy.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return qy.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),qy.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(function(e){i.push(r.markPotentiallyOrphaned(t,e))}),qy.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),qy.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return qy.resolve(n)},t.prototype.containsKey=function(t,e){return qy.resolve(this._s.containsKey(e))},t}(),x_=function(){function t(t,e){var n=this;this.gs={},this.Ne=new Gp(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new E_(this),this.Ut=new fv,this.Ue=function(t,e){return new T_(t,function(t){return n.referenceDelegate.ps(t)})}(this.Ut),this.R=new tv(e),this.Qe=new __(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new C_(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r=this;Yp("MemoryPersistence","Starting transaction:",t);var i=new I_(this.Ne.next());return this.referenceDelegate.Es(),n(i).next(function(t){return r.referenceDelegate.Ts(i).next(function(){return t})}).toPromise().then(function(t){return i.raiseOnCommittedEvent(),t})},t.prototype.Is=function(t,e){return qy.or(Object.values(this.gs).map(function(n){return function(){return n.containsKey(t,e)}}))},t}(),I_=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return(0,Hs.ZT)(e,t),e}(Uy),k_=function(){function t(t){this.persistence=t,this.As=new b_,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw Xp()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),qy.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),qy.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),qy.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach(function(t){return n.vs.add(t.toString())});var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(function(t){t.forEach(function(t){return n.vs.add(t.toString())})}).next(function(){return r.removeTargetData(t,e)})},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return qy.forEach(this.vs,function(r){var i=Af.fromPath(r);return e.Ps(t,i).next(function(t){t||n.removeEntry(i)})}).next(function(){return e.Rs=null,n.apply(t)})},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next(function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())})},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return qy.or([function(){return qy.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),A_=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();function O_(t,e){return"firestore_clients_"+t+"_"+e}function P_(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function R_(t,e){return"firestore_targets_"+t+"_"+e}A_.UNAUTHENTICATED=new A_(null),A_.GOOGLE_CREDENTIALS=new A_("google-credentials-uid"),A_.FIRST_PARTY=new A_("first-party-uid");var N_=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,o=JSON.parse(r),s="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new Hp(o.error.code,o.error.message)),s?new t(e,n,o.state,i):(Qp("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),D_=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Hp(i.error.code,i.error.message)),o?new t(e,i.state,r):(Qp("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),L_=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=xm(),s=0;i&&s<r.activeTargetIds.length;++s)i=kf(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(Qp("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),F_=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(Qp("SharedClientState","Failed to parse online state: "+e),null)},t}(),U_=function(){function t(){this.activeTargetIds=xm()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),M_=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new dm(of),this.started=!1,this.Os=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.$s=O_(this.persistenceKey,this.Ns),this.Ms=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.ks=this.ks.insert(this.Ns,new U_),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Qs=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return(0,Hs.mG)(this,void 0,void 0,function(){var t,e,n,r,i,o,s,a,u,c,l=this;return(0,Hs.Jh)(this,function(h){switch(h.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=h.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(O_(this.persistenceKey,r)))&&(o=L_.Vs(r,i))&&(this.ks=this.ks.insert(o.clientId,o));for(this.Ks(),(s=this.storage.getItem(this.Us))&&(a=this.js(s))&&this.Ws(a),u=0,c=this.Os;u<c.length;u++)this.Fs(c[u]);return this.Os=[],this.window.addEventListener("unload",function(){return l.shutdown()}),this.started=!0,[2]}})})},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.ks.forEach(function(n,r){r.activeTargetIds.has(t)&&(e=!0)}),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(R_(this.persistenceKey,t));if(n){var r=D_.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Ks(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Ks()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(R_(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach(function(t){r.Hs(t)}),this.currentUser=t,n.forEach(function(t){r.addPendingMutation(t)})},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.$s),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return Yp("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){Yp("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){Yp("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Fs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(Yp("SharedClientState","EVENT",n.key,n.newValue),n.key===this.$s)return void Qp("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable(function(){return(0,Hs.mG)(e,void 0,void 0,function(){var t,e,r,i,o,s;return(0,Hs.Jh)(this,function(a){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(o=this.js(n.newValue)))return[2,this.Ws(o)]}else if(n.key===this.Ms)(s=function(t){var e=Gp.o;if(null!=t)try{var n=JSON.parse(t);tf("number"==typeof n),e=n}catch(t){Qp("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==Gp.o&&this.sequenceNumberHandler(s);else if(n.key===this.Qs)return[2,this.syncEngine.ci()]}else this.Os.push(n);return[2]})})})}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Ks=function(){this.setItem(this.$s,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new N_(this.currentUser,t,e,n),i=P_(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=P_(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){this.storage.setItem(this.Us,JSON.stringify({clientId:this.Ns,onlineState:t}))},t.prototype.Ys=function(t,e,n){var r=R_(this.persistenceKey,t),i=new D_(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Qs,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return L_.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]);return N_.Vs(new A_(void 0!==n[2]?n[2]:null),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return D_.Vs(r,e)},t.prototype.js=function(t){return F_.Vs(t)},t.prototype.ii=function(t){return(0,Hs.mG)(this,void 0,void 0,function(){return(0,Hs.Jh)(this,function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(Yp("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.ks.insert(t,e):this.ks.remove(t),i=this.Gs(this.ks),o=this.Gs(r),s=[],a=[];return o.forEach(function(t){i.has(t)||s.push(t)}),i.forEach(function(t){o.has(t)||a.push(t)}),this.syncEngine.hi(s,a).then(function(){n.ks=r})},t.prototype.Ws=function(t){this.ks.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=xm();return t.forEach(function(t,n){e=e.unionWith(n.activeTargetIds)}),e},t}(),q_=function(){function t(){this.li=new U_,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new U_,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),j_=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),V_=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){Yp("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){Yp("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),B_={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Z_=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),G_=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n}return(0,Hs.ZT)(e,t),e.prototype.ki=function(t,e,n,r){return new Promise(function(i,o){var s=new Zp;s.listenOnce(jp.COMPLETE,function(){try{switch(s.getLastErrorCode()){case qp.NO_ERROR:var e=s.getResponseJson();Yp("Connection","XHR received:",JSON.stringify(e)),i(e);break;case qp.TIMEOUT:Yp("Connection",'RPC "'+t+'" timed out'),o(new Hp(zp.DEADLINE_EXCEEDED,"Request time out"));break;case qp.HTTP_ERROR:var n=s.getStatus();if(Yp("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(zp).indexOf(e)>=0?e:zp.UNKNOWN}(r.status);o(new Hp(a,r.message))}else o(new Hp(zp.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new Hp(zp.UNAVAILABLE,"Connection failed."));break;default:Xp()}}finally{Yp("Connection",'RPC "'+t+'" completed.')}});var a=JSON.stringify(r);s.send(e,"POST",a,n,15)})},e.prototype.$i=function(t,e){var n=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new Dp,i=Uh(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.Fi(o.initMessageHeaders,e),(0,Ws.uI)()||(0,Ws.b$)()||(0,Ws.d)()||(0,Ws.w1)()||(0,Ws.Mn)()||(0,Ws.ru)()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=n.join("");Yp("Connection","Creating WebChannel: "+s,o);var a=r.createWebChannel(s,o),u=!1,c=!1,l=new Z_({Ei:function(t){c?Yp("Connection","Not sending because WebChannel is closed:",t):(u||(Yp("Connection","Opening WebChannel transport."),a.open(),u=!0),Yp("Connection","WebChannel sending:",t),a.send(t))},Ti:function(){return a.close()}}),h=function(t,e,n){t.listen(e,function(t){try{n(t)}catch(t){setTimeout(function(){throw t},0)}})};return h(a,Bp.EventType.OPEN,function(){c||Yp("Connection","WebChannel transport opened.")}),h(a,Bp.EventType.CLOSE,function(){c||(c=!0,Yp("Connection","WebChannel transport closed"),l.Vi())}),h(a,Bp.EventType.ERROR,function(t){c||(c=!0,$p("Connection","WebChannel transport errored:",t),l.Vi(new Hp(zp.UNAVAILABLE,"The operation could not be completed")))}),h(a,Bp.EventType.MESSAGE,function(t){var e;if(!c){var n=t.data[0];tf(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){Yp("Connection","WebChannel received error:",r);var i=r.status,o=function(t){var e=om[t];if(void 0!==e)return hm(e)}(i),s=r.message;void 0===o&&(o=zp.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),c=!0,l.Vi(new Hp(o,s)),a.close()}else Yp("Connection","WebChannel received:",n),l.Si(n)}}),h(i,Vp.STAT_EVENT,function(t){10===t.stat?Yp("Connection","Detected buffering proxy"):11===t.stat&&Yp("Connection","Detected no buffering proxy")}),setTimeout(function(){l.Pi()},0),l},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.Di=(t.ssl?"https":"http")+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);Yp("RestConnection","Sending: ",i,n);var o={};return this.Fi(o,r),this.ki(t,i,o,n).then(function(t){return Yp("RestConnection","Received: ",t),t},function(e){throw $p("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e})},t.prototype.Oi=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.Fi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.5.0",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){return this.Di+"/v1/"+e+":"+B_[t]},t}());function z_(){return"undefined"!=typeof window?window:null}function H_(){return"undefined"!=typeof document?document:null}function W_(t){return new Mm(t,!0)}var K_=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Qi=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Ki=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Qi),i=Math.max(0,n-r);i>0&&Yp("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,function(){return e.Qi=Date.now(),t()}),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),Y_=function(){function t(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new K_(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return(0,Hs.mG)(this,void 0,void 0,function(){return(0,Hs.Jh)(this,function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,function(){return t.rr()}))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return(0,Hs.mG)(this,void 0,void 0,function(){return(0,Hs.Jh)(this,function(t){return this.er()?[2,this.close(0)]:[2]})})},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return(0,Hs.mG)(this,void 0,void 0,function(){return(0,Hs.Jh)(this,function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===zp.RESOURCE_EXHAUSTED?(Qp(e.toString()),Qp("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Ki()):e&&e.code===zp.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}})})},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then(function(e){t.Yi===n&&t.lr(e)},function(n){e(function(){var e=new Hp(zp.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)})})},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii(function(){n(function(){return e.state=2,e.listener.Ii()})}),this.stream.Ri(function(t){n(function(){return e.dr(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji(function(){return(0,Hs.mG)(t,void 0,void 0,function(){return(0,Hs.Jh)(this,function(t){return this.state=0,this.start(),[2]})})})},t.prototype.dr=function(t){return Yp("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget(function(){return e.Yi===t?n():(Yp("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),Q_=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,s}return(0,Hs.ZT)(e,t),e.prototype.wr=function(t){return this.Hi.$i("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Xp()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.I?(tf(void 0===e||"string"==typeof e),vf.fromBase64String(e||"")):(tf(void 0===e||e instanceof Uint8Array),vf.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?zp.UNKNOWN:hm(t.code);return new Hp(e,t.message||"")}(a);n=new Pm(r,i,o,s||null)}else if("documentChange"in e){i=Hm(t,(r=e.documentChange).document.name),o=Bm(r.document.updateTime);var a=new Zf({mapValue:{fields:r.document.fields}}),u=(s=zf.newFoundDocument(i,o,a),r.targetIds||[]);n=new Am(u,r.removedTargetIds||[],s.key,s)}else if("documentDelete"in e)i=Hm(t,(r=e.documentDelete).document),o=r.readTime?Bm(r.readTime):cf.min(),a=zf.newNoDocument(i,o),n=new Am([],s=r.removedTargetIds||[],a.key,a);else if("documentRemove"in e)i=Hm(t,(r=e.documentRemove).document),n=new Am([],o=r.removedTargetIds||[],i,null);else{if(!("filter"in e))return Xp();var c=e.filter;i=new cm(r=c.count||0),n=new Om(o=c.targetId,i)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return cf.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?cf.min():e.readTime?Bm(e.readTime):cf.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e={};e.database=Ym(this.R),e.addTarget=function(t,e){var n,r=e.target;return(n=Qf(r)?{documents:ey(t,r)}:{query:ny(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=jm(t,e.resumeToken):e.snapshotVersion.compareTo(cf.min())>0&&(n.readTime=qm(t,e.snapshotVersion.toTimestamp())),n}(this.R,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Xp()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.cr(e)},e.prototype.yr=function(t){var e={};e.database=Ym(this.R),e.removeTarget=t,this.cr(e)},e}(Y_),$_=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,s.gr=!1,s}return(0,Hs.ZT)(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.$i("Write",t)},e.prototype.onMessage=function(t){if(tf(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=function(t,e){return t&&t.length>0?(tf(void 0!==e),t.map(function(t){return function(t,e){var n=Bm(t.updateTime?t.updateTime:e);return n.isEqual(cf.min())&&(n=Bm(e)),new zg(n,t.transformResults||[])}(t,e)})):[]}(t.writeResults,t.commitTime),n=Bm(t.commitTime);return this.listener.Tr(n,e)}return tf(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=Ym(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map(function(t){return Xm(e.R,t)})};this.cr(n)},e}(Y_),J_=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return(0,Hs.ZT)(e,t),e.prototype.br=function(){if(this.Rr)throw new Hp(zp.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.Ni(t,e,n,i)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===zp.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new Hp(zp.UNKNOWN,t.toString())})},e.prototype.Oi=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.Oi(t,e,n,i)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===zp.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new Hp(zp.UNKNOWN,t.toString())})},e.prototype.terminate=function(){this.Rr=!0},e}(function(){}),X_=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()}))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.Fr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(Qp(e),this.Vr=!1):Yp("OnlineStateTracker",e)},t.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),tb=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.Or=new Map,this.$r=new Set,this.Mr=[],this.Lr=i,this.Lr.di(function(t){n.enqueueAndForget(function(){return(0,Hs.mG)(o,void 0,void 0,function(){return(0,Hs.Jh)(this,function(t){switch(t.label){case 0:return cb(this)?(Yp("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return(0,Hs.mG)(this,void 0,void 0,function(){var e;return(0,Hs.Jh)(this,function(n){switch(n.label){case 0:return(e=ef(t)).$r.add(4),[4,nb(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.$r.delete(4),[4,eb(e)];case 2:return n.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.Br=new X_(n,r)};function eb(t){return(0,Hs.mG)(this,void 0,void 0,function(){var e,n;return(0,Hs.Jh)(this,function(r){switch(r.label){case 0:if(!cb(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function nb(t){return(0,Hs.mG)(this,void 0,void 0,function(){var e,n;return(0,Hs.Jh)(this,function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function rb(t,e){var n=ef(t);n.Or.has(e.targetId)||(n.Or.set(e.targetId,e),ub(n)?ab(n):Sb(n).er()&&ob(n,e))}function ib(t,e){var n=ef(t),r=Sb(n);n.Or.delete(e),r.er()&&sb(n,e),0===n.Or.size&&(r.er()?r.ir():cb(n)&&n.Br.set("Unknown"))}function ob(t,e){t.qr.U(e.targetId),Sb(t).mr(e)}function sb(t,e){t.qr.U(e),Sb(t).yr(e)}function ab(t){t.qr=new Nm({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.Or.get(e)||null}}),Sb(t).start(),t.Br.Sr()}function ub(t){return cb(t)&&!Sb(t).tr()&&t.Or.size>0}function cb(t){return 0===ef(t).$r.size}function lb(t){t.qr=void 0}function hb(t){return(0,Hs.mG)(this,void 0,void 0,function(){return(0,Hs.Jh)(this,function(e){return t.Or.forEach(function(e,n){ob(t,e)}),[2]})})}function db(t,e){return(0,Hs.mG)(this,void 0,void 0,function(){return(0,Hs.Jh)(this,function(n){return lb(t),ub(t)?(t.Br.Nr(e),ab(t)):t.Br.set("Unknown"),[2]})})}function pb(t,e,n){return(0,Hs.mG)(this,void 0,void 0,function(){var r,i,o;return(0,Hs.Jh)(this,function(s){switch(s.label){case 0:if(t.Br.set("Online"),!(e instanceof Pm&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return(0,Hs.mG)(this,void 0,void 0,function(){var n,r,i,o;return(0,Hs.Jh)(this,function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?t.Or.has(o=i[r])?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]:[3,5];case 2:s.sent(),t.Or.delete(o),t.qr.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}})})}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),Yp("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,fb(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof Am?t.qr.X(e):e instanceof Om?t.qr.rt(e):t.qr.et(e),n.isEqual(cf.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,a_(t.localStore)];case 8:return i=s.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.qr.ut(e);return n.targetChanges.forEach(function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.Or.get(r);i&&t.Or.set(r,i.withResumeToken(n.resumeToken,e))}}),n.targetMismatches.forEach(function(e){var n=t.Or.get(e);if(n){t.Or.set(e,n.withResumeToken(vf.EMPTY_BYTE_STRING,n.snapshotVersion)),sb(t,e);var r=new Xy(n.target,e,1,n.sequenceNumber);ob(t,r)}}),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return Yp("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,fb(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}})})}function fb(t,e,n){return(0,Hs.mG)(this,void 0,void 0,function(){var r=this;return(0,Hs.Jh)(this,function(i){switch(i.label){case 0:if(!Gy(e))throw e;return t.$r.add(1),[4,nb(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return a_(t.localStore)}),t.asyncQueue.enqueueRetryable(function(){return(0,Hs.mG)(r,void 0,void 0,function(){return(0,Hs.Jh)(this,function(e){switch(e.label){case 0:return Yp("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.$r.delete(1),[4,eb(t)];case 2:return e.sent(),[2]}})})}),[2]}})})}function gb(t,e){return e().catch(function(n){return fb(t,n,e)})}function mb(t){return(0,Hs.mG)(this,void 0,void 0,function(){var e,n,r,i,o;return(0,Hs.Jh)(this,function(s){switch(s.label){case 0:e=ef(t),n=Eb(e),r=e.kr.length>0?e.kr[e.kr.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return cb(t)&&t.kr.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,l_(e.localStore,r)];case 3:return null===(i=s.sent())?(0===e.kr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.kr.push(e);var n=Eb(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,fb(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return yb(e)&&vb(e),[2]}})})}function yb(t){return cb(t)&&!Eb(t).tr()&&t.kr.length>0}function vb(t){Eb(t).start()}function _b(t){return(0,Hs.mG)(this,void 0,void 0,function(){return(0,Hs.Jh)(this,function(e){return Eb(t).Ar(),[2]})})}function bb(t){return(0,Hs.mG)(this,void 0,void 0,function(){var e,n,r;return(0,Hs.Jh)(this,function(i){for(e=Eb(t),n=0,r=t.kr;n<r.length;n++)e.Er(r[n].mutations);return[2]})})}function wb(t,e,n){return(0,Hs.mG)(this,void 0,void 0,function(){var r,i;return(0,Hs.Jh)(this,function(o){switch(o.label){case 0:return r=t.kr.shift(),i=Jy.from(r,e,n),[4,gb(t,function(){return t.remoteSyncer.applySuccessfulWrite(i)})];case 1:return o.sent(),[4,mb(t)];case 2:return o.sent(),[2]}})})}function Cb(t,e){return(0,Hs.mG)(this,void 0,void 0,function(){return(0,Hs.Jh)(this,function(n){switch(n.label){case 0:return e&&Eb(t).pr?[4,function(t,e){return(0,Hs.mG)(this,void 0,void 0,function(){var n,r;return(0,Hs.Jh)(this,function(i){switch(i.label){case 0:return lm(r=e.code)&&r!==zp.ABORTED?(n=t.kr.shift(),Eb(t).sr(),[4,gb(t,function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)})]):[3,3];case 1:return i.sent(),[4,mb(t)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return yb(t)&&vb(t),[2]}})})}function Tb(t,e){return(0,Hs.mG)(this,void 0,void 0,function(){var n;return(0,Hs.Jh)(this,function(r){switch(r.label){case 0:return n=ef(t),e?(n.$r.delete(2),[4,eb(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.$r.add(2),[4,nb(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function Sb(t){var e=this;return t.Ur||(t.Ur=function(t,e,n){var r=ef(t);return r.br(),new Q_(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:hb.bind(null,t),Ri:db.bind(null,t),_r:pb.bind(null,t)}),t.Mr.push(function(n){return(0,Hs.mG)(e,void 0,void 0,function(){return(0,Hs.Jh)(this,function(e){switch(e.label){case 0:return n?(t.Ur.sr(),ub(t)?ab(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:e.sent(),lb(t),e.label=3;case 3:return[2]}})})})),t.Ur}function Eb(t){var e=this;return t.Qr||(t.Qr=function(t,e,n){var r=ef(t);return r.br(),new $_(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:_b.bind(null,t),Ri:Cb.bind(null,t),Ir:bb.bind(null,t),Tr:wb.bind(null,t)}),t.Mr.push(function(n){return(0,Hs.mG)(e,void 0,void 0,function(){return(0,Hs.Jh)(this,function(e){switch(e.label){case 0:return n?(t.Qr.sr(),[4,mb(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Qr.stop()];case 3:e.sent(),t.kr.length>0&&(Yp("RemoteStore","Stopping write stream with "+t.kr.length+" pending writes"),t.kr=[]),e.label=4;case 4:return[2]}})})})),t.Qr}var xb=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new My,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(t){})}return t.createAndSchedule=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout(function(){return e.handleDelayElapsed()},t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Hp(zp.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget(function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then(function(e){return t.deferred.resolve(e)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function Ib(t,e){if(Qp("AsyncQueue",e+": "+t),Gy(t))return new Hp(zp.UNAVAILABLE,e+": "+t);throw t}var kb=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||Af.comparator(e.key,n.key)}:function(t,e){return Af.comparator(t.key,e.key)},this.keyedMap=bm(),this.sortedSet=new dm(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),Ab=function(){function t(){this.Kr=new dm(Af.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Kr.get(e);n?0!==t.type&&3===n.type?this.Kr=this.Kr.insert(e,t):3===t.type&&1!==n.type?this.Kr=this.Kr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Kr=this.Kr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Kr=this.Kr.remove(e):1===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):Xp():this.Kr=this.Kr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Kr.inorderTraversal(function(e,n){t.push(n)}),t},t}(),Ob=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach(function(t){o.push({type:0,doc:t})}),new t(e,n,kb.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Tg(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),Pb=function(){this.Wr=void 0,this.listeners=[]},Rb=function(){this.queries=new qv(function(t){return Sg(t)},Tg),this.onlineState="Unknown",this.Gr=new Set};function Nb(t,e){return(0,Hs.mG)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return(0,Hs.Jh)(this,function(c){switch(c.label){case 0:if(n=ef(t),i=!1,(o=n.queries.get(r=e.query))||(i=!0,o=new Pb),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.onListen(r)];case 2:return s.Wr=c.sent(),[3,4];case 3:return a=c.sent(),u=Ib(a,"Initialization of query '"+Eg(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zr(n.onlineState),o.Wr&&e.Hr(o.Wr)&&Ub(n),[2]}})})}function Db(t,e){return(0,Hs.mG)(this,void 0,void 0,function(){var n,r,i,o,s;return(0,Hs.Jh)(this,function(a){return n=ef(t),i=!1,(o=n.queries.get(r=e.query))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]})})}function Lb(t,e){for(var n=ef(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=n.queries.get(s.query);if(a){for(var u=0,c=a.listeners;u<c.length;u++)c[u].Hr(s)&&(r=!0);a.Wr=s}}r&&Ub(n)}function Fb(t,e,n){var r=ef(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function Ub(t){t.Gr.forEach(function(t){t.next()})}var Mb=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Ob(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){return!t.fromCache||!(this.options.so&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=Ob.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),qb=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.io=function(){return"metadata"in this.payload},t}(),jb=function(){function t(t){this.R=t}return t.prototype.qn=function(t){return Hm(this.R,t)},t.prototype.Un=function(t){return t.metadata.exists?Jm(this.R,t.document,!1):zf.newNoDocument(this.qn(t.metadata.name),this.Qn(t.metadata.readTime))},t.prototype.Qn=function(t){return Bm(t)},t}();!function(){function t(t,e,n){this.ro=t,this.localStore=e,this.R=n,this.queries=[],this.documents=[],this.progress=function(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(t)}t.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.co=function(t){for(var e=new Map,n=new jb(this.R),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.qn(o.metadata.name),a=0,u=o.metadata.queries;a<u.length;a++){var c=u[a],l=(e.get(c)||Sm()).add(s);e.set(c,l)}}return e},t.prototype.complete=function(){return(0,Hs.mG)(this,void 0,void 0,function(){var t,e,n,r,i;return(0,Hs.Jh)(this,function(o){switch(o.label){case 0:return[4,y_(this.localStore,new jb(this.R),this.documents,this.ro.id)];case 1:t=o.sent(),e=this.co(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?[4,v_(this.localStore,i=r[n],e.get(i.name))]:[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new Xv(Object.assign({},this.progress),t))]}})})}}();var Vb=function(t){this.key=t},Bb=function(t){this.key=t},Zb=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=Sm(),this.mutatedKeys=Sm(),this.lo=Ig(t),this.fo=new kb(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new Ab,i=e?e.fo:this.fo,o=e?e.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=gg(this.query)&&i.size===this.query.limit?i.last():null,c=mg(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal(function(t,e){var l=i.get(t),h=xg(n.query,e)?e:null,d=!!l&&n.mutatedKeys.has(l.key),p=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),f=!1;l&&h?l.data.isEqual(h.data)?d!==p&&(r.track({type:3,doc:h}),f=!0):n.yo(l,h)||(r.track({type:2,doc:h}),f=!0,(u&&n.lo(h,u)>0||c&&n.lo(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),f=!0):l&&!h&&(r.track({type:1,doc:l}),f=!0,(u||c)&&(a=!0)),f&&(h?(s=s.add(h),o=p?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))}),gg(this.query)||mg(this.query))for(;s.size>this.query.limit;){var l=gg(this.query)?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{fo:s,mo:r,Nn:a,mutatedKeys:o}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort(function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Xp()}};return n(t)-n(e)}(t.type,e.type)||r.lo(t.doc,e.doc)}),this.po(n);var s=e?this.Eo():[],a=0===this.ho.size&&this.current?1:0,u=a!==this.ao;return this.ao=a,0!==o.length||u?{snapshot:new Ob(this.query,t.fo,i,o,t.mutatedKeys,0===a,u,!1),To:s}:{To:s}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new Ab,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach(function(t){return e.uo=e.uo.add(t)}),t.modifiedDocuments.forEach(function(t){}),t.removedDocuments.forEach(function(t){return e.uo=e.uo.delete(t)}),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=Sm(),this.fo.forEach(function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))});var n=[];return e.forEach(function(e){t.ho.has(e)||n.push(new Bb(e))}),this.ho.forEach(function(t){e.has(t)||n.push(new Vb(t))}),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=Sm();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return Ob.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),Gb=function(t,e,n){this.query=t,this.targetId=e,this.view=n},zb=function(t){this.key=t,this.bo=!1},Hb=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new qv(function(t){return Sg(t)},Tg),this.Vo=new Map,this.So=new Set,this.Do=new dm(Af.comparator),this.Co=new Map,this.No=new b_,this.xo={},this.Fo=new Map,this.ko=Iv.Yt(),this.onlineState="Unknown",this.Oo=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.Oo},enumerable:!1,configurable:!0}),t}();function Wb(t,e){return(0,Hs.mG)(this,void 0,void 0,function(){var n,r,i,o,s;return(0,Hs.Jh)(this,function(a){switch(a.label){case 0:return n=Cw(t),(i=n.Po.get(e))?(n.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.Ro(),[3,4]):[3,1];case 1:return[4,h_(n.localStore,wg(e))];case 2:return o=a.sent(),s=n.sharedClientState.addLocalQueryTarget(o.targetId),[4,Kb(n,e,o.targetId,"current"===s)];case 3:r=a.sent(),n.isPrimaryClient&&rb(n.remoteStore,o),a.label=4;case 4:return[2,r]}})})}function Kb(t,e,n,r){return(0,Hs.mG)(this,void 0,void 0,function(){var i,o,s,a,u,c;return(0,Hs.Jh)(this,function(l){switch(l.label){case 0:return t.$o=function(e,n,r){return function(t,e,n,r){return(0,Hs.mG)(this,void 0,void 0,function(){var i,o,s;return(0,Hs.Jh)(this,function(a){switch(a.label){case 0:return(i=e.view._o(n)).Nn?[4,p_(t.localStore,e.query,!1).then(function(t){return e.view._o(t.documents,i)})]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),s=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(aw(t,e.targetId,s.To),s.snapshot)]}})})}(t,e,n,r)},[4,p_(t.localStore,e,!0)];case 1:return i=l.sent(),o=new Zb(e,i.Bn),s=o._o(i.documents),a=km.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=o.applyChanges(s,t.isPrimaryClient,a),aw(t,n,u.To),c=new Gb(e,n,o),[2,(t.Po.set(e,c),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),u.snapshot)]}})})}function Yb(t,e){return(0,Hs.mG)(this,void 0,void 0,function(){var n,r,i;return(0,Hs.Jh)(this,function(o){switch(o.label){case 0:return n=ef(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter(function(t){return!Tg(t,e)})),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,d_(n.localStore,r.targetId,!1).then(function(){n.sharedClientState.clearQueryState(r.targetId),ib(n.remoteStore,r.targetId),ow(n,r.targetId)}).catch(Rv)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return ow(n,r.targetId),[4,d_(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}})})}function Qb(t,e,n){return(0,Hs.mG)(this,void 0,void 0,function(){var r,i,o,s;return(0,Hs.Jh)(this,function(a){switch(a.label){case 0:r=Tw(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=ef(t),i=uf.now(),o=e.reduce(function(t,e){return t.add(e.key)},Sm());return r.persistence.runTransaction("Locally write mutations","readwrite",function(t){return r.Mn.pn(t,o).next(function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],l=$g(c,n.get(c.key));null!=l&&s.push(new em(c.key,l,Gf(l.toProto().mapValue),Hg.exists(!0)))}return r._n.addMutationBatch(t,i,s,e)})}).then(function(t){return t.applyToLocalDocumentSet(n),{batchId:t.batchId,changes:n}})}(r.localStore,e)];case 2:return i=a.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new dm(of)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,lw(r,i.changes)];case 3:return a.sent(),[4,mb(r.remoteStore)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=Ib(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}})})}function $b(t,e){return(0,Hs.mG)(this,void 0,void 0,function(){var n,r;return(0,Hs.Jh)(this,function(i){switch(i.label){case 0:n=ef(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,u_(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach(function(t,e){var r=n.Co.get(e);r&&(tf(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?tf(r.bo):t.removedDocuments.size>0&&(tf(r.bo),r.bo=!1))}),[4,lw(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,Rv(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})}function Jb(t,e,n){var r=ef(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach(function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)}),function(t,e){var n=ef(t);n.onlineState=e;var r=!1;n.queries.forEach(function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(e)&&(r=!0)}),r&&Ub(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Xb(t,e,n){return(0,Hs.mG)(this,void 0,void 0,function(){var r,i,o,s,a,u;return(0,Hs.Jh)(this,function(c){switch(c.label){case 0:return(r=ef(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(o=i&&i.key)?(s=(s=new dm(Af.comparator)).insert(o,zf.newNoDocument(o,cf.min())),a=Sm().add(o),u=new Im(cf.min(),new Map,new gm(of),s,a),[4,$b(r,u)]):[3,2];case 1:return c.sent(),r.Do=r.Do.remove(o),r.Co.delete(e),cw(r),[3,4];case 2:return[4,d_(r.localStore,e,!1).then(function(){return ow(r,e,n)}).catch(Rv)];case 3:c.sent(),c.label=4;case 4:return[2]}})})}function tw(t,e){return(0,Hs.mG)(this,void 0,void 0,function(){var n,r,i;return(0,Hs.Jh)(this,function(o){switch(o.label){case 0:n=ef(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,s_(n.localStore,e)];case 2:return i=o.sent(),iw(n,r,null),rw(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,lw(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,Rv(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function ew(t,e,n){return(0,Hs.mG)(this,void 0,void 0,function(){var r,i;return(0,Hs.Jh)(this,function(o){switch(o.label){case 0:r=ef(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=ef(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",function(t){var r;return n._n.lookupMutationBatch(t,e).next(function(e){return tf(null!==e),r=e.keys(),n._n.removeMutationBatch(t,e)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}(r.localStore,e)];case 2:return i=o.sent(),iw(r,e,n),rw(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,lw(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,Rv(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function nw(t,e){return(0,Hs.mG)(this,void 0,void 0,function(){var n,r,i,o,s;return(0,Hs.Jh)(this,function(a){switch(a.label){case 0:cb((n=ef(t)).remoteStore)||Yp("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=ef(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e._n.getHighestUnacknowledgedBatchId(t)})}(n.localStore)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Fo.get(r)||[]).push(e),n.Fo.set(r,i),[3,4]);case 3:return o=a.sent(),s=Ib(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}})})}function rw(t,e){(t.Fo.get(e)||[]).forEach(function(t){t.resolve()}),t.Fo.delete(e)}function iw(t,e,n){var r=ef(t),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function ow(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach(function(e){t.No.containsKey(e)||sw(t,e)})}function sw(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(ib(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),cw(t))}function aw(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof Vb?(t.No.addReference(o.key,e),uw(t,o)):o instanceof Bb?(Yp("SyncEngine","Document no longer in limbo: "+o.key),t.No.removeReference(o.key,e),t.No.containsKey(o.key)||sw(t,o.key)):Xp()}}function uw(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(Yp("SyncEngine","New document in limbo: "+n),t.So.add(r),cw(t))}function cw(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new Af(ff.fromString(e)),r=t.ko.next();t.Co.set(r,new zb(n)),t.Do=t.Do.insert(n,r),rb(t.remoteStore,new Xy(wg(fg(n.path)),r,2,Gp.o))}}function lw(t,e,n){return(0,Hs.mG)(this,void 0,void 0,function(){var r,i,o,s;return(0,Hs.Jh)(this,function(a){switch(a.label){case 0:return r=ef(t),i=[],o=[],s=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach(function(t,a){s.push(r.$o(a,e,n).then(function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=e_.Pn(a.targetId,t);o.push(e)}}))}),[4,Promise.all(s)]);case 1:return a.sent(),r.vo._r(i),[4,function(t,e){return(0,Hs.mG)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c;return(0,Hs.Jh)(this,function(l){switch(l.label){case 0:n=ef(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(t){return qy.forEach(e,function(e){return qy.forEach(e.bn,function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)}).next(function(){return qy.forEach(e.vn,function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)})})})})];case 2:return l.sent(),[3,4];case 3:if(!Gy(r=l.sent()))throw r;return Yp("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)a=(s=o[i]).targetId,s.fromCache||(u=n.Fn.get(a),c=u.withLastLimboFreeSnapshotVersion(u.snapshotVersion),n.Fn=n.Fn.insert(a,c));return[2]}})})}(r.localStore,o)];case 2:a.sent(),a.label=3;case 3:return[2]}})})}function hw(t,e){return(0,Hs.mG)(this,void 0,void 0,function(){var n,r;return(0,Hs.Jh)(this,function(i){switch(i.label){case 0:return(n=ef(t)).currentUser.isEqual(e)?[3,3]:(Yp("SyncEngine","User change. New user:",e.toKey()),[4,o_(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Fo.forEach(function(t){t.forEach(function(t){t.reject(new Hp(zp.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),t.Fo.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,lw(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}function dw(t,e){var n=ef(t),r=n.Co.get(e);if(r&&r.bo)return Sm().add(r.key);var i=Sm(),o=n.Vo.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=n.Po.get(a[s]);i=i.unionWith(u.view.wo)}return i}function pw(t,e){return(0,Hs.mG)(this,void 0,void 0,function(){var n,r,i;return(0,Hs.Jh)(this,function(o){switch(o.label){case 0:return[4,p_((n=ef(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&aw(n,e.targetId,i.To),i)]}})})}function fw(t){return(0,Hs.mG)(this,void 0,void 0,function(){var e;return(0,Hs.Jh)(this,function(n){return[2,g_((e=ef(t)).localStore).then(function(t){return lw(e,t)})]})})}function gw(t,e,n,r){return(0,Hs.mG)(this,void 0,void 0,function(){var i,o;return(0,Hs.Jh)(this,function(s){switch(s.label){case 0:return[4,function(t,e){var n=ef(t),r=ef(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",function(t){return r.jt(t,e).next(function(e){return e?n.Mn.pn(t,e):qy.resolve(null)})})}((i=ef(t)).localStore,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,mb(i.remoteStore)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(iw(i,e,r||null),rw(i,e),function(t,e){ef(ef(t)._n).Gt(e)}(i.localStore,e)):Xp(),s.label=4;case 4:return[4,lw(i,o)];case 5:return s.sent(),[3,7];case 6:Yp("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}})})}function mw(t,e){return(0,Hs.mG)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return(0,Hs.Jh)(this,function(c){switch(c.label){case 0:return Cw(n=ef(t)),Tw(n),!0!==e||!0===n.Oo?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,yw(n,r.toArray())]);case 1:return i=c.sent(),n.Oo=!0,[4,Tb(n.remoteStore,!0)];case 2:for(c.sent(),o=0,s=i;o<s.length;o++)rb(n.remoteStore,s[o]);return[3,7];case 3:return!1!==e||!1===n.Oo?[3,7]:(a=[],u=Promise.resolve(),n.Vo.forEach(function(t,e){n.sharedClientState.isLocalQueryTarget(e)?a.push(e):u=u.then(function(){return ow(n,e),d_(n.localStore,e,!0)}),ib(n.remoteStore,e)}),[4,u]);case 4:return c.sent(),[4,yw(n,a)];case 5:return c.sent(),function(t){var e=ef(t);e.Co.forEach(function(t,n){ib(e.remoteStore,n)}),e.No.ts(),e.Co=new Map,e.Do=new dm(Af.comparator)}(n),n.Oo=!1,[4,Tb(n.remoteStore,!1)];case 6:c.sent(),c.label=7;case 7:return[2]}})})}function yw(t,e,n){return(0,Hs.mG)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,l,h,d,p,f;return(0,Hs.Jh)(this,function(g){switch(g.label){case 0:n=ef(t),r=[],i=[],o=0,s=e,g.label=1;case 1:return o<s.length?(u=void 0,(c=n.Vo.get(a=s[o]))&&0!==c.length?[4,h_(n.localStore,wg(c[0]))]:[3,7]):[3,13];case 2:u=g.sent(),l=0,h=c,g.label=3;case 3:return l<h.length?(d=n.Po.get(h[l]),[4,pw(n,d)]):[3,6];case 4:(p=g.sent()).snapshot&&i.push(p.snapshot),g.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,f_(n.localStore,a)];case 8:return f=g.sent(),[4,h_(n.localStore,f)];case 9:return u=g.sent(),[4,Kb(n,vw(f),a,!1)];case 10:g.sent(),g.label=11;case 11:r.push(u),g.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}})})}function vw(t){return pg(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function _w(t){var e=ef(t);return ef(ef(e.localStore).persistence).fn()}function bw(t,e,n,r){return(0,Hs.mG)(this,void 0,void 0,function(){var i,o,s;return(0,Hs.Jh)(this,function(a){switch(a.label){case 0:return(i=ef(t)).Oo?(Yp("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,g_(i.localStore)];case 3:return o=a.sent(),s=Im.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,lw(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,d_(i.localStore,e,!0)];case 6:return a.sent(),ow(i,e,r),[3,8];case 7:Xp(),a.label=8;case 8:return[2]}})})}function ww(t,e,n){return(0,Hs.mG)(this,void 0,void 0,function(){var r,i,o,s,a,u,c,l,h;return(0,Hs.Jh)(this,function(d){switch(d.label){case 0:if(!(r=Cw(t)).Oo)return[3,10];i=0,o=e,d.label=1;case 1:return i<o.length?r.Vo.has(s=o[i])?(Yp("SyncEngine","Adding an already active target "+s),[3,5]):[4,f_(r.localStore,s)]:[3,6];case 2:return a=d.sent(),[4,h_(r.localStore,a)];case 3:return u=d.sent(),[4,Kb(r,vw(a),u.targetId,!1)];case 4:d.sent(),rb(r.remoteStore,u),d.label=5;case 5:return i++,[3,1];case 6:c=function(t){return(0,Hs.Jh)(this,function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,d_(r.localStore,t,!1).then(function(){ib(r.remoteStore,t),ow(r,t)}).catch(Rv)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})},l=0,h=n,d.label=7;case 7:return l<h.length?[5,c(h[l])]:[3,10];case 8:d.sent(),d.label=9;case 9:return l++,[3,7];case 10:return[2]}})})}function Cw(t){var e=ef(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=$b.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=dw.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Xb.bind(null,e),e.vo._r=Lb.bind(null,e.eventManager),e.vo.Mo=Fb.bind(null,e.eventManager),e}function Tw(t){var e=ef(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=tw.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ew.bind(null,e),e}var Sw=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return(0,Hs.mG)(this,void 0,void 0,function(){return(0,Hs.Jh)(this,function(e){switch(e.label){case 0:return this.R=W_(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Qo(t),[2]}})})},t.prototype.Uo=function(t){return null},t.prototype.Qo=function(t){return i_(this.persistence,new n_,t.initialUser,this.R)},t.prototype.qo=function(t){return new x_(k_.bs,this.R)},t.prototype.Bo=function(t){return new q_},t.prototype.terminate=function(){return(0,Hs.mG)(this,void 0,void 0,function(){return(0,Hs.Jh)(this,function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}})})},t}(),Ew=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Ko=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return(0,Hs.ZT)(e,t),e.prototype.initialize=function(e){return(0,Hs.mG)(this,void 0,void 0,function(){return(0,Hs.Jh)(this,function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,m_(this.localStore)];case 2:return n.sent(),[4,this.Ko.initialize(this,e)];case 3:return n.sent(),[4,Tw(this.Ko.syncEngine)];case 4:return n.sent(),[4,mb(this.Ko.remoteStore)];case 5:return n.sent(),[2]}})})},e.prototype.Qo=function(t){return i_(this.persistence,new n_,t.initialUser,this.R)},e.prototype.Uo=function(t){return new Lv(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue)},e.prototype.qo=function(t){var e=Jv(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?_v.withCacheSize(this.cacheSizeBytes):_v.DEFAULT;return new Yv(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,z_(),H_(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new q_},e}(Sw),xw=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Ko=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return(0,Hs.ZT)(e,t),e.prototype.initialize=function(e){return(0,Hs.mG)(this,void 0,void 0,function(){var n,r=this;return(0,Hs.Jh)(this,function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Ko.syncEngine,this.sharedClientState instanceof M_?(this.sharedClientState.syncEngine={ui:gw.bind(null,n),ai:bw.bind(null,n),hi:ww.bind(null,n),fn:_w.bind(null,n),ci:fw.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He(function(t){return(0,Hs.mG)(r,void 0,void 0,function(){return(0,Hs.Jh)(this,function(e){switch(e.label){case 0:return[4,mw(this.Ko.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}})})})];case 4:return i.sent(),[2]}})})},e.prototype.Bo=function(t){var e=z_();if(!M_.yt(e))throw new Hp(zp.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Jv(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new M_(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(Ew),Iw=function(){function t(){}return t.prototype.initialize=function(t,e){return(0,Hs.mG)(this,void 0,void 0,function(){var n=this;return(0,Hs.Jh)(this,function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return Jb(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=hw.bind(null,this.syncEngine),[4,Tb(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.createEventManager=function(t){return new Rb},t.prototype.createDatastore=function(t){var e=W_(t.databaseInfo.databaseId),n=new G_(t.databaseInfo);return function(t,e,n){return new J_(t,e,n)}(t.credentials,n,e)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,s=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return Jb(s.syncEngine,t,0)},o=V_.yt()?new V_:new j_,new tb(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,s){var a=new Hb(t,e,n,r,i,o);return s&&(a.Oo=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return(0,Hs.mG)(this,void 0,void 0,function(){var e;return(0,Hs.Jh)(this,function(n){switch(n.label){case 0:return e=ef(t),Yp("RemoteStore","RemoteStore shutting down."),e.$r.add(5),[4,nb(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}})})}(this.remoteStore)},t}(),kw=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),Aw=(function(){function t(t,e){var n=this;this.Go=t,this.R=e,this.metadata=new My,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then(function(t){t&&t.io()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))},function(t){return n.metadata.reject(t)})}t.prototype.close=function(){return this.Go.cancel()},t.prototype.getMetadata=function(){return(0,Hs.mG)(this,void 0,void 0,function(){return(0,Hs.Jh)(this,function(t){return[2,this.metadata.promise]})})},t.prototype.Lo=function(){return(0,Hs.mG)(this,void 0,void 0,function(){return(0,Hs.Jh)(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}})})},t.prototype.Ho=function(){return(0,Hs.mG)(this,void 0,void 0,function(){var t,e,n,r;return(0,Hs.Jh)(this,function(i){switch(i.label){case 0:return[4,this.Jo()];case 1:return null===(t=i.sent())?[2,null]:(e=this.zo.decode(t),n=Number(e),isNaN(n)&&this.Yo("length string ("+e+") is not valid number"),[4,this.Xo(n)]);case 2:return r=i.sent(),[2,new qb(JSON.parse(r),t.length+n)]}})})},t.prototype.Zo=function(){return this.buffer.findIndex(function(t){return t==="{".charCodeAt(0)})},t.prototype.Jo=function(){return(0,Hs.mG)(this,void 0,void 0,function(){var t,e;return(0,Hs.Jh)(this,function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}})})},t.prototype.Xo=function(t){return(0,Hs.mG)(this,void 0,void 0,function(){var e;return(0,Hs.Jh)(this,function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}})})},t.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.tc=function(){return(0,Hs.mG)(this,void 0,void 0,function(){var t,e;return(0,Hs.Jh)(this,function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}})})}}(),function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return(0,Hs.mG)(this,void 0,void 0,function(){var e,n=this;return(0,Hs.Jh)(this,function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Hp(zp.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return(0,Hs.mG)(this,void 0,void 0,function(){var n,r,i,o,s,a;return(0,Hs.Jh)(this,function(u){switch(u.label){case 0:return n=ef(t),r=Ym(n.R)+"/documents",i={documents:e.map(function(t){return zm(n.R,t)})},[4,n.Oi("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach(function(t){var e=function(t,e){return"found"in e?function(t,e){tf(!!e.found);var n=Hm(t,e.found.name),r=Bm(e.found.updateTime),i=new Zf({mapValue:{fields:e.found.fields}});return zf.newFoundDocument(n,r,i)}(t,e):"missing"in e?function(t,e){tf(!!e.missing),tf(!!e.readTime);var n=Hm(t,e.missing),r=Bm(e.readTime);return zf.newNoDocument(n,r)}(t,e):Xp()}(n.R,t);s.set(e.key.toString(),e)}),a=[],[2,(e.forEach(function(t){var e=s.get(t.toString());tf(!!e),a.push(e)}),a)]}})})}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach(function(t){return n.recordVersion(t)}),e)]}})})},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new am(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return(0,Hs.mG)(this,void 0,void 0,function(){var t,e=this;return(0,Hs.Jh)(this,function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach(function(e){t.delete(e.key.toString())}),t.forEach(function(t,n){var r=Af.fromPath(n);e.mutations.push(new um(r,e.precondition(r)))}),[4,function(t,e){return(0,Hs.mG)(this,void 0,void 0,function(){var n,r,i;return(0,Hs.Jh)(this,function(o){switch(o.label){case 0:return n=ef(t),r=Ym(n.R)+"/documents",i={writes:e.map(function(t){return Xm(n.R,t)})},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}})})},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw Xp();e=cf.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Hp(zp.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?Hg.updateTime(e):Hg.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(cf.min()))throw new Hp(zp.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Hg.updateTime(e)}return Hg.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}()),Ow=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new K_(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji(function(){return(0,Hs.mG)(t,void 0,void 0,function(){var t,e,n=this;return(0,Hs.Jh)(this,function(r){return t=new Aw(this.datastore),(e=this.sc(t))&&e.then(function(e){n.asyncQueue.enqueueAndForget(function(){return t.commit().then(function(){n.deferred.resolve(e)}).catch(function(t){n.ic(t)})})}).catch(function(t){n.ic(t)}),[2]})})})},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!xf(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget(function(){return e.nc(),Promise.resolve()})):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!lm(e)}return!1},t}(),Pw=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=A_.UNAUTHENTICATED,this.clientId=rf.u(),this.credentialListener=function(){},this.receivedInitialUser=new My,this.credentials.setChangeListener(function(t){Yp("FirestoreClient","Received user=",t.uid),r.user=t,r.credentialListener(t),r.receivedInitialUser.resolve()})}return t.prototype.getConfiguration=function(){return(0,Hs.mG)(this,void 0,void 0,function(){return(0,Hs.Jh)(this,function(t){switch(t.label){case 0:return[4,this.receivedInitialUser.promise];case 1:return[2,(t.sent(),{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100})]}})})},t.prototype.setCredentialChangeListener=function(t){var e=this;this.credentialListener=t,this.receivedInitialUser.promise.then(function(){return e.credentialListener(e.user)})},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new Hp(zp.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new My;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return(0,Hs.mG)(t,void 0,void 0,function(){var t,n;return(0,Hs.Jh)(this,function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=Ib(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}})})}),e.promise},t}();function Rw(t,e){return(0,Hs.mG)(this,void 0,void 0,function(){var n,r,i=this;return(0,Hs.Jh)(this,function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),Yp("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener(function(n){r.isEqual(n)||(r=n,t.asyncQueue.enqueueRetryable(function(){return(0,Hs.mG)(i,void 0,void 0,function(){return(0,Hs.Jh)(this,function(t){switch(t.label){case 0:return[4,o_(e.localStore,n)];case 1:return t.sent(),[2]}})})}))}),e.persistence.setDatabaseDeletedListener(function(){return t.terminate()}),t.offlineComponents=e,[2]}})})}function Nw(t,e){return(0,Hs.mG)(this,void 0,void 0,function(){var n,r;return(0,Hs.Jh)(this,function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,Dw(t)];case 1:return n=i.sent(),Yp("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener(function(n){return t.asyncQueue.enqueueRetryable(function(){return function(t,e){return(0,Hs.mG)(this,void 0,void 0,function(){var n,r;return(0,Hs.Jh)(this,function(i){switch(i.label){case 0:return(n=ef(t)).asyncQueue.verifyOperationInProgress(),Yp("RemoteStore","RemoteStore received new credentials"),r=cb(n),n.$r.add(3),[4,nb(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.$r.delete(3),[4,eb(n)];case 3:return i.sent(),[2]}})})}(e.remoteStore,n)})}),t.onlineComponents=e,[2]}})})}function Dw(t){return(0,Hs.mG)(this,void 0,void 0,function(){return(0,Hs.Jh)(this,function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(Yp("FirestoreClient","Using default OfflineComponentProvider"),[4,Rw(t,new Sw)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}})})}function Lw(t){return(0,Hs.mG)(this,void 0,void 0,function(){return(0,Hs.Jh)(this,function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(Yp("FirestoreClient","Using default OnlineComponentProvider"),[4,Nw(t,new Iw)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}})})}function Fw(t){return Dw(t).then(function(t){return t.persistence})}function Uw(t){return Dw(t).then(function(t){return t.localStore})}function Mw(t){return Lw(t).then(function(t){return t.remoteStore})}function qw(t){return Lw(t).then(function(t){return t.syncEngine})}function jw(t){return(0,Hs.mG)(this,void 0,void 0,function(){var e,n;return(0,Hs.Jh)(this,function(r){switch(r.label){case 0:return[4,Lw(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=Wb.bind(null,e.syncEngine),n.onUnlisten=Yb.bind(null,e.syncEngine),n)]}})})}function Vw(t,e,n){var r=this;void 0===n&&(n={});var i=new My;return t.asyncQueue.enqueueAndForget(function(){return(0,Hs.mG)(r,void 0,void 0,function(){var r;return(0,Hs.Jh)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new kw({next:function(o){e.enqueueAndForget(function(){return Db(t,s)});var a=o.docs.has(n);!a&&o.fromCache?i.reject(new Hp(zp.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new Hp(zp.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new Mb(fg(n.path),o,{includeMetadataChanges:!0,so:!0});return Nb(t,s)},[4,jw(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}function Bw(t,e,n){var r=this;void 0===n&&(n={});var i=new My;return t.asyncQueue.enqueueAndForget(function(){return(0,Hs.mG)(r,void 0,void 0,function(){var r;return(0,Hs.Jh)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new kw({next:function(n){e.enqueueAndForget(function(){return Db(t,s)}),n.fromCache&&"server"===r.source?i.reject(new Hp(zp.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new Mb(n,o,{includeMetadataChanges:!0,so:!0});return Nb(t,s)},[4,jw(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}var Zw=function(t,e,n,r,i,o,s){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s},Gw=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),zw=new Map,Hw=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},Ww=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t){this.changeListener=t,t(A_.UNAUTHENTICATED)},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),Kw=function(){function t(t){this.token=t,this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(this.token)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t){this.changeListener=t,t(this.token.user)},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),Yw=function(){function t(t){var e=this;this.oc=null,this.currentUser=A_.UNAUTHENTICATED,this.receivedInitialUser=!1,this.cc=0,this.changeListener=null,this.forceRefresh=!1,this.oc=function(){e.cc++,e.currentUser=e.uc(),e.receivedInitialUser=!0,e.changeListener&&e.changeListener(e.currentUser)},this.cc=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.oc):(this.oc(null),t.get().then(function(t){e.auth=t,e.oc&&e.auth.addAuthTokenListener(e.oc)},function(){}))}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(function(n){return t.cc!==e?(Yp("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(tf("string"==typeof n.accessToken),new Hw(n.accessToken,t.currentUser)):null}):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t){this.changeListener=t,this.receivedInitialUser&&t(this.currentUser)},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.oc),this.oc=null,this.changeListener=null},t.prototype.uc=function(){var t=this.auth&&this.auth.getUid();return tf(null===t||"string"==typeof t),new A_(t)},t}(),Qw=function(){function t(t,e,n){this.ac=t,this.hc=e,this.lc=n,this.type="FirstParty",this.user=A_.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.hc},e=this.ac.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.lc&&(t["X-Goog-Iam-Authorization-Token"]=this.lc),t},enumerable:!1,configurable:!0}),t}(),$w=function(){function t(t,e,n){this.ac=t,this.hc=e,this.lc=n}return t.prototype.getToken=function(){return Promise.resolve(new Qw(this.ac,this.hc,this.lc))},t.prototype.setChangeListener=function(t){t(A_.FIRST_PARTY)},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function Jw(t,e,n){if(!n)throw new Hp(zp.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function Xw(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Hp(zp.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function tC(t,e,n,r){if(!0===e&&!0===r)throw new Hp(zp.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function eC(t){if(!Af.isDocumentKey(t))throw new Hp(zp.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function nC(t){if(Af.isDocumentKey(t))throw new Hp(zp.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function rC(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":Xp()}function iC(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Hp(zp.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=rC(t);throw new Hp(zp.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function oC(t,e){if(e<=0)throw new Hp(zp.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var sC=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Hp(zp.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Hp(zp.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,tC("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),aC=function(){function t(t,e){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new sC({}),this._settingsFrozen=!1,t instanceof Gw?(this._databaseId=t,this._credentials=new Ww):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Hp(zp.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Gw(t.options.projectId)}(t),this._credentials=new Yw(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new Hp(zp.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new Hp(zp.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new sC(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new Ww;switch(t.type){case"gapi":var e=t.client;return tf(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new $w(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Hp(zp.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return(t=zw.get(this))&&(Yp("ComponentProvider","Removing Datastore"),zw.delete(this),t.terminate()),Promise.resolve();var t},t}(),uC=function(){function t(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new lC(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),cC=function(){function t(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),lC=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,fg(r))||this)._path=r,i.type="collection",i}return(0,Hs.ZT)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new uC(this.firestore,null,new Af(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(cC);function hC(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=(0,Ws.m9)(t),Jw("collection","path",e),t instanceof aC)return nC(n=ff.fromString.apply(ff,(0,Hs.ev)([e],r))),new lC(t,null,n);if(!(t instanceof uC||t instanceof lC))throw new Hp(zp.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return nC(n=ff.fromString.apply(ff,(0,Hs.ev)([t.path],r)).child(ff.fromString(e))),new lC(t.firestore,null,n)}function dC(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=(0,Ws.m9)(t),1===arguments.length&&(e=rf.u()),Jw("doc","path",e),t instanceof aC)return eC(n=ff.fromString.apply(ff,(0,Hs.ev)([e],r))),new uC(t,null,new Af(n));if(!(t instanceof uC||t instanceof lC))throw new Hp(zp.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return eC(n=t._path.child(ff.fromString.apply(ff,(0,Hs.ev)([e],r)))),new uC(t.firestore,t instanceof lC?t.converter:null,new Af(n))}function pC(t,e){return t=(0,Ws.m9)(t),e=(0,Ws.m9)(e),(t instanceof uC||t instanceof lC)&&(e instanceof uC||e instanceof lC)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function fC(t,e){return t=(0,Ws.m9)(t),e=(0,Ws.m9)(e),t instanceof cC&&e instanceof cC&&t.firestore===e.firestore&&Tg(t._query,e._query)&&t.converter===e.converter}var gC=function(){function t(){var t=this;this.fc=Promise.resolve(),this.dc=[],this.wc=!1,this._c=[],this.mc=null,this.yc=!1,this.gc=[],this.Zi=new K_(this,"async_queue_retry"),this.Ec=function(){var e=H_();e&&Yp("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=H_();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ec)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this.wc},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Tc(),this.Ic(t)},t.prototype.enterRestrictedMode=function(){if(!this.wc){this.wc=!0;var t=H_();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ec)}},t.prototype.enqueue=function(t){return this.Tc(),this.wc?new Promise(function(t){}):this.Ic(t)},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget(function(){return e.dc.push(t),e.Ac()})},t.prototype.Ac=function(){return(0,Hs.mG)(this,void 0,void 0,function(){var t,e=this;return(0,Hs.Jh)(this,function(n){switch(n.label){case 0:if(0===this.dc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.dc[0]()];case 2:return n.sent(),this.dc.shift(),this.Zi.reset(),[3,4];case 3:if(!Gy(t=n.sent()))throw t;return Yp("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.dc.length>0&&this.Zi.ji(function(){return e.Ac()}),n.label=5;case 5:return[2]}})})},t.prototype.Ic=function(t){var e=this,n=this.fc.then(function(){return e.yc=!0,t().catch(function(t){throw e.mc=t,e.yc=!1,Qp("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t}).then(function(t){return e.yc=!1,t})});return this.fc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Tc(),this.gc.indexOf(t)>-1&&(e=0);var i=xb.createAndSchedule(this,t,e,n,function(t){return r.Rc(t)});return this._c.push(i),i},t.prototype.Tc=function(){this.mc&&Xp()},t.prototype.verifyOperationInProgress=function(){},t.prototype.bc=function(){return(0,Hs.mG)(this,void 0,void 0,function(){var t;return(0,Hs.Jh)(this,function(e){switch(e.label){case 0:return[4,t=this.fc];case 1:e.sent(),e.label=2;case 2:if(t!==this.fc)return[3,0];e.label=3;case 3:return[2]}})})},t.prototype.vc=function(t){for(var e=0,n=this._c;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Pc=function(t){var e=this;return this.bc().then(function(){e._c.sort(function(t,e){return t.targetTimeMs-e.targetTimeMs});for(var n=0,r=e._c;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.bc()})},t.prototype.Vc=function(t){this.gc.push(t)},t.prototype.Rc=function(t){var e=this._c.indexOf(t);this._c.splice(e,1)},t}();function mC(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}!function(){function t(){this._progressObserver={},this._taskCompletionResolver=new My,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}();var yC=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).type="firestore",r._queue=new gC,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return(0,Hs.ZT)(e,t),e.prototype._terminate=function(){return this._firestoreClient||_C(this),this._firestoreClient.terminate()},e}(aC);function vC(t){return t._firestoreClient||_C(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function _C(t){var e,n=t._freezeSettings(),r=function(t,e,n,r){return new Zw(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new Pw(t._credentials,t._queue,r)}function bC(t,e,n){var r=this,i=new My;return t.asyncQueue.enqueue(function(){return(0,Hs.mG)(r,void 0,void 0,function(){var r;return(0,Hs.Jh)(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,Rw(t,n)];case 1:return o.sent(),[4,Nw(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===zp.FAILED_PRECONDITION||t.code===zp.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}})})}).then(function(){return i.promise})}function wC(t){if(t._initialized||t._terminated)throw new Hp(zp.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var CC=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new Hp(zp.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new mf(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),TC=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(vf.fromBase64String(e))}catch(e){throw new Hp(zp.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(vf.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),SC=function(t){this._methodName=t},EC=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new Hp(zp.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Hp(zp.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return of(this._lat,t._lat)||of(this._long,t._long)},t}(),xC=/^__.*__$/,IC=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new em(t,this.data,this.fieldMask,e,this.fieldTransforms):new tm(t,this.data,e,this.fieldTransforms)},t}(),kC=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new em(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();function AC(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Xp()}}var OC=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Sc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dc",{get:function(){return this.settings.Dc},enumerable:!1,configurable:!0}),t.prototype.Cc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.Nc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Cc({path:n,xc:!1});return r.Fc(t),r},t.prototype.kc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Cc({path:n,xc:!1});return r.Sc(),r},t.prototype.Oc=function(t){return this.Cc({path:void 0,xc:!0})},t.prototype.$c=function(t){return QC(t,this.settings.methodName,this.settings.Mc||!1,this.path,this.settings.Lc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find(function(e){return t.isPrefixOf(e)})||void 0!==this.fieldTransforms.find(function(e){return t.isPrefixOf(e.field)})},t.prototype.Sc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.Fc(this.path.get(t))},t.prototype.Fc=function(t){if(0===t.length)throw this.$c("Document fields must not be empty");if(AC(this.Dc)&&xC.test(t))throw this.$c('Document fields cannot begin and end with "__"')},t}(),PC=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||W_(t)}return t.prototype.Bc=function(t,e,n,r){return void 0===r&&(r=!1),new OC({Dc:t,methodName:e,Lc:n,path:mf.emptyPath(),xc:!1,Mc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function RC(t){var e=t._freezeSettings(),n=W_(t._databaseId);return new PC(t._databaseId,!!e.ignoreUndefinedProperties,n)}function NC(t,e,n,r,i,o){void 0===o&&(o={});var s=t.Bc(o.merge||o.mergeFields?2:0,e,n,i);HC("Data must be an object, but it was:",s,r);var a,u,c=GC(r,s);if(o.merge)a=new yf(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,d=o.mergeFields;h<d.length;h++){var p=WC(e,d[h],n);if(!s.contains(p))throw new Hp(zp.INVALID_ARGUMENT,"Field '"+p+"' is specified in your field mask but missing from your input data.");$C(l,p)||l.push(p)}a=new yf(l),u=s.fieldTransforms.filter(function(t){return a.covers(t.field)})}else a=null,u=s.fieldTransforms;return new IC(new Zf(c),a,u)}var DC=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Hs.ZT)(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Dc)throw t.$c(1===t.Dc?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(SC);function LC(t,e,n){return new OC({Dc:3,Lc:e.settings.Lc,methodName:t._methodName,xc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var FC=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Hs.ZT)(e,t),e.prototype._toFieldTransform=function(t){return new Gg(t.path,new Fg)},e.prototype.isEqual=function(t){return t instanceof e},e}(SC),UC=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).qc=n,r}return(0,Hs.ZT)(e,t),e.prototype._toFieldTransform=function(t){var e=LC(this,t,!0),n=this.qc.map(function(t){return ZC(t,e)}),r=new Ug(n);return new Gg(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(SC),MC=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).qc=n,r}return(0,Hs.ZT)(e,t),e.prototype._toFieldTransform=function(t){var e=LC(this,t,!0),n=this.qc.map(function(t){return ZC(t,e)}),r=new qg(n);return new Gg(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(SC),qC=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Uc=n,r}return(0,Hs.ZT)(e,t),e.prototype._toFieldTransform=function(t){var e=new Vg(t.R,Pg(t.R,this.Uc));return new Gg(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(SC);function jC(t,e,n,r){var i=t.Bc(1,e,n);HC("Data must be an object, but it was:",i,r);var o=[],s=Zf.empty();hf(r,function(t,r){var a=YC(e,t,n);r=(0,Ws.m9)(r);var u=i.kc(a);if(r instanceof DC)o.push(a);else{var c=ZC(r,u);null!=c&&(o.push(a),s.set(a,c))}});var a=new yf(o);return new kC(s,a,i.fieldTransforms)}function VC(t,e,n,r,i,o){var s=t.Bc(1,e,n),a=[WC(e,r,n)],u=[i];if(o.length%2!=0)throw new Hp(zp.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(WC(e,o[c])),u.push(o[c+1]);for(var l=[],h=Zf.empty(),d=a.length-1;d>=0;--d)if(!$C(l,a[d])){var p=a[d],f=u[d];f=(0,Ws.m9)(f);var g=s.kc(p);if(f instanceof DC)l.push(p);else{var m=ZC(f,g);null!=m&&(l.push(p),h.set(p,m))}}var y=new yf(l);return new kC(h,y,s.fieldTransforms)}function BC(t,e,n,r){return void 0===r&&(r=!1),ZC(n,t.Bc(r?4:3,e))}function ZC(t,e){if(zC(t=(0,Ws.m9)(t)))return HC("Unsupported field value:",e,t),GC(t,e);if(t instanceof SC)return function(t,e){if(!AC(e.Dc))throw e.$c(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.$c(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xc&&4!==e.Dc)throw e.$c("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=ZC(o[i],e.Oc(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=(0,Ws.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Pg(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=uf.fromDate(t);return{timestampValue:qm(e.R,n)}}if(t instanceof uf)return n=new uf(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:qm(e.R,n)};if(t instanceof EC)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof TC)return{bytesValue:jm(e.R,t._byteString)};if(t instanceof uC){var r=t.firestore._databaseId;if(!r.isEqual(n=e.databaseId))throw e.$c("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:Zm(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.$c("Unsupported field value: "+rC(t))}(t,e)}function GC(t,e){var n={};return df(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):hf(t,function(t,r){var i=ZC(r,e.Nc(t));null!=i&&(n[t]=i)}),{mapValue:{fields:n}}}function zC(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof uf||t instanceof EC||t instanceof TC||t instanceof uC||t instanceof SC)}function HC(t,e,n){if(!zC(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=rC(n);throw e.$c("an object"===r?t+" a custom object":t+" "+r)}}function WC(t,e,n){if((e=(0,Ws.m9)(e))instanceof CC)return e._internalPath;if("string"==typeof e)return YC(t,e);throw QC("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var KC=new RegExp("[~\\*/\\[\\]]");function YC(t,e,n){if(e.search(KC)>=0)throw QC("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(CC.bind.apply(CC,(0,Hs.ev)([void 0],e.split(".")))))._internalPath}catch(ol){throw QC("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function QC(t,e,n,r,i){var o=r&&!r.isEmpty(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new Hp(zp.INVALID_ARGUMENT,(a+=". ")+t+u)}function $C(t,e){return t.some(function(t){return t.isEqual(e)})}var JC=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new uC(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new XC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.toProto())}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(tT("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),XC=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Hs.ZT)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(JC);function tT(t,e){return"string"==typeof e?YC(t,e):e instanceof CC?e._internalPath:e._delegate._internalPath}var eT=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),nT=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this)._firestore=e,a._firestoreImpl=e,a.metadata=o,a}return(0,Hs.ZT)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new rT(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.toProto(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(tT("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(JC),rT=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Hs.ZT)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(nT),iT=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new eT(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach(function(r){t.call(e,new rT(n._firestore,n._userDataWriter,r.key,r,new eT(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))})},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Hp(zp.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map(function(e){return{type:"added",doc:new rT(t._firestore,t._userDataWriter,e.doc.key,e.doc,new eT(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:n++}})}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter(function(t){return e||3!==t.type}).map(function(e){var n=new rT(t._firestore,t._userDataWriter,e.doc.key,e.doc,new eT(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:oT(e.type),doc:n,oldIndex:i,newIndex:o}})}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function oT(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Xp()}}function sT(t,e){return t instanceof nT&&e instanceof nT?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof iT&&e instanceof iT&&t._firestore===e._firestore&&fC(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function aT(t){if(mg(t)&&0===t.explicitOrderBy.length)throw new Hp(zp.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var uT=function(){};function cT(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var lT=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Qc=e,i.Kc=n,i.jc=r,i.type="where",i}return(0,Hs.ZT)(e,t),e.prototype._apply=function(t){var e=RC(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new Hp(zp.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){yT(s,o);for(var u=[],c=0,l=s;c<l.length;c++)u.push(mT(r,t,l[c]));a={arrayValue:{values:u}}}else a=mT(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||yT(s,o),a=BC(n,"where",s,"in"===o||"not-in"===o);var h=$f.create(i,o,a);return function(t,e){if(e.g()){var n=vg(t);if(null!==n&&!n.isEqual(e.field))throw new Hp(zp.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=yg(t);null!==r&&vT(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new Hp(zp.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,h),h}(t._query,0,e,t.firestore._databaseId,this.Qc,this.Kc,this.jc);return new cC(t.firestore,t.converter,function(t,e){var n=t.filters.concat([e]);return new dg(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(uT),hT=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Qc=e,r.Wc=n,r.type="orderBy",r}return(0,Hs.ZT)(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new Hp(zp.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Hp(zp.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new ug(e,n);return function(t,e){if(null===yg(t)){var n=vg(t);null!==n&&vT(0,n,e.field)}}(t,r),r}(t._query,this.Qc,this.Wc);return new cC(t.firestore,t.converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new dg(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(uT),dT=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Gc=n,i.zc=r,i}return(0,Hs.ZT)(e,t),e.prototype._apply=function(t){return new cC(t.firestore,t.converter,Cg(t._query,this.Gc,this.zc))},e}(uT),pT=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Hc=n,i.Jc=r,i}return(0,Hs.ZT)(e,t),e.prototype._apply=function(t){var e=gT(t,this.type,this.Hc,this.Jc);return new cC(t.firestore,t.converter,function(t,e){return new dg(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(uT),fT=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Hc=n,i.Jc=r,i}return(0,Hs.ZT)(e,t),e.prototype._apply=function(t){var e=gT(t,this.type,this.Hc,this.Jc);return new cC(t.firestore,t.converter,function(t,e){return new dg(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(uT);function gT(t,e,n,r){if(n[0]=(0,Ws.m9)(n[0]),n[0]instanceof JC)return function(t,e,n,r,i){if(!r)throw new Hp(zp.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=bg(t);s<a.length;s++){var u=a[s];if(u.field.isKeyField())o.push(Uf(e,r.key));else{var c=r.data.field(u.field);if(Tf(c))throw new Hp(zp.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new Hp(zp.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new sg(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=RC(t.firestore);return function(t,e,n,r,i,o){var s=t.explicitOrderBy;if(i.length>s.length)throw new Hp(zp.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.isKeyField()){if("string"!=typeof c)throw new Hp(zp.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!_g(t)&&-1!==c.indexOf("/"))throw new Hp(zp.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(ff.fromString(c));if(!Af.isDocumentKey(l))throw new Hp(zp.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new Af(l);a.push(Uf(e,h))}else{var d=BC(n,r,c);a.push(d)}}return new sg(a,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function mT(t,e,n){if("string"==typeof(n=(0,Ws.m9)(n))){if(""===n)throw new Hp(zp.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!_g(e)&&-1!==n.indexOf("/"))throw new Hp(zp.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(ff.fromString(n));if(!Af.isDocumentKey(r))throw new Hp(zp.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Uf(t,new Af(r))}if(n instanceof uC)return Uf(t,n._key);throw new Hp(zp.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+rC(n)+".")}function yT(t,e){if(!Array.isArray(t)||0===t.length)throw new Hp(zp.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new Hp(zp.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function vT(t,e,n){if(!n.isEqual(e))throw new Hp(zp.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var _T=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),Of(t)){case 0:return null;case 1:return t.booleanValue;case 2:return wf(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Cf(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw Xp()}},t.prototype.convertObject=function(t,e){var n=this,r={};return hf(t.fields||{},function(t,i){r[t]=n.convertValue(i,e)}),r},t.prototype.convertGeoPoint=function(t){return new EC(wf(t.latitude),wf(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map(function(t){return n.convertValue(t,e)})},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=Sf(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(Ef(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=bf(t);return new uf(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=ff.fromString(t);tf(fy(n));var r=new Gw(n.get(1),n.get(3)),i=new Af(n.popFirst(5));return r.isEqual(e)||Qp("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();function bT(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var wT=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,Hs.ZT)(e,t),e.prototype.convertBytes=function(t){return new TC(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new uC(this.firestore,null,e)},e}(_T),CT=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=RC(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=TT(t,this._firestore),i=bT(r.converter,e,n),o=NC(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,Hg.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,s=TT(t,this._firestore);return o="string"==typeof(e=(0,Ws.m9)(e))||e instanceof CC?VC(this._dataReader,"WriteBatch.update",s._key,e,n,r):jC(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(o.toMutation(s._key,Hg.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=TT(t,this._firestore);return this._mutations=this._mutations.concat(new am(e._key,Hg.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new Hp(zp.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function TT(t,e){if((t=(0,Ws.m9)(t)).firestore!==e)throw new Hp(zp.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var ST=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,Hs.ZT)(e,t),e.prototype.convertBytes=function(t){return new TC(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new uC(this.firestore,null,e)},e}(_T);function ET(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=iC(t,uC);var o=iC(t.firestore,yC),s=RC(o);return IT(o,[("string"==typeof(e=(0,Ws.m9)(e))||e instanceof CC?VC(s,"updateDoc",t._key,e,n,r):jC(s,"updateDoc",t._key,e)).toMutation(t._key,Hg.exists(!0))])}function xT(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t=(0,Ws.m9)(t);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||mC(i[a])||(s=i[a],a++);var u,c,l,h={includeMetadataChanges:s.includeMetadataChanges};if(mC(i[a])){var d=i[a];i[a]=null===(e=d.next)||void 0===e?void 0:e.bind(d),i[a+1]=null===(n=d.error)||void 0===n?void 0:n.bind(d),i[a+2]=null===(r=d.complete)||void 0===r?void 0:r.bind(d)}if(t instanceof uC)c=iC(t.firestore,yC),l=fg(t._key.path),u={next:function(e){i[a]&&i[a](kT(c,t,e))},error:i[a+1],complete:i[a+2]};else{var p=iC(t,cC);c=iC(p.firestore,yC),l=p._query;var f=new ST(c);u={next:function(t){i[a]&&i[a](new iT(c,f,p,t))},error:i[a+1],complete:i[a+2]},aT(t._query)}return function(t,e,n,r){var i=this,o=new kw(r),s=new Mb(e,o,n);return t.asyncQueue.enqueueAndForget(function(){return(0,Hs.mG)(i,void 0,void 0,function(){var e;return(0,Hs.Jh)(this,function(n){switch(n.label){case 0:return e=Nb,[4,jw(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})}),function(){o.Wo(),t.asyncQueue.enqueueAndForget(function(){return(0,Hs.mG)(i,void 0,void 0,function(){var e;return(0,Hs.Jh)(this,function(n){switch(n.label){case 0:return e=Db,[4,jw(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})})}}(vC(c),l,h,u)}function IT(t,e){return function(t,e){var n=this,r=new My;return t.asyncQueue.enqueueAndForget(function(){return(0,Hs.mG)(n,void 0,void 0,function(){var n;return(0,Hs.Jh)(this,function(i){switch(i.label){case 0:return n=Qb,[4,qw(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(vC(t),e)}function kT(t,e,n){var r=n.docs.get(e._key),i=new ST(t);return new nT(t,i,e._key,r,new eT(n.hasPendingWrites,n.fromCache),e.converter)}var AT=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return(0,Hs.ZT)(e,t),e.prototype.get=function(e){var n=this,r=TT(e,this._firestore),i=new ST(this._firestore);return t.prototype.get.call(this,e).then(function(t){return new nT(n._firestore,i,r._key,t._document,new eT(!1,!1),r.converter)})},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=RC(t)}return t.prototype.get=function(t){var e=this,n=TT(t,this._firestore),r=new wT(this._firestore);return this._transaction.lookup([n._key]).then(function(t){if(!t||1!==t.length)return Xp();var i=t[0];if(i.isFoundDocument())return new JC(e._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new JC(e._firestore,r,n._key,null,n.converter);throw Xp()})},t.prototype.set=function(t,e,n){var r=TT(t,this._firestore),i=bT(r.converter,e,n),o=NC(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=TT(t,this._firestore);return o="string"==typeof(e=(0,Ws.m9)(e))||e instanceof CC?VC(this._dataReader,"Transaction.update",s._key,e,n,r):jC(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,o),this},t.prototype.delete=function(t){var e=TT(t,this._firestore);return this._transaction.delete(e._key),this},t}());function OT(){if("undefined"==typeof Uint8Array)throw new Hp(zp.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function PT(){if("undefined"==typeof atob)throw new Hp(zp.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var RT=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return PT(),new t(TC.fromBase64String(e))},t.fromUint8Array=function(e){return OT(),new t(TC.fromUint8Array(e))},t.prototype.toBase64=function(){return PT(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return OT(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),NT=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){wC(t=iC(t,yC));var n=vC(t),r=t._freezeSettings(),i=new Iw;return bC(n,i,new Ew(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){wC(t=iC(t,yC));var e=vC(t),n=t._freezeSettings(),r=new Iw;return bC(e,r,new xw(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new Hp(zp.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new My;return t._queue.enqueueAndForgetEvenWhileRestricted(function(){return(0,Hs.mG)(e,void 0,void 0,function(){var e;return(0,Hs.Jh)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return(0,Hs.mG)(this,void 0,void 0,function(){return(0,Hs.Jh)(this,function(e){switch(e.label){case 0:return Vy.yt()?[4,Vy.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}})})}(Jv(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}})})}),n.promise}(t._delegate)},t}(),DT=function(){function t(t,e,n){var r=this;this._delegate=e,this.Yc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof Gw||(this.Xc=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this._delegate._getSettings()),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={});var i=(t=iC(t,aC))._getSettings();if("firestore.googleapis.com"!==i.host&&i.host!==e&&$p("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},i),{host:e+":"+n,ssl:!1})),r.mockUserToken){var o=(0,Ws.Sg)(r.mockUserToken),s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Hp(zp.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");t._credentials=new Kw(new Hw(o,new A_(s)))}}(this._delegate,t,e,n)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return(0,Hs.mG)(e,void 0,void 0,function(){var e,n;return(0,Hs.Jh)(this,function(r){switch(r.label){case 0:return[4,Fw(t)];case 1:return e=r.sent(),[4,Mw(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=ef(t);return e.$r.delete(0),eb(e)}(n))]}})})})}(vC(iC(this._delegate,yC)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return(0,Hs.mG)(e,void 0,void 0,function(){var e,n;return(0,Hs.Jh)(this,function(r){switch(r.label){case 0:return[4,Fw(t)];case 1:return e=r.sent(),[4,Mw(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return(0,Hs.mG)(this,void 0,void 0,function(){var e;return(0,Hs.Jh)(this,function(n){switch(n.label){case 0:return(e=ef(t)).$r.add(0),[4,nb(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}})})}(n))]}})})})}(vC(iC(this._delegate,yC)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&tC("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Yc.enableMultiTabIndexedDbPersistence(this):this.Yc.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.Yc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.Xc&&(this.Xc._removeServiceInstance("firestore"),this.Xc._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new My;return t.asyncQueue.enqueueAndForget(function(){return(0,Hs.mG)(e,void 0,void 0,function(){var e;return(0,Hs.Jh)(this,function(r){switch(r.label){case 0:return e=nw,[4,qw(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}})})}),n.promise}(vC(iC(this._delegate,yC)))},t.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new kw(e);return t.asyncQueue.enqueueAndForget(function(){return(0,Hs.mG)(n,void 0,void 0,function(){var e;return(0,Hs.Jh)(this,function(n){switch(n.label){case 0:return e=function(t,e){ef(t).Gr.add(e),e.next()},[4,jw(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})}),function(){r.Wo(),t.asyncQueue.enqueueAndForget(function(){return(0,Hs.mG)(n,void 0,void 0,function(){var e;return(0,Hs.Jh)(this,function(n){switch(n.label){case 0:return e=function(t,e){ef(t).Gr.delete(e)},[4,jw(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})})}}(vC(t=iC(t,yC)),mC(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.Xc)throw new Hp(zp.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Xc},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new KT(this,hC(this._delegate,t))}catch(t){throw jT(t,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new qT(this,dC(this._delegate,t))}catch(t){throw jT(t,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new zT(this,function(t,e){if(t=iC(t,aC),Jw("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Hp(zp.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new cC(t,null,function(t){return new dg(ff.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw jT(t,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new My;return t.asyncQueue.enqueueAndForget(function(){return(0,Hs.mG)(n,void 0,void 0,function(){var n;return(0,Hs.Jh)(this,function(i){switch(i.label){case 0:return[4,function(t){return Lw(t).then(function(t){return t.datastore})}(t)];case 1:return n=i.sent(),new Ow(t.asyncQueue,n,e,r).run(),[2]}})})}),r.promise}(vC(t),function(n){return e(new AT(t,n))})}(this._delegate,function(n){return t(new FT(e,n))})},t.prototype.batch=function(){var t=this;return vC(this._delegate),new UT(new CT(this._delegate,function(e){return IT(t._delegate,e)}))},t.prototype.loadBundle=function(t){throw new Hp(zp.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new Hp(zp.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),LT=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,Hs.ZT)(e,t),e.prototype.convertBytes=function(t){return new RT(new TC(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return qT.Zc(e,this.firestore,null)},e}(_T),FT=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new LT(t)}return t.prototype.get=function(t){var e=this,n=YT(t);return this._delegate.get(n).then(function(t){return new ZT(e._firestore,new nT(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n.converter))})},t.prototype.set=function(t,e,n){var r=YT(t);return n?(Xw("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=YT(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,(0,Hs.ev)([s,e,n],i)),this},t.prototype.delete=function(t){var e=YT(t);return this._delegate.delete(e),this},t}(),UT=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=YT(t);return n?(Xw("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=YT(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,(0,Hs.ev)([s,e,n],i)),this},t.prototype.delete=function(t){var e=YT(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),MT=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new rT(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new GT(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.tu=function(e,n){var r=t.eu,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new LT(e),n),i.set(n,o)),o},t}();MT.eu=new WeakMap;var qT=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new LT(t)}return t.nu=function(e,n,r){if(e.length%2!=0)throw new Hp(zp.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new uC(n._delegate,r,new Af(e)))},t.Zc=function(e,n,r){return new t(n,new uC(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new KT(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new KT(this.firestore,hC(this._delegate,t))}catch(t){throw jT(t,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=(0,Ws.m9)(t))instanceof uC&&pC(this._delegate,t)},t.prototype.set=function(t,e){e=Xw("DocumentReference.set",e);try{return function(t,e,n){t=iC(t,uC);var r=iC(t.firestore,yC),i=bT(t.converter,e,n);return IT(r,[NC(RC(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,Hg.none())])}(this._delegate,t,e)}catch(t){throw jT(t,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?ET(this._delegate,t):ET.apply(void 0,(0,Hs.ev)([this._delegate,t,e],n))}catch(t){throw jT(t,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return IT(iC((t=this._delegate).firestore,yC),[new am(t._key,Hg.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=VT(e),i=BT(e,function(e){return new ZT(t.firestore,new nT(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))});return xT(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=iC(t,uC);var e=iC(t.firestore,yC),n=vC(e),r=new ST(e);return function(t,e){var n=this,r=new My;return t.asyncQueue.enqueueAndForget(function(){return(0,Hs.mG)(n,void 0,void 0,function(){var n;return(0,Hs.Jh)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return(0,Hs.mG)(this,void 0,void 0,function(){var r,i;return(0,Hs.Jh)(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=ef(t);return n.persistence.runTransaction("read document","readonly",function(t){return n.Mn.mn(t,e)})}(t,e)];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new Hp(zp.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=Ib(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}})})},[4,Uw(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._key).then(function(n){return new nT(e,r,t._key,n,new eT(null!==n&&n.hasLocalMutations,!0),t.converter)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=iC(t,uC);var e=iC(t.firestore,yC);return Vw(vC(e),t._key,{source:"server"}).then(function(n){return kT(e,t,n)})}(this._delegate):function(t){t=iC(t,uC);var e=iC(t.firestore,yC);return Vw(vC(e),t._key).then(function(n){return kT(e,t,n)})}(this._delegate)).then(function(t){return new ZT(e.firestore,new nT(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))})},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?MT.tu(this.firestore,e):null))},t}();function jT(t,e,n){return t.message=t.message.replace(e,n),t}function VT(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!mC(r))return r}return{}}function BT(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=mC(t[0])?t[0]:mC(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var ZT=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new qT(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return sT(this._delegate,t._delegate)},t}(),GT=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Hs.ZT)(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(ZT),zT=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new LT(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,cT(this._delegate,function(t,e,n){var r=e,i=tT("where",t);return new lT(i,r,n)}(e,n,r)))}catch(e){throw jT(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,cT(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=tT("orderBy",t);return new hT(r,n)}(e,n)))}catch(e){throw jT(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,cT(this._delegate,function(t){return oC("limit",t),new dT("limit",t,"F")}(e)))}catch(e){throw jT(e,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,cT(this._delegate,function(t){return oC("limitToLast",t),new dT("limitToLast",t,"L")}(e)))}catch(e){throw jT(e,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,cT(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new pT("startAt",t,!0)}).apply(void 0,e)))}catch(e){throw jT(e,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,cT(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new pT("startAfter",t,!1)}).apply(void 0,e)))}catch(e){throw jT(e,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,cT(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new fT("endBefore",t,!0)}).apply(void 0,e)))}catch(e){throw jT(e,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,cT(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new fT("endAt",t,!1)}).apply(void 0,e)))}catch(e){throw jT(e,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return fC(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=iC(t,cC);var e=iC(t.firestore,yC),n=vC(e),r=new ST(e);return function(t,e){var n=this,r=new My;return t.asyncQueue.enqueueAndForget(function(){return(0,Hs.mG)(n,void 0,void 0,function(){var n;return(0,Hs.Jh)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return(0,Hs.mG)(this,void 0,void 0,function(){var r,i,o,s,a;return(0,Hs.Jh)(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,p_(t,e,!0)];case 1:return a=u.sent(),r=new Zb(e,a.Bn),i=r._o(a.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=u.sent(),a=Ib(s,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}})})},[4,Uw(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._query).then(function(n){return new iT(e,r,t,n)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=iC(t,cC);var e=iC(t.firestore,yC),n=vC(e),r=new ST(e);return Bw(n,t._query,{source:"server"}).then(function(n){return new iT(e,r,t,n)})}(this._delegate):function(t){t=iC(t,cC);var e=iC(t.firestore,yC),n=vC(e),r=new ST(e);return aT(t._query),Bw(n,t._query).then(function(n){return new iT(e,r,t,n)})}(this._delegate)).then(function(t){return new WT(e.firestore,new iT(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))})},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=VT(e),i=BT(e,function(e){return new WT(t.firestore,new iT(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))});return xT(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?MT.tu(this.firestore,e):null))},t}(),HT=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new GT(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),WT=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new zT(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map(function(e){return new GT(t._firestore,e)})},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map(function(t){return new HT(e._firestore,t)})},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach(function(r){t.call(e,new GT(n._firestore,r))})},t.prototype.isEqual=function(t){return sT(this._delegate,t._delegate)},t}(),KT=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return(0,Hs.ZT)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new qT(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new qT(this.firestore,void 0===t?dC(this._delegate):dC(this._delegate,t))}catch(t){throw jT(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=iC(t.firestore,yC),r=dC(t),i=bT(t.converter,e);return IT(n,[NC(RC(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,Hg.exists(!1))]).then(function(){return r})}(this._delegate,t).then(function(t){return new qT(e.firestore,t)})},e.prototype.isEqual=function(t){return pC(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?MT.tu(this.firestore,t):null))},e}(zT);function YT(t){return iC(t,uC)}var QT,$T=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(CC.bind.apply(CC,(0,Hs.ev)([void 0],t)))}return t.documentId=function(){return new t(mf.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=(0,Ws.m9)(t))instanceof CC&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),JT=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new FC("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new DC("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new UC("arrayUnion",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new MC("arrayRemove",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(t){return new qC("increment",t)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}(),XT={Firestore:DT,GeoPoint:EC,Timestamp:uf,Blob:RT,Transaction:FT,WriteBatch:UT,DocumentReference:qT,DocumentSnapshot:ZT,Query:zT,QueryDocumentSnapshot:GT,QuerySnapshot:WT,CollectionReference:KT,FieldPath:$T,FieldValue:JT,setLogLevel:function(t){Wp.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};function tS(t,e){return function(t,e=qs.z){return new Ft.y(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=r&&r()}})}(t,e)}function eS(t,e){return tS(t,e).pipe((0,Mt.U)(t=>({payload:t,type:"query"})))}function nS(t,e){return eS(t,e).pipe(pr(void 0),qc(),(0,Mt.U)(([t,e])=>{const n=e.payload.docChanges(),r=n.map(t=>({type:t.type,payload:t}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(e.payload.metadata)&&e.payload.docs.forEach((e,i)=>{const o=n.find(t=>t.doc.ref.isEqual(e.ref)),s=null==t?void 0:t.payload.docs.find(t=>t.ref.isEqual(e.ref));o&&JSON.stringify(o.doc.metadata)===JSON.stringify(e.metadata)||!o&&s&&JSON.stringify(s.metadata)===JSON.stringify(e.metadata)||r.push({type:"modified",payload:{oldIndex:i,newIndex:i,type:"modified",doc:e}})}),r}))}function rS(t,e,n){return nS(t,n).pipe(fr((t,n)=>function(t,e,n){return e.forEach(e=>{n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return iS(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return iS(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return iS(t,e.oldIndex,1)}return t}(t,e))}),t}(t,n.map(t=>t.payload),e),[]),Eu(),(0,Mt.U)(t=>t.map(t=>({type:t.type,payload:t}))))}function iS(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function oS(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}(function(t,e){t.INTERNAL.registerComponent(new Ks.wA("firestore",function(t){return function(t,e){return new DT(t,new yC(t,e),new NT)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},XT)))})(QT=zs.Z),QT.registerVersion("@firebase/firestore","2.3.0");class sS{constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){let e=nS(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe((0,Mt.U)(e=>e.filter(e=>t.indexOf(e.type)>-1)))),e.pipe(pr(void 0),qc(),sn(([t,e])=>e.length>0||!t),(0,Mt.U)(([t,e])=>e),this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(fr((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=oS(t);return rS(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return eS(this.query,this.afs.schedulers.outsideAngular).pipe((0,Mt.U)(e=>e.payload.docs.map(e=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return(0,Lt.D)(this.query.get(t)).pipe((0,Zs.QV)(this.afs.schedulers.insideAngular))}add(t){return this.ref.add(t)}doc(t){return new aS(this.ref.doc(t),this.afs)}}class aS{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const n=this.ref.collection(t),{ref:r,query:i}=pS(n,e);return new sS(r,i,this.afs)}snapshotChanges(){return function(t,e){return tS(t,e).pipe(pr(void 0),qc(),(0,Mt.U)(([t,e])=>e.exists?(null==t?void 0:t.exists)?{payload:e,type:"modified"}:{payload:e,type:"added"}:{payload:e,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return this.snapshotChanges().pipe((0,Mt.U)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return(0,Lt.D)(this.ref.get(t)).pipe((0,Zs.QV)(this.afs.schedulers.insideAngular))}}class uS{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?nS(this.query,this.afs.schedulers.outsideAngular).pipe((0,Mt.U)(e=>e.filter(e=>t.indexOf(e.type)>-1)),sn(t=>t.length>0),this.afs.keepUnstableUntilFirst):nS(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(fr((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=oS(t);return rS(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return eS(this.query,this.afs.schedulers.outsideAngular).pipe((0,Mt.U)(e=>e.payload.docs.map(e=>t.idField?Object.assign({[t.idField]:e.id},e.data()):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return(0,Lt.D)(this.query.get(t)).pipe((0,Zs.QV)(this.afs.schedulers.insideAngular))}}const cS=new r.OlP("angularfire2.enableFirestorePersistence"),lS=new r.OlP("angularfire2.firestore.persistenceSettings"),hS=new r.OlP("angularfire2.firestore.settings"),dS=new r.OlP("angularfire2.firestore.use-emulator");function pS(t,e=(t=>t)){return{query:e(t),ref:t}}let fS=(()=>{class t{constructor(t,e,n,r,i,o,s,a,u){this.schedulers=new Gs.HU(o),this.keepUnstableUntilFirst=(0,Gs.ss)(this.schedulers);const c=(0,Gs.on)(t,o,e);!Hu.Z.auth&&u&&(0,Gs.yq)();const l=a;[this.firestore,this.persistenceEnabled$]=(0,Gs.sI)(`${c.name}.firestore`,"AngularFirestore",c,()=>{const t=o.runOutsideAngular(()=>c.firestore());if(r&&t.settings(r),l&&t.useEmulator(...l),n&&!J(i)){const e=()=>{try{return(0,Lt.D)(t.enablePersistence(s||void 0).then(()=>!0,()=>!1))}catch(QT){return"undefined"!=typeof console&&console.warn(QT),(0,en.of)(!1)}};return[t,o.runOutsideAngular(e)]}return[t,(0,en.of)(!1)]},[r,l,n])}collection(t,e){let n;n="string"==typeof t?this.firestore.collection(t):t;const{ref:r,query:i}=pS(n,e),o=this.schedulers.ngZone.run(()=>r);return new sS(o,i,this)}collectionGroup(t,e){const n=e||(t=>t),r=this.firestore.collectionGroup(t);return new uS(n(r),this)}doc(t){let e;e="string"==typeof t?this.firestore.doc(t):t;const n=this.schedulers.ngZone.run(()=>e);return new aS(n,this)}createId(){return this.firestore.collection("_").doc().id}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Gs.Dh),r.LFG(Gs.xv,8),r.LFG(cS,8),r.LFG(hS,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(lS,8),r.LFG(dS,8),r.LFG(qu,8))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(Gs.Dh),r.LFG(Gs.xv,8),r.LFG(cS,8),r.LFG(hS,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(lS,8),r.LFG(dS,8),r.LFG(qu,8))},token:t,providedIn:"any"}),t})(),gS=(()=>{class t{static enablePersistence(e){return{ngModule:t,providers:[{provide:cS,useValue:!0},{provide:lS,useValue:e}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[fS]}),t})();class mS{constructor(t,e,n,r){this.keySelector=t,this.elementSelector=e,this.durationSelector=n,this.subjectSelector=r}call(t,e){return e.subscribe(new yS(t,this.keySelector,this.elementSelector,this.durationSelector,this.subjectSelector))}}class yS extends on.L{constructor(t,e,n,r,i){super(t),this.keySelector=e,this.elementSelector=n,this.durationSelector=r,this.subjectSelector=i,this.groups=null,this.attemptedToUnsubscribe=!1,this.count=0}_next(t){let e;try{e=this.keySelector(t)}catch(n){return void this.error(n)}this._group(t,e)}_group(t,e){let n=this.groups;n||(n=this.groups=new Map);let r,i=n.get(e);if(this.elementSelector)try{r=this.elementSelector(t)}catch(o){this.error(o)}else r=t;if(!i){i=this.subjectSelector?this.subjectSelector():new Vn.xQ,n.set(e,i);const t=new _S(e,i,this);if(this.destination.next(t),this.durationSelector){let t;try{t=this.durationSelector(new _S(e,i))}catch(o){return void this.error(o)}this.add(t.subscribe(new vS(e,i,this)))}}i.closed||i.next(r)}_error(t){const e=this.groups;e&&(e.forEach((e,n)=>{e.error(t)}),e.clear()),this.destination.error(t)}_complete(){const t=this.groups;t&&(t.forEach((t,e)=>{t.complete()}),t.clear()),this.destination.complete()}removeGroup(t){this.groups.delete(t)}unsubscribe(){this.closed||(this.attemptedToUnsubscribe=!0,0===this.count&&super.unsubscribe())}}class vS extends on.L{constructor(t,e,n){super(e),this.key=t,this.group=e,this.parent=n}_next(t){this.complete()}_unsubscribe(){const{parent:t,key:e}=this;this.key=this.parent=null,t&&t.removeGroup(e)}}class _S extends Ft.y{constructor(t,e,n){super(),this.key=t,this.groupSubject=e,this.refCountSubscription=n}_subscribe(t){const e=new Dr.w,{refCountSubscription:n,groupSubject:r}=this;return n&&!n.closed&&e.add(new bS(n)),e.add(r.subscribe(t)),e}}class bS extends Dr.w{constructor(t){super(),this.parent=t,t.count++}unsubscribe(){const t=this.parent;t.closed||this.closed||(super.unsubscribe(),t.count-=1,0===t.count&&t.attemptedToUnsubscribe&&t.unsubscribe())}}const wS=new r.OlP("angularfire2.analytics.analyticsCollectionEnabled"),CS=new r.OlP("angularfire2.analytics.appVersion"),TS=new r.OlP("angularfire2.analytics.appName"),SS=new r.OlP("angularfire2.analytics.debugMode"),ES=new r.OlP("angularfire2.analytics.config");let xS=(()=>{class t{constructor(t,e,r,i,o,s,a,u){if(this.analyticsInitialized=new Promise(()=>{}),$(a)){window.dataLayer=window.dataLayer||[];const t=(...t)=>"config"===t[0]&&"firebase"===t[2].origin&&(this.measurementId=t[1],!0),e=t=>{window.gtag=(...e)=>{t&&t(...e),"event"===e[0]&&e[2].send_to===this.measurementId&&(i&&(e[2].app_name=i),r&&(e[2].app_version=r)),o&&"undefined"!=typeof console&&console.info(...e),function(...t){window.dataLayer.push(arguments)}(...e)}};window.dataLayer.some(t)?(this.analyticsInitialized=Promise.resolve(),e()):this.analyticsInitialized=new Promise(n=>{e((...e)=>{t(...e)&&n()})}),s&&this.updateConfig(s),o&&this.updateConfig({debug_mode:1})}else this.analyticsInitialized=Promise.resolve();const c=(0,en.of)(void 0).pipe((0,Zs.QV)(new Gs.HU(u).outsideAngular),sr(()=>$(a)?u.runOutsideAngular(()=>n.e(497).then(n.bind(n,2497))):nr.E),(0,Mt.U)(()=>(0,Gs.sI)("analytics","AngularFireAnalytics",t,()=>{const n=t.analytics();return!1===e&&n.setAnalyticsCollectionEnabled(!1),n},[t,e,s,o])),Fu({bufferSize:1,refCount:!1}));return(0,Gs.pX)(this,c,u)}updateConfig(t){return(0,Hs.mG)(this,void 0,void 0,function*(){yield this.analyticsInitialized,window.gtag("config",this.measurementId,Object.assign(Object.assign({},t),{update:!0}))})}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Gs.Ot),r.LFG(wS,8),r.LFG(CS,8),r.LFG(TS,8),r.LFG(SS,8),r.LFG(ES,8),r.LFG(r.Lbi),r.LFG(r.R0b))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(Gs.Ot),r.LFG(wS,8),r.LFG(CS,8),r.LFG(TS,8),r.LFG(SS,8),r.LFG(ES,8),r.LFG(r.Lbi),r.LFG(r.R0b))},token:t,providedIn:"any"}),t})();(0,Gs.GT)(xS,[{app:null,logEvent:null,setCurrentScreen:null,setUserId:null,setUserProperties:null,setAnalyticsCollectionEnabled:null}]);let IS=(()=>{class t{constructor(t,e,n,r){if(this.disposables=[],J(e))this.initialized=Promise.resolve();else{let e;this.initialized=r.runOutsideAngular(()=>new Promise(t=>e=t)),this.disposables=[n.authState.subscribe(n=>{t.setUserId(null==n?void 0:n.uid),e()}),n.credential.subscribe(e=>{if(e){const n=e.user.isAnonymous?"anonymous":e.additionalUserInfo.providerId;e.additionalUserInfo.isNewUser&&t.logEvent("sign_up",{method:n}),t.logEvent("login",{method:n})}})]}}ngOnDestroy(){this.disposables.forEach(t=>t.unsubscribe())}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(xS),r.LFG(r.Lbi),r.LFG(zu),r.LFG(r.R0b))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const kS="screen_class";let AS=Math.floor(Math.random()*(Math.pow(2,32)-1))-Math.pow(2,31);const OS={},PS=t=>{const e=[t.screen_class,t.outlet].join("#");if(OS.hasOwnProperty(e))return OS[e];{const t=AS++;return OS[e]=t,t}};let RS=(()=>{class t{constructor(t,e,n,r,i,o,s){if(!e||!$(i))return this;o.runOutsideAngular(()=>{const i=e.events.pipe(sn(t=>t instanceof Xr));var o;this.disposable=i.pipe(sr(t=>{var i;const o=(null===(i=e.parseUrl(e.url.replace(/(?:\().+(?:\))/g,t=>t.replace("://",":///"))).root.children[t.snapshot.outlet])||void 0===i?void 0:i.toString())||"",s=e.routerState.root.children.map(t=>t).find(e=>e.outlet===t.snapshot.outlet);if(!s)return(0,en.of)(null);let a=s;for(;a.firstChild;)a=a.firstChild;const u=a.pathFromRoot.map(t=>{var e;return null===(e=t.routeConfig)||void 0===e?void 0:e.path}).filter(t=>t).join("/")||"/",c={screen_name:u,page_path:`/${o}`,firebase_event_origin:"auto",firebase_screen:u,outlet:t.snapshot.outlet};n&&(c.page_title=n.getTitle());let l=s.component;if(l){if(l===wo){let e=t.snapshot;for(;e.firstChild;)e=e.firstChild;l=e.component}}else l=t.snapshot.component;if("string"==typeof l)return(0,en.of)(Object.assign(Object.assign({},c),{[kS]:l}));if(l){const t=r.resolveComponentFactory(l);return(0,en.of)(Object.assign(Object.assign({},c),{[kS]:t.selector}))}return(0,en.of)(null)}),sn(t=>t),(0,Mt.U)(t=>Object.assign({firebase_screen_class:t.screen_class,firebase_screen_id:PS(t)},t)),(o=t=>t.outlet,t=>t.lift(new mS(o,void 0,void 0,void 0))),(0,nn.zg)(e=>e.pipe(Eu((t,e)=>JSON.stringify(t)===JSON.stringify(e)),pr(void 0),qc(),(0,Mt.U)(([t,e])=>t?Object.assign({firebase_previous_class:t.screen_class,firebase_previous_screen:t.screen_name,firebase_previous_id:t.firebase_screen_id},e):e),sr(e=>(0,Hs.mG)(this,void 0,void 0,function*(){return s&&(yield s.initialized),yield t.logEvent("screen_view",e)}))))).subscribe()})}ngOnDestroy(){this.disposable&&this.disposable.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(xS),r.LFG(fs,8),r.LFG(Dt,8),r.LFG(r._Vd),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(IS,8))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),NS=(()=>{class t{constructor(t,e,n){t.app.then(()=>{})}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(xS),r.LFG(RS,8),r.LFG(IS,8))},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[xS]}),t})();const DS={apiKey:"AIzaSyBkVaSoQ52O0R0lJnu3wy31x1EVJEQ4td4",authDomain:"lockers-59f72.firebaseapp.com",databaseURL:"https://lockers-59f72-default-rtdb.firebaseio.com",projectId:"lockers-59f72",storageBucket:"lockers-59f72.appspot.com",messagingSenderId:"659983805007",appId:"1:659983805007:web:a6a9386102641fecd5d83a",measurementId:"G-6TCNZDN895"};let LS=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t,bootstrap:[Mc]}),t.\u0275inj=r.cJS({providers:[],imports:[[Rt,Uc,Je,Xe,jn,cc,gS,NS,Cu,Gs.hO.initializeApp(DS)]]}),t})();(0,r.G48)(),Ot().bootstrapModule(LS).catch(t=>console.error(t))},4762:(t,e,n)=>{"use strict";n.d(e,{ZT:()=>i,pi:()=>o,mG:()=>s,Jh:()=>a,XA:()=>u,CR:()=>c,ev:()=>l});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}u((r=r.apply(t,e||[])).next())})}function a(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function u(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function l(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}}},t=>{"use strict";t(t.s=8191)}]);